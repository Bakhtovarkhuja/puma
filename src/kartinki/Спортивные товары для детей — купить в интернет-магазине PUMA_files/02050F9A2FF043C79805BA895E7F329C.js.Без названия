window._esConfig={"tenantId":"02050F9","tenantIsActive":true,"guid":"02050F9A2FF043C79805BA895E7F329C","orgId":90413,"siteId":90413,"events":{},"version":"latest","features":{"tracking":true,"formsVersion":3,"mulanRecoms":true,"CHECK_SEGMENT_MEMBERSHIP":true,"SEGMENT_BY_CONTACT_ACTIVITY_IN_WIDGET":true,"TRACKING_EVENTS_TROTTLING_DISABLE":false},"productAvailableFields":[{"name":"brand","query":"brand"},{"name":"tags_price_range","query":"tags_price_range: tagAsString(tag: \"price_range\")"},{"name":"tags_description_price_range","query":"tags_description_price_range: tagAsString(tag: \"description_price_range\")"},{"name":"tags_id","query":"tags_id: tagAsString(tag: \"id\")"},{"name":"tags_product_type","query":"tags_product_type: tagAsString(tag: \"product_type\")"},{"name":"name","query":"name"},{"name":"tags_season","query":"tags_season: tagAsString(tag: \"season\")"},{"name":"tags_color","query":"tags_color: tagAsString(tag: \"color\")"},{"name":"tags_custom_label_4","query":"tags_custom_label_4: tagAsString(tag: \"custom_label_4\")"},{"name":"tags_logged_sale_price","query":"tags_logged_sale_price: tagAsString(tag: \"logged_sale_price\")"},{"name":"tags_item_group_id","query":"tags_item_group_id: tagAsString(tag: \"item_group_id\")"},{"name":"category_grandparent","query":"categoryAncestor"},{"name":"category_layout","query":"categoryLayout"},{"name":"tags_balance","query":"tags_balance: tagAsString(tag: \"balance\")"},{"name":"tags_logged_custom_label_2","query":"tags_logged_custom_label_2: tagAsString(tag: \"logged_custom_label_2\")"},{"name":"tags_collection","query":"tags_collection: tagAsString(tag: \"collection\")"},{"name":"tags_old_price","query":"tags_old_price: tagAsString(tag: \"old_price\")"},{"name":"tags_is_popular","query":"tags_is_popular: tagAsString(tag: \"is_popular\")"},{"name":"tags_first_word","query":"tags_first_word: tagAsString(tag: \"first_word\")"},{"name":"category_parent","query":"categoryParent"},{"name":"tags_article_type","query":"tags_article_type: tagAsString(tag: \"article_type\")"},{"name":"category","query":"category"},{"name":"category_id","query":"categoryId"},{"name":"price","query":"price"},{"name":"item_init","query":"id"},{"name":"tags_trend_category","query":"tags_trend_category: tagAsString(tag: \"trend_category\")"},{"name":"tags_custom_label_1","query":"tags_custom_label_1: tagAsString(tag: \"custom_label_1\")"},{"name":"tags_category_url","query":"tags_category_url: tagAsString(tag: \"category_url\")"},{"name":"imageurl","query":"imageUrl"},{"name":"tags_custom_label_3","query":"tags_custom_label_3: tagAsString(tag: \"custom_label_3\")"},{"name":"tags_size","query":"tags_size: tagAsString(tag: \"size\")"},{"name":"tags_related_client_article_type","query":"tags_related_client_article_type: tagAsString(tag: \"related_client_article_type\")"},{"name":"name_keyword","query":"name_keyword: tagAsString(tag: \"name_keyword\")"},{"name":"tags_oldprice","query":"tags_oldprice: tagAsString(tag: \"oldprice\")"},{"name":"tags_novelty","query":"tags_novelty: tagAsString(tag: \"novelty\")"},{"name":"tags_size_type","query":"tags_size_type: tagAsString(tag: \"size_type\")"},{"name":"tags_adult","query":"tags_adult: tagAsString(tag: \"adult\")"},{"name":"tags_logged_custom_label_1","query":"tags_logged_custom_label_1: tagAsString(tag: \"logged_custom_label_1\")"},{"name":"tags_trend","query":"tags_trend: tagAsString(tag: \"trend\")"},{"name":"tags_logged_custom_label_3","query":"tags_logged_custom_label_3: tagAsString(tag: \"logged_custom_label_3\")"},{"name":"description","query":"descr"},{"name":"tags_material","query":"tags_material: tagAsString(tag: \"material\")"},{"name":"tags_category","query":"tags_category: tagAsString(tag: \"category\")"},{"name":"item_group","query":"item_group: tagAsString(tag: \"item_group\")"},{"name":"tags_all_category_names","query":"tags_all_category_names: tagAsString(tag: \"all_category_names\")"},{"name":"tags_categories","query":"tags_categories: tagAsString(tag: \"categories\")"},{"name":"tags_bestseller_from_best_category","query":"tags_bestseller_from_best_category: tagAsString(tag: \"bestseller_from_best_category\")"},{"name":"url","query":"url"},{"name":"tags_article_group","query":"tags_article_group: tagAsString(tag: \"article_group\")"},{"name":"tags_custom_label_0","query":"tags_custom_label_0: tagAsString(tag: \"custom_label_0\")"},{"name":"tags_new","query":"tags_new: tagAsString(tag: \"new\")"},{"name":"tags_product_division","query":"tags_product_division: tagAsString(tag: \"product_division\")"},{"name":"tags_has_clicks","query":"tags_has_clicks: tagAsString(tag: \"has_clicks\")"},{"name":"tags_has_discount","query":"tags_has_discount: tagAsString(tag: \"has_discount\")"},{"name":"tags_discount","query":"tags_discount: tagAsString(tag: \"discount\")"},{"name":"tags_product_div_code","query":"tags_product_div_code: tagAsString(tag: \"product_div_code\")"},{"name":"isinstock","query":"isInStock"},{"name":"tags_age_group","query":"tags_age_group: tagAsString(tag: \"age_group\")"},{"name":"tags_gender","query":"tags_gender: tagAsString(tag: \"gender\")"},{"name":"product_id","query":"product_id: tagAsString(tag: \"product_id\")"},{"name":"tags_trend_from_category","query":"tags_trend_from_category: tagAsString(tag: \"trend_from_category\")"},{"name":"tags_custom_label_5","query":"tags_custom_label_5: tagAsString(tag: \"custom_label_5\")"},{"name":"tags_categories_ids","query":"tags_categories_ids: tagAsString(tag: \"categories_ids\")"},{"name":"tags_custom_label_2","query":"tags_custom_label_2: tagAsString(tag: \"custom_label_2\")"},{"name":"tags_size_system","query":"tags_size_system: tagAsString(tag: \"size_system\")"},{"name":"tags_historical_num_purchases","query":"tags_historical_num_purchases: tagAsString(tag: \"historical_num_purchases\")"},{"name":"tags_trend_score","query":"tags_trend_score: tagAsString(tag: \"trend_score\")"},{"name":"tags_event_price","query":"tags_event_price: tagAsString(tag: \"event_price\")"},{"name":"product_source","query":"product_source: tagAsString(tag: \"product_source\")"}],"crawler":{"pages":{"product":[],"catalog":[],"landing":[],"search":[],"main":[]},"product":{"url":[],"category_id":[],"brand":[],"description":[],"imgurl":[],"isInStock":[],"name":[],"price":[],"productKey":[],"tags":[],"child_ids":[]},"status_cart":[],"checkout":[],"user":[]},"recommendations":{"1825":{"id":1825,"status":"DEBUG","pageType":"PRODUCT"},"2115":{"id":2115,"status":"DEBUG","pageType":"PRODUCT"},"1094":{"id":1094,"status":"DEBUG","pageType":"PRODUCT"},"909":{"id":909,"status":"DEBUG","pageType":"PRODUCT"},"910":{"id":910,"status":"DEBUG","pageType":"PRODUCT"},"1999":{"id":1999,"status":"DEBUG","pageType":"PRODUCT"},"1076":{"id":1076,"status":"DEBUG","pageType":"PRODUCT"},"1077":{"id":1077,"status":"DEBUG","pageType":"MAIN"},"1078":{"id":1078,"status":"DEBUG","pageType":"NOT_FOUND"},"919":{"id":919,"status":"DEBUG","pageType":"MAIN"},"920":{"id":920,"status":"DEBUG","pageType":"NOT_FOUND"},"2362":{"id":2362,"status":"DEBUG","pageType":"ANY"},"1245":{"id":1245,"status":"DEBUG","pageType":"CATEGORY"},"1246":{"id":1246,"status":"DEBUG","pageType":"STATUS_CART"}},"recommendationVariants":{"r2115v2588":{"recomId":2115,"id":"r2115v2588","blockId":29222},"r1077v1448":{"recomId":1077,"id":"r1077v1448","blockId":24351},"r919v1273":{"recomId":919,"id":"r919v1273","blockId":24351,"header":"Хіти продажу","headerTranslations":{"ru":"Хиты продаж"},"appearance":{"html":"<div class=\"product-carousel es-product-carousel\">\n  <h2 class=\"crosslinking__title es-title\">$!recom.header</h2>\n   <div class=\"es-slick-slider product-carousel__products kop-carousel--es\">\n      #foreach( $!product in $!products )\n      #if($!product.price != '0')\n      <div class=\"product-carousel__item--es\">\n         <a class=\"product-carousel__link\" href=\"$!product.url&utm_source=eSputnik-recommendations&utm_medium=email&utm_campaign=bestsellers_on_the_site\">\n            <div class=\"product-carousel__img-wrapper\">\n               <img class=\"product-carousel__img lazyloaded\" src=\"$!product.imageUrl\" alt=\"$!product.name\" width=\"250\" height=\"250\">   \n               #if($!product.tags_new == '1')\n               <div class=\"product-carousel__label product-carousel__label-2\">\n                  <div class=\"product-carousel__label-text\">новинка</div>\n               </div>\n              #end\n               <!--<div class=\"product-carousel__label product-carousel__label-2\">\n                  <div class=\"product-carousel__label-text\">новинка</div>\n               </div>-->\n               <button class=\"btn product-carousel__button only-desktop es-btn\" data-button=\"КУПИТИ\">КУПИТЬ</button> \n            </div>\n            <div class=\"product-carousel__name js-product-carousel-name ddd-truncated\" style=\"overflow-wrap: break-word;\">$!product.name</div>\n            <div class=\"product-carousel__price\">\n               <div class=\"price-box price-final_price\" data-role=\"priceBox\" data-product-id=\"$!product.id\" data-price-box=\"product-id-$!product.id\">  \n                 <span class=\"special-price\">  \n                   <span class=\"price-container price-final_price tax weee\"> \n                     <span class=\"price-label\">Special Price</span>  \n                     <span id=\"product-price-$!product.id\" data-rate=\"$!numberTool.format('#.00',$!product.price)\" data-price-type=\"finalPrice\" class=\"price-wrapper es-price\">\n                       <span class=\"price\">$!numberTool.format('',$!product.price)&nbsp;₴</span>\n                     </span>  \n                   </span> \n                 </span> \n                 #if($!product.tags_old_price != '' and $!product.tags_old_price)\n                 <span class=\"old-price sly-old-price\">  \n                   <span class=\"price-container price-final_price tax weee\"> \n                     <span class=\"price-label\">Regular Price</span>  \n                     <span id=\"old-price-$!product.id\" data-rate=\"$!numberTool.format('#.00',$!product.tags_oldprice)\" data-price-type=\"oldPrice\" class=\"price-wrapper es-old-price\">\n                       <span class=\"price\">$!numberTool.format('',$!product.tags_oldprice)&nbsp;₴</span>\n                     </span>  \n                   </span> \n                 </span>\n                 #end\n              </div>\n            </div>\n         </a>\n      </div>\n      #end\n      #end\n   </div>\n</div>","css":".es-recom-container{\n   overflow: hidden !important;\n}\n.es-slick-slider {\n      flex-wrap: wrap;\n  position: relative;\n      width: 100%;\n}\n.es-product-carousel {\n    /*margin-left: 5rem;\n    margin-right: 5rem;*/\n  padding-left: 5rem;\n    padding-right: 5rem;\n  margin-top: 5rem;\n}\n.es-title{\nfont-style: normal;\nfont-weight: 700;\nfont-size: 24px;\nline-height: 30px;\ntext-transform: uppercase;\n  text-align: center;\n}\n.es-recom-container  .owl-stage-outer{\n  display: flex;\n  width: 100%;\n  flex-wrap: nowrap;\n  overflow: hidden;\n}\n.es-recom-container .owl-stage{\n  display: flex;\n    flex-wrap: nowrap;\n}\n.es-recom-container .owl-item{\n  display: inline-flex;\n}\n.product-carousel__item--es {\n    display: inline-block;\n    max-width: 25rem;\n}\n.es-recom-container .owl-nav{\n      position: absolute;\n    display: flex;\n  top: calc(50% - 8.7rem/2);\n    align-items: center;\n    width: 100%;\n}\n.es-recom-container button[class*='owl'] {\n    top: calc(50% - 8.7rem/2);\n    background: 0 0;\n    border: none;\n    cursor: pointer;\n    font-size: 0;\n    outline: none;\n    padding: 0;\n    position: absolute;\n    transition: opacity .3s;\n    transform: translateY(-100%);\n    margin-top: 1.8rem;\n    height: 3.6rem;\n    width: 3.6rem;\n    z-index: 1;\n}\n.es-recom-container button[class*='owl']:before {\n    top: 0;\n    transform: translate(0,3px) rotate(45deg);\n}\n\n.es-recom-container button[class*='owl']:before, \n.es-recom-container button[class*='owl']:after {\n    content: '';\n    background: #000;\n    display: block;\n    position: absolute;\n    left: 50%;\n    margin-left: -2px;\n    transition: background .3s;\n    height: 50%;\n    width: 2px;\n}\n.es-recom-container button[class*='owl']:before {\n    transform: translate(0,-0.8rem) rotate(42deg);\n}\n.es-recom-container button[class*='owl']:before, \n.es-recom-container button[class*='owl']:after {\n    background: #888;\n    height: 90%;\n}\n.es-recom-container button[class*='owl']:before, \n.es-recom-container button[class*='owl']:after {\n    background: #888;\n    height: 90%;\n}\n.es-recom-container button[class*='owl']:after {\n    top: 50%;\n    transform: translate(0,-3px) rotate(-45deg);\n}\n.es-recom-container .owl-prev{\n  left: 0;\n}\n.es-recom-container .owl-next{\n      transform: rotate(180deg) !important;\n      right: 0;\n}\n.es-recom-container button.disabled{\n  opacity:0.5;\n} \n.es-recom-container .owl-prev{\n  top: calc(50% - 1.7rem/2) !important;\n}\n@media (max-width: 650px) {\n  .es-title{\n    font-size: 18px;\n    line-height: 23px;\n  }\n  .es-product-carousel {\n    padding-left: 0;\n    padding-right: 0;\n}\n  .es-title{\n    padding-left:15px;\n  }\n}","js":"context.afterConnect((products) => {\n\n\ttry {\n    \n    let esSlider = () =>{\n      \n      jQuery('.es-slick-slider').owlCarousel({\n        loop:false,\n        /*margin:10,*/\n        items:4,\n        animateOut: true,\n        smartSpeed:600,\n        nav:true,\n        dots: false,\n        navText: ['', ''],\n        responsive:{\n            0:{\n                items:2\n            },\n            780:{\n                items:3\n            },\n          1200:{\n                items:4\n            }\n        }\n    })\n      \n      \n      /*jQuery('.es-slick-slider').slick({\n\t\t\t\tdots: false,\n\t\t\t\tinfinite: true,\n\t\t\t\tspeed: 300,\n\t\t\t\tslidesToShow: 4,\n\t\t\t\tslidesToScroll: 1,\n\t\t\t\tprevArrow: '<button class=\"slick-prev slick-arrow\" aria-label=\"Previous\" type=\"button\" style=\"display: block;\">Previous</button>',\n\t\t\t\tnextArrow: '<button class=\"slick-next slick-arrow\" aria-label=\"Next\" type=\"button\" style=\"display: block;\">Next</button>',\n\t\t\t\tresponsive: [{\n\t\t\t\t\t\tbreakpoint: 1024,\n\t\t\t\t\t\tsettings: {\n\t\t\t\t\t\t\tslidesToShow: 4,\n\t\t\t\t\t\t\tslidesToScroll: 1,\n\t\t\t\t\t\t\tinfinite: true,\n\t\t\t\t\t\t\tdots: true\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tbreakpoint: 750,\n\t\t\t\t\t\tsettings: {\n\t\t\t\t\t\t\tslidesToShow: 3,\n\t\t\t\t\t\t\tslidesToScroll: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tbreakpoint: 480,\n\t\t\t\t\t\tsettings: {\n\t\t\t\t\t\t\tslidesToShow: 2,\n\t\t\t\t\t\t\tslidesToScroll: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});*/\n      \n      let splitDigital = (n, delimiter) => {\n        if (delimiter === \"undefined\") {\n          delimiter = \" \";\n        }\n        let d = '$1' + delimiter;\n        return n.replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, d);\n      };\n      \n      document.querySelectorAll(`.es-slick-slider .es-price`).forEach((item) => {\n        item.innerText = splitDigital(item.getAttribute('data-rate'), ' ').replace('.', ',') + ' ₴';\n      });\n\n      document.querySelectorAll(`.es-slick-slider .es-old-price`).forEach((item) => {\n        item.innerText = splitDigital(item.getAttribute('data-rate'), ' ').replace('.', ',') + ' ₴';\n      });\n      \n    };\n    \n    \n\t\tlet fileref = document.createElement('script');\n      fileref.setAttribute(\"type\", \"text/javascript\");\n      //fileref.setAttribute(\"src\", \"https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js\");\n        fileref.setAttribute(\"src\", \"https://s-http-public.s3.eu-central-1.amazonaws.com/owl.carousel.min.js\");\n        \n      if (typeof fileref != \"undefined\")\n          document.getElementsByTagName(\"head\")[0].appendChild(fileref);\n\n      fileref.onload = (() => {\n        console.log('onload', typeof jQuery.fn.owlCarousel)\n\n      \t\tif(typeof typeof jQuery.fn.owlCarousel !== 'undefined') {\n            esSlider();\n          }\n      });\n    \n    if(document.querySelector(\"html\").getAttribute(\"lang\") === \"uk\"){\n      document.querySelectorAll('.es-slick-slider .es-btn').forEach((item, index) => {\n        item.innerText = item.getAttribute('data-button');\n      });\n    }\n    \n\t} catch (e) {}\n\n});","translations":{"ru":{"recom.header":"Хиты продаж"}}},"placement":{"selector":"#trending_inline_group_1254","insertType":"AFTER_END"}},"r910v1264":{"recomId":910,"id":"r910v1264","blockId":24324,"header":" Вам може сподобатися","headerTranslations":{"ru":"Вам также понравится "},"appearance":{"html":"<div class=\"product-carousel es-product-carousel-pp\">\n  <h2 class=\"crosslinking__title es-title\">$!recom.header</h2>\n   <div class=\"es-slick-slider-pp product-carousel__products kop-carousel\" data-count=\"0\">\n      #foreach( $!product in $!products )\n      #if($!product.price != '0')\n      <div class=\"product-carousel__item\">\n         <a class=\"product-carousel__link\" href=\"$!product.url&utm_source=eSputnik-recommendations&utm_medium=email&utm_campaign=similar_products\">\n            <div class=\"product-carousel__img-wrapper\">\n               <img class=\"product-carousel__img lazyloaded\" src=\"$!product.imageUrl\" alt=\"$!product.name\" width=\"250\" height=\"250\">\n              #if($!product.tags_new == '1')\n               <div class=\"product-carousel__label product-carousel__label-2\">\n                  <div class=\"product-carousel__label-text\">новинка</div>\n               </div>\n              #end\n               <!--<div class=\"product-carousel__label product-carousel__label-2\">\n                  <div class=\"product-carousel__label-text\">новинка</div>\n               </div>-->\n               <button class=\"btn product-carousel__button only-desktop es-btn\" data-button=\"КУПИТИ\">КУПИТЬ</button> \n            </div>\n            <div class=\"product-carousel__name js-product-carousel-name ddd-truncated\" style=\"overflow-wrap: break-word;\">$!product.name</div>\n            <div class=\"product-carousel__price\">\n               <div class=\"price-box price-final_price\" data-role=\"priceBox\" data-product-id=\"$!product.id\" data-price-box=\"product-id-$!product.id\">  \n                 <span class=\"special-price\">  \n                   <span class=\"price-container price-final_price tax weee\"> \n                     <span class=\"price-label\">Special Price</span>  \n                     <span id=\"product-price-$!product.id\" data-rate=\"$!numberTool.format('#.00',$!product.price)\" data-price-type=\"finalPrice\" class=\"price-wrapper es-price\">\n                       <span class=\"price\">$!numberTool.format('',$!product.price)&nbsp;₴</span>\n                     </span>  \n                   </span> \n                 </span> \n                 #if($!product.tags_old_price != '' and $!product.tags_old_price)\n                 <span class=\"old-price sly-old-price\">  \n                   <span class=\"price-container price-final_price tax weee\"> \n                     <span class=\"price-label\">Regular Price</span>  \n                     <span id=\"old-price-$!product.id\" data-rate=\"$!numberTool.format('#.00',$!product.tags_oldprice)\" data-price-type=\"oldPrice\" class=\"price-wrapper es-old-price\">\n                       <span class=\"price\">$!numberTool.format('',$!product.tags_oldprice)&nbsp;₴</span>\n                     </span>  \n                   </span> \n                 </span>\n                 #end\n              </div>\n            </div>\n         </a>\n      </div>\n     \t#end\n      #end\n   </div>\n</div>","css":".es-recom-container{\n   overflow: hidden !important;\n  max-width:100%;\n}\n.es-product-carousel-pp{\n  margin-left: 5rem;\n    margin-right: 5rem;\n  margin-top: 5rem;\n}\n.es-product-carousel-pp.product-carousel .kop-carousel{\n  visibility: visible;\n  width: 100%;\n}\n.es-recom-container .slick-list.draggable{\n  width: 100%;\n}\n.es-title{\nfont-style: normal;\nfont-weight: 700;\nfont-size: 24px;\nline-height: 30px;\ntext-transform: uppercase;\n  text-align: center;\n}\n\n@media (max-width: 650px) {\n  .es-title{\n    font-size: 18px;\n    line-height: 23px;\n    padding-left:15px;\n  }\n   .es-product-carousel {\n    margin-left: 0;\n    margin-right: 0;\n\t}\n}\n@media (max-width: 430px) {\n  .es-recom-container{\n  /*max-width:428px!important;*/\n\t}\n  .es-product-carousel-pp {\n  margin-left: 0;\n  margin-right: 0;\n  margin-top: 5rem;\n}\n}","js":"context.afterConnect((products) => {\n\t\t//console.log('Вам також сподобається')\n    let html = document.querySelector(\"#es-recom-910-v-r910v1264\").innerHTML;\n    setTimeout(() => {\n        if (!document.querySelector(\"#es-recom-910-v-r910v1264\")) {\n          document.querySelector(\".product-detailed__item_shipping-info\").insertAdjacentHTML('afterend',`<div id=\"es-recom-910-v-r910v1264\" class=\"es-recom-container\"> ${html.replace(`data-count=\"0\"`, `data-count=\"1\"`)}</div>`);\n            Init(1);\n        }\n    }, 2000);\n\n    function Init(count) {\n        if (typeof jQuery != 'undefined' &&\n            typeof jQuery.fn.slick !== 'undefined' &&\n            document.querySelectorAll('.es-slick-slider-pp').length > 0) {\n          \n          \t/*if (document.querySelectorAll(\"#es-recom-910-v-r910v1264\").length > 1) {\n              return;\n            }*/\n\n            jQuery(`.es-slick-slider-pp[data-count=\"${count}\"]`).not('.slick-initialized').slick({\n                dots: false,\n                infinite: true,\n                speed: 300,\n                slidesToShow: 4,\n                slidesToScroll: 1,\n                prevArrow: '<button class=\"slick-prev slick-arrow\" aria-label=\"Previous\" type=\"button\" style=\"display: block;\">Previous</button>',\n                nextArrow: '<button class=\"slick-next slick-arrow\" aria-label=\"Next\" type=\"button\" style=\"display: block;\">Next</button>',\n                responsive: [{\n                        breakpoint: 1024,\n                        settings: {\n                            slidesToShow: 4,\n                            slidesToScroll: 1,\n                            infinite: true,\n                            dots: true\n                        }\n                    },\n                    {\n                        breakpoint: 750,\n                        settings: {\n                            slidesToShow: 3,\n                            slidesToScroll: 1\n                        }\n                    },\n                    {\n                        breakpoint: 480,\n                        settings: {\n                            slidesToShow: 2,\n                            slidesToScroll: 1\n                        }\n                    },\n                    {\n                        breakpoint: 280,\n                        settings: {\n                            slidesToShow: 2,\n                            slidesToScroll: 1\n                        }\n                    }\n                ]\n            });\n\n            let splitDigital = (n, delimiter) => {\n                if (delimiter === \"undefined\") {\n                    delimiter = \" \";\n                }\n                let d = '$1' + delimiter;\n                return n.replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, d);\n            };\n\n            document.querySelectorAll(`.es-slick-slider-pp .es-price`).forEach((item) => {\n                item.innerText = splitDigital(item.getAttribute('data-rate'), ' ').replace('.', ',') + ' ₴';\n            });\n\n            document.querySelectorAll(`.es-slick-slider-pp .es-old-price`).forEach((item) => {\n                item.innerText = splitDigital(item.getAttribute('data-rate'), ' ').replace('.', ',') + ' ₴';\n            });\n\n        } else {\n            document.querySelector('.es-product-carousel-pp').style.display = \"none\";\n        }\n\n        if (document.querySelector(\"html\").getAttribute(\"lang\") === \"uk\") {\n            document.querySelectorAll('.es-slick-slider-pp .es-btn').forEach((item, index) => {\n                item.innerText = item.getAttribute('data-button');\n            });\n        }\n\n        if (document.querySelectorAll(\"#es-recom-910-v-r910v1264 .product-carousel__item\").length < 3) {\n            document.querySelector(\"#es-recom-910-v-r910v1264\").style.display = \"none\";\n        }\n    }\n\n    setInterval(() => {\n\t\t\tif (document.querySelectorAll(\"#es-recom-910-v-r910v1264\").length > 1) {\n          document.querySelectorAll(\"#es-recom-910-v-r910v1264\").forEach((item, index) =>{\n              if(index !== 0) {\n                  item.remove();\n              }\n          });\n      }\n    }, 500);\n  \n  Init(0);\n\n});","translations":{"ru":{"recom.header":"Вам также понравится "}}},"placement":{"selector":".container.product-container","insertType":"AFTER_END"}},"r909v1263":{"recomId":909,"id":"r909v1263","blockId":24350,"header":"Доповнити образ","headerTranslations":{"ru":"Дополнить образ"},"appearance":{"html":"<div class=\"product-carousel es-product-carousel\">\n  <h2 class=\"crosslinking__title es-title\">$!recom.header</h2>\n   <div class=\"es-slick-slider product-carousel__products kop-carousel\"  data-count=\"0\">\n      #foreach( $!product in $!products )\n      #if($!product.price != '0')\n      <div class=\"product-carousel__item\">\n         <a class=\"product-carousel__link\" href=\"$!product.url&utm_source=eSputnik-recommendations&utm_medium=email&utm_campaign=buy_with_this_product\">\n            <div class=\"product-carousel__img-wrapper\">\n               <img class=\"product-carousel__img lazyloaded\" src=\"$!product.imageUrl\" alt=\"$!product.name\" width=\"250\" height=\"250\">   \n               #if($!product.tags_new == '1')\n               <div class=\"product-carousel__label product-carousel__label-2\">\n                  <div class=\"product-carousel__label-text\">новинка</div>\n               </div>\n              #end\n               <!--<div class=\"product-carousel__label product-carousel__label-2\">\n                  <div class=\"product-carousel__label-text\">новинка</div>\n               </div>-->\n               <button class=\"btn product-carousel__button only-desktop es-btn\" data-button=\"КУПИТИ\">КУПИТЬ</button> \n            </div>\n            <div class=\"product-carousel__name js-product-carousel-name ddd-truncated\" style=\"overflow-wrap: break-word;\">$!product.name</div>\n            <div class=\"product-carousel__price\">\n               <div class=\"price-box price-final_price\" data-role=\"priceBox\" data-product-id=\"$!product.id\" data-price-box=\"product-id-$!product.id\">  \n                 <span class=\"special-price\">  \n                   <span class=\"price-container price-final_price tax weee\"> \n                     <span class=\"price-label\">Special Price</span>  \n                     <span id=\"product-price-$!product.id\" data-rate=\"$!numberTool.format('#.00',$!product.price)\" data-price-type=\"finalPrice\" class=\"price-wrapper es-price\">\n                       <span class=\"price\">$!numberTool.format('',$!product.price)&nbsp;₴</span>\n                     </span>  \n                   </span> \n                 </span> \n                 #if($!product.tags_old_price != '' and $!product.tags_old_price)\n                 <span class=\"old-price sly-old-price\">  \n                   <span class=\"price-container price-final_price tax weee\"> \n                     <span class=\"price-label\">Regular Price</span>  \n                     <span id=\"old-price-$!product.id\" data-rate=\"$!numberTool.format('#.00',$!product.tags_oldprice)\" data-price-type=\"oldPrice\" class=\"price-wrapper es-old-price\">\n                       <span class=\"price\">$!numberTool.format('',$!product.tags_oldprice)&nbsp;₴</span>\n                     </span>  \n                   </span> \n                 </span>\n                 #end\n              </div>\n            </div>\n         </a>\n      </div>\n      #end\n      #end\n   </div>\n</div>","css":".es-recom-container{\n   overflow: hidden !important;\n  max-width: 100%;\n}\n\n.es-product-carousel {\n    margin-left: 5rem;\n    margin-right: 5rem;\n  margin-top: 5rem;\n}\n.es-title{\nfont-style: normal;\nfont-weight: 700;\nfont-size: 24px;\nline-height: 30px;\ntext-transform: uppercase;\n  text-align: center;\n}\n.es-recom-container .slick-list.draggable{\n  width: 100%;\n}\n@media (max-width: 650px) {\n  .es-title{\n    font-size: 18px;\n    line-height: 23px;\n    padding-left:15px;\n  }\n  .es-product-carousel {\n    margin-left: 0;\n    margin-right: 0;\n\t}\n  .es-product-carousel-pp {\n    margin-left: 0;\n    margin-right: 0;\n\t}\n}","js":"context.afterConnect((products) => {\n    //console.log('ДОПОЛНИТЬ ОБРАЗ')\n    let htmlProductPage = document.querySelector(\"#es-recom-909-v-r909v1263\").innerHTML;\n    setTimeout(() => {\n        if (!document.querySelector(\"#es-recom-909-v-r909v1263\")) {\n            //document.querySelector('.es-slick-slider[data-count=\"0\"]').dataset.count = 1;\n            document.querySelector(\".container.product-container\").insertAdjacentHTML('afterend',`<div id=\"es-recom-909-v-r909v1263\" class=\"es-recom-container\"> ${htmlProductPage.replace(`data-count=\"0\"`, `data-count=\"1\"`)}</div>`);\n            Init(1);\n        }\n    }, 2000);\n\n    function Init(count) {\n        if (typeof jQuery != 'undefined' &&\n            typeof jQuery.fn.slick !== 'undefined' &&\n            document.querySelectorAll('.es-slick-slider').length > 0) {\n          \n          \t/*if (document.querySelectorAll(\"#es-recom-910-v-r910v1264\").length > 1) {\n              return;\n            }*/\n\n            jQuery(`.es-slick-slider[data-count=\"${count}\"]`).not('.slick-initialized').slick({\n                dots: false,\n                infinite: true,\n                speed: 300,\n                slidesToShow: 4,\n                slidesToScroll: 1,\n                prevArrow: '<button class=\"slick-prev slick-arrow\" aria-label=\"Previous\" type=\"button\" style=\"display: block;\">Previous</button>',\n                nextArrow: '<button class=\"slick-next slick-arrow\" aria-label=\"Next\" type=\"button\" style=\"display: block;\">Next</button>',\n                responsive: [{\n                        breakpoint: 1024,\n                        settings: {\n                            slidesToShow: 4,\n                            slidesToScroll: 1,\n                            infinite: true,\n                            dots: true\n                        }\n                    },\n                    {\n                        breakpoint: 750,\n                        settings: {\n                            slidesToShow: 3,\n                            slidesToScroll: 1\n                        }\n                    },\n                    {\n                        breakpoint: 480,\n                        settings: {\n                            slidesToShow: 2,\n                            slidesToScroll: 1\n                        }\n                    }\n                ]\n            });\n\n            let splitDigital = (n, delimiter) => {\n                if (delimiter === \"undefined\") {\n                    delimiter = \" \";\n                }\n                let d = '$1' + delimiter;\n                return n.replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, d);\n            };\n\n            document.querySelectorAll(`.es-slick-slider .es-price`).forEach((item) => {\n                item.innerText = splitDigital(item.getAttribute('data-rate'), ' ').replace('.', ',') + ' ₴';\n            });\n\n            document.querySelectorAll(`.es-slick-slider .es-old-price`).forEach((item) => {\n                item.innerText = splitDigital(item.getAttribute('data-rate'), ' ').replace('.', ',') + ' ₴';\n            });\n\n        } else {\n            document.querySelector('.es-product-carousel').style.display = \"none\";\n        }\n        if (document.querySelector(\"html\").getAttribute(\"lang\") === \"uk\") {\n            document.querySelectorAll('.es-slick-slider .es-btn').forEach((item, index) => {\n                item.innerText = item.getAttribute('data-button');\n            });\n        }\n\n        if (document.querySelectorAll(\"#es-recom-909-v-r909v1263 .product-carousel__item\").length < 3) {\n            document.querySelector(\"#es-recom-909-v-r909v1263\").style.display = \"none\";\n        }\n    }\n\n  \tsetInterval(() => {\n\t\t\tif (document.querySelectorAll(\"#es-recom-909-v-r909v1263\").length > 1) {\n          document.querySelectorAll(\"#es-recom-909-v-r909v1263\").forEach((item, index) =>{\n              if(index !== 0) {\n                  item.style.display = \"none\";\n              }\n          });\n      }\n    }, 500);\n  \n  Init(0);\n\n});","translations":{"ru":{"recom.header":"Дополнить образ"}}},"placement":{"selector":".product-detailed__item_shipping-info","insertType":"AFTER_END"}},"r2362v2867":{"recomId":2362,"id":"r2362v2867","blockId":32027},"r1246v1633":{"recomId":1246,"id":"r1246v1633","blockId":24350},"r1078v1449":{"recomId":1078,"id":"r1078v1449","blockId":24379},"r1999v2466":{"recomId":1999,"id":"r1999v2466","blockId":28685},"r1076v1447":{"recomId":1076,"id":"r1076v1447","blockId":24324},"r1245v1632":{"recomId":1245,"id":"r1245v1632","blockId":25393},"r1094v1467":{"recomId":1094,"id":"r1094v1467","blockId":24350},"r1825v2274":{"recomId":1825,"id":"r1825v2274","blockId":27619},"r920v1274":{"recomId":920,"id":"r920v1274","blockId":24379,"header":"Рекомендовані товари","headerTranslations":{"ru":"Рекомендуемые товары"},"appearance":{"html":"<div class=\"product-carousel es-product-carousel\">\n  <h2 class=\"crosslinking__title es-title\">$!recom.header</h2>\n   <div class=\"es-slick-slider product-carousel__products kop-carousel--es\">\n      #foreach( $!product in $!products )\n     \t#if($!product.price != '0')\n      <div class=\"product-carousel__item--es\">\n         <a class=\"product-carousel__link\" href=\"$!product.url&utm_source=eSputnik-recommendations&utm_medium=email&utm_campaign=personalized_for_you_based_on_popular_products\">\n            <div class=\"product-carousel__img-wrapper\">\n               <img class=\"product-carousel__img lazyloaded\" src=\"$!product.imageUrl\" alt=\"$!product.name\" width=\"250\" height=\"250\">   \n               #if($!product.tags_new == '1')\n               <div class=\"product-carousel__label product-carousel__label-2\">\n                  <div class=\"product-carousel__label-text\">новинка</div>\n               </div>\n              #end\n               <!--<div class=\"product-carousel__label product-carousel__label-2\">\n                  <div class=\"product-carousel__label-text\">новинка</div>\n               </div>-->\n               <button class=\"btn product-carousel__button only-desktop es-btn\" data-button=\"КУПИТИ\">КУПИТЬ</button> \n            </div>\n            <div class=\"product-carousel__name js-product-carousel-name ddd-truncated\" style=\"overflow-wrap: break-word;\">$!product.name</div>\n            <div class=\"product-carousel__price\">\n               <div class=\"price-box price-final_price\" data-role=\"priceBox\" data-product-id=\"$!product.id\" data-price-box=\"product-id-$!product.id\">  \n                 <span class=\"special-price\">  \n                   <span class=\"price-container price-final_price tax weee\"> \n                     <span class=\"price-label\">Special Price</span>  \n                     <span id=\"product-price-$!product.id\" data-rate=\"$!numberTool.format('#.00',$!product.price)\" data-price-type=\"finalPrice\" class=\"price-wrapper es-price\">\n                       <span class=\"price\">$!numberTool.format('',$!product.price)&nbsp;₴</span>\n                     </span>  \n                   </span> \n                 </span> \n                 #if($!product.tags_old_price != '' and $!product.tags_old_price)\n                 <span class=\"old-price sly-old-price\">  \n                   <span class=\"price-container price-final_price tax weee\"> \n                     <span class=\"price-label\">Regular Price</span>  \n                     <span id=\"old-price-$!product.id\" data-rate=\"$!numberTool.format('#.00',$!product.tags_oldprice)\" data-price-type=\"oldPrice\" class=\"price-wrapper es-old-price\">\n                       <span class=\"price\">$!numberTool.format('',$!product.tags_oldprice)&nbsp;₴</span>\n                     </span>  \n                   </span> \n                 </span>\n                 #end\n              </div>\n            </div>\n         </a>\n      </div>\n      #end\n      #end\n   </div>\n</div>","css":".es-recom-container{\n   overflow: hidden !important;\n}\n.es-slick-slider {\n      flex-wrap: wrap;\n  position: relative;\n      width: 100%;\n}\n.es-product-carousel {\n    /*margin-left: 5rem;\n    margin-right: 5rem;*/\n  padding-left: 5rem;\n    padding-right: 5rem;\n  margin-top: 5rem;\n}\n.es-title{\nfont-style: normal;\nfont-weight: 700;\nfont-size: 24px;\nline-height: 30px;\ntext-transform: uppercase;\n  text-align: center;\n}\n.es-recom-container  .owl-stage-outer{\n  display: flex;\n  width: 100%;\n  flex-wrap: nowrap;\n  overflow: hidden;\n}\n.es-recom-container .owl-stage{\n  display: flex;\n    flex-wrap: nowrap;\n}\n.es-recom-container .owl-item{\n  display: inline-flex;\n}\n.product-carousel__item--es {\n    display: inline-block;\n    max-width: 25rem;\n}\n.es-recom-container .owl-nav{\n      position: absolute;\n    display: flex;\n  top: calc(50% - 8.7rem/2);\n    align-items: center;\n    width: 100%;\n}\n.es-recom-container button[class*='owl'] {\n    top: calc(50% - 8.7rem/2);\n    background: 0 0;\n    border: none;\n    cursor: pointer;\n    font-size: 0;\n    outline: none;\n    padding: 0;\n    position: absolute;\n    transition: opacity .3s;\n    transform: translateY(-100%);\n    margin-top: 1.8rem;\n    height: 3.6rem;\n    width: 3.6rem;\n    z-index: 1;\n}\n.es-recom-container button[class*='owl']:before {\n    top: 0;\n    transform: translate(0,3px) rotate(45deg);\n}\n\n.es-recom-container button[class*='owl']:before, \n.es-recom-container button[class*='owl']:after {\n    content: '';\n    background: #000;\n    display: block;\n    position: absolute;\n    left: 50%;\n    margin-left: -2px;\n    transition: background .3s;\n    height: 50%;\n    width: 2px;\n}\n.es-recom-container button[class*='owl']:before {\n    transform: translate(0,-0.8rem) rotate(42deg);\n}\n.es-recom-container button[class*='owl']:before, \n.es-recom-container button[class*='owl']:after {\n    background: #888;\n    height: 90%;\n}\n.es-recom-container button[class*='owl']:before, \n.es-recom-container button[class*='owl']:after {\n    background: #888;\n    height: 90%;\n}\n.es-recom-container button[class*='owl']:after {\n    top: 50%;\n    transform: translate(0,-3px) rotate(-45deg);\n}\n.es-recom-container .owl-prev{\n  left: 0;\n}\n.es-recom-container .owl-next{\n      transform: rotate(180deg) !important;\n      right: 0;\n}\n.es-recom-container button.disabled{\n  opacity:0.5;\n} \n.es-recom-container .owl-prev{\n  top: calc(50% - 1.7rem/2) !important;\n}\n@media (max-width: 650px) {\n  .es-title{\n    font-size: 18px;\n    line-height: 23px;\n  }\n  .es-product-carousel {\n    padding-left: 0;\n    padding-right: 0;\n}\n  .es-title{\n    padding-left:15px;\n  }\n}","js":"context.afterConnect((products) => {\n\n    let htmlProductPage = document.querySelector(\"#es-recom-920-v-r920v1274\").innerHTML;\n\n    setTimeout(() => {\n        if (!document.querySelector(\"#es-recom-920-v-r920v1274\")) {\n            if (document.querySelector(\".no-route__main\")) {\n                document.querySelector(\".no-route__main\").insertAdjacentHTML('afterend', `<div id=\"es-recom-920-v-r920v1274\" class=\"es-recom-container\"> ${htmlProductPage.replace(`data-count=\"0\"`, `data-count=\"1\"`)}</div>`);\n                Init();\n            }\n        }\n    }, 2000);\n\n    function Init() {\n        try {\n\n            let esSlider = () => {\n\n                jQuery('.es-slick-slider').not('.slick-initialized').owlCarousel({\n                    loop: false,\n                    /*margin:10,*/\n                    items: 4,\n                    animateOut: true,\n                    smartSpeed: 600,\n                    nav: true,\n                    dots: false,\n                    navText: ['', ''],\n                    responsive: {\n                        0: {\n                            items: 2\n                        },\n                        780: {\n                            items: 3\n                        },\n                        1200: {\n                            items: 4\n                        }\n                    }\n                });\n\n                let splitDigital = (n, delimiter) => {\n                    if (delimiter === \"undefined\") {\n                        delimiter = \" \";\n                    }\n                    let d = '$1' + delimiter;\n                    return n.replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, d);\n                };\n\n                document.querySelectorAll(`.es-slick-slider .es-price`).forEach((item) => {\n                    item.innerText = splitDigital(item.getAttribute('data-rate'), ' ').replace('.', ',') + ' ₴';\n                });\n\n                document.querySelectorAll(`.es-slick-slider .es-old-price`).forEach((item) => {\n                    item.innerText = splitDigital(item.getAttribute('data-rate'), ' ').replace('.', ',') + ' ₴';\n                });\n\n            };\n\n\n            let fileref = document.createElement('script');\n            fileref.setAttribute(\"type\", \"text/javascript\");\n            //fileref.setAttribute(\"src\", \"https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js\");\n            fileref.setAttribute(\"src\", \"https://s-http-public.s3.eu-central-1.amazonaws.com/owl.carousel.min.js\");\n\n            if (typeof fileref != \"undefined\")\n                document.getElementsByTagName(\"head\")[0].appendChild(fileref);\n\n            fileref.onload = (() => {\n\n                if (typeof typeof jQuery.fn.owlCarousel !== 'undefined') {\n                    esSlider();\n                }\n            });\n            if (document.querySelector(\"html\").getAttribute(\"lang\") === \"uk\") {\n                document.querySelectorAll('.es-slick-slider .es-btn').forEach((item, index) => {\n                    item.innerText = item.getAttribute('data-button');\n                });\n            }\n\n        } catch (e) {}\n    }\n\n    Init();\n\n});","translations":{"ru":{"recom.header":"Рекомендуемые товары"}}},"placement":{"selector":".no-route__main","insertType":"AFTER_END"}}},"recommendationConfig":{"defaultLanguage":"uk","languages":["ru","uk"]},"forms":{"7554":{"id":7554,"name":"Інформер","publishStatus":"DEBUG","testingStatus":"OFF"},"2005":{"id":2005,"name":"upd_modal_form_ru","publishStatus":"DEBUG","testingStatus":"OFF"},"1996":{"id":1996,"name":"upd_modal_form_ua","publishStatus":"DEBUG","testingStatus":"OFF"}},"formVariants":{"f7554v7554":{"formId":7554,"id":"f7554v7554","type":"FLOATING_BOX","placements":[],"rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]}]},"exclude":{"relation":"OR","groups":[]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]},"ANNOYANCE":{"type":"SHOW_IN_INTERVAL"}},"fields":[],"checkThisWidgetOnly":false,"asyncRules":{},"asyncRulesEnabled":false,"useCase":"INFORMER"},"f2005v2005":{"formId":2005,"id":"f2005v2005","type":"DETACHED","placements":[],"rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"MIN_INTERVAL","isActive":true,"params":{"amount":"7","unit":"DAY"}}]},"CUSTOM_CODE":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"},"operand":{"name":"VISITOR"}},{"operator":"PAGE_READ_PERCENT","value":"80","operand":{"name":"VISITOR"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"CONTAINS_ONE_OF","value":"/ru/"}]}]},"exclude":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL_SEARCH_PARAM","value":"utm_medium"},"operator":"EQUALS","value":"email"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://ua.puma.com/ru/customer/account/index/"},{"operand":{"name":"URL"},"operator":"CONTAINS_ONE_OF","value":"/podpisatysya-na-novosti"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://ua.puma.com/uk/subscribe-thanks-page"}]}]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[]}},"fields":[{"id":"email","label":"email","options":[]}],"checkThisWidgetOnly":false,"asyncRules":{"HIDE_FOR_SUBSCRIBERS":{"enabled":true}},"asyncRulesEnabled":false,"useCase":"SUBSCRIPTION_FORM"},"f1996v1996":{"formId":1996,"id":"f1996v1996","type":"DETACHED","placements":[],"rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"MIN_INTERVAL","isActive":true,"params":{"amount":"7","unit":"DAY"}}]},"CUSTOM_CODE":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"},"operand":{"name":"VISITOR"}},{"operator":"PAGE_READ_PERCENT","value":"80","operand":{"name":"VISITOR"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"CONTAINS_ONE_OF","value":"/uk/"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://ua.puma.com/"}]}]},"exclude":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"CONTAINS_ONE_OF","value":"/ru/"},{"operand":{"name":"URL_SEARCH_PARAM","value":"utm_medium"},"operator":"EQUALS","value":"email"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://ua.puma.com/uk/customer/account/index/"},{"operand":{"name":"URL"},"operator":"CONTAINS_ONE_OF","value":"/podpisatysya-na-novosti"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://ua.puma.com/uk/subscribe-thanks-page"}]}]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[]}},"fields":[{"id":"email","label":"email","options":[]}],"checkThisWidgetOnly":false,"asyncRules":{"HIDE_FOR_SUBSCRIBERS":{"enabled":true}},"asyncRulesEnabled":false,"useCase":"SUBSCRIPTION_FORM"}},"formConfig":{"utmTag":{"enabled":true,"customTagsEnabled":false,"utmSource":"widget","utmMedium":"$widgetId","utmCampaign":"$widgetName","utmContent":"$contactId","utmTerm":"$widgetType"},"ANNOYANCE_SAFEGUARD":"{\"unit\":\"MINUTE\",\"amount\":3}","SESSION_TTL":"{\"unit\":\"MINUTE\",\"amount\":30}","abTests":[],"CHECK_SEGMENT_MEMBERSHIP":"false","ANNOYANCE_SAFEGUARD_ENABLED":"true","url":"https://esputnik.com/forms/v1"},"apiConfig":{"chunkVelocityUrl":"https://statics.esputnik.com/scripts/velocity.js","chunkShimUrl":"https://statics.esputnik.com/scripts/shim.js","webContactUrl":"https://web-contacts.esputnik.com/api/v1/webcontact","asyncRulesCheckUrl":"https://site-script.esputnik.com/async-rules/v1/{id}/check","scriptClientEventsUrl":"https://site-script.esputnik.com/site-script/v1/event","hostUrl":"https://esputnik.com/","asyncRulesCheckUrlV2":"https://site-script.esputnik.com/async-rules/v2/check","staticResourcesUrl":"https://forms.esputnik.com/","chunkRecomSliderUrl":"https://statics.esputnik.com/scripts/RecomVariantSliderPlugin.js","chunkIntersectionObserverUrl":"https://statics.esputnik.com/scripts/intersection-observer.js"},"recomApiConfig":{"variantDataSourceUrl":"https://ai.esputnik.com/graphql","eventsTrackingUrl":"https://web-events.esputnik.com"}};//config end
window.scriptLog09u8y9 = function scriptLog09u8y9(logLevel, message, data) {
  var productPrefix = 'es';
  var config = window["_" + productPrefix + 'Config'];
  var tryCallback = function (cb) {
    try {
      return cb();
    } catch (e) {
      return undefined;
    }
  }

  function send(d) {
    const url = config && config.apiConfig && config.apiConfig.scriptClientEventsUrl;

    const c = new XMLHttpRequest;
    c.open("POST", url, !0);
    c.setRequestHeader("Content-type", "application/json; charset=utf-8");
    c.send(JSON.stringify(d));
  }

  function composeError(data) {
    if (data instanceof Error) {
      return tryCallback(() => JSON.stringify({error: data.name + ' ' + data.message + ' ' + data.stack})) || 'UNHANDLED';
    } else {
      return tryCallback(() => JSON.stringify({error: data})) || 'UNHANDLED';
    }
  }

  let key = productPrefix + 'ScriptStatus';
  if (logLevel === 'OK') {
    tryCallback(() => localStorage.setItem(key, logLevel));
    return;
  }

  var d = {
    scriptVersion: config.version,
    orgId: +config.orgId,
    siteId: +config.siteId,
    tenantId: config.tenantId,
    guid: config.guid,
    url: window.location.href,
    message: message,
    log_level: logLevel
  };

  if (logLevel === 'ERROR') {

    var prevStatus = tryCallback(() => localStorage.getItem(key));
    if (prevStatus !== undefined && prevStatus !== logLevel) {
      tryCallback(() => localStorage.setItem(key, logLevel));
      d.data = composeError(data);
      send(d);
    }

  } else {
    d.data = tryCallback(() => JSON.stringify(data));
    send(d);
  }


}

try {
   "use strict";!function(){async function e(e,t){return t||(t=await import(e)),t}function t(e,t,n){e:if("object"==typeof t&&null!==t){var i=t[Symbol.toPrimitive];if(void 0!==i){if("object"!=typeof(t=i.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:String(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return[...e].reduce(((e,t)=>{let[n,i]=t;return e[n]=i,e}),{})}function i(e){return n(Object.entries(e).filter((e=>([,e]=e,null!=e&&""!==e))))}function r(e,t){return n(Object.entries(e).filter((e=>([e]=e,!t.includes(e)))))}async function o(e){try{let t=(new TextEncoder).encode(e);return function(e){return Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(await crypto.subtle.digest("SHA-256",t))}catch(e){Ce.error("CANT_HASH",{errors:[e.toString()]})}}function s(e){return"object"!=typeof e||null===e}function a(e){let{orderNumber:t,products:n}=e;e={orderNumber:t,products:(e=Array.isArray(n)?n:[]).map((e=>({productKey:e.productKey,price:e.price,quantity:e.quantity})))};let i=at.getUserIdentifier(),r=Le.getLastPurchasedItemsEventByWebId(i);if(null===r)return bt.log("esEnableLogForPurchasedItemsEventCheck","No previous purchasedItems found for webId ".concat(i,". Storing current purchasedItems"),{prev:{},next:e}),Le.setLastPurchasedItemsEventByWebId(i,e),!0;if(r.orderNumber!==e.orderNumber)return bt.log("esEnableLogForPurchasedItemsEventCheck","Order number is different. Storing new purchasedItems.",{prev:r,next:e}),Le.setLastPurchasedItemsEventByWebId(i,e),!0;if(r.products.length!==e.products.length)return bt.log("esEnableLogForPurchasedItemsEventCheck","Products count is different. Storing new purchasedItems.",{prev:r,next:e}),Le.setLastPurchasedItemsEventByWebId(i,e),!0;for(let t of e.products){let n=r.products.find((e=>e.productKey===t.productKey));if(!n)return bt.log("esEnableLogForPurchasedItemsEventCheck","Product ".concat(t.productKey," is new. Storing new purchasedItems"),{prev:r,next:e}),Le.setLastPurchasedItemsEventByWebId(i,e),!0;if(n.quantity!==t.quantity)return bt.log("esEnableLogForPurchasedItemsEventCheck","Quantity changed for ".concat(t.productKey,". Previous: ").concat(n.quantity,", Now: ").concat(t.quantity,". Storing new purchasedItems"),{prev:r,next:e}),Le.setLastPurchasedItemsEventByWebId(i,e),!0;if(n.price!==t.price)return bt.log("esEnableLogForPurchasedItemsEventCheck","Price changed for ".concat(t.productKey,". Previous: ").concat(n.price,", Now: ").concat(t.price,". Storing new purchasedItems"),{prev:r,next:e}),Le.setLastPurchasedItemsEventByWebId(i,e),!0}return bt.log("esEnableLogForPurchasedItemsEventCheck","Previous purchasedItems and current are the same.",{prev:r,next:e}),!1}function l(e){var t,n;if("cl"!==Le.getPrefix().debugPrefix&&!Le.getContactRemapped()){var i=null===(t=window.__es_sdk)||void 0===t||null===(n=t.pushNotifications)||void 0===n?void 0:n.rebind;if(i&&(t=Le.getWebPushContactId()))try{e.contactId&&e.contactId.toString().trim()!==t.toString().trim()?i("contactId",e.contactId,((e,t)=>c(e,t))):e.externalCustomerId?i("externalCustomerId",e.externalCustomerId,((e,t)=>c(e,t))):e.email?i("email",e.email,((e,t)=>c(e,t))):e.phone&&i("phone",e.phone,((e,t)=>c(e,t)))}catch(e){Ce.error(e,"Error while rebinding contact")}}}function c(e,t){if(Le.setContactRemapped(e),e)if(t)d(t);else{var n,i;(e=null===(n=window.__es_sdk)||void 0===n||null===(i=n.pushNotifications)||void 0===i?void 0:i.getUserPushSubscriptionContactId)&&e((e=>d(e)))}}function d(e){lt.addToQueue({widgetSubscriptionContactId:e},"[WebContactService] rebindContact. After rebinding contact");let t={...n(Object.entries(Le.getCustomerData()).filter((e=>([,e]=e,!!e)))),esContactId:e};Le.setCustomerData(t),e={...n(Object.entries(Le.getUserInfo()).filter((e=>([,e]=e,!!e)))),esContactId:e},Le.setUserInfo(e)}function h(e){return e.reduce(((e,t)=>e+t),0)}function u(e){if(e){var t=Le.getWebContact();t&&t.externalCustomerId&&t.externalCustomerId!==e&&ot.regenerateUserIdentifier()}}function m(e){return e=Number.parseInt(e),Number.isInteger(e)?e:0}function p(e){return Vn.SYSTEM_ATTRIBUTE_PREFIX+e}function g(e){var t;return e.useCase&&e.useCase===Un.REQUEST_FORM?null:(null===(t=Le.getUserInfo())||void 0===t?void 0:t.clContactId)||Ne.get("clContactId")}function E(e,t){return btoa(unescape(encodeURIComponent(JSON.stringify(Bn.createFormParams(e,void 0,t)))))}function v(e,t){e.children&&e.children.forEach((e=>v(e,t))),t(e)}function _(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function f(e,t){e&&Object.keys(e)&&Object.keys(e).forEach(t)}function y(e){var t=this;let n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];clearTimeout(n),n=setTimeout((()=>{e.apply(t,o)}),i)}}function T(e,t,n){return Math.min(Math.max(t,e),n)}function C(e,t){return function(n){return t(e(n))}}function I(e,t){if(!(this instanceof I))return new I(e,t);if(t&&t in zi&&(t=null),t&&!(t in Wi))throw Error("Unknown model: "+t);if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof I)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if("string"==typeof e){if(null===(t=Hi.get(e)))throw Error("Unable to parse color from string: "+e);this.model=t.model;var n=Wi[this.model].channels;this.color=t.value.slice(0,n),this.valpha="number"==typeof t.value[n]?t.value[n]:1}else if(0<e.length)this.model=t||"rgb",n=Wi[this.model].channels,t=Array.prototype.slice.call(e,0,n),this.color=b(t,n),this.valpha="number"==typeof e[n]?e[n]:1;else if("number"==typeof e)this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{if(this.valpha=1,t=Object.keys(e),"alpha"in e&&(t.splice(t.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0),!((t=t.sort().join(""))in Ki))throw Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Ki[t],({labels:n}=Wi[this.model]);let i=[];for(t=0;t<n.length;t++)i.push(e[n[t]]);this.color=b(i)}if(Qi[this.model])for(n=Wi[this.model].channels,t=0;t<n;t++)(e=Qi[this.model][t])&&(this.color[t]=e(this.color[t]));this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function S(e){return function(t){return Number(t.toFixed(e))}}function b(e,t){for(let n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}function A(e){return[e.getConfig("appearanceLanguage"),e.getConfig("browserLanguage"),"en"].filter((e=>!!e))}function O(e,t){return t.reduce(((t,n)=>t||(n?e[n]?t={translations:e[n],language:n}:(t=n.includes("-")?n.split("-")[0].toLowerCase():n.includes("_")?n.split("_")[0].toLowerCase():n,t=e[t]?{translations:e[t],language:t}:null):t=null,t||null)),null)}function N(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]})),{})}function R(e,t,n){var i;return null===(i=e[t])||void 0===i?void 0:i.find((e=>e.element===n))}function M(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map((e=>Object.assign(Object.assign({},e),{styleAttributes:Object.assign({},e.styleAttributes)})))}function L(e){return Object.values(mr).reduce(((t,n)=>Object.assign(t,{[n]:M(e)})),{[mr.DESKTOP]:[],[mr.MOBILE]:[]})}function w(e,t,n,i){let r=e=>{var o,s;(o=e=e instanceof DocumentFragment||(null==e?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE?e.host:e)&&(o=i&&"function"==typeof i?i(e.getAttribute(t)):(null===(s=null==e?void 0:e.getAttribute)||void 0===s?void 0:s.call(e,t))===n);return o?e:e&&e.parentNode&&r(e.parentNode)||null};return r(e)}function P(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return e.reduce(((e,n)=>Array.isArray(n)&&1<=t?e.concat(P(n,t-1)):e.concat(n)),[])}function D(e,t){let n=t.id,i=V(t.options),r=Object.assign(Object.assign({},Tr),t.styleAttributes);var o=t.options.map((t=>{const n=document.createElement("span");n.classList.add("opt");const o=document.createElement("span");return o.innerText=t,n.appendChild(o),t=window.getComputedStyle(e.parentElement),x(o,r),x(n,{display:"inline-flex",justifyContent:t["text-align"]||Cr.justifyContent},i,r),n}));let s=Object.assign({},yr);var a=document.createElement("span");a.classList.add("container"),x(a,{paddingLeft:t.styleAttributes.borderLeftWidth||0,paddingRight:t.styleAttributes.borderRightWidth||0,paddingTop:t.styleAttributes.borderTopWidth||0,paddingBottom:t.styleAttributes.borderBottomWidth||0});let l=document.createElement("span");l.innerText=i,x(l,Object.assign(Object.assign({},r),{visibility:"hidden"}));let c=document.createElement("span");return c.classList.add("opts"),o.forEach((e=>{c.appendChild(e)})),a.append(l,c),e.innerHTML="",e.appendChild(a),x(e,s),o=a.querySelectorAll(".opt")[0].offsetHeight,o="".concat(o,"px"),a.style.height=o,l.style.height=o,e.classList.add("container--staticTextRoller"),a=function(e){var t=Math.max(...e.options.map((e=>e.replace(/\s+/g,"").length)));return t=Math.max(Math.ceil(t/15),1),e=e.options.length,{optionTimePercentage:100/e,duration:e*(1e3*t+500),longestOptionFractions:t}}(t),function(e,t,n){var i=t.options.length-1;let r=n.optionTimePercentage/(1<n.longestOptionFractions?1.5:3);i=P(t.options.map(((e,t)=>"\n    ".concat(t*n.optionTimePercentage,"% {\n      transform: translateY(calc(").concat(100*t,"% + ").concat(1*t,"px));\n    }\n    ").concat(t*n.optionTimePercentage+r,"% {\n      transform: translateY(calc(").concat(100*t,"% + ").concat(1*t,"px));\n    }")))).concat("\n    100% {\n      transform: translateY(calc(".concat(100*t.options.length,"% + ").concat(i,"px));\n    }\n    ")).join("\n"),t=document.createElement("style"),t.innerHTML="@keyframes slide-down {".concat(i,"}"),i=e.querySelector(".opt").cloneNode(!0),e.appendChild(t),e.querySelector(".opts").appendChild(i)}(e,t,a),function(e,t,n){n=n.duration/1e3,1<t.options.length?e.style.animation="slide-down ".concat(n,"s infinite"):(e.style.transform="translateY(0%)",e.querySelectorAll(".opt")[0].style.display="none")}(c,t,a),{element:e,id:n}}function x(e,t,n,i,r){let o={};n&&(n=k(n,t,i)-5,o={minWidth:"".concat(Math.min(n,r),"px")}),Object.entries(Object.assign(Object.assign({},o),t)||{}).forEach((t=>{let[n,i]=t;e.style[n]=i}))}function k(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=document.createElement("span"),r=document.createElement("span");r.innerText=e,i.appendChild(r);for(let[e,t]of Object.entries(n))r.style[e]=t;for(let[e,n]of Object.entries(t))i.style[e]=n;return i.style.visibility="hidden",document.body.appendChild(i),({width:t}=i.getBoundingClientRect()),document.body.removeChild(i),t}function V(e){return e.map((e=>({value:e,width:k(e)}))).sort(((e,t)=>t.width-e.width)).at(0).value}function F(e){return"\n    .".concat(e," {\n      position: absolute;\n      display: flex;\n      width: fit-content;\n      height: fit-content;\n      padding: 20px 0;\n      background: #000000;\n      border: 2px solid #FFFFFF;\n      border-radius: 5px;\n      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.28);\n      animation: jello-animation 10.9s both;\n      animation-iteration-count: 1;\n    }\n\n    .").concat(e,"[cl-overlay-position='top']:after {\n        content: \"\";\n        position: absolute;\n        top: 100%;\n        left: calc(50% - 5px);\n        margin-left: -8px;\n        margin-top: -2px;\n        border-width: ").concat("12px",";\n        border-style: solid;\n        border-color: black transparent transparent transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='top']:before {\n        content: \"\";\n        position: absolute;\n        top: 100%;\n        left: calc(50% - 15px);\n        border-width: ").concat("14px",";\n        border-style: solid;\n        border-color: white transparent transparent transparent;\n    }\n    \n    .").concat(e,"[cl-overlay-position='bottom']:after {\n      content: \"\";\n      position: absolute;\n      top: -22px;\n      left: calc(50% - 4px);\n      margin-left: -5px;\n      margin-bottom: -2px;\n      border-width: ").concat("12px",";\n      border-style: solid;\n      border-color: transparent transparent black transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='bottom']:before {\n      content: \"\";\n      position: absolute;\n      top: -28px;\n      left: calc(50% - 11px);\n      border-width: ").concat("14px",";\n      border-style: solid;\n      border-color: transparent transparent white transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='right']:after {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 7px);\n      left: -18px;\n      margin-left: -5px;\n      border-width: ").concat("12px",";\n      border-style: solid;\n      border-color: transparent black transparent transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='right']:before {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 9px);\n      left: -28px;\n      border-width: ").concat("14px",";\n      border-style: solid;\n      border-color: transparent white transparent transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='left']:after {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 7px);\n      right: -22px;\n      margin-left: -5px;\n      border-width: ").concat("12px",";\n      border-style: solid;\n      border-color: transparent transparent transparent black;\n    }\n\n    .").concat(e,"[cl-overlay-position='left']:before {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 9px);\n      right: -28px;\n      border-width: ").concat("14px",";\n      border-style: solid;\n      border-color: transparent transparent transparent white;\n    }\n\n    .suggestion-text-container {\n      height: fit-content;\n      width: fit-content;\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      gap: 3px;\n      margin: 2px 10px;\n      letter-spacing: normal;\n      font-size: 14px;\n    }\n\n    .did-you-mean-text {\n      height: 16px;\n      white-space: nowrap;\n      width: fit-content;\n      line-height: 16px;\n      letter-spacing: normal;\n      font-size: 14px;\n      color: white;\n    }\n\n    .suggestion-text {\n      height: 16px;\n      white-space: nowrap;\n      width: fit-content;\n      color: white;\n      line-height: 16px;\n      font-weight: bold;\n      letter-spacing: normal;\n      font-size: 14px;\n    }\n\n    .accept-button {\n      position: relative;\n      width: 36px;\n      height: 36px;\n\n      border: 2px solid #FFFFFF;\n      border-radius: 7px;\n      cursor: pointer;\n    }\n\n    .accept-button:after {\n      content: '';\n      position: absolute;\n      top: 42%;\n      left: 50%;\n      width: 9px;\n      height: 14px;\n      border: solid;\n      border-color: white;\n      border-width: 0 3px 3px 0;\n      -webkit-transform: translate(-50%, -50%) rotate(45deg);\n      -ms-transform: translate(-50%, -50%) rotate(45deg);\n      transform: translate(-50%, -50%) rotate(45deg);\n    }\n\n    .deny-button {\n      position: relative;\n      width: 36px;\n      height: 36px;\n      border: 2px solid black;\n      border-radius: 7px;\n      cursor: pointer;\n    }\n\n    .deny-button:before, .deny-button:after {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      content: '';\n      height: 18px;\n      width: 2px;\n      background-color: #595959;\n    }\n\n    .deny-button:before {\n      transform: translate(-50%, -50%) rotate(45deg);\n    }\n\n    .deny-button:after {\n      transform: translate(-50%, -50%) rotate(-45deg);\n    }\n\n    @keyframes jello-animation {\n      0% {\n        transform: scale3d(1, 1, 1);\n      }\n      3% {\n        transform: scale3d(1.25, 0.75, 1);\n      }\n      4% {\n        transform: scale3d(0.75, 1.25, 1);\n      }\n      5% {\n        transform: scale3d(1.15, 0.85, 1);\n      }\n      6.5% {\n        transform: scale3d(0.95, 1.05, 1);\n      }\n      7.5% {\n        transform: scale3d(1.05, 0.95, 1);\n      }\n      10% {\n        transform: scale3d(1, 1, 1);\n      }\n      100% {\n        transform: scale3d(1, 1, 1);\n      }\n    }\n  ")}function U(e){return class extends e{connect(e,t,n){switch(e){case Qn.INSIDE:t.appendChild(n);break;case Qn.BEFORE:case Qn.AFTER:t.insertAdjacentElement(e===Qn.BEFORE?"beforebegin":"afterend",n)}}}}function B(e){return(e=e.parentNode).host?e.host:B(e)}function H(e){return class extends(U(e)){constructor(){super(),this.eventListeners=[],this.lastDragOverEvent=null,this.focusedElements=[],this.observer=null,this._observeChanges()}connectedCallback(){super.connectedCallback(),this._addAllListeners()}disconnectedCallback(){var e,t,n;super.disconnectedCallback(),this._deactivateEventListeners(),null===(e=this.removeFocusSubscription)||void 0===e||e.off(),null===(t=this.setFocusSubscription)||void 0===t||t.off(),null===(n=this.componentFocusedSubscription)||void 0===n||n.off(),this.observer.disconnect()}_addAllListeners(){this.observer.observe(this.getRootElement(),{childList:!0,subtree:!0}),this.model.type===pi.VIEW&&(this.eventListeners.push({eventName:"mousemove",callback:this._mouseMoveEventListener.bind(this),element:this}),this.eventListeners.push({eventName:"mouseout",callback:this._mouseOutEventListener.bind(this),element:this})),this.removeFocusSubscription=this.services.eventEmitter.on(Lr.REMOVE_FOCUS,(()=>{this._removeFocus()})),this.setFocusSubscription=this.services.eventEmitter.on(Lr.SET_FOCUS,(e=>{this._removeFocus(),this.model.id===e&&this._setFocus("host")})),this.componentFocusedSubscription=this.services.eventEmitter.on(Lr.COMPONENT_FOCUSED,(e=>{let{id:t,targetElementName:n}=e;this._removeFocus(),this.model.id===t&&this._setFocus(n)})),this.manifest.preventDraggable||this.getHostElement().setAttribute("draggable","true"),this._setElementListeners(this.getHostElement()),this._setGlobalListeners(),this._setEventListeners(),this._activateEventListeners(),this._setFocusableElementsAttribute()}_observeChanges(){let e={addded:!1,removed:!1},t=y((()=>{e.removed&&this._removeListenersForDisconnectedNodes(),e.addded&&(this._setEventListeners(),this._activateEventListeners(),this._setFocusableElementsAttribute(),this._updateFocusedElementClasses()),e={addded:!1,removed:!1}}),500);this.observer=new MutationObserver((function(n){for(let i of n){for(let t of i.addedNodes)t instanceof HTMLElement&&"STYLE"!==t.nodeName&&!e.addded&&(e=Object.assign(Object.assign({},e),{addded:!0}));for(let t of i.removedNodes)t instanceof HTMLElement&&"STYLE"!==t.nodeName&&!e.removed&&(e=Object.assign(Object.assign({},e),{removed:!0}));t()}}))}_setEventListeners(){this.getRootElement().querySelectorAll("[cl-inline-edit], [cl-inline-edit] *").forEach((e=>{this._isEventListenerPresent(e)||(e.getAttribute("draggable")||e.setAttribute("draggable","true"),this._setElementListeners(e,!0))})),this.getRootElement().querySelectorAll(":not([cl-inline-edit]):not([cl-type]):not([cl-inline-edit] *)").forEach((e=>{if(!this._isEventListenerPresent(e)){if(e.getAttribute("draggable")||e.setAttribute("draggable","true"),e instanceof HTMLElement){let t=e.tagName.toLowerCase();"input"!==t&&"textarea"!==t||"readonly"===!e.getAttribute("readonly")||e.setAttribute("readonly","readonly"),this.manifest.componentType===wr.VIDEO&&e.classList.contains("video-overlay")&&(e.style.visibility="visible")}this._setElementListeners(e)}}))}_removeListenersForDisconnectedNodes(){this.eventListeners=this.eventListeners.filter((e=>(e.element.isConnected||e.element.removeEventListener(e.eventName,e.callback),e.element.isConnected)))}_setGlobalListeners(){this.eventListeners.push({eventName:"drop",callback:e=>this._documentDropListener(e),element:document})}_isEventListenerPresent(e){return!!this.eventListeners.find((t=>t.element===e))}_setElementListeners(e,t){[{eventName:"click",callback:e=>this._elementClickListener(e,t),element:e},{eventName:"dblclick",callback:this._elementDoubleClickListener.bind(this),element:e},{eventName:"dragstart",callback:this._elementDragStartListener.bind(this),element:e},{eventName:"dragend",callback:this._elementDragEndListener.bind(this),element:e},{eventName:"dragover",callback:this._elementDragOverListener.bind(this),element:e},{eventName:"blur",callback:this._blurEventListener.bind(this),element:e,useCapture:!0}].forEach((e=>this.eventListeners.push(e)))}_elementClickListener(e,t){e.preventDefault(),e.stopImmediatePropagation();let n=e.composedPath()[0],i=this.getHostElement();t&&this.services.eventEmitter.emit(Lr.SHOW_INLINE_EDIT,{id:this.model.id,hostElement:i,targetElement:n}),this.model.focusParentOnClick?(t=B(i),this.services.eventEmitter.emit(Lr.COMPONENT_FOCUSED,{id:t.getAttribute(p("id")),hostElement:t,targetElement:t,targetElementName:"host"})):this.services.eventEmitter.emit(Lr.COMPONENT_FOCUSED,{id:this.model.id,hostElement:i,targetElement:n,targetElementName:this._getElementNameByNode(n)}),this.services.eventEmitter.emit(Lr.COMPONENT_CLICKED,e)}_elementDoubleClickListener(e){e.preventDefault(),e.stopImmediatePropagation(),this.services.eventEmitter.emit(Lr.COMPONENT_DOUBLE_CLICKED,{id:this.model.id,hostElement:this.getHostElement(),targetElement:e.composedPath()[0]})}_elementDragStartListener(e){e.stopPropagation();let t=e.composedPath().find((e=>{var t;return null===(t=e.hasAttribute)||void 0===t?void 0:t.call(e,p("type"))})),n=t.getAttribute(p("type"));this.services.eventEmitter.emit(Lr.COMPONENT_DRAGSTART,{id:this.model.id,path:this.model.path,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e,checkIfAllowed:i=>{if(i){if(i=t.getBoundingClientRect(),n!==pi.FLOATING_IMAGE&&e.dataTransfer.setDragImage(t,e.pageX-i.left,e.pageY-i.top),n===pi.SLIDER){var r=t.shadowRoot.querySelector(".slides-container");r=new WebKitCSSMatrix(getComputedStyle(r).transform).m41,e.dataTransfer.setDragImage(t,e.pageX-i.left-r,e.pageY-i.top)}}else e.preventDefault(),this.services.eventEmitter.emit(Lr.COMPONENT_DRAGEND)}})}_elementDragEndListener(e){e.stopPropagation(),this.services.eventEmitter.emit(Lr.COMPONENT_DRAGEND,{id:this.model.id,path:this.model.path,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e})}_elementDragOverListener(e){e.preventDefault(),e.stopPropagation();let t=this.lastDragOverEvent;this.lastDragOverEvent=e,e.pageX&&e.pageY&&(t&&t.clientY===e.clientY&&t.clientX===e.clientX||this.services.eventEmitter.emit(Lr.COMPONENT_DRAGOVER,{id:this.model.id,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e}))}_documentDropListener(e){this.services.eventEmitter.emit(Lr.DOCUMENT_DROP,{id:this.model.id,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e})}_mouseMoveEventListener(e){let t=this._findClosestHostElement(e.composedPath());this.preHoveredElement&&this.preHoveredElement!==t&&this.preHoveredElement.classList.remove(Vn.SYSTEM_CLASS_PREFIX+"hovered"),(this.preHoveredElement=t)&&(t.classList.add(Vn.SYSTEM_CLASS_PREFIX+"hovered"),e={id:t.getAttribute(p("id")),hostElement:t,targetElement:e.composedPath()[0],event:e},this.services.eventEmitter.emit(Lr.COMPONENT_MOUSE_MOVE,e))}_mouseOutEventListener(e){e.stopPropagation(),(e=this._findClosestHostElement(e.composedPath()))&&e.classList.remove(Vn.SYSTEM_CLASS_PREFIX+"hovered")}_blurEventListener(e){e.stopImmediatePropagation()}_removeFocus(){this.focusedElements.length&&this.focusedElements.forEach((e=>{var t;return null===(t=e.classList)||void 0===t?void 0:t.remove(Vn.SYSTEM_CLASS_PREFIX+"focused")})),this.focusedElements=[]}_setFocus(e){var t=this.getHostElement();this.focusedElements=[t],t.classList.add(Vn.SYSTEM_CLASS_PREFIX+"focused"),"host"!==e&&((t=this.getElements().filter((t=>t.getAttribute(p("element"))===e))).forEach((e=>e.classList.add(Vn.SYSTEM_CLASS_PREFIX+"focused"))),this.focusedElements=this.focusedElements.concat(t))}_findClosestHostElement(e){return(e=e.filter((e=>e instanceof HTMLElement)).filter((e=>!!e.getAttribute(p("component"))))).length?e[0]:null}_activateEventListeners(){this.eventListeners.forEach((e=>{e.activated||(e.element.addEventListener(e.eventName,e.callback,e.useCapture),e.activated=!0)}))}_deactivateEventListeners(){this.eventListeners.forEach((e=>{e.element.removeEventListener(e.eventName,e.callback)})),this.eventListeners=[]}_getElementNameByNode(e){var t;return e&&(e=e.closest("[".concat(p("element"),"]")))&&("host"===(e=e.getAttribute(p("element")))||null!==(t=this.manifest.focusableElements)&&void 0!==t&&t.includes(e))?e:"host"}_setFocusableElementsAttribute(){this.getElements().forEach((e=>{var t;null!==(t=this.manifest.focusableElements)&&void 0!==t&&t.includes(e.getAttribute(p("element")))&&e.setAttribute(p("focusable-element"),"")}))}_updateFocusedElementClasses(){if(!(2>this.focusedElements.length)){var e=this.focusedElements.find((e=>e.hasAttribute(p("focusable-element"))));e&&this._setFocus(e.getAttribute(p("element")))}}}}function G(e){if(!e)return!1;let t=0;return qn.iterateDepthFirst(e,(e=>{(["INPUT","MULTIPLE_INPUT","PRIZE_BASED_GAMING"].includes(e.type)||function(e){var t,n;try{return!(null===(n=null===(t=e.props)||void 0===t?void 0:t.handlers)||void 0===n||!n.find((e=>{var t;return null===(t=null==e?void 0:e.actions)||void 0===t?void 0:t.find((e=>[tr.REQUEST,tr.SUBSCRIBE_CONTACT].includes(e.type)))})))}catch(e){return!1}}(e))&&t++})),0<t}function j(e){for(;e.firstElementChild;)e=e.firstElementChild;return e}function W(e){if(e===oi.CONTENT_LOCKER)return Math.MAX_SAFE_INTEGER;let t={[oi.FLOATING_BAR]:2,[oi.FLOATING_BOX]:2,[oi.DETACHED]:1,[oi.CONTENT_LOCKER]:0,[oi.LAUNCHER]:3,[oi.BUILT_IN]:0};return e in t?(e=t[e],e=localStorage.getItem("esOverlapDebug")?10*e:e,e=Math.round(Number.MAX_SAFE_INTEGER/1e7-e)):e=Math.MAX_SAFE_INTEGER,e}function z(){return Promise.all((0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))}function K(e){return window.matchMedia("(max-width: ".concat(e.shared.mobileBreakpointWidth,"px)")).matches}function Q(e,t,n){return e.filter((e=>{let i=(e=t[e.formId]).filter((e=>!0===n[e]));return e.length===i.length}))}function q(e,t,n){return n===Os.AND?e===t:n===Os.OR?0<t:void 0}function X(e){return e&&"Europe/Kyiv"===e?"Europe/Kiev":e}function Y(e,t,n,i){return i.includes(n)}function Z(e,t,n,i){return String(i).startsWith(n)}function J(e,t,n,i){return String(i).endsWith(n)}function $(e,t,n,i){return String(i)===String(n)}function ee(e,t,n,i){return-1<String(i).search(new RegExp(n))}function te(e,t,n,i){return n.split(",").map((e=>e.trim())).some((e=>String(i).includes(e)))}function ne(e,t,n,i){return null!=i&&""!==i}function ie(e,t){return e-((2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)||0)>=On.convert(t.unit,An.MILLISECOND,t.amount)}function re(e,t,n,i){return ie(e.timeSpentOnPageMs,n,e.cacheTimeShiftMs)}function oe(e,t,n,i){return ie(e.sessionDurationMs,n,e.cacheTimeShiftMs)}function se(e,t,n,i){return ie(e.unActiveMs,n,e.cacheTimeShiftMs)}function ae(e,t,n,i){return document.querySelector(n)}function le(e,t,n,i){return n=!1,(e=e.formVariants&&e.formVariants[t.id])&&e.submit&&(n=!0),ls.log("VISITOR USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM ".concat(t.id," = ").concat(n)),n}function ce(e,t,n,i){return!0===e.mouseout}function de(e,t,n,i){return!0===e.firstTimeSeen}function he(e,t,n,i){({id:t}=t);let{formVariantVisibleMap:r,formVariantHoverMap:o}=e,{unit:s,amount:a}=n;return!(!r.has(t)||o.has(t))&&(e=On.convert(s,An.MILLISECOND,a),n=r.get(t),(new Date).getTime()-n.getTime()>=e)}function ue(e,t,n,i,r){return e=e.readPercent>n,ls.log("pageReadPercent  ".concat(r," ").concat(JSON.stringify(n)," = ").concat(e)),e}function me(e,t,n,i,r){return e=e.sessionPagesCount>n,ls.log("pagesViewed  ".concat(r," ").concat(JSON.stringify(n)," = ").concat(e)),e}function pe(e,t,n,i,r){return e=+i<+n,ls.log("".concat(r," ").concat(n," = ").concat(e)),e}function ge(e,t,n,i,r){return e=+i>+n,ls.log("".concat(r," ").concat(n," = ").concat(e)),e}function Ee(e,t,n,i,r){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:[];ls.log("================ apply rules for formVariant ".concat(e.id," ================"));let s=new Cs(e.rules.CUSTOM_CODE,e),a=new Is(e,n),l=new Ns(e.rules.HIDE,e,o),c=new Ms(e.rules.SCHEDULE,e);o=new Ss(e.rules.FREQUENCY,e,o);let d=new $s(e.rules.TARGETING,e,i),h=new ea(e),u=a.isEnabled(),m=a.isFulfilled(t,e),p=c.isEnabled(),g=c.isFulfilled(t),E=o.isEnabled(),v=o.isFulfilled(t);var _=o.isBasedOnTime(),f={fulfilled:v,basedOnTime:_};_=d.isEnabled();let y=d.isFulfilled(t),T=l.isEnabled();ls.log("frequencyStats ".concat(JSON.stringify(f))),f=l.isFulfilled(t,f);let C=h.isEnabled(),I=h.isFulfilled(r);var S=[];return T&&S.push(!f),p&&S.push(g),E&&S.push(v),_&&S.push(y),C&&S.push(I),{formVariant:e,allRulesFulfilled:S=!s.isEnabled()&&0<S.length&&S.length===S.filter((e=>!0===e)).length,stats:t,sessionStat:n,locationData:i,rules:{[Ts.ANNOYANCE]:{enabled:u,fulfilled:m,rule:a},[Ts.HIDE]:{enabled:T,fulfilled:f,rule:l},[Ts.SCHEDULE]:{enabled:p,fulfilled:g,rule:c},[Ts.FREQUENCY]:{enabled:E,fulfilled:v,rule:o},[Ts.TARGETING]:{enabled:_,fulfilled:y,rule:d},[Ts.CUSTOM_CODE]:{enabled:s.isEnabled(),fulfilled:s.isFulfilled(),rule:s},[Ts.PLACEMENT]:{enabled:C,fulfilled:I,rule:h}}}}function ve(e,t){return":ENV"===e?K(t.document)?"mobile":"desktop":e}function _e(e,t,n){for(let i=0;i<t.length;i++){if(e=e[ve(t[i],n)],Array.isArray(e))return e.map((e=>_e(e,t.slice(i+1),n)))}return e}function fe(e){var t=(e=(e=decodeURIComponent(e)).endsWith("/")?e.slice(0,-1):e).length%4;return 0!==t?e+(t="=".repeat(4-t)):e}function ye(){var e=new URL(window.location.href);e={etmTerm:e.searchParams.get("etm_term"),utmContent:e.searchParams.get("utm_content"),utmSource:e.searchParams.get("utm_source")};let{etmTerm:t,utmContent:n,utmSource:i}=e;if(t?(e=atob(fe(t)),e=new URLSearchParams(e).get("cid"),e=isNaN(e)?null:e):e=null,e)return e;if(n){var[r,o]=n.split("-");e=nt.hasBrandName(r)&&!isNaN(o)?o:null}else e=null;return e||(n&&i&&nt.hasBrandName(i)?isNaN(n)?null:n:void 0)}class Te{constructor(e){this.commandsQueueProcessor=e}run(){this.commandsQueueProcessor.process()}}class Ce{static error(e){Ce._log("ERROR","RUNTIME_ERROR "+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:""),e)}static warn(e,t){Ce._log("WARN",e,t)}static info(e,t){Ce.log(e,t)}static log(e,t){Ce._log("INFO",e,t)}static _log(e,t,n){if("localhost"===window.location.hostname)console.log(e,t,n);else if("ERROR"===e&&console.log(e,t,n),"function"==typeof window.scriptLog09u8y9)try{window.scriptLog09u8y9(e,t,n)}catch(e){console.error(e)}}}class Ie{constructor(){this.currentProductPrefix=Ie.PREFIX.startsWith("PRODUCT_PREFIX_PLACE")?"es":Ie.PREFIX}getProductName(){return"esputnik"}getPrefix(){return this.currentProductPrefix}getStoragePrefix(){return"es"===this.currentProductPrefix?"":"".concat(this.currentProductPrefix,".")}get(){var e="_".concat(this.currentProductPrefix,"Config");if(e=window[e],"es"===this.currentProductPrefix){let t=e.crawler,n=e.hasOwnProperty("crawler")&&0<Object.keys(e.crawler).length;t&&n||(e.crawler=Ie.DEFAULT_CRAWLER)}return e}}t(Ie,"PREFIX","es"),t(Ie,"DEFAULT_CRAWLER",{pages:{main:[],catalog:[],product:[]},catalog:{categoryKey:[]},product:{productKey:[]},status_cart:[],checkout:[],params:{CATEGORY:{recoms:{productsRecommendationsArgs:{categoryField:"tags_categories_ids"}}}}});var Se=new Ie;class be{_process(e){try{return e()}catch(e){return null}}}class Ae extends be{get(e){return this._process((()=>JSON.parse(localStorage.getItem(e))))}set(e,t){return this._process((()=>localStorage.setItem(e,JSON.stringify(t))))}remove(e){return this._process((()=>localStorage.removeItem(e)))}}class Oe extends Ae{constructor(e){super(),this.stateKey=e.getPrefix()+"State"}getClass(){return Oe}get(e){return this._process((()=>JSON.parse(localStorage.getItem(e))))}set(e,t){this._process((()=>localStorage.setItem(e,JSON.stringify(t))))}setState(e){this._process((()=>this.set(this.stateKey,e)))}getState(){return this._process((()=>this.get(this.stateKey)))}}var Ne=new Oe(Se);class Re{constructor(e){this.configService=e}get(){let e=this.configService.getPrefix();return Re.defaultStatesByProduct[e]||Re.defaultStatesByProduct.es}}t(Re,"prefix",{debugPrefix:Se.currentProductPrefix,storagePrefix:Se.getStoragePrefix()}),t(Re,"defaultStatesByProduct",{cl:{prefix:Re.prefix},es:{prefix:Re.prefix,userInfo:{email:null,esContactId:null},tracking:{product:{productId:null},statusCart:{identifier:null,GUID:null},category:{categoryKey:null}},pageType:{previous:null,current:null,changedDate:null},experiment:{log:{},variants:[]},activatorConfig:{RECOMS:null,TRACKING:null},metrics:{lastDate:null,data:{}}}});var Me=new Re(Se);var Le=new class{constructor(e,n,i){t(this,"state",null),this.configService=e,this.storageService=n,this.initialStateProvider=i,this.state=this._getInitialState()}getConfig(){return this.configService.get()}getState(){return this.state}setActivatorConfig(e){this.setState((t=>({...t,activatorConfig:e})))}getActivatorConfig(){return this.getState().activatorConfig}getUserInfo(){let{userInfo:e,webContact:t}=this.getState();return!e&&t?{...t,esContactId:t.utmContactId,clContactId:t.widgetSubscriptionContactId}:e}getExperimentVariants(){return(this.getState().experiment||{}).variants||[]}getFormAbTestsConfig(){return(this.getConfig().formConfig||{}).abTests||[]}getFormAbTestsFormVariants(){return(this.getState().formVariantsAbTest||{}).formVariants||[]}setFormAbTestFormVariants(e){this.setState((t=>({...t,formVariantsAbTest:{...t.formVariantsAbTest,formVariants:e}})))}addAbTestFormVariant(e){this.setState((t=>({...t,formVariantsAbTest:{...t.formVariantsAbTest,formVariants:[...t.formVariantsAbTest.formVariants,e]}})))}setState(e){this.state="function"==typeof e?e(this.getState()):{...this.getState(),...e},this.storageService.setState(this.getState())}_getInitialState(){return this.storageService.getState()||this.initialStateProvider.get()}addExperimentVariant(e){this.setState((t=>({...t,experiment:{...t.experiment,variants:[...t.experiment.variants,e]}})))}setExperimentVariants(e){this.setState((t=>({...t,experiment:{...t.experiment,variants:e}})))}setStatusCartIdentifier(e){let{identifier:t,GUID:n}=e;this.setState((e=>({...e,tracking:{...e.tracking,statusCart:{...e.tracking.statusCart,identifier:t,GUID:n}}})))}setProductPageId(e){this.setState((t=>({...t,tracking:{...t.tracking,product:{...t.tracking.product,productId:e}}})))}setPurchasedItems(e){this.setState((t=>({...t,tracking:{...t.tracking,purchasedItems:{products:e}}})))}setLastPurchasedItemsEventByWebId(e,t){this.setState((n=>({...n,tracking:{...n.tracking,purchasedItemsEvents:{...n.tracking.purchasedItemsEvents,[e]:t}}})))}setStatusCartProducts(e){this.setState((t=>({...t,tracking:{...t.tracking,statusCart:{...t.tracking.statusCart,products:e}}})))}setCategoryKey(e){this.setState((t=>({...t,tracking:{...t.tracking,category:{...t.tracking.category,categoryKey:e}}})))}setUserInfo(e){this.getState().userInfo&&this.setState((t=>({...t,userInfo:e})))}setPageType(e){let{previous:t,current:n}=e;this.setState((e=>({...e,pageType:{previous:t,current:n,changedDate:Date.now()}})))}getLastPurchasedItemsEventByWebId(e){let{tracking:t}=this.getState();return t&&t.purchasedItemsEvents&&t.purchasedItemsEvents[e]?t.purchasedItemsEvents[e]:null}getCustomerData(){let{customerData:e,webContact:t}=this.getState();return!e&&t?{...t,esContactId:t.utmContactId,clContactId:t.widgetSubscriptionContactId}:null!=e?e:{}}setCustomerData(e){this.getState().customerData&&this.setState((t=>({...t,customerData:e})))}getWebContact(){return this.getState().webContact||{}}setWebContact(e){this.setState((t=>({...t,webContact:{...t.webContact,...e}})))}eraseWebContact(){this.setState((e=>({...e,webContact:void 0})))}getMetrics(){return this.getState().metrics||{data:{}}}setMetrics(e){this.setState((t=>({...t,metrics:{...t.metrics,...e}})))}getLocationData(){return this.getState().locationData||{data:{}}}setLocationData(e){this.setState((t=>({...t,locationData:{...t.locationData,...e}})))}setPrefix(e,t){this.setState((n=>({...n,prefix:{debugPrefix:e,storagePrefix:t}})))}getPrefix(){return this.getState().prefix||Me.prefix}setInstanceDebugMode(e){this.setState((t=>({...t,instanceDebugMode:e})))}getInstanceDebugMode(){return this.getState().instanceDebugMode||!1}setContactRemapped(e){this.setState((t=>({...t,contactRemappedV2:e})))}getContactRemapped(){return this.getState().contactRemappedV2||!1}setCustomerId(e){this.setState((t=>({...t,customerId:e})))}getCustomerId(){return this.getState().customerId||""}getWebPushContactId(){return this.storageService.get("esWebPushContactId")||""}}(Se,Ne,Me);let we=(e,t)=>{try{const n=new RegExp("".concat(t,"/(\\d+)")),i=e.match(n);return i?i[1]:null}catch(e){return Ce.error(e,"Failed to determine browser version"),null}},Pe=e=>{try{return e.includes("Chrome")?99>=we(e,"Chrome"):e.includes("Safari")?12>=we(e,"Version"):!e.includes("Firefox")||72>=we(e,"Firefox")}catch(e){return Ce.error(e,"Unable to check if this browser is up to date"),!0}},De=!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype),xe=(e,t,n,i)=>{const{addEventListenerBase:r,addEventListener:o}=EventTarget.prototype;(r||o).call(e,t,n,i)};var ke=new class{constructor(){this.botEnvDetected=/(googlebot\/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)/i.test(navigator.userAgent)}isBot(){return this.botEnvDetected}isBotWhitelisted(){return this.isGoogleBot()}isGoogleBot(){return/googlebot/i.test(navigator.userAgent)}};var Ve=new class{isFreePlanWithBrandedWidgets(){return 0<Object.values(Se.get().forms).filter((e=>e.branded)).length}};let Fe={ANY:"ANY",MAIN:"MAIN",CATEGORY:"CATEGORY",PRODUCT:"PRODUCT",STATUS_CART:"STATUS_CART",CHECKOUT:"CHECKOUT",NOT_FOUND:"NOT_FOUND",UNKNOWN:"UNKNOWN"};class Ue{constructor(e){t(this,"subscriptions",[]),t(this,"state",null),this.state=e,this.emit()}subscribe(e){this.subscriptions.push(e);let t=this.subscriptions.length-1;return e(this.state),{unsubscribe:()=>this.subscriptions.splice(t,1)}}subscribeSingle(e){this.subscriptions.push(e);let t=this.subscriptions.length-1;return{unsubscribe:()=>this.subscriptions.splice(t,1)}}updateState(e){this.state={...this.state,...e},this.emit()}setState(e){this.state=e,this.emit()}getState(){return this.state}emit(){this.subscriptions.forEach((e=>e(this.state)))}}var Be=new class extends Ue{constructor(){super({url:""}),window.addEventListener("hashchange",(e=>this.onHashChanged(e)))}onHashChanged(e){this.getState().pathname!==e.newURL&&this.updateState({url:e.newURL})}};class He{constructor(e){this.config=e}process(e){try{let t=new URL(e);return t.origin+t.pathname}catch(e){}return"string"==typeof e&&(e=this.escapeQuotes(e),e=this.escapeBackslash(e),e=this.clearRedundantSpaces(e),e=this.clearHtmlTags(e),this.config.categoryKey&&(e=this.escapeCategoryName(e))),e}escapeCategoryName(e){e=e||"";try{var t=e.replace(/\//g,"&#47;").replace(/,/g,"&#44;")}catch(e){}return t||e}escapeQuotes(e){e=e||"";try{var t=e.replace(/'/g,"&#39;").replace(/"/g,"&#34;")}catch(e){}return t||e}escapeBackslash(e){e=e||"";try{var t=e.replace(/\\/g,"&#92;")}catch(e){}return t||e}clearRedundantSpaces(e){e=e||"";try{var t=e.replace(/\r/g," ").replace(/\n/g," ").replace(/\s+/g," ").replace(/\s+/g," ").replace(/^\s+/g,"").replace(/\s+$/g,"")}catch(e){}return t||e}clearHtmlTags(e){e=e||"";try{var t=e.replace(/<[^>]*>/g,"")}catch(e){}return t||e}}class Ge{constructor(e){this.postprocessingConfig=e}process(e){if(!this.postprocessingConfig)return e;var t=e;try{if(this.postprocessingConfig&&this.postprocessingConfig.regex){var n=this.getRegularExpression(this.postprocessingConfig.regex);if(t=this.getRegExpResults(e,n),Array.isArray(t)&&t.length){if(Array.isArray(this.postprocessingConfig.group)){var i=[];this.postprocessingConfig.group.forEach((function(e){t[e-1]&&i.push(t[e-1])})),t=i.join("")}Number.isInteger(this.postprocessingConfig.group)&&(t=t[this.postprocessingConfig.group]),""===this.postprocessingConfig.group&&(t=t.join("")),t=t||""}}if(this.postprocessingConfig&&this.postprocessingConfig.replace){n=this.getRegularExpression(this.postprocessingConfig.replace);var r=this.postprocessingConfig.sub;t=null!==e?e.replace(n,r):""}}catch(e){}return t}getRegularExpression(e){var t=e.match(/^\/(.*?)\/([gim]*)$/);return t?new RegExp(t[1],t[2]):new RegExp(e)}getRegExpResults(e,t){return(e=t.exec(e))?(1<e.length&&e.shift(),1===e.length?e[0]:e):null}}class je{constructor(e){this.postprocessingConfig=e}process(e){return this.postprocessingConfig&&this.postprocessingConfig.type===je.type.PRICE?this._processPrice(e):e}_processPrice(e){return e=e||"",Array.isArray(e)&&(e=e[0]),e=e.replace(/[^\.,\d]/g,""),(e=this._clearRedundantSpaces(e)).replace(/\./g,",").replace(" ",",").replace(/,(\d{1,2}),*$/,".$1").replace(/,/,"")}_clearRedundantSpaces(e){e=e||"";try{var t=e.replace(/\r/g," ").replace(/\n/g," ").replace(/\s+/g," ").replace(/\s+/g," ").replace(/^\s+/g,"").replace(/\s+$/g,"")}catch(e){}return t||e}}t(je,"type",{PRICE:"PRICE"});class We{constructor(e,t){this.config=e,this.containerElement=t,this.postProcessorInstances=[new Ge(this.getConfig().postprocessing),new je(this.getConfig().es_postprocessing),new He(this.getConfig())]}getConfig(){return this.config}processElementsValues(e){return e.map((e=>this._accumulatePostProcessorsValue(e)))}_accumulatePostProcessorsValue(e){return this.postProcessorInstances.reduce(((e,t)=>t.process(e)),e)}getElementsBySelector(e){if(Array.isArray(e)){let t=[];return e.forEach((n=>{try{t=t instanceof NodeList?(t[0].contentDocument||t[0].contentWindow.document).querySelectorAll(n):this.containerElement?this.containerElement.querySelectorAll(n):document.querySelectorAll(n)}catch(t){throw new SyntaxError("Failed to access encapsulated element path (".concat(n,") for selector ").concat(e))}})),Array.from(t)}return this.containerElement?Array.from(this.containerElement.querySelectorAll(e)):Array.from(document.querySelectorAll(e))}}class ze extends We{constructor(e,t){super(e,t)}get(){if(!this.getConfig().selector)return[];let e=this.getElementsBySelector(this.getConfig().selector).map((e=>{const t=this.getConfig().value.toLowerCase();return t===ze.EXPLICITE_ATTR_NAME&&e[this.getConfig().value]||e.getAttribute(t)}));return this.processElementsValues(e)}}t(ze,"EXPLICITE_ATTR_NAME","value");class Ke extends We{constructor(e,t){super(e,t)}get(){if(!this.getConfig().selector)return[];let e=this.getElementsBySelector(this.getConfig().selector).map((e=>e.textContent));return this.processElementsValues(e)}}class Qe extends We{constructor(e,t){super(e,t)}get(){if(!this.getConfig().selector)return[];let e=this.getElementsBySelector(this.getConfig().selector);return this.processElementsValues(e)}}class qe extends We{constructor(e){super(e)}get(){if(!this.getConfig().selector)return[];let e=new Ge(this.getConfig().postprocessing);var t=window.location.href,n=e.getRegularExpression(this.getConfig().selector);return t=e.getRegExpResults(t,n),(t=Array.isArray(t)&&t.length?t.length>=(this.getConfig().value||1)?e.process(this.getConfig(),t[t.value-1]):t[0]:e.process(t))?[t]:[]}}class Xe extends We{constructor(e){super(e)}isObject(e){return!(!e||"object"!=typeof e||Array.isArray(e))}findNestedObject(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(this.isObject(e)){e=Object.entries(e);for(let n=0;n<e.length;n+=1){let[i,r]=e[n];if(i===t)return r}}return null}isString(e){return"[object String]"===Object.prototype.toString.call(e)}get(){if(!this.getConfig().selector)return[];let e;if(window.hasOwnProperty(this.getConfig().selector)){let t=window[this.getConfig().selector],n=this.getConfig().value;if(this.isObject(t)){if(Array.isArray(n)&&n.length){let i={};n.forEach(((e,n)=>{i=0===n?this.findNestedObject(t,e):this.findNestedObject(i,e)})),e=i&&!this.isObject(i)?i:void 0}this.isString(n)&&"value"===n.toLowerCase()&&(e=Object.values(t)[0])}this.isString(t)&&this.isString(n)&&"value"===n.toLowerCase()&&(e=t)}return e?[e]:[]}}class Ye{static create(e,t){switch(e.method){case"attribute":return new ze(e,t);case"text":return new Ke(e,t);case"element":return new Qe(e,t);case"url":return new qe(e);case"window":return new Xe(e);default:return{get:()=>[]}}}}let Ze={RECOMS:{ROOT_ELEMENT_ID_PREFIX:"es-recom-",ROOT_ELEMENT_CLASSNAME:"es-recom-container"},FORMS:{ROOT_ELEMENT_ID_PREFIX:"es-form-",ROOT_ELEMENT_CLASSNAME:"es-form-container"}};class Je{constructor(){t(this,"obs",null),t(this,"_attemptsCount",0),t(this,"_maxAttemptsCount",5),t(this,"_attemptsInterval",200)}observe(e){this.obs=new MutationObserver((t=>{try{this._mutationRecordsHasProductVariants(t)||e()}catch(e){Ce.error(e)}}));try{this.obs.observe(document.body,{subtree:!0,childList:!0,attributes:!0})}catch(e){let t=this,n=setInterval((()=>{if(this._attemptsCount++,t._attemptsCount>=t._maxAttemptsCount)throw clearInterval(n),e;try{this.obs.observe(document.body,{subtree:!0,childList:!0,attributes:!0}),clearInterval(n)}catch(e){}}),this._attemptsInterval)}}observing(){return null!==this.obs}disconnect(){this.obs&&(this.obs.disconnect(),this.obs=null)}_mutationRecordsHasProductVariants(e){return 0<e.filter((e=>{let t=Array.from(e.addedNodes);return e=Array.from(e.removedNodes),t.length||e.length?this._hasProductVariants(t)||this._hasProductVariants(e):null})).length}_hasProductVariants(e){return 0<e.filter((e=>e instanceof Element&&e.getAttribute("id")&&[Ze.RECOMS].some((t=>e.getAttribute("id").startsWith(t.ROOT_ELEMENT_ID_PREFIX))))).length}}var $e=new class extends Ue{constructor(e,n){super({currentPageType:null,prevPageType:null}),t(this,"_prevPageType",null),t(this,"_currentPageType",null),this.urlChangeService=e,this.crawlerConfig=n.getState().crawler,this.store=n,this.changeObserver=new Je}activate(){this.urlChangeService.subscribe((e=>this._onUrlChanged(e)))}_onUrlChanged(e){this.changeObserver.disconnect();let t=()=>{this._prevPageType=this.getState().currentPageType;var e=this.store.getConfig().crawler;if(e){e=this._getPageTypeConfigs(e);var t=(e=Object.values(e).reduce(((e,t)=>{const n=t.getterConfigs.find((e=>Ye.create(e).get()[0]));return n&&e.push({ptConfig:t,getterValue:n}),e}),[])).find((e=>e.ptConfig.type===Fe.STATUS_CART)),n=e.find((e=>e.ptConfig.type===Fe.CHECKOUT));this._currentPageType=(e=(t=[t,n].find((e=>!!e)))?t.ptConfig:e[0]&&e[0].ptConfig)&&e.type||null,null===this._prevPageType&&null===this._currentPageType||this._prevPageType===this._currentPageType||this.updateState({currentPageType:this._currentPageType,prevPageType:this._prevPageType})}};t(),this.changeObserver.observe((()=>{t()}))}onNextPageDetected(e){this.subscribe(e)}_getPageTypeConfigs(e){return{[Fe.ANY]:{type:Fe.ANY,getterConfigs:this._getDefaultPageGetterConfigs(e.pages.any)},[Fe.MAIN]:{type:Fe.MAIN,getterConfigs:this._getDefaultPageGetterConfigs(e.pages.main)},[Fe.PRODUCT]:{type:Fe.PRODUCT,getterConfigs:this._getDefaultPageGetterConfigs(e.pages.product)},[Fe.STATUS_CART]:{type:Fe.STATUS_CART,getterConfigs:this._getCustomGetterConfigs(e.status_cart)},[Fe.CATEGORY]:{type:Fe.CATEGORY,getterConfigs:this._getDefaultPageGetterConfigs(e.pages.catalog)},[Fe.CHECKOUT]:{type:Fe.CHECKOUT,getterConfigs:this._getCustomGetterConfigs(e.checkout)},[Fe.NOT_FOUND]:{type:Fe.NOT_FOUND,getterConfigs:this._getDefaultPageGetterConfigs(e.pages[404])}}}_getCustomGetterConfigs(e){return e&&e.length?e.map((e=>({selector:e.selector,method:e.method,value:e.value}))):[]}_getDefaultPageGetterConfigs(e){return e&&e.length?e:[]}}(Be,Le);let et=(e,t)=>Promise.all([e,t]).then((e=>{let[t,n]=e;const{status:i,statusText:r,headers:o}=n;return e={status:i,body:t,statusText:r,headers:o},n.ok?Promise.resolve(e):Promise.reject(e)}));class tt{static execute(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;var i=3<arguments.length?arguments[3]:void 0;return i={method:t,headers:i?{...i}:null,credentials:"same-origin",keepalive:!0,body:null},n&&(i.body="string"==typeof n?n:JSON.stringify(n)),fetch(e,i).then((e=>204===e.status?{...e,body:null}:"application/json"===(e.headers.get("Content-Type")||"").split(";")[0]?et(e.json(),e):et(e.text(),e))).catch((e=>Promise.reject(e)))}}class nt{static isEmail(e){return nt.emailPattern.test(e)}static isPhoneNumber(e){return!!e&&(!!(e=(e||"").match(nt.phonePattern))&&10<=e.length)}static hasBrandName(e){return["esputnik","yespo","reteno"].some((t=>e.toLowerCase().includes(t)))}}t(nt,"emailPattern",/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@([A-Za-z0-9-]+(\.[A-Za-z0-9]+)+)+$/),t(nt,"phonePattern",new RegExp(/\d/,"g")),t(nt,"hashPattern",/^[0-9a-f]+$/);class it{static generate(){let e,t="";for(let n=0;32>n;n++)8!==n&&12!==n&&16!==n&&20!==n||(t+="-"),e=Math.floor(16*Math.random()).toString(16).toUpperCase(),t+=e;return t}}class rt{activate(){this._get(rt.userCookieName)||this._set(rt.userCookieName,Le.getCustomerId()||this._generateUserCookieValue())}disable(){this.disabled=!0;var e=this._get(rt.userCookieName);e&&!Le.getCustomerId()?Le.setCustomerId(e):Le.getCustomerId()||(e=this._generateUserCookieValue(),Le.setCustomerId(e)),this.removeUserIdentifier()}getUserIdentifier(){if(this.disabled)return Le.getCustomerId();if(!this._get(rt.userCookieName)){let e=this._generateUserCookieValue();return this._set(rt.userCookieName,e),e}return this._get(rt.userCookieName)}regenerateUserIdentifier(){let e=this._generateUserCookieValue();this._set(rt.userCookieName,e)}retrieveUserIdentifier(){return this._get(rt.userCookieName)}removeUserIdentifier(){this._set(rt.userCookieName,null,{expires:new Date(0)})}_get(e){try{let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}catch(e){}}_set(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};n={path:"/",expires:new Date((new Date).getFullYear()+5,0),...n},n.expires instanceof Date&&(n.expires=n.expires.toUTCString());let i=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in n){i+="; "+e;let t=n[e];!0!==t&&(i+="="+t)}try{var r;let n=null!==(r=location.host)&&void 0!==r?r:"localhost";if(1===n.split(".").length)document.cookie=i+"; path=/";else{let r=n.split(".");r.shift();let o="."+r.join(".");document.cookie=i+"; path=/; domain="+o,null!=this._get(e)&&this._get(e)===t||(o="."+n,document.cookie=i+"; path=/; domain="+o)}t&&Le.setCustomerId(t)}catch(e){}}_generateUserCookieValue(){return it.generate()}}t(rt,"userCookieName","sc");var ot=new rt;class st extends(Ne.getClass()){activate(){var e=ot.retrieveUserIdentifier();this.get(st.userIdentifierName)&&!e||(e=e||Le.getCustomerId()||this._generateUserIdentifier(),this.set(st.userIdentifierName,e),Le.setCustomerId(e),ot.removeUserIdentifier())}disable(){this.disabled=!0;let e=this.get(st.userIdentifierName);e&&!Le.getCustomerId()?Le.setCustomerId(e):Le.getCustomerId()||Le.setCustomerId(this._generateUserIdentifier()),this._remove(st.userIdentifierName),ot.removeUserIdentifier()}getUserIdentifier(){if(this.disabled)return Le.getCustomerId();var e=this.get(st.userIdentifierName);return e||(e=this._generateUserIdentifier(),this.set(st.userIdentifierName,e),Le.setCustomerId(e),e)}_remove(e){this._process((()=>localStorage.removeItem(e)))}_generateUserIdentifier(){return it.generate()}}t(st,"userIdentifierName","sc");var at=ot;var lt=new class{constructor(){t(this,"_delays",{short:1e3,checkShort:800,normal:1e4,long:6e5}),t(this,"_minErrorsCount",0),t(this,"_maxErrorsCount",3),t(this,"_errorsCount",0),t(this,"_sendingDataInProgress",!1),t(this,"_webContactDataQueue",[]),t(this,"_webContactSendURL",null),t(this,"_webEventSendURL",null),t(this,"_orgId",null),t(this,"_guid",null),t(this,"_currentDelayMS",null),t(this,"_checkDelayMS",null),t(this,"_host",null),t(this,"_readFromQueryIntervalId",null),t(this,"_checkErrorsCountIntervalId",null),this._host=Le.getConfig().apiConfig.hostUrl,this._webContactSendURL=this.getUrl("webcontact"),this._webEventSendURL=this.getUrl("webevent"),Ne.get("webContactDataQueue"),this._currentDelayMS=this._delays.short,this._checkDelayMS=this._delays.checkShort,this._orgId=Le.getConfig().orgId,this._guid=Le.getConfig().guid,this.prefix=Le.getPrefix(),this.allowedToRun()&&(this._readFromQueryIntervalId=setInterval((()=>this.readFromQueue()),this._currentDelayMS),this._checkErrorsCountIntervalId=setInterval((()=>this.checkErrorsCount()),this._checkDelayMS))}get _webId(){return at.getUserIdentifier()}setPrefix(e,t){this.prefix={debugPrefix:e,storagePrefix:t}}allowedToRun(){return!!(this.prefix.debugPrefix&&"cl"!==this.prefix.debugPrefix||this._orgId)}getUrl(e){return"".concat(this._host,"site-events/api/v1/").concat(e)}checkErrorsCount(){let e=this._delays.short;this._errorsCount>this._minErrorsCount&&this._errorsCount<=this._maxErrorsCount&&(e=this._delays.normal),this._errorsCount>this._maxErrorsCount&&(e=this._delays.long),this._currentDelayMS!==e&&(this._currentDelayMS=e,this.adjustReadFromQueryInterval(e),this.adjustCheckErrorsCountInterval(e))}adjustCheckErrorsCountInterval(e){clearInterval(this._checkErrorsCountIntervalId),this._checkErrorsCountIntervalId=setInterval((()=>this.checkErrorsCount()),e-2e3)}adjustReadFromQueryInterval(e){clearInterval(this._readFromQueryIntervalId),this._readFromQueryIntervalId=setInterval((()=>this.readFromQueue()),e)}stop(){this.allowedToRun()&&(clearInterval(this._readFromQueryIntervalId),clearInterval(this._checkErrorsCountIntervalId))}destroy(){this.stop()}addToQueue(e,t){this.allowedToRun()&&this._webContactDataQueue.push({data:e,message:t})}readFromQueue(){if(this._webContactDataQueue.length&&!this._sendingDataInProgress){let e=this._webContactDataQueue[0];this._sendingDataInProgress=!0,this.updateWebContact(e.data,e.message)}}removeFirstElementFromQueue(){this._webContactDataQueue.shift(),this._sendingDataInProgress=!1}errorSendingWebContact(){this._sendingDataInProgress=!1,this._errorsCount+=1}async successSendingWebContact(e){e=await this.secureWebContact(e),Le.setWebContact(e),this.removeFirstElementFromQueue(),this._errorsCount=0,(Le.getState().userInfo||Le.getState().customerData)&&this.migrateToWebContact()}async activate(e){var t,n,r=Le.getWebContact();0!==Object.keys(r).length?this._webContactDataQueue.length||Le.setWebContact(await this.secureWebContact(r)):(r=null!==(t=Le.getUserInfo())&&void 0!==t?t:{},t=null!==(n=Le.getCustomerData())&&void 0!==n?n:{},n=i({webPushSubscriptionContactId:Ne.get("esWebPushContactId"),widgetSubscriptionContactId:Ne.get("clContactId"),utmContactId:t.esContactId||r.esContactId,externalCustomerId:t.externalCustomerId||r.externalCustomerId,email:t.email||r.email,iid:t.iid||r.iid}),t.phone&&s(t.phone)?n.phone=t.phone:r.phone&&s(r.phone)&&(n.phone=r.phone),Object.keys(n).length&&this.addToQueue({...n,webId:this._webId,orgId:this._orgId},e))}updateFromCustomerData(e,t){let n={email:e.email,externalCustomerId:e.externalCustomerId,trackingContactId:e.esContactId};s(e.phone)&&(n.phone=e.phone),this.addToQueue({...n,webId:this._webId,orgId:this._orgId},t)}updateFromUserInfo(e,t){let n={email:e.email};s(e.phone)&&(n.phone=e.phone),this.addToQueue({...n,webId:this._webId,orgId:this._orgId},t)}async updateWebContact(e,t){var n=["webId","orgId"],o=r(i(Le.getWebContact()),n);let s=["email","phone"].filter((t=>!this.isPropertyPresentAndNotHashed(t,e))),a=r(i(e),n.concat(s));return function(e,t){return Object.keys(t).some((n=>e[n]!==t[n]))}(n=await this.secureWebContact(o),o=await this.secureWebContact(a))?(n=Object.keys(function(e,t){let n=Object.keys(t).filter((n=>e[n]!==t[n])),i={};for(let e of n)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}(n,o)).reduce(((e,t)=>({...e,[t]:a[t]})),{}),n=i({...n,webId:this._webId,orgId:this._orgId}),this.sendWebContact(n,t).then((()=>{}))):(this.removeFirstElementFromQueue(),Promise.resolve())}isPropertyPresentAndNotHashed(e,t){var n;return(n=null==t?void 0:t[e])&&(n=!(64===(null==(e=null==t?void 0:t[e])?void 0:e.length)&&nt.hashPattern.test(e))),n}async secureWebContact(e){let t=["email","phone"].filter((t=>this.isPropertyPresentAndNotHashed(t,e)));if(!t.length)return e;let n=await Promise.all(t.map((t=>{var n=this._guid;return o(t="".concat(e[t]).concat(n))})));return t.reduce(((e,t,i)=>({...e,[t]:n[i]})),e)}async migrateToWebContact(){Le.setState((e=>{let{userInfo:t,customerData:n,...i}=e;return{...i,_userInfo:t,_customerData:n}}))}sendWebContact(e,t){return tt.execute(this._webContactSendURL,"POST",{...e},{"Content-Type":"application/json"}).then((t=>{200===t.status?this.successSendingWebContact(e):this.errorSendingWebContact()})).catch((n=>{this.errorSendingWebContact(),Ce.info("FAILED_SEND_WEB_CONTACT",{name:n.name,message:n.message,data:e,sourceMessage:t,stack:n.stack})}))}sendWebEvent(e){return tt.execute(this._webEventSendURL,"POST",{...e,webId:this._webId,orgId:this._orgId},{"Content-Type":"application/json"}).catch((e=>Ce.info("FAILED_TRACKING_WEB_EVENTS",{name:e.name,message:e.message,stack:e.stack})))}};let ct={MainPage:"MainPage",NotFound:"NotFound",PageView:"PageView",ProductPage:"ProductPage",StatusCart:"StatusCart",StatusCartPage:"StatusCartPage",PurchasedItems:"PurchasedItems",ProductImpression:"ProductImpression",CategoryPage:"CategoryPage",CustomerData:"CustomerData",SearchRequest:"SearchRequest",AddToWishlist:"AddToWishlist",AnyPage:"AnyPage"};var dt=new class{constructor(){var e,n;t(this,"_eventsQueueMap",{}),t(this,"_purchasedItemsEventThrottleDisabled",!1),t(this,"delayMS",1e3);let i=Le.getConfig();this._purchasedItemsEventThrottleDisabled=(null===(e=i.features)||void 0===e?void 0:e.TRACKING_EVENTS_TROTTLING_DISABLE)&&!0===(null===(n=i.features)||void 0===n?void 0:n.TRACKING_EVENTS_TROTTLING_DISABLE),setInterval((()=>{Object.keys(this._eventsQueueMap).forEach((e=>{var t=this._eventsQueueMap[e];(t=t&&t.length&&t[t.length-1]||null)&&(({payload:t}=t),this.executeHttpRequest(t),this.eventType(t)===ct.PurchasedItems&&Le.setPurchasedItems(null),this._eventsQueueMap[e]=[])}))}),this.delayMS)}eventType(e){return e&&e.GeneralInfo&&e.GeneralInfo.eventName}track(e){this.eventType(e)===ct.PurchasedItems&&this._purchasedItemsEventThrottleDisabled?(this.executeHttpRequest(e),Le.setPurchasedItems(null)):this.addEventToQueue(e)}trackV2(e){return lt.sendWebEvent(e)}executeHttpRequest(e){return lt.sendWebEvent(e)}addEventToQueue(e){let t=e.GeneralInfo.eventName;this._eventsQueueMap[t]?this._eventsQueueMap[t].push({registeredDate:Date.now(),payload:e}):this._eventsQueueMap[t]=[{registeredDate:Date.now(),payload:e}]}};class ht{static map(e){switch(e){case Fe.CATEGORY:return ct.CategoryPage;case Fe.PRODUCT:return ct.ProductPage;case Fe.STATUS_CART:return ct.StatusCart;case Fe.CHECKOUT:return ct.PurchasedItems;case Fe.ANY:return ct.AnyPage;default:return null}}}class ut{_mapGetterConfigsObject(e,t,n){return Object.keys(e).reduce(((i,r)=>{let o=this._findDomElement(e[r],n);return{...i,[r]:t?o&&o[0]||"":o}}),{})}_findDomElement(e,t){let n=[];return e.forEach((e=>{n.length||(n=Ye.create(e,t).get())})),n}}class mt extends ut{constructor(e){super(),this._payload=[];let t=this._mapGetterConfigsObject(e.mapper);var n=Object.keys(t)[0];if(n){n=t[n].length;for(let e=0;e<n;e++)this._payload.push(Object.keys(t).reduce(((n,i)=>({...n,[i]:t[i][e]})),{}));0===e.postprocessing.isUnitPrice&&(this._payload=this._payload.map((e=>{let t=+e.price,n=+e.quantity;return isNaN(t)||isNaN(n)?e:{...e,price:String(t/n)}})))}}get(){return this._payload}}var pt=new class{constructor(e){t(this,"config",{}),t(this,"statusCardVersion",1),this.store=e,e=this.store.getConfig().crawler,this._setStatusCardVersion(e),this._setConfig(e),this.getConfigByEventType=e=>this._getConfigByEventType(e),this.getStatusCardVersion=e=>this._getStatusCardVersion(e)}_getStatusCardVersion(){return this.statusCardVersion}_setStatusCardVersion(e){var t;e&&e.params&&e.params.StatusCartVersion&&(this.statusCardVersion=null!==(t=e.params.StatusCartVersion)&&void 0!==t?t:1)}_getStatusCartConfig(e){let t;if(e)if(2===this.statusCardVersion)t=this._setStatusCartEventTypeParamsV2(e);else t=this._setStatusCartEventTypeParamsV1(e);return t||[]}_setConfig(e){this.config={[ct.ProductPage]:{productKey:e.product&&e.product.productKey||[]},[ct.StatusCart]:this._getStatusCartConfig(e.status_cart),[ct.CategoryPage]:{categoryKey:Array.from(e.catalog&&e.catalog.categoryKey||[]).map((e=>({...e,categoryKey:!0})))},[ct.PurchasedItems]:e.checkout&&this._setPurchasedItemsTypeParams(e.checkout)||[],[ct.AnyPage]:this._getAnyPageConfig(e)}}_getConfigByEventType(e){return this.config[ct.StatusCart]=this._getStatusCartConfig(this.store.getConfig().crawler.status_cart),this.config[e]}_getAnyPageConfig(e){let t={};return e.any&&(e.any.productKey&&(t.productKey=this._setAnyPageEventTypeParams(e.any.productKey)),e.any.categoryKey&&(t.categoryKey=Array.from(e.any.categoryKey).map((e=>({...e,categoryKey:!0}))))),t}_setStatusCartEventTypeParamsV1(e){if(!(e=e.find((e=>Ye.create(e).get()[0]))))return{mapper:{},postprocessing:{}};let t=e.products.props,n=e.products.containers;return{mapper:Object.keys(t).reduce(((e,i)=>({...e,[i]:t[i].map((e=>({...e,selector:"url"===e.method||e.encapsulation?e.selector:n+" "+e.selector})))})),{}),postprocessing:{isUnitPrice:e.isUnitPrice}}}_getProductsConfig(e){if(!(e=e.find((e=>Ye.create(e).get()[0]))))return{mapper:{},postprocessing:{}};let t=e.products.props,n=e.products.containers;return{mapper:Object.keys(t).reduce(((e,i)=>({...e,[i]:t[i].map((e=>{let t=n;return("url"===e.method||e.encapsulation)&&(t=null),{...e,containerSelector:t}}))})),{}),postprocessing:{isUnitPrice:e.isUnitPrice},containerSelector:n}}_setStatusCartEventTypeParamsV2(e){return this._getProductsConfig(e)}_setAnyPageEventTypeParams(e){return this._getProductsConfig(e)}_setPurchasedItemsTypeParams(e){return Array.isArray(e)?e.map((e=>e.orderNumber)):[]}}(Le);class gt{constructor(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Date.now();this.eventName=e,this.siteId=t,this.datetime=i,this.s_location=window.location.href,this.referrer=document.referrer,this.cookies=n}}class Et extends ut{constructor(e){super(),this._payload=this._mapGetterConfigsObject(e,!0)}get(){return this._payload}}class vt extends ut{constructor(e){super(),this._payload=this._mapGetterConfigsObject(e,!0)}get(){return this._payload}}class _t extends ut{constructor(e){super(),this._payload=(e=this._findDomElement(e))&&e[0]?e[0]:""}get(){return this._payload}}class ft extends ut{constructor(e){super(),this._payload=[];var t=new We({},null);e.containerSelector&&(0!==(t=t.getElementsBySelector(e.containerSelector)).length&&(t.forEach((t=>{t=this._mapGetterConfigsObject(e.mapper,t),this._payload.push(t)})),0===e.postprocessing.isUnitPrice&&(this._payload=this._payload.map((e=>{let t=+e.price,n=+e.quantity;return isNaN(t)||isNaN(n)?e:{...e,price:String(t/n)}})))))}_mapGetterConfigsObject(e,t){return Object.keys(e).reduce(((n,i)=>({...n,[i]:this._findDomElement(e[i],t)})),{})}_findDomElement(e,t){let n;return e.forEach((e=>{if(n)return n;(e=Ye.create(e,t).get())&&e[0]&&!n&&(n=e[0])})),n}get(){return this._payload}}class yt extends ut{constructor(e){if(super(),this._payload={},e.productKey){let t=new ft(e.productKey);this._payload.products=t.get()}e.categoryKey&&(e=this._mapGetterConfigsObject({categoryKey:e.categoryKey},!0),this._payload.categoryKey=e&&e.categoryKey||"")}get(){return this._payload}}var Tt=new class{constructor(e){this.eventPayloadConfigService=e}create(e){switch(e){case ct.ProductPage:return e=this.eventPayloadConfigService.getConfigByEventType(ct.ProductPage),new Et(e);case ct.StatusCart:return e=this.eventPayloadConfigService.getConfigByEventType(ct.StatusCart),2===this.eventPayloadConfigService._getStatusCartConfig()?new ft(e):new mt(e);case ct.CategoryPage:return e=this.eventPayloadConfigService.getConfigByEventType(ct.CategoryPage),new vt(e);case ct.PurchasedItems:return e=this.eventPayloadConfigService.getConfigByEventType(ct.PurchasedItems),new _t(e);case ct.AnyPage:return e=this.eventPayloadConfigService.getConfigByEventType(ct.AnyPage),new yt(e)}}}(pt);var Ct=new class{constructor(){t(this,"_warningsQueueMap",{}),t(this,"delayMS",1e3),setInterval((()=>{Object.keys(this._warningsQueueMap).forEach((e=>{var t=this._warningsQueueMap[e];(t=t&&t.length&&t[t.length-1]||null)&&(({payload:t}=t),Ce.warn(t.message,{event:t.event,value:"".concat(t.name,":").concat(t.value)}),this._warningsQueueMap[e]=[])}))}),this.delayMS)}warn(e){this.addWarnToQueue(e)}addWarnToQueue(e){let t=e.name;this._warningsQueueMap[t]?this._warningsQueueMap[t].push({registeredDate:Date.now(),payload:e}):this._warningsQueueMap[t]=[{registeredDate:Date.now(),payload:e}]}};class It{checkChanges(e,t,n,i,r){let o=Le.getState().pageType;if(this._isIdentifierChanged(e,t)){let s=r||this._generateGUID(),a=(e=Le.getConfig().crawler)&&e.params&&"number"==typeof e.params.statusCartDelay?e.params.statusCartDelay:100;Date.now()-o.changedDate<a||setTimeout((()=>{let e=Le.getState().pageType;e.current!==Fe.STATUS_CART?Math.abs(Date.now()-e.changedDate)-a<a||(Le.setStatusCartIdentifier({identifier:t,GUID:s}),this._checkStatusCartStats(i),dt.track({GeneralInfo:n,[ct.StatusCart]:i,GUID:s})):(Le.setStatusCartIdentifier({identifier:t,GUID:s}),this._checkStatusCartStats(i),dt.track({GeneralInfo:n,[ct.StatusCart]:i,GUID:s}))}),a)}}_checkStatusCartStats(e){var t;let n=[],i=[],r=It.DEFAULT_PRICE_LIMIT_CART,o=It.DEFAULT_QUANTITY_LIMIT_CART,s=null===(t=Le.getConfig().crawler)||void 0===t?void 0:t.params;var a,l;s&&s.alerting&&s.alerting[ct.StatusCart]&&(r=null!==(a=s.alerting[ct.StatusCart].priceLimitCart)&&void 0!==a?a:It.DEFAULT_PRICE_LIMIT_CART,o=null!==(l=s.alerting[ct.StatusCart].quantityLimitCart)&&void 0!==l?l:It.DEFAULT_QUANTITY_LIMIT_CART);e.forEach((e=>{var t=Number(e.quantity);t&&!isNaN(t)&&o&&t>o&&i.push({numberQuantity:t,quantity:e.quantity,productKey:e.productKey}),"Infinity"!==e.price&&(t=Number(e.price))&&!isNaN(t)&&r&&t>r&&n.push({numberPrice:t,price:e.price,productKey:e.productKey})})),i.length&&Ct.warn({event:"StatusCart",name:"quantityLimitCart",message:"ALERT",value:JSON.stringify(i)}),n.length&&Ct.warn({event:"StatusCart",name:"priceLimitCart",message:"ALERT",value:JSON.stringify(n)})}_isIdentifierChanged(e,t){return e!==t}_generateGUID(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}createIdentifier(e,t){return"".concat(t,":")+e.reduce(((e,t)=>{let n=Object.keys(t).map((e=>t[e])).join(",");return e.concat(n+";")}),"")}}t(It,"DEFAULT_PRICE_LIMIT_CART",3e5),t(It,"DEFAULT_QUANTITY_LIMIT_CART",1e4);var St=new It;var bt=new class{log(e){if(localStorage.getItem(e)){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];console.log(...n)}}};var At=new class{constructor(e,t,n,i,r,o){this.prevTrackedPayload=this.eventType=null,this.store=e,this.eventPayloadConfigService=n,this.eventTypePayloadFactoryService=i,this.eventsTrackingRepository=r,this.userIdentifierStorageService=o}activate(){this.changeObserver=new Je,this.changeObserver.observe((e=>this._onDomChanged(e)))}handle(e){this.eventType=e,this._onDomChanged()}_onDomChanged(){if(this.store.setProductPageId(null),this.store.setCategoryKey(null),this.store.setStatusCartProducts(null),this.eventType){var e=this.store.getExperimentVariants();e=new gt(this.eventType,this.store.getConfig().tenantId,{sc:this.userIdentifierStorageService.getUserIdentifier(),abTest:0<e.length?e.map((e=>"".concat(e.blockId,"_").concat(e.id))).join(","):""},Date.now());var t=Le.getState().pageType;if(this.eventType===ct.StatusCart||t.current===Fe.STATUS_CART){var n=this.eventPayloadConfigService.getConfigByEventType(this.eventType);t=this.store.getState().tracking.statusCart,n=2===this.eventPayloadConfigService.getStatusCardVersion()?new ft(n).get():new mt(n).get(),this.store.setPurchasedItems(n),this.store.setStatusCartProducts(this._createStatusCartProducts(n));var i=St.createIdentifier(n,this.userIdentifierStorageService.getUserIdentifier());St.checkChanges(t.identifier,i,e,n)}else{if(t=this.eventTypePayloadFactoryService.create(this.eventType).get(),this.eventType===ct.ProductPage&&this.store.setProductPageId(t.productKey),this.eventType===ct.CategoryPage&&this.store.setCategoryKey(t.categoryKey),this.eventType===ct.AnyPage&&(t.hasOwnProperty("products")&&(n=this._createStatusCartProducts(t.products.filter((e=>e.productKey))),this.store.setStatusCartProducts(n)),t.hasOwnProperty("categoryKey")&&this.store.setCategoryKey(t.categoryKey)),this.eventType===ct.PurchasedItems){if(n=(n=this.store.getState()).tracking&&n.tracking.purchasedItems&&n.tracking.purchasedItems.products,!a({orderNumber:i="".concat(null!=t?t:""),products:n}))return;let r=it.generate();i&&0!==i.trim().length&&"NaN"!==i||Ce.warn("ALERT",{event:"PurchasedItems",value:"{ orderNumber:".concat(i,"; trackedOrderId: ").concat(r," }")}),this.eventsTrackingRepository.track({GeneralInfo:e,GUID:this.store.getState().tracking.statusCart.GUID,OrderNumber:t,TrackedOrderId:r,PurchasedItems:n})}JSON.stringify(t)!==JSON.stringify(this.prevTrackedPayload)&&this.eventType!==ct.AnyPage&&this.eventType!==ct.PurchasedItems&&this.eventsTrackingRepository.track({GeneralInfo:e,[this.eventType]:t}),this.prevTrackedPayload=t}}}_createStatusCartProducts(e){return e.map((e=>e.productKey))}}(Le,$e,pt,Tt,dt,at);var Ot=new class{constructor(e,t){this.store=e,this.userIdentifierStorageService=t}createGeneralPayload(e,t,i,r){var o=this.store.getExperimentVariants();i=new gt(e,this.store.getConfig().tenantId,{sc:this.userIdentifierStorageService.getUserIdentifier(),abTest:0<o.length?o.map((e=>"".concat(e.blockId,"_").concat(e.id))).join(","):""},i),o=t||{};let s={};if(e===ct.PurchasedItems&&null!=r&&r.apiMethod){var a;s={TrackedOrderId:r=it.generate()};var l="".concat(null!==(a=o.OrderNumber)&&void 0!==a?a:"");l&&0!==l.trim().length&&"NaN"!==l||Ce.warn("ALERT",{event:"PurchasedItems",value:"{ orderNumber:".concat(l,"; trackedOrderId: ").concat(r," }")})}return l=o.hasOwnProperty("GeneralInfo")&&o.GeneralInfo||{},a=["externalCustomerId","user_email","user_phone","user_es_contact_id"],r=(e,t)=>n(Object.entries(e).filter((e=>([e]=e,!t.includes(e))))),i={...o,...s,GeneralInfo:{...i,...r(l,a)}},e===ct.CustomerData&&t.hasOwnProperty(ct.CustomerData)&&(i.CustomerData={...r(t[ct.CustomerData],a)},i.GeneralInfo={...i.GeneralInfo,...r(t[ct.CustomerData],a)}),i}}(Le,at);var Nt=new class{constructor(e,t,n,i,r,o){this.pageTypeDetectorService=e,this.repository=t,this.store=n,this.eventsHandlerService=i,this.userIdentifierStorageService=r,this.storageService=o}activate(){this.eventsHandlerService.activate(),this._collectUserInfo(),this.pageTypeDetectorService.onNextPageDetected((e=>this._onNextPageDetected(e)))}_onNextPageDetected(e){let{currentPageType:t,prevPageType:n}=e;this.trackPageView(),this.registerPageChange(t,n),e=ht.map(t),this.eventsHandlerService.handle(e),setTimeout((()=>this._collectUserInfo()))}trackPageView(){this.trackEvent(ct.PageView,{[ct.PageView]:{}})}trackInternalEvent(e,t){return e=Ot.createGeneralPayload(e,t,Date.now()),this.repository.executeHttpRequest(e)}trackEvent(e,t,n,i){return this.repository.track(Ot.createGeneralPayload(e,t,n,i))}trackEventV2(e,t,n,i){return this.repository.trackV2(Ot.createGeneralPayload(e,t,n,i))}_collectUserInfo(){var e=this.store.getConfig().crawler;let t={};if(e.user&&e.user.length){let n=new ut,i={};e.user[0].email&&(i.email=[e.user[0].email]),e.user[0].phone&&(i.phone=[e.user[0].phone]),e.user[0].userClientId&&(i.userClientId=[e.user[0].userClientId]),t=n._mapGetterConfigsObject(i,!0)}let n={...this.store.getUserInfo()};e=this.storageService.get("esWebPushContactId"),!n.esContactId&&e&&(n.esContactId=e),e=this.storageService.get("clContactId"),!n.clContactId&&e&&(n.clContactId=e),Object.keys(t).forEach((e=>{t[e]&&(n[e]=t[e])})),this.store.setUserInfo({...n}),lt.updateFromUserInfo(n,"[WebContactService] EventsTrackingService. After getting userInfo from crawler config"),l({email:n.email,phone:n.phone,externalCustomerId:n.externalCustomerId})}registerPageChange(e,t){Le.setPageType({current:e,previous:t})}}($e,dt,Le,At,at,Ne);var Rt=new class{getActiveRecomVariantsForPageType(e,t){return e=this.getActiveVariantsToRenderByPageType(e,t),this._getAppropriateVariant(e)}getActiveVariantsToRenderByPageType(e,t){let n=this.getActiveVariantsToRender(t).filter((n=>this._filterVariantsWithCorrespondingPageType(t,n,e)));return this.formattingVariants(t,n)}getActiveVariantsToRender(e){return Object.values(e.recommendationVariants||{}).filter((t=>this._filterVariantsWithCorrespondingStatus(e,t,"ACTIVE"))).filter((t=>!this._recomShouldBeInDebug(e,t)))}getDebugRecomVariantsForPageType(e,t){return Object.values(t.recommendationVariants||{}).filter((e=>t.recommendations[e.recomId])).filter((n=>this._filterVariantsWithCorrespondingPageType(t,n,e)))}formattingVariants(e,t){return Object.values(t.reduce(this._aggregateByRecom,{})).map((t=>{if(1===t.length)return{recomVariants:t,trafficSplitRules:null};var n=e.recommendations[t[0].recomId].config;return n&&(n=n.trafficSplitRules)&&n.length?{recomVariants:t,trafficSplitRules:n}:{recomVariants:t,trafficSplitRules:null}}))}_getAppropriateVariant(e){return e.map((e=>{if(!e.trafficSplitRules)return e.recomVariants;const t=Le.getExperimentVariants();return e.recomVariants.filter((e=>t.find((t=>t.id===e.id))))})).reduce(((e,t)=>e.concat(t)),[])}_aggregateByRecom(e,t){return e[t.recomId]?e[t.recomId].push(t):e[t.recomId]=[t],e}_recomShouldBeInDebug(e,t){return e=new URL(window.location.href),!!(e=new URLSearchParams(e.searchParams)).has("esDebugRecom")&&e.get("esDebugRecom").split(",").includes(String(t.recomId))}_filterVariantsWithCorrespondingStatus(e,t,n){return e.recommendations[t.recomId]&&e.recommendations[t.recomId].status===n}_filterVariantsWithCorrespondingPageType(e,t,n){return e.recommendations[t.recomId].pageType===n}};class Mt{calculateFromWeights(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,n=e.map((e=>Object.assign(Object.assign({},e),{weight:e.weight*t})));var i=h(n.map((e=>parseFloat(e.weight))));i=Math.floor(Math.random()*(i+1-1))+1;let r=this._buildRanges(n),o=this._getRangeByWeight(r,i);return n.find((e=>e.id===o.id))}_getRangeByWeight(e,t){return e.find((e=>t>=e.from&&t<=e.to))}_buildRanges(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n];if(0===n)t.push({from:1,to:parseFloat(i.weight),id:i.id});else{let e=t[t.length-1].to,n=e+parseFloat(i.weight);t.push({from:e+1,to:n,id:i.id})}}return t}}var Lt=new class{compute(e,t){let n=new Mt;t=t.map((e=>({...e,id:e.variantId})));let i=n.calculateFromWeights(t);return e.find((e=>e.id===i.variantId))}};class wt{constructor(e){this.variantComputationByRulesService=e}getExperimentVariantsConfig(){throw Error("You have to implement the method setExperimentVariants!")}getExperimentVariantsFromConfig(){throw Error("You have to implement the method getExperimentVariantsFromConfig!")}addExperimentVariant(e,t,n){throw Error("You have to implement the method addExperimentVariant!")}getExperimentVariants(){throw Error("You have to implement the method getExperimentVariants!")}setExperimentVariants(e){throw Error("You have to implement the method setExperimentVariants!")}activate(){let e=this.getExperimentVariantsConfig();this._removeOldExperimentsFromStorage(this.getExperimentVariants(),e),this._removeModifiedExperimentsFromStorage(this.getExperimentVariants(),e),this._writeNewExperimentsToStorage(this.getExperimentVariants(),e)}_removeOldExperimentsFromStorage(e){let t=this.getExperimentVariantsFromConfig();e=e.filter((e=>t.find((t=>t.id===e.id)))),this.setExperimentVariants(e)}_removeModifiedExperimentsFromStorage(e,t){t&&t.length&&(t=t.reduce(((t,n)=>{const{itemVariants:i,trafficSplitRules:r}=n;return t.concat(this._getUnmodifiedVariants(i,e,r))}),[]),this.setExperimentVariants(t))}_writeNewExperimentsToStorage(e,t){let n=new Map,i=new Map;t.forEach((t=>{let{itemVariants:r,trafficSplitRules:o}=t;var s=e.find((e=>r.find((t=>t.id===e.id))));let a=r.map((e=>e.formId)),l=[...n.entries()].map((e=>{let[t,n]=e;return a.filter((e=>n.has(e))).length===a.length?t:null})).filter(Boolean)[0];if(l&&i.has(l)){let e=i.get(l);s=this.getExperimentVariantsConfig().find((e=>e.testId===l)).itemVariants.findIndex((t=>t.formId===e.formId)),this.addExperimentVariant(r[s],o,t.testId)}else{let e=new Set(r.map((e=>e.linkedToVariantId)));n.set(t.testId,e),s||(s=this.variantComputationByRulesService.compute(r,o),s=this.addExperimentVariant(s,o,t.testId),i.set(t.testId,s))}}))}_generateHash(e,t){return"".concat(e,".").concat(t.length,".").concat(t.map((e=>e.weight)).join("."))}_getUnmodifiedVariants(e,t,n){return n&&n.length&&e&&e.length?t.filter((t=>e.some((e=>t.hash===this._generateHash(e.id,n))))):t}}var Pt=new class extends wt{constructor(e){super(e)}getExperimentVariantsConfig(){let e=Le.getConfig();return Rt.formattingVariants(e,Rt.getActiveVariantsToRender(e)).filter((e=>e.trafficSplitRules)).map((e=>({itemVariants:e.recomVariants,trafficSplitRules:e.trafficSplitRules})))}setExperimentVariants(e){Le.setExperimentVariants(e)}getExperimentVariants(){return Le.getExperimentVariants()}addExperimentVariant(e,t){Le.addExperimentVariant({blockId:e.blockId,id:e.id,hash:this._generateHash(e.id,t)})}getExperimentVariantsFromConfig(){let e=Le.getConfig();return Object.values(e.recommendations).filter((e=>e&&e.config&&e.config.trafficSplitRules)).map((t=>Object.values(e.recommendationVariants).filter((e=>t.config.trafficSplitRules.find((t=>t.variantId===e.id)))))).reduce(((e,t)=>e.concat(t)),[])}}(Lt);class Dt{_createParamIfPresent(e,t){return e?Array.isArray(e)?e.length?"".concat(t,": [").concat(e.map((e=>'"'.concat(e,'"'))),"],"):"":0!==Object.keys(e).length&&e.constructor===Object?"".concat(t,": { ").concat(Object.keys(e).map((t=>" ".concat(t,": [{").concat(e[t].map((e=>Object.keys(e).map((t=>"".concat(t,": ").concat(Array.isArray(e[t])?"[".concat(e[t].map((e=>'"'.concat(e,'"'))),"]"):'"'.concat(e[t],'"')))))),"}]")))," },"):"".concat(t,": ").concat("string"==typeof e?'"'.concat(e,'"'):e,","):""}}class xt extends Dt{build(e){let t="isV2: true,"+"".concat(this._createParamIfPresent(e.filters,"filters"))+"".concat(this._createParamIfPresent(e.productIds,"products"))+"".concat(this._createParamIfPresent(e.cookie,"cookie"))+"".concat(this._createParamIfPresent(e.blockId,"blockId"))+"".concat(this._createParamIfPresent(e.categoryKey,"category"))+"".concat(this._createParamIfPresent(e.languageCode,"languageCode"))+"".concat(Object.keys(e.staticParams).map((t=>this._createParamIfPresent(e.staticParams[t],t))).join(""))+"".concat(this._createParamIfPresent(e.filterValuesParams,"filterValues"))+"".concat(this._createParamIfPresent(e.categoryField,"categoryField")),n=e.blockId+(e.variantId?"_"+e.variantId:"");return"\n            {\n  recommendations {\n    products(".concat(t.endsWith(",")?t.slice(0,-1):t,") {\n      products {\n        ").concat(e.productAvailableFields.map((e=>"url"===e.name?'url: urlWithContent(id: "'.concat(n,'", delimiter: "?")'):e.query)).join(" "),"\n        }\n      status\n    }\n  }\n}\n")}}class kt{static execute(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i={method:t,headers:{...3<arguments.length&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"}},credentials:"same-origin",body:null,...4<arguments.length&&void 0!==arguments[4]?arguments[4]:{}};return n&&(i.body=JSON.stringify(n)),fetch(e,i).then((e=>204===e.status?null:e.ok?Promise.all([e.clone().blob(),e]).then((e=>{let[t,n]=e;return t.type.includes("application/json")?n.json():Promise.reject(n)})):e.json().then((e=>Promise.reject(e)))))}}class Vt{static get(){try{return Le.getConfig().crawler.params[Le.getState().pageType.current].recoms.productsRecommendationsArgs||{}}catch(e){return{}}}}let Ft="aa ab ae af ak am an ar as av ay az ba be bg bh bi bm bn bo br bs ca ce -- ch co cr cs cu cv cy da de dv dz ee el en eo es et eu fa ff fi fj fo fr fy ga gd gl gn gu gv ha -- he hi ho hr ht hu hy hz ia id ie ig ii ik io is it iu ja jv ka kg ki kj kk kl km kn ko kr ks ku kv kw ky la lb lg li ln lo lt lu lv mg mh mi mk ml mn mr ms mt my na nb nd ne ng nl nn no nr nv ny oc oj om or os pa pi pl ps pt qu rm rn ro ru rw ry sa sc sd se sg sh si sk sl sm sn so sq sr ss st su sv sw ta te tg th ti tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa wo xh yi yo za zh zu".split(" ");var Ut=new class{getLanguageForForms(){return this._fromHtml()||this._fromUrl()||this._fromNavigator()}getLanguageForRecoms(){var e;if(null!==(e=Le.getConfig().features)&&void 0!==e&&e.mulanRecoms)return(e=this._fromHtml()||this._fromUrl())&&this._normalizeBrowserLanguagesForRecoms(e)||void 0}_fromHtml(){return document.querySelector("html").getAttribute("lang")}_fromUrl(){return location.href.split("/").filter((e=>2===e.length||5===e.length)).find((e=>Ft.includes(e)))}_fromNavigator(){return navigator.language}_normalizeBrowserLanguagesForRecoms(e){return e.includes("-")?e.split("-")[0].toLowerCase():e.includes("_")?e.split("_")[0].toLowerCase():e}};class Bt{static get(){try{return Le.getConfig().crawler.params.filterValues||[]}catch(e){return[]}}}class Ht extends Error{}class Gt{static build(e,t){let n,i,r;e.productId?n=e.productId:e.productIds?n=e.productIds:Le.getState().tracking.product.productId?n=Le.getState().tracking.product.productId:Le.getState().tracking.statusCart.products&&(n=Le.getState().tracking.statusCart.products),e.filters&&(i=e.filters),e.categoryField&&(r=e.categoryField);let o=Le.getConfig().productAvailableFields;!e.allFields&&e.apiMethod&&(o=Le.getConfig().productAvailableFields.filter((e=>"url"===e.name||"item_init"===e.name||"container_type"===e.name)));let s=e.variantId||t.id;if(!s)throw new Ht('"variantId" is required');if(!(t=e.blockId||t.blockId)){if(!(t=Object.values(Le.getConfig().recommendationVariants).find((e=>e.id===s))))throw new Ht("variantId ".concat(s," was not found in config"));t=t.blockId}let a=[];a=e.filterParams?e.filterParams:Bt.get();let l=[];return a.length&&a.forEach((e=>{(e=Ye.create(e).get()).length&&e.forEach((e=>l.push(e)))})),{blockId:t,variantId:s,productAvailableFields:o,productIds:Array.isArray(n)?n:n?[n]:[],categoryKey:e.categoryKey||Le.getState().tracking.category.categoryKey,cookie:at.getUserIdentifier(),languageCode:e.languageCode||Ut.getLanguageForRecoms(),staticParams:Vt.get(),filterValuesParams:l,filters:i,categoryField:r}}}class jt{constructor(e){this.variant=e,this.products=[],this.errors=[],this.params={},this.url=Le.getConfig().recomApiConfig.variantDataSourceUrl}getRecommendations(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Promise.resolve().then((()=>{let t=Gt.build(e,this.variant);var n=new xt;return this.params=Object.assign({},t),n=n.build(t),kt.execute(this.url,"POST",{query:n}).then((e=>e.errors&&e.errors.length?(this.setErrors(e.errors),[]):this.products=e.data.recommendations.products.products.map((e=>({...e,container_type:t.blockId+"_"+t.variantId,product_id:e.id}))))).catch((e=>(e.errors&&e.errors.length&&this.setErrors(e.errors),[])))}))}setErrors(e){this.errors=e.map((e=>e.message.concat(" at: "+(e.path||e.locations).toString()))).join(", ")}getErrors(){return this.errors}}let Wt={BEFORE_BEGIN:"beforebegin",AFTER_BEGIN:"afterbegin",BEFORE_END:"beforeend",AFTER_END:"afterend",REPLACE:"REPLACE"};class zt{static map(e){return Wt.hasOwnProperty(e)?Wt[e]:Wt.AFTER_END}}class Kt{constructor(e,n,i){t(this,"_rootElement",null),t(this,"_insertType",null),t(this,"selectors",null),t(this,"variant",null),this.position=this._insertType=zt.map(e.insertType),this.selectors=Kt.mapPlacementSelector(e),this.setTargetElement(i||Kt.findTargetElement(e)),this._rootElement=n}disconnect(){this._rootElement.remove()}setRootElement(e){Kt.isElement(e)&&(this._rootElement=e)}getRootElement(){return this._rootElement}setTargetElement(e){e&&Kt.isElement(e)&&(this._targetElement=e)}getTargetElement(){return this._targetElement}static isElement(e){return e instanceof Element}static mapPlacementSelector(e){return e.selector?[e.selector]:e.selectors}static findTargetElement(e){return Kt.mapPlacementSelector(e).reduce(((t,n,i)=>{if(Kt.isElement(t)){if(0===i||!e.encapsulation)return t.querySelector(n);if("SHADOW_DOM"===e.encapsulation)return t.shadowRoot.querySelector(n);if("IFRAME"===e.encapsulation)throw Error("Placement#encapsulation IFRAME is not supported yet")}return t}),document.body)}isMobileEnv(e){return window.matchMedia("(max-width: ".concat(e,"px)")).matches}}class Qt extends Kt{constructor(e,t,n){super(e,t,n)}connect(e,t){let n=document.createElement("style"),i=document.createElement("div");n.innerHTML=t,i.innerHTML=e,this._rootElement.appendChild(n),this._rootElement.appendChild(i),this.connectRootToTarget()}connectRootToTarget(){return this._insertType===Wt.REPLACE?this.getTargetElement().replaceWith(this.getRootElement()):(this.getTargetElement().insertAdjacentElement(this._insertType,this._rootElement),this.getRootElement())}}class qt extends Kt{constructor(e,t,n){super(e,t,n)}connect(e,t){let n=document.createElement("style"),i=document.createElement("div");n.innerHTML=t,i.innerHTML=e,(e=document.createElement("div")).appendChild(n),e.appendChild(i);let r=document.createElement("iframe");xe(r,"load",(()=>{let e=r.contentWindow.document;r.style.setProperty("height","".concat(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight),"px"))})),r.style.border="none",r.style.width="100%",r.srcdoc=e.innerHTML,this._rootElement.appendChild(r),this._targetElement.insertAdjacentElement(this._insertType,this._rootElement)}}class Xt extends Qt{constructor(e,t,n){super(e,t,n)}}class Yt{static create(e,t,n,i){switch(e||"NONE"){case"NONE":default:return new Qt(t,n,i);case"IFRAME":return new qt(t,n,i);case"SHADOW_ROOT":return new Xt(t,n,i)}}}class Zt{constructor(e,n){t(this,"handlers",{}),this._connector=n,this.variant=e}shouldConnect(e){this.handlers.shouldConnect=e}beforeConnect(e){this.handlers.beforeConnect=e}afterConnect(e){this.handlers.afterConnect=e}beforeDisconnect(e){this.handlers.beforeDisconnect=e}getRootElement(){return this._connector.getRootElement()}setRootElement(e){this._connector.setRootElement(e)}getTargetElement(){return this._connector.getTargetElement()}}class Jt{constructor(e,t){this.variant=e,this.connector=t;try{this.callableBody=new Function("context",this.variant.appearance.js)}catch(e){Ce.error(e,"RecomVariantContext initialization errors: ")}}start(){try{this.ctx=new Zt(this.variant,this.connector),this.callableBody(this.ctx)}catch(e){Ce.error(e,"RecomVariantContext start errors: ")}}runHandler(e,t){let n=this.ctx.handlers[e];if("function"!=typeof n)return!0;try{return n(t)}catch(t){Ce.error(t,"RecomVariantContext handler ".concat(e," errors: "))}}}let $t=Le.getConfig();class en{static hasAtLeastOneActiveInlineRecomAppearance(){let e=!$t||!$t.hasOwnProperty("tenantIsActive")||$t.tenantIsActive;return $t.recommendationVariants&&Object.values($t.recommendationVariants).length&&Object.values($t.recommendationVariants).find((e=>{var t,n;return(null==e||null===(t=e.appearance)||void 0===t?void 0:t.html)&&(null==e||null===(n=e.appearance)||void 0===n?void 0:n.html.length)}))&&e}}let tn=null,nn=Le.getConfig().apiConfig.chunkVelocityUrl||"https://statics.esputnik.com/scripts/velocity.js";en.hasAtLeastOneActiveInlineRecomAppearance()&&e(nn,tn).then((e=>{tn=e}));class rn{static async compile(t,n){let{SysVelocityRenderer:i}=await e(nn,tn);return(new i).render(t,n)}}class on{constructor(e,t){var n;this.products=e,this.variant=t,this.language=Ut.getLanguageForRecoms(),this.defaultLanguage=null===(n=Le.getConfig().recommendationConfig)||void 0===n?void 0:n.defaultLanguage,this.translations=this.variant.appearance.translations,this.headerTranslations=this.variant.headerTranslations,this.header=this.variant.header}translate(e,t,n){let i;return n&&t&&Object.keys(n).includes(t)&&(i=n[t][e]),i||""}translatePageLanguage(e,t){let n=this.translate(e,this.language,this.translations);return!n&&t&&(n=this.translate(e,this.defaultLanguage,this.translations)),n}translateHeader(){if(this.language&&this.defaultLanguage&&this.language===this.defaultLanguage)return this.header;let e;return this.headerTranslations&&Object.keys(this.headerTranslations).includes(this.language)&&(e=this.headerTranslations[this.language]),e||""}create(){return{products:this.products,recom:{header:this.translateHeader()||this.header,variantId:this.variant.id,blockId:this.variant.blockId},translate:e=>this.translatePageLanguage(e,!0)}}}class sn{constructor(e){this._payload=e.productIds.map((t=>({product_id:String(t),container_type:String(e.blockId)})))}get(){return this._payload}}class an{constructor(e,t){this.observer=null,this.rootElement=e,this.oneTimeObserver=t}handle(e){this.observer=new IntersectionObserver((t=>{t.find((e=>e.isIntersecting))&&(e(),this.oneTimeObserver&&this.unsubscribe())}),{root:null,rootMargin:"0px",threshold:.1}),this.observer.observe(this.rootElement)}unsubscribe(){this.observer.disconnect()}}class ln extends an{constructor(e,t){super(e,!0),this.params=t}handle(){super.handle(this.onElementShown.bind(this))}onElementShown(){new Promise((e=>{var t={productIds:this.params.products.map((e=>e.id)),blockId:this.params.blockId};let n=this.params.products[0].url.split("sc_content=")[1];n&&(t.blockId=n),t=new sn(t).get(),Nt.trackInternalEvent("ProductImpressions",{[ct.ProductImpression]:t}),e()})).catch((e=>Ce.error(e,"onElementShown error on ProductImpressionEventHandler: ")))}}class cn{constructor(e,t){this.element=document.createElement("div"),e&&(this.element.id=e),t&&(this.element.className=t)}get(){return this.element}}class dn extends cn{constructor(e){super("es-recom-".concat(e.recomId,"-v-").concat(e.id),"es-recom-container")}get(){return super.get().style.minWidth="100%",super.get().style.overflow="auto",super.get()}}class hn{create(){return new Je}}let un=null,mn=Le.getConfig().apiConfig.chunkRecomSliderUrl||"https://statics.esputnik.com/scripts/RecomVariantSliderPlugin.js";en.hasAtLeastOneActiveInlineRecomAppearance()&&e(mn,un).then((e=>{un=e}));class pn{constructor(e){t(this,"_successInjected",!1),t(this,"variant",null),this.variant=e,this.dataSource=new jt(e),this.connector=Yt.create(e.appearance.encapsulation,e.placement,new dn(this.variant).get()),this.ctxContainer=new Jt(e,this.connector)}async inject(){if(un=await e(mn,un),this.plugins=[new un.default(this.connector,Le,new hn)],this._successInjected=!1,this.ctxContainer.start(),!this.ctxContainer.runHandler("shouldConnect")){var t="Should not be connected variantId: "+this.getId();return Promise.reject({reason:t})}if(this.ctxContainer.runHandler("beforeConnect"),!(t=await this.dataSource.getRecommendations())||!t.length)return t="No products for recom variant variantId: ".concat(this.getId()),Promise.reject({reason:t});var n=new on(t,this.variant).create();n=await rn.compile(this.variant.appearance.html,n),this.connector.connect(n,this.variant.appearance.css,this.variant.placement,this.getId(),this.variant.recomId),this.ctxContainer.runHandler("afterConnect",t),this._handleAddToStatusCartClick(),this._handleRecommendationsShownInViewport(this.dataSource.params.blockId,t);try{this.plugins.forEach((e=>requestAnimationFrame((()=>e.init()))))}catch(e){}return this._successInjected=!0,Promise.resolve(this)}destroy(){this.ctxContainer.runHandler("beforeDisconnect"),this.connector.disconnect(),this._successInjected=!1}getId(){return this.variant.id}get isPresent(){return!!this.connector.getRootElement().isConnected}get isInjectSuccessful(){return this._successInjected}_handleAddToStatusCartClick(){try{this.connector.getRootElement().addEventListener("click",(e=>{e&&e.target&&(e=e.target.getAttribute("data-add-to-status-cart-product-id"))&&Nt.trackEventV2("ProductPage",{ProductPage:{Product:{productKey:e},Tags:{block_id:[this.ctxContainer.variant.blockId+"_"+this.ctxContainer.variant.id]}}},Date.now())}))}catch(e){Ce.error(e)}}_handleRecommendationsShownInViewport(e,t){let n=this.connector.getRootElement();new ln(n,{products:t,blockId:e}).handle()}}class gn{constructor(e,n){t(this,"_activeRecomVariants",[]),t(this,"_variantsQueue",[]),t(this,"_injectedVariants",[]),this._activeRecomVariants=e,this._variantsQueue=this._activeRecomVariants.slice(),this.changeObserver=new Je,this.onVariantInjected=n,this.changeObserver.observe((()=>this._tryToInjectVariants())),this._tryToInjectVariants(),this._initListenerRecomVariantsStillPresent()}destroy(){this._disconnectChangeObserver(),this._listenRecomVariantsStillPresentObserver&&this._listenRecomVariantsStillPresentObserver.disconnect(),this._injectedVariants.forEach((e=>{try{e.destroy()}catch(e){}})),this._injectedVariants=[]}_tryToInjectVariants(e){let t=this._getReadyToInjectVariants();this._injectVariants(t),this._removeInjectedVariantsFromQueue(t),this._variantsQueue.length||(this._disconnectChangeObserver(),"function"==typeof e&&e())}_disconnectChangeObserver(){this.changeObserver.disconnect()}_getReadyToInjectVariants(){return this._variantsQueue.filter((e=>e.placement.selector&&document.querySelector(e.placement.selector)))}_injectVariants(e){e.forEach((e=>{e=new pn(e),this._injectedVariants.push(e),e.inject().then(this.onVariantInjected).catch((e=>{e.reason||Ce.error(e)}))}))}_removeInjectedVariantsFromQueue(e){e.forEach((e=>{let t=this._variantsQueue.findIndex((t=>t.id===e.id));this._variantsQueue.splice(t,1)}))}_listenRecomVariantsStillPresent(){0===this._variantsQueue.length&&(this._injectedVariants.forEach((e=>{let{variant:t}=e,n=this._variantsQueue.findIndex((e=>e.id===t.id));if(e.isInjectSuccessful&&!e.isPresent&&-1===n){try{e.destroy()}catch(e){}this._variantsQueue.push(t)}})),0<this._variantsQueue.length&&this._tryToInjectVariants())}_inject(){return new Promise((e=>this._tryToInjectVariants(e)))}_initListenerRecomVariantsStillPresent(){this._listenRecomVariantsStillPresentObserver=new Je,this._listenRecomVariantsStillPresentObserver.observe((()=>this._listenRecomVariantsStillPresent()))}}class En{constructor(e){t(this,"collectionIntervalHours",null),this.collectionIntervalHours=e}setData(e,t){this._storeData({[e]:t})}getData(e){return this._getData().data[e]}_getData(){}_setData(e){}_storeData(e){let t=this._getData();this._setData({...t,data:{...t.data,...e}})}_updateMetricCollectionDate(){let e=this._getData();this._setData({...e,lastDate:(new Date).toISOString()})}_shouldMetricBeCollected(){var e=this._getLastDate();return!e||(e=new Date(e),parseInt(((new Date).getTime()-e.getTime())/36e5)>=this.collectionIntervalHours)}_getLastDate(){return this._getData().lastDate}}var vn=new class extends En{constructor(){super(2),this._storeData({SCRIPT_INITIAL_LOAD:this._getWindowPerf()}),this._shouldMetricBeCollected()&&Ce.info("SCRIPT_INITIAL_LOAD",this._composePayload())}collect(e){this._storeData({[e]:this._getWindowPerf()})}_getData(){return Le.getMetrics()}_setData(e){Le.setMetrics(e)}_composePayload(){let e=this._getData();return{site:new URL(document.location.href).hostname,...e.data}}_getWindowPerf(){return window.performance.now()}};var _n=new class{constructor(e,n){t(this,"injector",null),this.pageTypeDetectorService=e,this.recomVariantsDataService=n}activate(){this.pageTypeDetectorService.onNextPageDetected((e=>this._onNextPageDetected(e)))}initializePageRecoms(e){e=this.recomVariantsDataService.getActiveRecomVariantsForPageType(e,Le.getConfig()),this.injector=new gn(e,(()=>this._onVariantInjected()))}destroyPageRecoms(){this.injector&&this.injector.destroy()}_onNextPageDetected(e){({currentPageType:e}=e),this.destroyPageRecoms(),this.initializePageRecoms(e)}_onVariantInjected(){vn.collect("RECOM_RENDERED")}}($e,Rt);class fn{isDebugQueryStringPresentInUrl(e){let t=window.location.href.toLowerCase();return!!Object.values(e).find((e=>t.includes(e)))}_getDebugIds(e,t){return(e.get(t)||"").split(",").map((e=>parseInt(e))).filter((e=>Number.isInteger(e)))}}var yn=new class extends fn{constructor(e,n){super(),t(this,"_countAttempts",0),t(this,"_currentPageType",null),t(this,"_injectableDebugRecomVariants",[]),t(this,"_queryParamNames",{DEBUG_RECOM:"esdebugrecom",DEBUG_RECOM_VARIANT:"esdebugrecomvariant"}),this.pageTypeDetectorService=e,this.recomVariantsDataService=n,this.changeObserver=new Je}activate(){this.pageTypeDetectorService.onNextPageDetected((e=>this._onNextPageDetected(e))),this.changeObserver.observe((e=>this.tryToRenderDebugVariant(e)))}tryToRenderDebugVariant(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e=Array.isArray(e)&&e.length?e:this._getConfigsToDebug(this._currentPageType),this._tryToRenderDebugRecomVariants(e)}_tryToRenderDebugRecomVariants(e){(e||[]).filter((e=>!this._injectableDebugRecomVariants.find((t=>t.variant.id===e.id)))).forEach((e=>{let t=new pn(e);this._injectableDebugRecomVariants.push(t),t.inject().catch((n=>{t.isInjectSuccessful||this._destroyDebugVariant(e.id),n.reason||this._destroyDebugVariant(e.id)}))}))}_onNextPageDetected(e){({currentPageType:e}=e),this._currentPageType=e,this.destroyDebugVariants(),this.tryToRenderDebugVariant()}_getConfigsToDebug(e){if(null!==window.location.href&&this.isDebugQueryStringPresentInUrl(this._queryParamNames)){var t=new URL(window.location.href.toLowerCase());t=new URLSearchParams(t.searchParams);var n=this._getDebugIds(t,this._queryParamNames.DEBUG_RECOM);if(0!==n.length)return this._getRecomConfigsToDebug(n,t,e)}}_getRecomConfigsToDebug(e,t,n){if(n=this.recomVariantsDataService.getDebugRecomVariantsForPageType(n,Le.getConfig()),n=e.length?n.filter((t=>e.includes(t.recomId))):n,t.has(this._queryParamNames.DEBUG_RECOM_VARIANT)){let e=t.get(this._queryParamNames.DEBUG_RECOM_VARIANT).split(",");n=n.filter((t=>e.includes(t.id)))}return n}destroyDebugVariants(){this._injectableDebugRecomVariants.length&&(this._injectableDebugRecomVariants.forEach((e=>e.destroy())),this._injectableDebugRecomVariants=[])}_destroyDebugVariant(e){if(this._countAttempts+=1,this._injectableDebugRecomVariants.length&&5>this._countAttempts){let t=this._injectableDebugRecomVariants.find((t=>t.variant.id===e));t&&"function"==typeof t.destroy&&(t.destroy(),this._injectableDebugRecomVariants=this._injectableDebugRecomVariants.filter((e=>e.variant.id!==t.variant.id)))}}}($e,Rt);var Tn=new class extends Ue{constructor(){super({url:""}),window.addEventListener("beforeunload",(e=>this.onBeforeNavigationHandler(e)))}onBeforeNavigationHandler(){this.updateState({url:""})}};var Cn=new class{constructor(e,n,i){t(this,"eventListeners",{}),this.store=e,this.urlChangeService=n,this.onBeforeUnloadChangeService=i,this.changeObserver=new Je,this.dataWasCollectedOnCurrentPageRefresh=void 0,this.navigationChangeSubscriptions=[]}activate(){this._isCrawlerConfigHasCustomerData()&&(this.changeObserver.observe((e=>this._collectCustomerData(e))),this._collectCustomerData(),this.dataWasCollectedOnCurrentPageRefresh=!1,this.navigationChangeSubscriptions.push(this.urlChangeService.subscribeSingle((e=>this._urlChangeListener(e)))),this.navigationChangeSubscriptions.push(this.onBeforeUnloadChangeService.subscribeSingle((e=>this._urlChangeListener(e)))))}_collectCustomerData(){this.store.getConfig().crawler.customer_data.forEach((e=>{let{selector:t,eventType:n}=e.actionElement,i=this._getActionElement(t);i&&!this.eventListeners[t]&&(this.eventListeners[t]=()=>this._formSubmitHandler(e),i.addEventListener(n,this.eventListeners[t]))}))}getValidCustomerData(e){let t={};return e.email&&nt.isEmail(e.email)&&(t.email=e.email),e.phone&&nt.isPhoneNumber(e.phone)&&(t.phone=e.phone.match(nt.phonePattern).join("")),e.externalCustomerId&&(t.externalCustomerId=e.externalCustomerId),e.esContactId&&(t.esContactId=e.esContactId),l({contactId:t.esContactId,email:t.email,phone:t.phone,externalCustomerId:t.externalCustomerId}),t}isPayloadPresent(e){return 0<Object.values(e||{}).filter((e=>!!e)).length}_mapCustomerDataBySC(e){return Object.keys(e).reduce(((t,n)=>(t["user_".concat(n)]=e[n],t)),{})}_getActionElement(e){return document.querySelector(e)}_formSubmitHandler(e){var t=(new ut)._mapGetterConfigsObject(e.values,!0);this.dataWasCollectedOnCurrentPageRefresh=!0;let i=n(Object.entries(this.store.getCustomerData()).filter((e=>([,e]=e,!!e))));t=this.getValidCustomerData(t),this.store.setCustomerData({...i,...t}),u(t.externalCustomerId),lt.updateFromCustomerData(t,"[WebContactService] CustomerDataEventHandlerService. After getting customerData from crawler config"),this.eventListeners[e.actionElement.selector]=void 0}_isEventListenersEmpty(){return 0===Object.values(this.eventListeners).filter((e=>!!e)).length}_tryCancelChangeObservable(){this._isEventListenersEmpty()&&this.changeObserver.disconnect()}_urlChangeListener(){this.isPayloadPresent(this.store.getState().customerData)&&(this._sendData(),this._tryCancelChangeObservable(),this.unsubscribeDataCollectorListeners())}unsubscribeDataCollectorListeners(){this.navigationChangeSubscriptions.forEach((e=>e.unsubscribe()))}_sendData(){var e;if(!0===this.dataWasCollectedOnCurrentPageRefresh){var t={[ct.CustomerData]:this._mapCustomerDataBySC(null!==(e=this.store.getState().customerData)&&void 0!==e?e:{})};Nt.trackInternalEvent(ct.CustomerData,t)}}_isCrawlerConfigHasCustomerData(){return!!this.store.getConfig().crawler.customer_data}}(Le,Be,Tn);class In{constructor(){this.sessionCountKey="".concat(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").concat(In.staticKeyPart)}isFirstTimeSeen(){let e=Ne.get(this.sessionCountKey),t=Ne.get(In.staticKeyPart),n=this._parseKeyValue(e),i=this._parseKeyValue(t);return isNaN(e)||isNaN(e)?e?n:!t||i:1===Math.max(e,t)}_parseKeyValue(e){return null===e||!isNaN(e)&&1==+e}getStats(){return{firstTimeSeen:this.isFirstTimeSeen()}}destroy(){}}t(In,"staticKeyPart","f.session.count");class Sn{constructor(){this.prefix=0<arguments.length&&void 0!==arguments[0]?arguments[0]:""}incrementCount(e){let t=this.getCount(e)+1;Ne.set(e,t)}getKey(e){return this.prefix+e}getCount(e){return m(Ne.get(e))}map(e){let t=Ne.get(e)||{};return{put(n,i){t[n]=i,Ne.set(e,t)},incrementCount(n){t[n]=m(t[n])+1,Ne.set(e,t)},clear(n){delete t[n],Ne.set(e,t)},get:e=>t[e],value:()=>t}}}class bn{static get(){try{let e=localStorage.getItem("cl.dev.session.ttl");return e?JSON.parse(e):JSON.parse(Se.get().formConfig.SESSION_TTL)}catch(e){return bn.fallbackConfig}}}t(bn,"fallbackConfig",{unit:"MINUTE",amount:"30"});let An={MILLISECOND:"MILLISECOND",SECOND:"SECOND",MINUTE:"MINUTE",HOUR:"HOUR",DAY:"DAY",WEEK:"WEEK",getAll:function(){return Object.keys(this).filter((e=>"getAll"!==e))}};class On{static convert(e,t,n){return e=On.toMsMapper[e](n),On.fromMsMapper[t](e)}}On.toMsMapper={[An.MILLISECOND]:e=>e,[An.SECOND]:e=>1e3*e,[An.MINUTE]:e=>6e4*e,[An.HOUR]:e=>36e5*e,[An.DAY]:e=>864e5*e,[An.WEEK]:e=>6048e5*e},On.fromMsMapper={[An.MILLISECOND]:e=>e,[An.SECOND]:e=>e/1e3,[An.MINUTE]:e=>e/6e4,[An.HOUR]:e=>e/36e5,[An.DAY]:e=>e/864e5,[An.WEEK]:e=>e/6048e5};class Nn{constructor(e){if(this.endISOString=this.startISOString=null,e&&e.length){let[t,n]=e.split("_");this.startISOString=t,this.endISOString=n}}init(){let e=(new Date).toISOString();this.endISOString=this.startISOString=e}getStartISOString(){return this.startISOString}getEndISOString(){return this.endISOString}updateEndISODate(e){this.endISOString=e}isEmpty(){return!this.getStartISOString()||!this.getEndISOString()}toString(){return"".concat(this.getStartISOString(),"_").concat(this.getEndISOString())}}class Rn extends Ae{constructor(e,n){super(),t(this,"_eventListener",(e=>{this._lastActivityDate=new Date,this._startIfNeeded(this._lastActivityDate.getTime()),Rn._eventListenersMap[e.type]&&this._updateLastActivity()})),this.prefix="".concat(e.getPrefix(),"."),this._sessionPagesCountKey=this.getKey("f.session.pages.count"),this.urlSearchKey=this.getKey("f.session.url.search"),this._sessionKey=this.getKey("f.session"),this._registeredKeysSet=new Set,this.registerKeys(this._sessionPagesCountKey,this.urlSearchKey,this._sessionKey),this.sessionConfig=n,this._lastActivityDate=new Date,this._expireIfNeeded(0),this._startIfNeeded(0),this._listeners=Object.keys(Rn._eventListenersMap).map((e=>(window.addEventListener(e,this._eventListener),e)))}registerKeys(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{this._registeredKeysSet.add(e)}))}destroy(){this._listeners.forEach((e=>{window.removeEventListener(e,this._eventListener)}))}getLastActivityDate(){return this._lastActivityDate}get(e){return this._expireIfNeeded(this._lastActivityDate.getTime()),super.get(e)}_updateLastActivity(){let e=this.getPersistedValue();e.updateEndISODate(this._lastActivityDate.toISOString()),this.set(this._sessionKey,e.toString())}_expireIfNeeded(e){!this.isInCurrentSession(e)&&super.get(this._sessionKey)&&this.expireSession()}_startIfNeeded(e){this.isInCurrentSession(e)||this.startSession()}getPersistedValue(){return new Nn(super.get(this._sessionKey))}getKey(e){return this.prefix+e}isInCurrentSession(e){var t=this.getPersistedValue();if(t.isEmpty())return!1;var n=this.sessionConfig.get();return n=On.convert(n.unit,An.MILLISECOND,n.amount),t=new Date(t.getEndISOString()).getTime(),e=Math.max(t,e),!(Date.now()-e>n)}expireSession(){Array.from(this._registeredKeysSet).forEach((e=>{super.remove(e)})),super.remove(this._sessionKey)}startSession(){let e=new Nn;e.init(),super.set(this._sessionKey,e.toString()),this.incrementSessionCount()}incrementSessionCount(){let e="".concat(Se.getStoragePrefix()).concat("f.session.count");var t=Ne.get(e);t||"f.session.count"===e||(t=Ne.get("f.session.count")),t=m(t)+1,Ne.set(e,t)}incrementSessionPagesCount(){let e=this.getSessionPagesCount()+1;super.set(this._sessionPagesCountKey,e)}getSessionPagesCount(){var e=super.get(this._sessionPagesCountKey);return e?(e=Number.parseInt(e),Number.isNaN(e)?0:e):0}getInstance(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Rn(...t)}}t(Rn,"_eventListenersMap",{click:!1,touchmove:!1,touchstart:!1,scroll:!1,beforeunload:!0,hashchange:!0});var Mn=new Rn(Se,bn);class Ln extends Sn{constructor(e){super(e),this.skipListKey=this.getKey("f.session.skipList"),this.urlSearchKey=this.getKey("f.session.url.search"),this.annoyanceLastClosedTsKey=this.getKey("f.session.annoyance.last_closed_ts"),this.annoyanceLastClosedPagesCount=this.getKey("f.session.annoyance.last_closed_pages_count"),Mn.registerKeys(this.skipListKey,this.urlSearchKey,this.annoyanceLastClosedTsKey,this.annoyanceLastClosedPagesCount)}getStats(){let e=Mn.getPersistedValue();return{sessionDurationMs:new Date-new Date(e.getStartISOString()),sessionPagesCount:this.getSessionPagesCount(),currentSession:e,sessionUrlSearchParams:this.getUrlSearchParams(),sessionAnnoyanceLastWidgetClosedMs:this.getSessionAnnoyanceDateTimeString()?new Date-new Date(this.getSessionAnnoyanceDateTimeString()):null,sessionAnnoyanceLastWidgetPagesCount:this.getSessionAnnoyancePagesCountString(),skipList:this.getSkipList(),isInCurrentSession:Mn.isInCurrentSession(),lastActivityDate:Mn.getLastActivityDate()}}getSkipList(){let e=Mn.get(this.skipListKey);return e&&JSON.parse(e)||[]}addToSkipList(e){var t=Mn.get(this.skipListKey);(t=JSON.parse(t)||[]).push(e),e=[...new Set(t)],Mn.set(this.skipListKey,JSON.stringify(e))}getNowDateTime(){return(new Date).toISOString()}incrementSessionPagesCount(){Mn.incrementSessionPagesCount()}getSessionPagesCount(){return Mn.getSessionPagesCount()}setUrlSearchParams(){let e=window.location.search;if(e){let t=this.getUrlSearchParams();t.includes(e)||(t.push(e),Mn.set(this.urlSearchKey,t.join(",")))}}getUrlSearchParams(){let e=Mn.get(this.urlSearchKey);return e?e.split(","):[]}getSessionAnnoyanceDateTimeString(){return Mn.get(this.annoyanceLastClosedTsKey)}getSessionAnnoyancePagesCountString(){return Mn.get(this.annoyanceLastClosedPagesCount)}setAnnoyLastClosed(){Mn.set(this.annoyanceLastClosedTsKey,this.getNowDateTime()),Mn.set(this.annoyanceLastClosedPagesCount,this.getSessionPagesCount())}destroy(){}}class wn extends Sn{constructor(e){super(e),document.addEventListener("mousemove",this.handleInteraction.bind(this)),document.addEventListener("scroll",this.handleInteraction.bind(this)),document.addEventListener("keydown",this.handleInteraction.bind(this)),document.addEventListener("click",this.handleInteraction.bind(this)),document.addEventListener("touchstart",this.handleInteraction.bind(this)),this.startTime=new Date,this.lastInteraction=new Date,this.maxUnActiveMs=this.maxReadPercent=0}handleInteraction(){this.lastInteraction=new Date}incrementPageCount(){this.incrementCount(this.getKey("f.page.count")),this.startTime=new Date,this.lastInteraction=new Date,this.maxReadPercent=this.maxUnActiveMs=0}getStats(){let e=Number.parseInt(100*(window.scrollY+window.innerHeight)/document.documentElement.scrollHeight);return this.maxReadPercent=Math.max(this.maxReadPercent,e),this.maxUnActiveMs=Math.max(this.maxUnActiveMs,new Date-this.lastInteraction),{timeSpentOnPageMs:new Date-this.startTime,readPercent:this.maxReadPercent,unActiveMs:this.maxUnActiveMs,lastViewIndex:this.getCount(this.getKey("f.page.count"))}}destroy(){document.removeEventListener("mousemove",this.handleInteraction.bind(this)),document.removeEventListener("scroll",this.handleInteraction.bind(this)),document.removeEventListener("keydown",this.handleInteraction.bind(this)),document.removeEventListener("click",this.handleInteraction.bind(this)),document.removeEventListener("touchstart",this.handleInteraction.bind(this))}}class Pn{constructor(){t(this,"listeners",{"*":[]})}emit(e,t){e=this.listeners[e],Array.isArray(e)&&e.forEach((e=>e(t))),this.listeners["*"].forEach((e=>e()))}on(e,t){let n=0;return this.listeners[e]&&this.listeners[e].length?(this.listeners[e].push(t),n=this.listeners[e].length-1):this.listeners[e]=[t],{off:()=>{this.listeners[e].splice(n,1)}}}destroy(){}}class Dn extends Sn{constructor(e){super(e)}view(e){this.map(this.getKey(Dn.storageKeys.VIEW)).put(e,(new Date).toISOString())}submit(e){this.map(this.getKey(Dn.storageKeys.SUBMIT)).put(e,(new Date).toISOString())}setRelativeTimerViewDate(e){this.map(this.getKey(Dn.storageKeys.RELATIVE_TIMER_VIEW_DATE)).put(e,(new Date).toISOString())}clearRelativeTimerViewDate(e){this.map(this.getKey(Dn.storageKeys.RELATIVE_TIMER_VIEW_DATE)).clear(e)}close(e){this.map(this.getKey(Dn.storageKeys.CLOSE)).incrementCount(e)}closeDate(e){this.map(this.getKey(Dn.storageKeys.CLOSE_DATE)).put(e,(new Date).toISOString())}destroy(){}getStats(){var e=this.map(this.getKey(Dn.storageKeys.VIEW)).value();let t=this.map(this.getKey(Dn.storageKeys.SUBMIT)).value(),n=this.map(this.getKey(Dn.storageKeys.CLOSE)).value(),i=this.map(this.getKey(Dn.storageKeys.CLOSE_DATE)).value(),r=this.map(this.getKey(Dn.storageKeys.RELATIVE_TIMER_VIEW_DATE)).value(),o={};for(let t in e)o[t]=o[t]?{...o[t],view:e[t]}:{view:e[t]};for(let e in t)o[e]=o[e]?{...o[e],submit:t[e]}:{submit:t[e]};for(let e in r)o[e]=o[e]?{...o[e],relativeTimerViewDate:r[e]}:{relativeTimerViewDate:r[e]};for(let t in n)e=m(n[t]),o[t]=o[t]?{...o[t],close:e}:{close:e};for(let e in i)o[e]=o[e]?{...o[e],closeDate:i[e]}:{closeDate:i[e]};return{formVariants:o}}}t(Dn,"storageKeys",{VIEW:"f.fv.view",SKIP:"f.fv.skip",SUBMIT:"f.fv.submit",CLOSE:"f.fv.close",CLOSE_DATE:"f.fv.closeDate",RELATIVE_TIMER_VIEW_DATE:"f.fv.relativeTimerViewDate"});let xn=new Set(["FLOATING_BOX","FLOATING_BAR","DETACHED"]);class kn{constructor(){this.formVariantVisibleMap=new Map,this.formVariantHoverMap=new Map}visible(e){this.formVariantVisibleMap.set(e,new Date)}hover(e){this.formVariantHoverMap.set(e,new Date)}getStats(){return{formVariantVisibleMap:this.formVariantVisibleMap,formVariantHoverMap:this.formVariantHoverMap}}close(e){this.formVariantVisibleMap.delete(e),this.formVariantHoverMap.delete(e)}}let Vn={SYSTEM_CLASS_PREFIX:"cl-",SYSTEM_ATTRIBUTE_PREFIX:"cl-"};class Fn extends Pn{constructor(){super();let e=Le.getPrefix().storagePrefix;this.siteStat=new In(e),this.sessionStat=new Ln(e),this.pageStat=new wn(e),this.formVariantStat=new Dn(e),this.formVariantHoverStat=new kn,this.performDetection(),this.mouseOutHandler=this.onMouseOut.bind(this),this.mouseOverHandler=this.onMouseOver.bind(this),document.addEventListener("mouseout",this.mouseOutHandler),document.addEventListener("mouseover",this.mouseOverHandler)}getStats(){return{...this.siteStat.getStats(),...this.sessionStat.getStats(),...this.pageStat.getStats(),...this.formVariantStat.getStats(),...this.formVariantHoverStat.getStats()}}performDetection(){this.pageStat.incrementPageCount(),this.sessionStat.incrementSessionPagesCount(),this.sessionStat.setUrlSearchParams()}onUrlChanged(){this.reInitPageStat(),this.performDetection()}reInitPageStat(){this.pageStat.destroy(),this.pageStat=new wn(Le.getPrefix().storagePrefix)}onMouseOut(e){null==e.toElement&&null==e.relatedTarget&&this.emit("mouseout")}onMouseOver(e){e.toElement&&"HTML"===e.toElement.tagName||e.toElement===document.body?this.emit("mouseover"):(e=e.composedPath().find((e=>e instanceof HTMLElement&&e.getAttribute(p("widget-id")))))&&(e=e.getAttribute(p("widget-id")),this.formVariantHoverStat.hover(e))}onWidgetClosed(e){this.formVariantStat.close(e.id),this.formVariantHoverStat.close(e.id),"CONTENT_LOCKER"===e.type&&this.formVariantStat.closeDate(e.id),xn.has(e.type)&&this.sessionStat.setAnnoyLastClosed()}destroy(){this.pageStat.destroy(),document.removeEventListener("mouseout",this.mouseOutHandler),document.removeEventListener("mouseover",this.mouseOverHandler)}}let Un={SUBSCRIPTION_FORM:"SUBSCRIPTION_FORM",REQUEST_FORM:"REQUEST_FORM",INFORMER:"INFORMER",AGE_VERIFY:"AGE_VERIFY"};class Bn{static parseFormVariantId(e){return{formId:+e.split("f")[1].split("v")[0],variantId:+e.split("v")[1],formVariantId:e}}static createFormParams(e,t,n,i){var r,o;let{formId:s,variantId:a}=Bn.parseFormVariantId(e);var l=Ut.getLanguageForForms(),c=Ne.get("clContactId");let d=Le.getConfig();var h,u;(n={formId:s,variantId:a,lang:l,browserLanguage:l,appearanceLanguage:n,contactId:c,accountId:d.siteId},l=Object.values(d.formVariants).find((t=>t.id===e)),(c=Object.values(d.forms).find((e=>e.id===s)))&&(n.iid=c.__interactionId),l&&l.hasOwnProperty("useCase")&&(n.contactId=g(l)),l&&l.hasOwnProperty("appearanceRevision")&&(n.appearanceRevision=l.appearanceRevision),l&&l.hasOwnProperty("revision")&&(n.revision=l.revision),l&&null!==(r=l.asyncRules)&&void 0!==r&&null!==(o=r.HIDE_FOR_SUBSCRIBERS)&&void 0!==o&&o.enabled)&&(n.checkThisWidgetOnly=!(null===(h=l.asyncRules)||void 0===h||null===(u=h.HIDE_FOR_SUBSCRIBERS)||void 0===u||!u.checkThisWidgetOnly));return n.triggeredBy=t||"Rules",i&&(n.random=Math.floor(1e6*Math.random())+1),d.formConfig.CUSTOM_DOMAIN&&(n.customDomain=d.formConfig.CUSTOM_DOMAIN),n}static createPageParams(){return{type:"view",accountId:Le.getConfig().accountId||Le.getConfig().orgId}}}t(Bn,"createVariantsUUID",(function(e){return e=e.map((e=>Bn.createFormParams(e.id))),btoa(unescape(encodeURIComponent(JSON.stringify(e))))})),t(Bn,"createVariantUUID",E);class Hn{constructor(e){this.uri=e}get(){return"".concat(this.getOrigin()).concat(this.uri)}_getBaseUrl(){let e=Le.getConfig();return e&&e.formConfig&&e.formConfig.url||e.apiConfig&&e.apiConfig.hostUrl}getOrigin(){return new URL("".concat(this._getBaseUrl())).origin}}class Gn{getAppearance(e,t){return tt.execute(new Hn("/forms/v3/page/".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r(Bn.createFormParams(e,void 0,void 0,t),["iid","contactId"]))))))).get(),"GET",null,{"Content-Type":"text/plain","cl-customer-id":at.getUserIdentifier()}).then((e=>e.body)).catch((e=>(Ce.error(e,"error on FormVariantDataSource#getAppearance"),{html:""})))}getDebugFormVariant(e){return tt.execute(new Hn("/forms/v1/config/".concat(E("f".concat(e,"v").concat(e)))).get(),"GET",null,{"Content-Type":"text/plain","cl-customer-id":at.getUserIdentifier()}).then((e=>e.body)).catch((e=>(Ce.error(e,"error on FormVariantDataSource#getDebugFormVariant"),null)))}}class jn{async loadIfNeeded(e){let t=Le.getConfig();if((e=e.filter((e=>!t.forms[e]))).length){var n=new Gn;return(e=await Promise.all(e.map((e=>n.getDebugFormVariant(e))))).filter((e=>!!e)).forEach((e=>{let{form:n,formVariant:i}=e;t.forms[n.id]=n,t.formVariants[i.id]=i})),e}}}var Wn=new class extends fn{constructor(){super(),t(this,"_queryParamNamesNeedUpdate",!0),t(this,"_queryParamNames",{})}getQueryParamNames(){return this._queryParamNames}publishedFormIdToDebug(){this._updateQueryParamNamesIfNeeded();var e=new URL(window.location.href.toLowerCase());return e=new URLSearchParams(e.searchParams),parseInt(e.get(this._queryParamNames.DEBUG_PUBLISHED_FORM))||0}isDebugVariantShouldBeShown(e,t){return this._updateQueryParamNamesIfNeeded(),!!this._getConfigsToDebug(e).find((e=>e.id===t))}isDebugShouldIgnoreRules(){this._updateQueryParamNamesIfNeeded();var e=new URL(window.location.href.toLowerCase());return function(e,t){if(null==e){if(t)throw Error("Parameter 'str' is null or undefined.");return!1}if("boolean"==typeof e)return!0===e;if("string"==typeof e){if(""==e)return!1;if("true"==(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase()||"yes"==e.toLowerCase())return!0;e=(e=e.replace(/,/g,".")).replace(/^\s*\-\s*/g,"-")}return!isNaN(e)&&0!=parseFloat(e)}((e=new URLSearchParams(e.searchParams)).get(this._queryParamNames.DEBUG_IGNORE_RULES))}_updateQueryParamNamesIfNeeded(){if(this._queryParamNamesNeedUpdate){var e=Le.getPrefix().debugPrefix;e&&(this._queryParamNamesNeedUpdate=!1,this._queryParamNames={DEBUG_FORM:"".concat(e,"DebugForm").toLowerCase(),DEBUG_PUBLISHED_FORM:"".concat(e,"PublishedForm").toLowerCase(),DEBUG_FORM_VARIANT:"".concat(e,"DebugFormVariant").toLowerCase(),DEBUG_IGNORE_RULES:"".concat(e,"IgnoreRules").toLowerCase()}),e=new jn;var t=new URL(window.location.href.toLowerCase()),n=new URLSearchParams(t.searchParams);t=this._getDebugIds(n,this._queryParamNames.DEBUG_FORM),n=this._getDebugIds(n,this._queryParamNames.DEBUG_PUBLISHED_FORM),(t=[...new Set(t.concat(n)).values()].filter((e=>!Le.getConfig().forms[e]))).length&&e.loadIfNeeded(t)}}_getConfigsToDebug(e){if(null===window.location.href||!this.isDebugQueryStringPresentInUrl(this._queryParamNames))return[];var t=new URL(window.location.href.toLowerCase());t=new URLSearchParams(t.searchParams);let n=this._getDebugIds(t,this._queryParamNames.DEBUG_FORM);return e=e.filter((e=>n.includes(e.formId))),this._getFormConfigsToDebug(e,t)}_getFormConfigsToDebug(e,t){if(t.has(this._queryParamNames.DEBUG_FORM_VARIANT)){let n=t.get(this._queryParamNames.DEBUG_FORM_VARIANT).split(",");e=e.filter((e=>n.includes(e.id)))}return e}};var zn=new class{formVariantHasEnabledAsyncRules(e){return!!(e&&e.asyncRules&&Object.keys(e.asyncRules).length)&&Object.keys(e.asyncRules).map((t=>e.asyncRules[t])).some((e=>e.enabled))}areFormsPresent(){var e=Le.getConfig();let t=0<Object.values(e.forms||{}).length;return e=0<Object.values(e.formVariants||{}).length,t&&e}getForm(e){return Object.values(Le.getConfig().forms||{}).find((t=>t.id===e))}getFormVariant(e){return Object.values(Le.getConfig().formVariants||{}).find((t=>t.id===e))}getFormVariantByVariantId(e){return Object.values(Le.getConfig().formVariants||{}).find((t=>t.id.endsWith("v".concat(e))))}getFormVariants(){return Object.values(Le.getConfig().formVariants||{})}getStaticActiveFormVariants(e){let t=this._getActiveFormIDs(e);return Object.values(e.formVariants||{}).filter((e=>"BUILT_IN"===e.type)).filter((e=>t.includes(e.formId)))}getDebugFormVariants(){let e=Le.getConfig(),t=Object.values(e.forms||{}).filter((e=>"DEBUG"===e.publishStatus)).map((e=>e.id));return Object.values(e.formVariants||{}).filter((e=>t.includes(e.formId)))}getFormVariantsToRender(e){return Object.values(e.formVariants||{}).filter((e=>this.filterByStatus(e)))}filterByStatus(e){return"DEBUG"!==this.getForm(e.formId).publishStatus||Wn.isDebugVariantShouldBeShown(this.getDebugFormVariants(),e.id)}_getActiveFormIDs(e){return Object.values(e.forms||{}).filter((e=>"FOR_ALL"===e.publishStatus)).map((e=>e.id))}};class Kn{static isInstanceInDebugMode(){return Le.getInstanceDebugMode()}static isFormStatusIsDebug(e){return"DEBUG"===zn.getForm(e).publishStatus}static isInDebugMode(e){return Kn.isInstanceInDebugMode()||Kn.isFormStatusIsDebug(e)}}let Qn={BEFORE:"BEFORE",AFTER:"AFTER",INSIDE:"INSIDE"};class qn{static removeNode(e,t){var n=this.getParentPath(t);return t=t[t.length-1],(n=this.getNodeByPath(e,n))?((e=n.children.splice(t,1)[0]).path=null,qn.reIndex(n,n.path),e):((n=e.splice(t,1)[0]).path=null,e.forEach(((e,t)=>{e.path=[t],qn.reIndex(e,e.path)})),n)}static insertNode(e,t,n,i){var r=qn.getPathToInsert(t,i,n);return t=i===Qn.INSIDE?t:this.getParentPath(r),t=this.getNodeByPath(n,t),r=r[r.length-1],t?(t.children.splice(r,0,e),qn.reIndex(t,t.path)):(n.splice(r,0,e),n.forEach(((e,t)=>{e.path=[t],qn.reIndex(e,e.path)}))),e}static moveNode(e,t,n,i){(n=qn.getNodeByPath(e,n))&&(t=qn.removeNode(e,t),n=qn.getNodeById(e,n.id).path,qn.insertNode(t,n,e,i))}static iterateDepthFirst(){return v(...arguments)}static reIndex(e,t){e.path=t,e.children&&e.children.forEach(((e,n)=>{qn.reIndex(e,t.concat(n))}))}static getRelativePath(e){return e.slice(1,e.length)}static getParentPath(e){return e.slice(0,-1)}static getNodeByPath(e,t){for(let n=0;n<t.length;n++){if(n===t.length-1)return e[t[n]]||null;if(!e[t[n]])return null;e=e[t[n]].children}}static getNodeById(e,t){let n=null;for(let i=0;i<e.length;i++){let r=e[i];if(n)break;if(r.id===t){n=r;break}r.children&&r.children.length&&(n=this.getNodeById(r.children,t))}return n}static getPathToInsert(e,t,n){let i,r=e[e.length-1];return t===Qn.BEFORE?i=e:t===Qn.AFTER?(i=e.slice(),i[e.length-1]=r+1):t===Qn.INSIDE&&(i=e.concat([qn.getNodeByPath(n,e).children.length])),i}static getNodeOnClickData(e){let t=[],n={};return qn.iterateDepthFirst(e,(e=>{var i,r,o;let s=null===(r=null===(i=e.props)||void 0===i?void 0:i.handlers)||void 0===r?void 0:r.find((e=>"CLICK"===e.type)).actions;null!=s&&s.length&&(t=[...t,...s]),Object.keys((null===(o=e.props)||void 0===o?void 0:o.content)||{}).filter((e=>["detractor","passive","promoter"].includes(e))).map((t=>{var n;return((null===(n=e.props)||void 0===n?void 0:n.content)||{})[t]||null})).filter((e=>e)).forEach((e=>n[e]=e))})),{actions:t,npsViewIds:Object.keys(n)}}}class Xn{constructor(){this.listeners=Xn.createDefaultListenersState()}emit(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=this.listeners[e];i&&Object.values(i).forEach((i=>i(t,e,n))),Object.values(this.listeners["*"]).forEach((i=>i(t,e,n)))}on(e,t){let n=it.generate(),i=this.listeners[e];return i?i[n]=t:this.listeners[e]={[n]:t},{off:()=>{var t,i;null!==(i=null===(t=this.listeners)||void 0===t?void 0:t[e])&&void 0!==i&&i[n]&&delete this.listeners[e][n]}}}destroy(){this.listeners=Xn.createDefaultListenersState()}}Xn.createDefaultListenersState=()=>({"*":{}});class Yn extends Xn{constructor(){super()}subscribe(){}getValue(e){return e?{processor:(e,t)=>Yn.processModel(t)}:{}}static processModel(e,t){var n,i,r;if(!e.arguments)return"";let o,s=e.arguments.find((e=>"dataLayerEventName"===e.name)),a=e.arguments.find((e=>"dataLayerPropPath"===e.name));if(!(s&&s.value&&a&&a.value&&window.dataLayer))return"";for(let e=window.dataLayer.length-1;0<=e;e--){if((null===(n=window.dataLayer[e])||void 0===n?void 0:n.event)===s.value){o=window.dataLayer[e];break}if("event"===(null===(i=window.dataLayer[e])||void 0===i?void 0:i[0])&&(null===(r=window.dataLayer[e])||void 0===r?void 0:r[1])===s.value){o=window.dataLayer[e][2];break}}return o?(n=function(e,t){return e.reduce(((e,n)=>e.concat(t(n))),[])}(a.value.split(".").map((e=>e.trim())).map((e=>e.split(/[\[\]]/))),(e=>e)).filter((e=>!!e)),Yn.getValueByPropPath(o,n,e,t)):""}static getValueByPropPath(e,t,n,i){try{let n=t.reduce(((e,t)=>{if(_(e)||Array.isArray(e))return e[t];throw Error('Tried to access non object data by propName "'.concat(t,'". Data: ').concat(e))}),e);return Array.isArray(n)&&!i?n.join(", "):n}catch(e){return""}}}Yn.sourceId="DATA_LAYER";var Zn=new class{constructor(e){this.hostURL=e}track(e,t){let n="".concat(this.hostURL,"/user-activity/public/v1/activity");return e={activityType:e,page:JSON.stringify(t)},navigator.sendBeacon(n,JSON.stringify(e)),Promise.resolve()}}(Le.getConfig().apiConfig.hostUrl);class Jn{constructor(e,n){t(this,"injectedConnectorIds",[]),t(this,"injectedPreviewMap",{}),t(this,"cacheDocuments",{}),t(this,"appearanceLoading",!1),t(this,"userActionsDetector",null),t(this,"componentResolver",null),this.dataSource=e,this.browserLanguageService=n}activate(e,t){this.userActionsDetector=e,this.componentResolver=t}destroy(){}destroyForm(e){this.removeInjectedDocumentConnector(e.id),this.removeInjectedConnectorId(e.id)}async getAppearanceFromCacheOrLoad(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.ignoreLoading||(this.appearanceLoading=!0);let n=e.id;var i=Kn.isInDebugMode(e.formId);return i=this.cacheDocuments[n]||await this.dataSource.getAppearance(n,i),this.cacheDocuments[n]=i,t.ignoreLoading||(this.appearanceLoading=!1),i}prepareForm(e,t){return this.getAppearanceFromCacheOrLoad(e,t).then((async e=>{if(!e||!e.document)return{appearance:e,manifests:[]};let{manifests:t}=await this.componentResolver.loadComponentsIfNecessary(null==e?void 0:e.document,Le.getConfig().apiConfig.staticResourcesUrl);return{appearance:e,manifests:t}}))}isAppearanceLoading(){return!!this.appearanceLoading}addInjectedConnectorId(e){this.injectedConnectorIds.push(e)}addInjectedDocumentConnector(e,t){this.injectedPreviewMap[e]=t}getInjectedDocumentConnectors(){return Object.values(this.injectedPreviewMap)}removeInjectedDocumentConnector(e){let t=this.injectedPreviewMap[e];t&&(t.disconnect(),delete this.injectedPreviewMap[e])}removeInjectedConnectorId(e){this.injectedConnectorIds=this.injectedConnectorIds.filter((t=>t!==e))}getInjectedConnectorIds(){return this.injectedConnectorIds}isVariantAlreadyInjected(e){return!!this.getInjectedConnectorIds().find((t=>t===e))}addWidgetClickHandler(e,t,n){n.useCase===Un.INFORMER&&e.on("WIDGET_CONTENT_CLICKED",(()=>{t.send("FormClick_[Name]")}))}isDocumentModelValid(e,t){return Object.keys(e).length?{valid:!0}:{valid:!1,errorMessage:"No appearance or documentModel found"}}}class $n{constructor(e,t,n){this.formVariantId=e,this.formType=t,this.form=n,this.eventsStatusMap={}}gaLoaded(){return window.ga&&ga.create}getPayload(e){var t;return{hitType:"event",eventCategory:this.formType,eventAction:e,eventLabel:(null===(t=this.form)||void 0===t?void 0:t.name)||this.formVariantId}}getEventSendStatus(e){return this.eventsStatusMap[e]&&this.eventsStatusMap[e].sent}setEventSendStatus(e){this.eventsStatusMap[e]={sent:!(1<arguments.length&&void 0!==arguments[1])||arguments[1]}}send(e){this.gaLoaded()&&!this.getEventSendStatus(e)&&(ga("send",this.getPayload(e)),this.setEventSendStatus(e))}destroy(){}}class ei{constructor(e,t,n){this.formVariantId=e,this.formType=t,this.form=n,this.eventsStatusMap={},this.tagIds=[]}gaLoaded(){return window.dataLayer&&window.dataLayer.length}updateTagIds(){this.tagIds=(window.dataLayer||[]).filter((e=>e&&e.length&&1<e.length)).filter((e=>e[0]&&"config"===e[0])).filter((e=>e[1]&&String(e[1]).startsWith("G-"))).map((e=>e[1]))}getPayload(e){var t;return{eventCategory:this.formType,eventAction:e,eventLabel:(null===(t=this.form)||void 0===t?void 0:t.name)||this.formVariantId}}getEventSendStatus(e){return this.eventsStatusMap[e]&&this.eventsStatusMap[e].sent}setEventSendStatus(e){this.eventsStatusMap[e]={sent:!(1<arguments.length&&void 0!==arguments[1])||arguments[1]}}isGtag(){return this.tagIds.length&&window.gtag&&"function"==typeof gtag}send(e){if(this.updateTagIds(),this.gaLoaded()&&!this.getEventSendStatus(e)){let t=this.getPayload(e);if(this.isGtag())this.tagIds.forEach((e=>{t.send_to=e;try{window.gtag("event",Se.getProductName(),t)}catch(e){Ce.error("Gtag send tagIds",e)}}));else try{t.event=Se.getProductName(),window.dataLayer.push(t)}catch(e){Ce.error("Gtag pushing to GTMs dataLayer",e)}this.setEventSendStatus(e)}}destroy(){}}class ti{static create(e,t,n,i){if("GOOGLE_ANALYTICS"===e.name)return[new $n(t,n,i),new ei(t,n,i)];throw Error("Unknown TrackerName: "+e.name)}}class ni{constructor(e){let{formId:t,variantId:n,addReferrer:i,triggeredBy:r}=e;this._payload={formId:t,variantId:n,type:"click",triggeredBy:r},i&&(this._payload.referrer=window.location.href)}get(){return btoa(JSON.stringify(this._payload))}}class ii{constructor(e){this.params=e}handle(){this.onFormClicked()}onFormClicked(){if(!Ve.isFreePlanWithBrandedWidgets()||!ke.isBot()){var e=new ni({...this.params,addReferrer:"DEBUG"!==zn.getFormVariant("f".concat(this.params.formId,"v").concat(this.params.variantId)).publishStatus}).get();tt.execute(new Hn("/forms/v1/event").get(),"POST",e,{"Content-Type":"text/plain","cl-customer-id":at.getUserIdentifier()}).catch((e=>Ce.error(e,"onFormsReceived error on FormClickedEventHandler: ")))}}}class ri{constructor(e){this.trackers=[],this.formVariant=zn.getFormVariant(e),this.form=zn.getForm(this.formVariant.formId),this.isInDebugMode=Kn.isInDebugMode(this.formVariant.formId)}activate(){this.formVariant.tracking&&this.formVariant.tracking.trackers&&this.formVariant.tracking.trackers.forEach((e=>{e=ti.create(e,this.formVariant.id,this.formVariant.type,this.form),this.trackers.push(...e)}))}transformEventName(e){return e.replace("[Name]",this.formVariant.id)}send(e){if(!this.isInDebugMode){var t=this.transformEventName(e);this.trackers.forEach((e=>{e.send(t)}))}}trackClick(){new ii(Bn.createFormParams(this.formVariant.id)).handle()}destroy(){this.trackers.forEach((e=>e.destroy()))}}let oi={BUILT_IN:"BUILT_IN",DETACHED:"DETACHED",FLOATING_BOX:"FLOATING_BOX",FLOATING_BAR:"FLOATING_BAR",LAUNCHER:"LAUNCHER",CONTENT_LOCKER:"CONTENT_LOCKER"};class si{static get(e,t){return t.style.getPropertyValue("--".concat(e))}static apply(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;f(e,(n=>{let i="--".concat(n);n=e[n],t.style.getPropertyValue(i)||t.style.setProperty(i,n)}))}static override(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;f(e,(n=>{let i="--".concat(n);t.style.setProperty(i,e[n])}))}}class ai{constructor(e){this.state=e||{}}getState(){return this.state}setState(e){this.state=Object.assign(Object.assign({},this.state),e)}destroy(){}}var li=function(e){switch(typeof e){case"string":e=e&&e.length;break;case"boolean":break;case"number":e=!isNaN(e);break;default:e=!!e}return{isValid:e,errorKey:"REQUIRED"}};class ci{constructor(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0,i=3<arguments.length?arguments[3]:void 0;this.control=e,this.customValidatorsMap=n,this.asyncCustomValidators=i,this.required=t.required,this.validator=t.validator}async isValid(e){return!(await this.getErrorKeys(e)).length}getErrorKeys(e){if(!this.required&&!e)return Promise.resolve([]);let t=this.getSyncErrorKeys(e),n=[];return this.validator&&this.asyncCustomValidators&&this.validator in this.asyncCustomValidators&&n.push(this.asyncCustomValidators[this.validator]),n.length?Promise.all(n.map((n=>n(e,t)))).then((e=>(e.forEach((e=>{null!==e.value&&void 0!==e.value&&this.control.setValue(e.value,{silent:!0,skipValidation:!0,skipElementUpdate:!0})})),e=e.filter((e=>!e.isValid)).map((e=>e.errorKey)),[...t,...e]))):Promise.resolve(t)}getSyncErrorKeys(e){if(!this.required&&!e)return[];var t=[];return this.required&&(this.customValidatorsMap&&this.customValidatorsMap.REQUIRED?t.push(this.customValidatorsMap.REQUIRED):t.push(li)),this.validator&&this.customValidatorsMap&&"REQUIRED"!==this.validator&&this.validator in this.customValidatorsMap&&t.push(this.customValidatorsMap[this.validator]),t.length?((t=t.map((t=>t(e)))).forEach((e=>{null!==e.value&&void 0!==e.value&&this.control.setValue(e.value,{silent:!0,skipValidation:!0,skipElementUpdate:!0})})),t.filter((e=>!e.isValid)).map((e=>e.errorKey))):[]}}let di={valueChanged:"valueChanged",validationStatusChanged:"validationStatusChanged",touchedStatusChanged:"touchedStatusChanged"};class hi extends Xn{constructor(e,t,n,i,r){if(super(),this.componentId=e.componentId,this.name=e.name,this.value=(this.defaultValue=e.defaultValue)?e.defaultValue:void 0,this.validator=new ci(this,e.validation,n,i),this.errorKeys=this.validator.getSyncErrorKeys(this.getValue()),this.valid=!this.errorKeys.length,this.pending=this.disabled=!1,this.debounceValue=e.hasOwnProperty("debounceValue")?e.debounceValue:300,this.tracking=r,this.valueChanged=this.touched=!1,t=(this.elementRef=t)?this.elementRef.getAttribute("type"):null,this.elementRef&&e.defaultValue&&("checkbox"===t?this.elementRef.checked=e.defaultValue:this.elementRef.value=e.defaultValue),this.debouncedValidate=this.debounceValue?y((e=>this.validate(e)),this.debounceValue):this.validate.bind(this),this.elementRef){let n="checkbox"===t;this.elementRef.addEventListener(e.triggerEvent?e.triggerEvent:"input",(e=>{this.inputElementValueChanged(n?e.target.checked:e.target.value)})),this.elementRef.addEventListener("blur",(()=>{this.markAsTouched()}))}}inputElementValueChanged(e){this.tracking.send("FormStartFilling_[Name]"),this.setValue(e)}setDisabled(){this.disabled=!0,this.elementRef&&this.elementRef.setAttribute("disabled","disabled")}setEnabled(){this.disabled=!1,this.elementRef&&this.elementRef.removeAttribute("disabled")}setPending(e){this.pending=e}getName(){return this.name}getValue(){return this.value}getComponentId(){return this.componentId}setValue(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{silent:!1,skipValidation:!1,skipElementUpdate:!1};t.skipElementUpdate||(this.valueChanged=this.value!==e),this.value=e,this.elementRef&&!t.skipElementUpdate&&(this.elementRef.value=e),t.skipValidation?!t.silent&&this.valueChanged&&this.emit(di.valueChanged,e):(this.pending=!0,this.emit(di.validationStatusChanged,"pending"),this.debouncedValidate(t)),t.silent||t.skipValidation||this.elementRef||this.markAsTouched()}isValid(){return this.valid}isPending(){return this.pending}async validate(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{silent:!1};this.pending=!0;let t=await this.validator.getErrorKeys(this.getValue());return this.valid=!t.length,this.errorKeys=t,this.pending=!1,e.silent||(this.emit(di.validationStatusChanged,this.valid?"valid":"invalid"),this.valueChanged&&(this.emit(di.valueChanged,this.getValue()),this.valueChanged=!1)),this.valid}markAsTouched(){this.touched=!0,this.emit(di.touchedStatusChanged)}isTouched(){return this.touched}getErrorKeys(){return this.errorKeys}destroy(){super.destroy()}}let ui=Object.assign(Object.assign({},di),{validationChecked:"validationChecked",controlRegistered:"controlRegistered"});class mi extends Xn{constructor(e){super(),this.controls={},this.tracking=e,this.preventSubmit=this.submitQueuedAfterPending=!1}registerControl(e,t,n,i){let r=new hi(e,t,n,i,this.tracking);return this.controls[e.name]=r,r.on("*",((e,t)=>{if(t===di.valueChanged)this.emit(ui.valueChanged,r);else this.emit(t,e),t===di.validationStatusChanged&&this.emit(ui.validationChecked,this.isValid())})),this.emit(ui.controlRegistered,r),this.controls[e.name]}getControl(e){return this.controls[e]}hasControl(e){return!!this.getControl(e)}setControlValue(e,t){this.controls[e].setValue(t)}setPreventSubmit(e){this.preventSubmit=e}destroy(){super.destroy()}isValid(){return Object.values(this.controls).every((e=>e.isValid()))}isPending(){return!!Object.values(this.controls).filter((e=>e.isPending())).length}getControlsMap(){return Object.values(this.controls).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.getName()]:t.getValue()})),{})}getControlsAsArray(){return Object.values(this.controls)}setDisabledAll(){this.getControlsAsArray().forEach((e=>e.setDisabled()))}setEnabledAll(){this.getControlsAsArray().forEach((e=>e.setEnabled()))}markAsTouched(){Object.values(this.controls).forEach((e=>e.markAsTouched()))}isTouched(){return Object.values(this.controls).every((e=>e.touched()))}}let pi={VIEW:"VIEW",MODULE:"MODULE",CONTAINER:"CONTAINER",SLIDER:"SLIDER",TEXT:"TEXT",INPUT:"INPUT",BUTTON:"BUTTON",IMAGE:"IMAGE",CONSENT:"CONSENT",FLOATING_IMAGE:"FLOATING_IMAGE",COLUMN:"COLUMN"};class gi{static extract(e){let t=e.views.map((e=>{const t=e.children.map((e=>e.type===pi.MODULE?Object.assign(Object.assign({},e),gi.moduleToContainerParams):e));return Object.assign(Object.assign({},e),{children:t})}));return Object.assign(Object.assign({},e),{views:t})}static sort(e,t){return e.index>t.index?1:-1}static reIndex(e,t){return Object.assign(Object.assign({},e),{index:t+e.index})}}gi.moduleToContainerParams={name:"SysContainerComponent",version:"1.0.0"};class Ei extends Xn{constructor(e){super(),this.json=e,this.flatJson=gi.extract(this.json)}setComponentRef(e,t){qn.getNodeById(this.getViews(),e).componentRef=t}getModel(){return this.flatJson}getView(e){return this.flatJson.views[e]}getViews(){return this.flatJson.views}getShared(){return this.flatJson.shared}iterateViewModelAndExecute(e,t){e=this.getView(e),qn.iterateDepthFirst(e,t)}destroy(){}destroyView(e){this.iterateViewModelAndExecute(e,(e=>{e.componentRef&&(e.componentRef.remove(),e.componentRef=null)}))}}class vi{constructor(e){this.config=Object.assign(Object.assign({},{subscribeContactUrl:""}),e||{})}getConfig(e){return e?this.config[e]:this.config}}class _i extends Xn{constructor(e,t){super(),this.documentModel=e,this.containerElement=t,this.mobileBreakpointWidth=this.documentModel.getShared().mobileBreakpointWidth,this._isMobile=this._calculateMobileFlag(),this.documentModel.on("ENVIRONMENT_UPDATE",(e=>{this._isMobile=e.isMobileEnv,this.emit(_i.changeEventName,this._isMobile)}))}isMobile(){return this._isMobile}destroy(){super.destroy()}_calculateMobileFlag(){return this._getElementsWidthPx(this.containerElement)<=this.mobileBreakpointWidth}_getElementsWidthPx(e){return parseInt(getComputedStyle(e).width)}}_i.changeEventName="CHANGE";let fi=()=>{const e=window.screen.orientation||window.screen.mozOrientation||window.screen.msOrientation;return e?e.type.includes("portrait")?"PORTRAIT":"LANDSCAPE":void 0===window.orientation||0===window.orientation||180===window.orientation?"PORTRAIT":90===window.orientation||-90===window.orientation?"LANDSCAPE":void 0},yi=()=>/iPad/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;class Ti extends Xn{constructor(e,t){var n;super(),this.documentModel=e,this._orientation=null!==(n=t.config.defaultOrientation)&&void 0!==n?n:fi(),this.documentModel.on("ENVIRONMENT_UPDATE",(e=>{e.orientation&&(this._orientation=e.orientation,this.emit(Ti.changeEventName,this._orientation))})),this.handleOrientationChangeBound=this.handleOrientationChange.bind(this),this.addOrientationChangeListener()}isPortrait(){return"PORTRAIT"===this._orientation}handleOrientationChange(e){var t,n;this._orientation=null!==(n=null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.orientation)&&void 0!==n?n:fi(),this.emit(Ti.changeEventName,this._orientation)}addOrientationChangeListener(){/iPhone/i.test(navigator.userAgent)||yi()||!window.screen.orientation?"orientation"in window&&window.addEventListener("orientationchange",this.handleOrientationChangeBound):window.screen.orientation.addEventListener("change",this.handleOrientationChangeBound)}removeOrientationChangeListener(){/iPhone/i.test(navigator.userAgent)||yi()||!window.screen.orientation?"orientation"in window&&window.removeEventListener("orientationchange",this.handleOrientationChangeBound):window.screen.orientation.removeEventListener("change",this.handleOrientationChangeBound)}destroy(){super.destroy(),this.removeOrientationChangeListener()}}Ti.changeEventName="CHANGE";class Ci extends Xn{constructor(e){super(),this.handleMobileBreakpoint(e.getShared().mobileBreakpointWidth),e.on("ENVIRONMENT_UPDATE",(e=>{({isMobileEnv:e}=e),this._isMobile=e,this.emit(Ci.changeEventName,this._isMobile)}))}handleMobileBreakpoint(e){this.mobileBreakpointWidth=e,e=Number.isInteger(this.mobileBreakpointWidth)?"".concat(this.mobileBreakpointWidth,"px"):this.mobileBreakpointWidth,this.mediaQueryList=window.matchMedia("(max-width: ".concat(e,")")),this.mediaQueryList.addListener(this.listener.bind(this)),this._isMobile=this.mediaQueryList.matches,this.emit(Ci.changeEventName,this._isMobile)}isMobile(){return this._isMobile}listener(e){this._isMobile=e.matches,this.emit(Ci.changeEventName,this._isMobile)}destroy(){super.destroy(),this.mediaQueryList.removeListener(this.listener.bind(this))}}Ci.changeEventName="CHANGE";class Ii{constructor(e,t,n){this.documentModel=e,this.viewRenderer=t,this.entryModuleType=n}handleModelUpdate(e,t){switch(e){case"COMPONENT_PROPS_UPDATE":let{id:i,data:r}=t;if(!(t=qn.getNodeById(this.documentModel.getViews(),i)))break;if(!(t=t.path.reduce(((e,t,n)=>0===n?this.documentModel.getViews()[t]:e.children[t]),this.documentModel.getViews())))break;t.props=Object.assign({},r),this.documentModel.emit("".concat("COMPONENT_PROPS_UPDATE","_").concat(i),r);break;case"SHARED_UPDATE":e=this.documentModel.getShared(),Object.assign(e,t),this.documentModel.emit("SHARED_UPDATE_ALL");break;case"MOBILE_BREAKPOINT_UPDATE":this.documentModel.getShared().mobileBreakpointWidth=t.mobileBreakpointWidth;break;case"ENVIRONMENT_UPDATE":this.documentModel.emit("ENVIRONMENT_UPDATE",t);break;case"TEXT_CLASS_ADDED":this.documentModel.getShared().textClasses[t.id]=t;break;case"TEXT_CLASS_UPDATED":this.documentModel.getShared().textClasses[t.id]=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"TEXT_CLASS_REMOVED":delete this.documentModel.getShared().textClasses[t];break;case"HEADER_FONT_FAMILY_UPDATE":this.documentModel.getShared().headerFontFamily=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"TEXT_FONT_FAMILY_UPDATE":this.documentModel.getShared().textFontFamily=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"COLOR_SCHEMA_UPDATE":this.documentModel.getShared().cssVars=t,this.documentModel.emit("COLOR_SCHEMA_UPDATE",t);break;case"LINK_PARAMS_UPDATE":this.documentModel.getShared().linkParams=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"COMPONENT_REMOVE":this.removeComponent(t.path);break;case"COMPONENT_INSERT":let{insertPosition:o,targetPath:s,model:a}=t;t=qn.getNodeByPath(this.documentModel.getViews(),s),qn.insertNode(a,s,this.documentModel.getViews(),o),this.viewRenderer.renderComponent(t,a,this.entryModuleType,o);break;case"COMPONENT_MOVE":let{fromPath:l,insertPosition:c,targetPath:d}=t;t=d[0];var n=this.documentModel.getViews()[t];(e=qn.getNodeByPath(this.documentModel.getViews(),d))&&(t=this.removeComponent(l),n=qn.getNodeById([n],e.id).path,qn.insertNode(t,n,this.documentModel.getViews(),c),this.viewRenderer.renderComponent(e,t,this.entryModuleType,c))}}removeComponent(e){let t=qn.getNodeByPath(this.documentModel.getViews(),e);if(t)return t.componentRef.remove(),qn.removeNode(this.documentModel.getViews(),e)}}class Si{static applyHostStyles(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;let i=3<arguments.length?arguments[3]:void 0;var r,o,s;(n=null===(o=null===(r=null==n?void 0:n.props)||void 0===r?void 0:r.handlers)||void 0===o?void 0:o.find((e=>"CLICK"===e.type)))&&null!==(s=n.actions)&&void 0!==s&&s.length&&(t.style.cursor="pointer"),e!==pi.VIEW&&e!==pi.CONTAINER&&e!==pi.COLUMN||(t.style.display=i===oi.CONTENT_LOCKER&&e===pi.VIEW?"flex":"inline-flex",t.style.position="relative"),t.style.boxSizing="border-box"}constructor(){this.styles="/* common styles */ *, *:before, *:after { box-sizing: border-box; font-family: inherit; }"}setStyles(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";this.styles="".concat(this.styles," ").concat(e)}getStyles(){return this.styles}}class bi{static camelCaseToDashCase(e){return e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))}static camelCaseToUpperSnakeCase(e){return e.replace(/[A-Z]/g,(e=>"_"+e)).toUpperCase()}}class Ai{static getDefaultParamValueByAnimationType(e,t){return this["CL_DEFAULT_LOOP_ANIMATION_".concat(e,"_").concat(bi.camelCaseToUpperSnakeCase(t))]}static getAllAnimationStyles(e){let t=Object.values(this._animations).map((e=>e.styles)).join("\n");return e&&(t=t.replace(new RegExp(".".concat(this.animationClassPrefix),"g"),"".concat(e," .").concat(this.animationClassPrefix))),t}static constructAnimationStylesByTypes(e){return Object.keys(this._animations).filter((t=>e.includes(t))).map((e=>this._animations[e].styles)).join("")}}var Oi=Ai;Ai.animationClassPrefix="cl-loop-animation-",Ai.CL_DEFAULT_LOOP_ANIMATION_PULSE_BORDER_RADIUS="50px",Ai.CL_DEFAULT_LOOP_ANIMATION_PULSE_COLOR="rgba(0,0,0,0.7)",Ai.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT=3,Ai._animations={PULSE:{styles:"\n        .".concat(Oi.animationClassPrefix,"PULSE {\n          animation: pulse-animation 2s;\n          animation-iteration-count: var(--cl-PULSE-animationIterationCount, ").concat(Oi.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n          border-radius: var(--cl-PULSE-borderRadius);\n        }\n\n        @keyframes pulse-animation {\n          0% {\n            box-shadow: 0 0 0 0 var(--cl-PULSE-color);\n          }\n\n          70% {\n            box-shadow: 0 0 0 20px rgba(0, 0, 0, 0);\n          }\n\n          100% {\n            box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n          }\n        }")},VIBRATE:{styles:"\n        .".concat(Oi.animationClassPrefix,"VIBRATE {\n          animation: vibrate-animation 10.3s linear both;\n          animation-iteration-count: var(--cl-VIBRATE-animationIterationCount, ").concat(Oi.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes vibrate-animation {\n          0% {\n            transform: translate(0);\n          }\n          2% {\n            transform: translate(-2px, 2px);\n          }\n          4% {\n            transform: translate(-2px, -2px);\n          }\n          6% {\n            transform: translate(2px, 2px);\n          }\n          8% {\n            transform: translate(2px, -2px);\n          }\n          10% {\n            transform: translate(0);\n          }\n          12% {\n            transform: translate(-2px, 2px);\n          }\n          14% {\n            transform: translate(-2px, -2px);\n          }\n          16% {\n            transform: translate(2px, 2px);\n          }\n          18% {\n            transform: translate(2px, -2px);\n          }\n          20% {\n            transform: translate(0);\n          }\n          100% {\n            transform: translate(0);\n          }\n        }")},WOBBLE:{styles:"\n        .".concat(Oi.animationClassPrefix,"WOBBLE {\n          animation: wobble-animation 10.8s both;\n          animation-iteration-count: var(--cl-WOBBLE-animationIterationCount, ").concat(Oi.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes wobble-animation {\n          0%,\n          100% {\n            transform: translateX(0%);\n            transform-origin: 50% 50%;\n          }\n          1.5% {\n            transform: translateX(-30px) rotate(-6deg);\n          }\n          3% {\n            transform: translateX(15px) rotate(6deg);\n          }\n          4.5% {\n            transform: translateX(-15px) rotate(-3.6deg);\n          }\n          6% {\n            transform: translateX(9px) rotate(2.4deg);\n          }\n          7.5% {\n            transform: translateX(-6px) rotate(-1.2deg);\n          }\n          10% {\n            transform: translateX(0%);\n            transform-origin: 50% 50%;\n          }\n        }")},SHAKE:{styles:"\n        .".concat(Oi.animationClassPrefix,"SHAKE {\n          animation: shake-animation 10.8s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;\n          animation-iteration-count: var(--cl-SHAKE-animationIterationCount, ").concat(Oi.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes shake-animation {\n          0%,\n          100% {\n            transform: translateX(0);\n          }\n          1%,\n          3%,\n          5%,\n          7% {\n            transform: translateX(-10px);\n          }\n          2%,\n          4%,\n          6% {\n            transform: translateX(10px);\n          }\n          8% {\n            transform: translateX(8px);\n          }\n          9% {\n            transform: translateX(-8px);\n          }\n          10% {\n            transform: translateX(0);\n          }\n        }")},JELLO:{styles:"\n        .".concat(Oi.animationClassPrefix,"JELLO {\n          animation: jello-animation 10.9s both;\n          animation-iteration-count: var(--cl-JELLO-animationIterationCount, ").concat(Oi.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes jello-animation {\n          0% {\n            transform: scale3d(1, 1, 1);\n          }\n          3% {\n            transform: scale3d(1.25, 0.75, 1);\n          }\n          4% {\n            transform: scale3d(0.75, 1.25, 1);\n          }\n          5% {\n            transform: scale3d(1.15, 0.85, 1);\n          }\n          6.5% {\n            transform: scale3d(0.95, 1.05, 1);\n          }\n          7.5% {\n            transform: scale3d(1.05, 0.95, 1);\n          }\n          10% {\n            transform: scale3d(1, 1, 1);\n          }\n          100% {\n            transform: scale3d(1, 1, 1);\n          }\n        }")},BOUNCE:{styles:"\n        .".concat(Oi.animationClassPrefix,"BOUNCE {\n          animation: bounce-animation 10.9s both;\n          animation-iteration-count: var(--cl-BOUNCE-animationIterationCount, ").concat(Oi.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes bounce-animation {\n          0% {\n            transform: translateY(-45px);\n            animation-timing-function: ease-in;\n            opacity: 1;\n          }\n          2.4% {\n            opacity: 1;\n          }\n          4% {\n            transform: translateY(-24px);\n            animation-timing-function: ease-in;\n          }\n          6.5% {\n            transform: translateY(-12px);\n            animation-timing-function: ease-in;\n          }\n          8.2% {\n            transform: translateY(-6px);\n            animation-timing-function: ease-in;\n          }\n          9.3% {\n            transform: translateY(-4px);\n            animation-timing-function: ease-in;\n          }\n          2.5%,\n          5.5%,\n          7.5%,\n          8.7% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n          }\n          10% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n            opacity: 1;\n          }\n          100% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n            opacity: 1;\n          }\n        }")},BLINK:{styles:"\n        .".concat(Oi.animationClassPrefix,"BLINK {\n          animation: blink-animation 10.6s both;\n          animation-iteration-count: var(--cl-BLINK-animationIterationCount, ").concat(Oi.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes blink-animation {\n          0%,\n          5%,\n          10%,\n          100% {\n            opacity: 1;\n          }\n          2.5%,\n          7.5% {\n            opacity: 0;\n          }\n        }")},FLICKER:{styles:"\n        .".concat(Oi.animationClassPrefix,"FLICKER {\n          animation: flicker-animation 12.5s linear both;\n          animation-iteration-count: var(--cl-FLICKER-animationIterationCount, ").concat(Oi.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes flicker-animation {\n          0%,\n          100% {\n            opacity: 1;\n          }\n          3.298% {\n            opacity: 1;\n          }\n          3.3% {\n            opacity: 0;\n          }\n          3.4% {\n            opacity: 0;\n          }\n          3.402% {\n            opacity: 1;\n          }\n          3.498% {\n            opacity: 1;\n          }\n          3.5% {\n            opacity: 0;\n          }\n          3.59% {\n            opacity: 0;\n          }\n          3.592% {\n            opacity: 1;\n          }\n          3.898% {\n            opacity: 1;\n          }\n          3.9% {\n            opacity: 0;\n          }\n          3.98% {\n            opacity: 0;\n          }\n          3.982% {\n            opacity: 1;\n          }\n          8.398% {\n            opacity: 1;\n          }\n          8.4% {\n            opacity: 0;\n          }\n          8.49% {\n            opacity: 0;\n          }\n          8.492% {\n            opacity: 1;\n          }\n          84.92% {\n            opacity: 1;\n          }\n        }")},PING:{styles:"\n        .".concat(Oi.animationClassPrefix,"PING {\n          animation: ping-animation 10.8s ease-in-out both;\n          animation-iteration-count: var(--cl-PING-animationIterationCount, ").concat(Oi.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes ping-animation {\n          0%,\n          16% {\n            transform: scale(1);\n            opacity: 1;\n          }\n          8% {\n            transform: scale(2.2);\n            opacity: 0;\n          }\n        }")}};class Ni{static extractAdaptiveStylesClasses(e){let t="";return e.props.adaptiveStyles?(e.props.adaptiveStyles.desktop.forEach((e=>t+=" ".concat(e.classes))),e.props.adaptiveStyles.mobile.forEach((e=>t+=" ".concat(e.classes))),t.split(" ")):[]}static extractLoopAnimationsFromAdaptiveStylesClasses(e){return this.extractAdaptiveStylesClasses(e).filter((e=>e.startsWith(Ai.animationClassPrefix))).map((e=>e.replace(Ai.animationClassPrefix,"")))}}var Ri={transparent:"#0000"},Mi=function(e,t,n,i){return null!=i&&""!==i||(i=1),e=parseFloat(e),t=parseFloat(t),n=parseFloat(n),i=parseFloat(i),255>=e&&0<=e&&255>=t&&0<=t&&255>=n&&0<=n&&1>=i&&0<=i?[Math.round(e),Math.round(t),Math.round(n),i]:null},Li=/(?:rgb)a?\(\s*([.\d%]+)\s*,\s*([.\d%]+)\s*,\s*([.\d%]+)\s*(?:,\s*([.\d]+)\s*)?\)/i,wi=function(e,t){if(null==e)return null;e=(e+"").replace(/\s+/,"");var n=Ri[e];return n?wi(n,t):(n=e.match(Li))&&(e=n.slice(1))&&(e=Mi.apply(null,e))?t?e:(1===e[3]&&e.splice(3,1),"rgb"+(4===e.length?"a":"")+"("+e+")"):null};class Pi{ratio(e,t,n){return e=this.getRgbTriplet(e,n),t=this.getRgbTriplet(t,n),this.wcagRgb(e,t)}isNotTransparent(e,t){t=t||{};let n=(e=wi(e)).match(/\((.*)\)/)[1].split(",");if(4!=n.length||"0"!=n[3]||t.ignoreAlpha)return e;throw new TypeError("get-contrast cannot contrast transparent colors")}getRgbTriplet(e,t){if("string"!=typeof e)throw new TypeError("get-contrast expects colors as strings");return e=e.toLowerCase(),(e=this.isNotTransparent(e,t)).match(/\((.*)\)/)[1].split(",").slice(0,3)}wcagRgb(e,t){return this.luminance(this.relativeLuminance(e),this.relativeLuminance(t))}luminance(e,t){return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}relativeLuminance(e){let t=e[0]/255,n=e[1]/255;e=e[2]/255;let i=1/12.92;return.2126*(.03928>=t?t*i:Math.pow((t+.055)/1.055,2.4))+.7152*(.03928>=n?n*i:Math.pow((n+.055)/1.055,2.4))+.0722*(.03928>=e?e*i:Math.pow((e+.055)/1.055,2.4))}}var Di=Array.prototype.concat,xi=Array.prototype.slice,ki=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=!(!(o=r)||"string"==typeof o)&&(o instanceof Array||Array.isArray(o)||0<=o.length&&(o.splice instanceof Function||Object.getOwnPropertyDescriptor(o,o.length-1)&&"String"!==o.constructor.name));o?t=Di.call(t,xi.call(r)):t.push(r)}return t};ki.wrap=function(e){return function(){return e(ki(arguments))}};var Vi,Fi={},Ui=Object.hasOwnProperty,Bi=Object.create(null);for(Vi in Fi)Ui.call(Fi,Vi)&&(Bi[Fi[Vi]]=Vi);var Hi={to:{},get:function(e){if("hsl"===e.substring(0,3).toLowerCase()){e=Hi.get.hsl(e);var t="hsl"}else e=Hi.get.rgb(e),t="rgb";return e?{model:t,value:e}:null}};Hi.get.rgb=function(e){if(!e)return null;var t,n=/^#([a-f0-9]{3,4})$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,r=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(n=t[2],t=t[1],e=0;3>e;e++)i=2*e,r[e]=parseInt(t.slice(i,i+2),16);n&&(r[3]=parseInt(n,16)/255)}else if(t=e.match(n)){for(n=(t=t[1])[3],e=0;3>e;e++)r[e]=parseInt(t[e]+t[e],16);n&&(r[3]=parseInt(n+n,16)/255)}else if(t=e.match(i)){for(e=0;3>e;e++)r[e]=parseInt(t[e+1],0);t[4]&&(r[3]=t[5]?.01*parseFloat(t[4]):parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:Ui.call(Fi,t[1])?((r=Fi[t[1]])[3]=1,r):null:null;for(e=0;3>e;e++)r[e]=Math.round(2.55*parseFloat(t[e+1]));t[4]&&(r[3]=t[5]?.01*parseFloat(t[4]):parseFloat(t[4]))}for(e=0;3>e;e++)r[e]=T(r[e],0,255);return r[3]=T(r[3],0,1),r},Hi.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[e=(parseFloat(t[1])%360+360)%360,T(parseFloat(t[2]),0,100),t=T(parseFloat(t[3]),0,100),n=T(isNaN(n)?1:n,0,1)]}return null},Hi.to.rgb=function(){var e=ki(arguments);return 4>e.length||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},Hi.to.hsl=function(){var e=ki(arguments);return 4>e.length||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};let Gi={};for(let e of Object.keys(Gi));let ji={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"}};for(let e of Object.keys(ji)){if(!("channels"in ji[e]))throw Error("missing channels property: "+e);if(!("labels"in ji[e]))throw Error("missing channel labels property: "+e);if(ji[e].labels.length!==ji[e].channels)throw Error("channel and label counts mismatch: "+e);let{channels:t,labels:n}=ji[e];delete ji[e].channels,delete ji[e].labels,Object.defineProperty(ji[e],"channels",{value:t}),Object.defineProperty(ji[e],"labels",{value:n})}ji.rgb.hsl=function(e){var t=e[0]/255;let n=e[1]/255,i=e[2]/255;e=Math.min(t,n,i);let r,o=Math.max(t,n,i),s=o-e;return o===e?r=0:t===o?r=(n-i)/s:n===o?r=2+(i-t)/s:i===o&&(r=4+(t-n)/s),r=Math.min(60*r,360),0>r&&(r+=360),t=(e+o)/2,[r,100*(o===e?0:.5>=t?s/(o+e):s/(2-o-e)),100*t]},ji.hsl.rgb=function(e){let t=e[0]/360;var n=e[1]/100;if(e=e[2]/100,0===n){var i=255*e;return[i,i,i]}e=2*e-(n=.5>e?e*(1+n):e+n-e*n);let r=[0,0,0];for(let o=0;3>o;o++)0>(i=t+1/3*-(o-1))&&i++,1<i&&i--,i=1>6*i?e+6*(n-e)*i:1>2*i?n:2>3*i?e+(n-e)*(2/3-i)*6:e,r[o]=255*i;return r};let Wi={};Object.keys(ji).forEach((e=>{Wi[e]={},Object.defineProperty(Wi[e],"channels",{value:ji[e].channels}),Object.defineProperty(Wi[e],"labels",{value:ji[e].labels});let t=function(e){let t={};var n=Object.keys(ji);for(let e=n.length,i=0;i<e;i++)t[n[i]]={distance:-1,parent:null};for(n=[e],t[e].distance=0;n.length;){e=n.pop();var i=Object.keys(ji[e]);for(let s=i.length,a=0;a<s;a++){var r=i[a],o=t[r];-1===o.distance&&(o.distance=t[e].distance+1,o.parent=e,n.unshift(r))}}n={};for(let a=(e=Object.keys(t)).length,l=0;l<a;l++){var s=e[l];if(null===t[s].parent)continue;i=s,o=[(r=t)[s].parent,s];let a=ji[r[s].parent][s];for(s=r[s].parent;r[s].parent;)o.unshift(r[s].parent),a=C(ji[r[s].parent][s],a),s=r[s].parent;a.conversion=o,n[i]=a}return n}(e);Object.keys(t).forEach((n=>{let i=t[n];Wi[e][n]=function(e){let t=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];if(null==(t=n[0]))return t;if(1<t.length&&(n=t),"object"==typeof(n=e(n)))for(let e=n.length,t=0;t<e;t++)n[t]=Math.round(n[t]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(i),Wi[e][n].raw=function(e){let t=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return null==(t=n[0])?t:(1<t.length&&(n=t),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}(i)}))}));let zi=["keyword","gray","hex"],Ki={};for(let e of Object.keys(Wi))Ki[[...Wi[e].labels].sort().join("")]=e;let Qi={};I.prototype={toString(){return this.string()},string(e){let t=this.model in Hi.to?this:this.rgb();return t=t.round("number"==typeof e?e:1),e=1===t.valpha?t.color:[...t.color,this.valpha],Hi.to[t.model](e)},round(e){return e=Math.max(e||0,0),new I([...this.color.map(S(e)),this.valpha],this.model)},alpha(e){return void 0!==e?new I([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},lighten(e){let t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){let t=this.hsl();return t.color[2]-=t.color[2]*e,t}};for(let e of Object.keys(Wi)){if(zi.includes(e))continue;let{channels:t}=Wi[e];I.prototype[e]=function(){if(this.model===e)return new I(this);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return 0<n.length?new I(n,e):(t=Wi[this.model][e].raw(this.color),t=Array.isArray(t)?t:[t],new I([...t,this.valpha],e))},I[e]=function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return"number"==typeof(n=i[0])&&(n=b(i,t)),new I(n,e)}}class qi{constructor(){this.whiteColor="rgb(255, 255, 255)",this.blackColor="rgb(0, 0, 0)"}changeAlpha(e,t){return I(e).alpha(t).string()}getAlpha(e){return I(e).alpha()}lighten(e,t){try{return I(e).lighten(t).rgb().string()}catch(t){return e}}darken(e,t){try{return I(e).darken(t).rgb().string()}catch(t){return e}}getContrastRatio(e,t){try{return(new Pi).ratio(e,t)}catch(e){return 0}}}class Xi{static get size(){return{width:this.width,height:this.height}}static get width(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}static get height(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}static get scrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}}class Yi{constructor(e,t){this.setStylesToElement=this.colorUtils=null,this.colorUtils=e,this.setStylesToElement=t}getMenuOverlayContentClassName(){return Vn.SYSTEM_CLASS_PREFIX+"overlay-menu-content"}createBackdrop(e){let t=document.createElement("div");return t.style.position="fixed",t.style.zIndex=String(Number.MAX_SAFE_INTEGER-1),t.style.top="0",t.style.left="0",t.style.width=e?"0px":"100%",t.style.height=e?"0px":"100%",t}createMenuOverlay(e){var t=this;let{triggerElement:n,overlayStyles:i,createOverlayContent:r,overlayWidth:o,overlayHeight:s,offset:a,onDestroy:l,positionByDefault:c,isHorizontallyCentered:d,isBackdropDisabledOnUI:h}=e,u=this.createBackdrop(h),m=document.createElement("div");m.style.position="fixed",m.style.display="block",m.style.zIndex=String(Number.MAX_SAFE_INTEGER),o&&(m.style.width="".concat(o,"px")),s&&(m.style.height="".concat(s,"px")),e=m.attachShadow({mode:"open"});let p=document.createElement("style");p.innerHTML=i,e.append(p);let g=document.createElement("div");g.classList.add(this.getMenuOverlayContentClassName()),document.body.append(u),document.body.append(m),e.append(g),r(u,g),function(){const e=t.getOverlayMenuPlacementData(n,g,null!=a?a:5,c,d);t._setPositionAttr(g,e.position),t.setStylesToElement(m,e.coordinates)}(),m.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault()}));let E=e=>{u.remove(),m.remove(),l&&l(),window.removeEventListener("keyup",e,!0)},v=e=>{"Escape"===e.key&&(e.preventDefault(),e.stopImmediatePropagation(),E(v))};return u.addEventListener("click",(()=>E(v))),window.addEventListener("keyup",v,!0),{backdrop:u,overlay:m}}getOverlayMenuPlacementData(e,t,n,i,r){return n=this._calcOverlayMenuPosition(e,t,n,i),this._updateOverlayContentMargins(n,t),{coordinates:this._getOverlayMenuPosition(n,e.getBoundingClientRect(),t.getBoundingClientRect(),r),position:n.position}}_calcOverlayMenuPosition(e,t,n,i){let r=this._getOverlayMenuHorizontalOffset(e,t,n);return e=this._getOverlayMenuVerticalOffset(e,t,n),t="undefined",(n={bottom:e.availableSpaceBelowTriggerElem>=e.contentHeight,top:e.availableSpaceAboveTriggerElem>=e.contentHeight,right:r.availableSpaceToTheRightSideOfTheTrigger>=r.contentWidth,left:r.availableSpaceToTheLeftSideOfTheTrigger>=r.contentWidth}).top?t="top":n.bottom?t="bottom":n.right?t="right":n.left&&(t="left"),n[i]&&(t=i),"undefined"===t&&((i=Math.max(e.availableSpaceBelowTriggerElem,e.availableSpaceAboveTriggerElem,r.availableSpaceToTheRightSideOfTheTrigger,r.availableSpaceToTheLeftSideOfTheTrigger))===e.availableSpaceBelowTriggerElem?t="bottom":i===e.availableSpaceAboveTriggerElem?t="top":i===r.availableSpaceToTheRightSideOfTheTrigger?t="right":i===r.availableSpaceToTheLeftSideOfTheTrigger&&(t="left")),Object.assign(Object.assign(Object.assign({},e),r),{position:t})}_getOverlayMenuHorizontalOffset(e,t,n){var i=Xi.width;return({right:e}=e.getBoundingClientRect()),i=i-n-e-Xi.scrollbarWidth,{horizontalOffset:n,contentWidth:t=this._getOverlayMenuDimensions(t).width,availableSpaceToTheLeftSideOfTheTrigger:e-n,availableSpaceToTheRightSideOfTheTrigger:i}}_getOverlayMenuDimensions(e){let{width:t,height:n}=e.getBoundingClientRect(),{marginBottom:i,marginTop:r,marginLeft:o,marginRight:s}=window.getComputedStyle(e);return{width:t+parseInt(o,10)+parseInt(s,10),height:n+parseInt(r,10)+parseInt(i,10)}}_getOverlayMenuVerticalOffset(e,t,n){let i=Xi.height,{top:r,bottom:o}=e.getBoundingClientRect();return{verticalOffset:n,contentHeight:e=this._getOverlayMenuDimensions(t).height,availableSpaceAboveTriggerElem:r-n,availableSpaceBelowTriggerElem:i-o-n}}_getOverlayMenuPosition(e,t,n,i){switch(e.position){case"top":return{left:"".concat(this._getLeftPositionTBForOverlayMenu(t,n,i),"px"),top:"".concat(e.availableSpaceAboveTriggerElem-e.contentHeight-e.verticalOffset,"px")};case"bottom":return{left:"".concat(this._getLeftPositionTBForOverlayMenu(t,n,i),"px"),bottom:"".concat(e.availableSpaceBelowTriggerElem-e.contentHeight-e.verticalOffset,"px")};case"left":return{left:"".concat(e.availableSpaceToTheLeftSideOfTheTrigger-t.width-e.contentWidth-e.horizontalOffset,"px"),top:"".concat(this._getTopPositionLRForOverlayMenu(t,e),"px")};case"right":return{right:"".concat(e.availableSpaceToTheRightSideOfTheTrigger-e.contentWidth-e.horizontalOffset,"px"),top:"".concat(this._getTopPositionLRForOverlayMenu(t,e),"px")}}}_getLeftPositionTBForOverlayMenu(e,t,n){return 0>(e=n?e.x+e.width/2-t.width/2:e.x)&&(e=0),e+t.width>Xi.width&&(e-=e+t.width-Xi.width),e}_getTopPositionLRForOverlayMenu(e,t){return e=t.availableSpaceAboveTriggerElem,t.contentHeight>t.availableSpaceBelowTriggerElem&&(e-=t.contentHeight-t.availableSpaceBelowTriggerElem),e}_setPositionAttr(e,t){e.setAttribute("cl-overlay-position",t)}getOverlayBackgroundColor(e,t){return e.startsWith("transparent")||e.startsWith("none")||!e.startsWith("rgb")||1!==this.colorUtils.getAlpha(e.slice(0,e.match(/\)/).index+1))?(e=this.colorUtils.getContrastRatio(t,this.colorUtils.whiteColor))>(t=this.colorUtils.getContrastRatio(t,this.colorUtils.blackColor))?this.colorUtils.whiteColor:this.colorUtils.blackColor:e}getOverlayBorderRadius(e,t){return Math.min(Math.floor(parseInt(e)/2),parseInt(t["border-top-left-radius"]),parseInt(t["border-top-right-radius"]),parseInt(t["border-bottom-left-radius"]),parseInt(t["border-bottom-right-radius"]))}getMenuItemHoverColor(e){var t=this.colorUtils.getContrastRatio(e,this.colorUtils.whiteColor);let n,i=this.colorUtils.getContrastRatio(e,this.colorUtils.blackColor);if(t>i)for(n=this.colorUtils.whiteColor;5<t;)n=this.colorUtils.darken(n,.1),t=this.colorUtils.getContrastRatio(e,n);else for(n="rgb(10, 10, 10)",t=i;5<t;)n=this.colorUtils.lighten(n,.1),t=this.colorUtils.getContrastRatio(e,n);return this.colorUtils.changeAlpha(n,.2)}_updateOverlayContentMargins(e,t){let{marginBottom:n,marginTop:i}=window.getComputedStyle(t);"top"===e.position?(this.setStylesToElement(t,{"margin-top":"".concat(parseInt(i,10)+parseInt(n,10),"px")}),this.setStylesToElement(t,{"margin-bottom":"0px"})):"bottom"===e.position?(this.setStylesToElement(t,{"margin-bottom":"".concat(parseInt(n,10)+parseInt(i,10),"px")}),this.setStylesToElement(t,{"margin-top":"0px"})):(e="".concat((parseInt(n,10)+parseInt(i,10))/2,"px"),this.setStylesToElement(t,{"margin-top":e,"margin-bottom":e}))}}let Zi="\n  .cl-tooltip-text {\n    z-index: ".concat(Number.MAX_SAFE_INTEGER,";\n    width: max-content;\n    height: fit-content;\n    visibility: hidden;\n    background-color: white;\n    color: #000;\n    border: 1px solid rgb(194, 194, 194);\n    border-radius: 5px;\n    padding: 5px 10px;\n    position: fixed;\n    max-width: 300px;\n    max-height: 100vh;\n    box-shadow: 0 1px 5px rgba(0,0,0,.28);\n    font-size: 14px;\n  }\n\n  .cl-tooltip-text[cl-tooltip-position='top']:before {\n    content: \"\";\n    position: absolute;\n    top: 100%;\n    left: calc(50% - 13px);\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: rgb(194, 194, 194) transparent transparent transparent;\n  }\n  \n  .cl-tooltip-text[cl-tooltip-position='top']:after {\n    content: \"\";\n    position: absolute;\n    top: 100%;\n    left: calc(50% - 5px);\n    margin-left: -8px;\n    margin-top: -2px;\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: white transparent transparent transparent;\n  }\n\n  .cl-tooltip-text[cl-tooltip-position='bottom']:before {\n    content: \"\";\n    position: absolute;\n    top: -24px;\n    left: calc(50% - 9px);\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: transparent transparent rgb(194, 194, 194) transparent;\n  }\n  \n  .cl-tooltip-text[cl-tooltip-position='bottom']:after {\n    content: \"\";\n    position: absolute;\n    top: -22px;\n    left: calc(50% - 4px);\n    margin-left: -5px;\n    margin-bottom: -2px;\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: transparent transparent white transparent;\n  }\n");class Ji{constructor(){this.tooltipTextElement=null,this.tooltipStylesId="cl-tooltip-text-styles"}createTooltipText(e){return this.tooltipTextElement=document.getElementById("cl-overlay-tooltip-text")||document.createElement("div"),this.tooltipTextElement.classList.add("cl-tooltip-text"),this.tooltipTextElement.innerHTML!==e&&(this.tooltipTextElement.innerHTML=e,this.tooltipTextElement.style=null),this.tooltipTextElement.id||(this.tooltipTextElement.id="cl-overlay-tooltip-text",document.body.append(this.tooltipTextElement)),this.tooltipTextElement}destroyTooltipText(){this.tooltipTextElement&&(this.tooltipTextElement.remove(),this.tooltipTextElement=null)}addTooltipStyles(){if(!document.head.querySelector("#".concat(this.tooltipStylesId))){var e=document.createElement("style");e.setAttribute("id",this.tooltipStylesId),e.innerHTML=Zi,document.head.appendChild(e)}}removeTooltipStyles(){let e=document.head.querySelector("#".concat(this.tooltipStylesId));e&&e.remove()}}class $i{constructor(){this.color=new qi,this.overlay=new Yi(this.color,this.setStylesToElement.bind(this)),this.tooltipTextUtils=new Ji,this.tooltipElLastMouseLeaveHandler=this.tooltipElLastMouseEnterHandler=null}setStylesToElement(e,t){Object.keys(t).forEach((n=>{e.style[n]=t[n]}))}getStylesFromElement(e,t){let n=window.getComputedStyle(e);return t.reduce(((e,t)=>(e[t]=n.getPropertyValue(t),e)),{})}setTooltipPosition(e){let{triggerElement:t,tooltipElement:n,offset:i=10}=e;e=this.overlay.getOverlayMenuPlacementData(t,n,i,"top",!0),n.setAttribute("cl-tooltip-position",e.position),this.setStylesToElement(n,e.coordinates)}applyLabelParams(e,t,n,i){i=n.querySelector(i),t=e.adaptiveStyles[t].find((e=>"label"===e.element)).params,(n=n.querySelector(".label")).innerHTML=e.content.label,"TOP"===t.position?(i.style.flexDirection="column",i.style.alignItems="unset",this.setStylesToElement(n,{marginRight:0,marginBottom:"".concat(t.margin,"px")})):(i.style.flexDirection="row",i.style.alignItems="center",this.setStylesToElement(n,{marginRight:"".concat(t.margin,"px"),marginBottom:0})),n.style.display=t.enabled?"":"none"}getPlaceholderColor(e,t,n){return(e=e.adaptiveStyles[t].find((e=>"input"===e.element))).placeholderStyleAttributes&&e.placeholderStyleAttributes.color?e.placeholderStyleAttributes.color:(e=(e.classes||"").split(" ").filter((e=>e.startsWith(Vn.SYSTEM_CLASS_PREFIX)))).length&&(n=n.textClasses[e[0]])&&n.placeholderStyleAttributes&&n.placeholderStyleAttributes.color?n.placeholderStyleAttributes.color:"rgb(0, 0, 0)"}getClosestParentOutsideShadowRoot(e,t,n){var i;if(t){var r=t.closest(e);return t!==r||n||(r=null),r||this.getClosestParentOutsideShadowRoot(e,null===(i=null==t?void 0:t.getRootNode())||void 0===i?void 0:i.host,!0)}}setInputHostSize(e,t,n,i,r){var o;let s=e.adaptiveStyles[t].find((e=>"input"===e.element)).styleAttributes;e=null===(o=e.adaptiveStyles[t].find((e=>"label"===e.element)))||void 0===o?void 0:o.params,r=r&&e&&e.enabled&&"TOP"===e.position?r.getBoundingClientRect().height+e.margin:0,s.width&&(s.width.includes("100%")?(i.style.width="100%",n.style.width=s.width):n.style.width="auto"),s.height&&(s.height.includes("100%")?(i.style.height="100%",n.style.height=s.height):n.style.height="".concat(parseFloat(s.height)+r,"px"))}setFocusOutline(e,t){let n;t=t||e;let i=["transparent","initial"];if(e)return e.style.borderColor&&!i.includes(e.style.borderColor)&&(parseFloat(e.style.borderWidth)||parseFloat(e.style.borderBottomWidth))&&(n=this._setElementOutlineData(t,e,"borderColor")),!n&&e.style.getPropertyValue("--borderBottomColor")&&!i.includes(e.style.getPropertyValue("--borderBottomColor"))&&parseFloat(e.style.getPropertyValue("--borderBottomWidth"))&&(n=this._setElementOutlineData(t,e,"--borderBottomColor")),n||!e.style.backgroundColor||i.includes(e.style.backgroundColor)||(n=this._setElementOutlineData(t,e,"backgroundColor")),n||!e.style.color||i.includes(e.style.color)||(n=this._setElementOutlineData(t,e,"color")),n||(t.classList.remove("focus-outline-defined"),null)}handleControlStatusChange(e){e.control.on(di.validationStatusChanged,(t=>{this._handleValidationStatus(e,t)})),e.control.on(di.touchedStatusChanged,(()=>{this._handleValidationStatus(e,e.control.pending?"pending":e.control.valid?"valid":"invalid")}))}_handleValidationStatus(e,t){let{control:n,inputElement:i,tooltipElement:r,configService:o,i18n:s,validCallback:a,invalidCallback:l,errorMessageMapper:c,pendingCallback:d}=e;switch(t){case"valid":this.setValidStyles(i,r),a&&a();break;case"invalid":n.touched&&(e=n.getErrorKeys())&&(e=e[0],t=this.getTranslation(o,s,e),c&&(t=c(e,t)),this.setInvalidStyle(i,r,t),l&&l());break;case"pending":n.touched&&(this.setPendingStyle(i,r),d&&d())}}getTranslation(e,t,n){return e=O(t,A(e)).translations,(t=Object.keys(e).find((e=>e.includes(n))))?e[t]:n}setValidStyles(e,t){e.classList.contains("invalid")&&e.classList.remove("invalid"),t.style.visibility="hidden"}setInvalidStyle(e,t,n){let i;e.classList.contains("invalid")||e.classList.add("invalid"),t.style.visibility="visible",e=()=>{this.tooltipTextUtils.addTooltipStyles(),i=this.tooltipTextUtils.createTooltipText(n),i.style.visibility="visible",this.setTooltipPosition({triggerElement:t,tooltipElement:i})};let r=()=>{i&&(i.style.visibility="hidden",this.tooltipTextUtils.destroyTooltipText(),this.tooltipTextUtils.removeTooltipStyles())};this.tooltipElLastMouseEnterHandler&&t.removeEventListener("mouseenter",this.tooltipElLastMouseEnterHandler),this.tooltipElLastMouseLeaveHandler&&t.removeEventListener("mouseleave",this.tooltipElLastMouseLeaveHandler),t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",r),this.tooltipElLastMouseEnterHandler=e,this.tooltipElLastMouseLeaveHandler=r}setPendingStyle(e,t){t.style.visibility="hidden",e.classList.contains("invalid")&&e.classList.remove("invalid")}_setElementOutlineData(e,t,n){return(t=this._parseColorValue(t,n))?(t=this.color.changeAlpha(t,.5),e.classList.add("focus-outline-defined"),e.style.setProperty("--clFocusOutline","3px solid ".concat(t)),t):null}_parseColorValue(e,t){if((e=getComputedStyle(e)[t]||e.style.getPropertyValue(t))&&e.includes("rgb")&&(!(2<e.split("rgb").length)||e.includes("#")))return e}}var er={name:"SysContainerComponent",componentType:"CONTAINER",version:"1.0.0",contextMenuModel:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT",params:{hideForEntryType:"VIEW"}}],floatingPanelModel:[],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? (sdk.appConfig.allowBackdropFilterOnView ?? true) : true"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType === 'BUILT_IN' : true"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? (sdk.appConfig.allowBackdropFilterOnView ?? true) : true"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType === 'BUILT_IN' : true"}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},events:{dispatch:[],listen:[]},i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!1}}]},i18nPropPaths:["handlers,[id],actions,[id],params,link","handlers,[id],actions,[id],params,customData"],defaultProps:{adaptiveStyles:{desktop:[{element:"host",styleAttributes:{position:"relative",width:"100%",minWidth:"min-content",height:"auto",minHeight:null,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",_paddingEnabled:!0,marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",_marginEnabled:!1,background:"rgba(0, 0, 0, 0.06)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none"},classes:""}],mobile:[{element:"host",styleAttributes:{position:"relative",width:"100%",minWidth:"min-content",height:"auto",minHeight:null,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",_paddingEnabled:!0,marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",_marginEnabled:!1,background:"rgba(0, 0, 0, 0.06)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none"},classes:""}]}},metaDescription:{sortWeight:70,icon:"/claspo-editor/container-component-icon.svg",label:{en:"Container",ru:"Контейнер",uk:"Контейнер",es:"Envase",fr:"Récipient",de:"Container",it:"Contenitore",pt:"Embalagem",ro:"Container",bg:"Контейнер",cs:"Kontejner",el:"Περιέκτης",nl:"Container",pl:"Kontener",sv:"Behållare",tr:"Konteyner",ar:"الحاوية",zh:"容器",da:"Beholder",he:"קונטיינר",fi:"Säiliö",hi:"कंटेनर",hr:"Kontejner",hu:"Tárhely",id:"Kontainer",ja:"コンテナ",ko:"컨테이너",no:"Container",sk:"Krabica",sl:"Rezervoar",sr:"Kontejner"}},waitForResourcesLoad:!0,resourcesPropPaths:[["adaptiveStyles",":ENV","styleAttributes","background"]]};let tr={SUBSCRIBE_CONTACT:"SUBSCRIBE_CONTACT",REQUEST:"REQUEST",DISPATCH_EVENT:"DISPATCH_EVENT",GO_TO_VIEW:"GO_TO_VIEW",GO_TO_PREVIOUS_VIEW:"GO_TO_PREVIOUS_VIEW",GO_TO_NEXT_VIEW:"GO_TO_NEXT_VIEW",SHOW_WIDGET:"SHOW_WIDGET",OPEN_LINK:"OPEN_LINK",CLOSE_WIDGET:"CLOSE_WIDGET",CLICK:"CLICK"};var nr=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(n=e[t](n)).done,n.value)}))}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)};class ir{static sortActions(e){let t={[tr.CLOSE_WIDGET]:-1,[tr.OPEN_LINK]:-2,[tr.SHOW_WIDGET]:1,[tr.SUBSCRIBE_CONTACT]:2,[tr.REQUEST]:3};return[...e].sort(((e,n)=>(void 0!==t[e.type]?t[e.type]:0)>(void 0!==t[n.type]?t[n.type]:0)?-1:(void 0!==t[e.type]?t[e.type]:0)<(void 0!==t[n.type]?t[n.type]:0)?1:0))}constructor(e,t){this.config=e,this.actions=ir.sortActions(t),this.listener=null,this.targetElements=[],this.eventsQueue=[],this.state=null,this.postponed=!1}activate(e,t,n){this.state=e;let i=(e=n()).getAttribute(p("id"));this.listener=e=>{let t=e.composedPath().filter((e=>e instanceof HTMLElement&&e.getAttribute(p("type")))),n=0;for(;t[n]&&t[n].getAttribute(p("id"))!==i;){let e=t[n].getAttribute(p("type"));if(ir.IGNORING_VIEW_ENTRY_TYPES.includes(e))return;n++}this.eventsQueue.push({event:e}),this.postponed||this.execute()},this.targetElements=this.config.relativeSelector?Array.from((e.shadowRoot||e).querySelectorAll(this.config.relativeSelector)):[e],this.targetElements.forEach((e=>{e.addEventListener("click",this.listener)}))}async execute(){var e,t;try{for(var n,i=!0,r=nr(this.eventsQueue);!(e=(n=await r.next()).done);){var o=n.value;i=!1;try{let{event:e}=o;for(let t of this.actions)if(!await t.execute(this.state.getState(),e))break}finally{i=!0}}}catch(e){var s={error:e}}finally{try{i||e||!(t=r.return)||await t.call(r)}finally{if(s)throw s.error}}this.eventsQueue=[]}postpone(){this.postponed=!0}release(){this.postponed=!1,this.execute()}destroy(){this.listener&&this.targetElements.length&&(this.targetElements.forEach((e=>{e.removeEventListener("click",this.listener)})),this.targetElements=[])}}ir.IGNORING_VIEW_ENTRY_TYPES=[pi.BUTTON,pi.CONSENT,pi.INPUT];class rr{constructor(e,t){this.config=e,this.actions=t,this.componentEmitterListener=null}activate(e,t,n){this.componentEmitterListener=t.on(this.config.eventName,(()=>{this.actions.forEach((t=>t.execute(e.getState(),this.config.params)))}))}destroy(){this.componentEmitterListener&&this.componentEmitterListener.off()}}class or{constructor(e,t){this.actionFactory=e,this.actionRegister=t}get(e){let t=e.actions.map((e=>this.actionFactory.get(e)));switch(t.forEach((e=>this.actionRegister.register(e))),e.type){case"CLICK":return new ir(e,t);case"COMPONENT_EVENT":return new rr(e,t);default:throw Error("Not supported handler type ".concat(e.type))}}}class sr{static set(e,t){e[sr.accumulatorPropertyName]=Object.assign(Object.assign({},e[sr.accumulatorPropertyName]||{}),t.styleAttributes),Object.keys(e[sr.accumulatorPropertyName]).forEach((n=>{n.includes("--")?e.style.setProperty(n,t.styleAttributes[n]||""):e.style[n]=t.styleAttributes[n]?t.styleAttributes[n]:""}))}}sr.accumulatorPropertyName="clStyleAttributes";class ar{static log(e){window.scriptLog09u8y9&&scriptLog09u8y9("ERROR","RUNTIME_ERROR",Error(e))}}class lr{constructor(e,t,n,i,r,o){this.hostElement=t,this.documentModel=e,this.getSharedCb=n,this.getPropsCb=i,this.getEnvCb=r,this.httpClient=o,this.subscription=null,this.envUrlMaps={desktop:new Map,mobile:new Map}}parseBackground(e){if((e=String(e||"")).includes("url")){let[t,n]=e.split("(")[1].split(")");return{url:t.replace(/['"]+/g,""),positionOptions:n.replace(";","")}}return{url:null,positionOptions:null}}apply(e){return this.getPropsCb().backgroundDynamicInlineSVGElements[e].forEach((t=>{var n,i=this.getPropsCb().adaptiveStyles[e].find((e=>e.element===t));(i=this.parseBackground(null===(n=null==i?void 0:i.styleAttributes)||void 0===n?void 0:n.background)).url&&this.envUrlMaps[e].set(t,{originalSVGResourceURL:i.url,inlineSvgString:null,positionOptions:i.positionOptions})})),Promise.all([...this.envUrlMaps[e].entries()].map((t=>{let[n,i]=t;return this.httpClient.execute(i.originalSVGResourceURL).then((e=>e.text())).then((t=>{this.envUrlMaps[e].set(n,Object.assign(Object.assign({},i),{inlineSvgString:t}))}))}))).then((()=>{this._applyHostElementBackground(this.envUrlMaps[e].get("host"),this.getSharedCb().cssVars)})).catch((e=>{ar.log("Failed to load/apply backgroundDynamicInlineSVGElements[".concat(this.getPropsCb().backgroundDynamicInlineSVGElements,"] ").concat(e))}))}on(){return this.subscription=this.documentModel.on("COLOR_SCHEMA_UPDATE",(e=>{this._applyHostElementBackground(this.envUrlMaps[this.getEnvCb()].get("host"),e)})),this}_applyHostElementBackground(e,t){e&&(this.hostElement.style.background=this._buildBackgroundUrl(e,t))}_buildBackgroundUrl(e,t){return t=e.inlineSvgString.trim().replace("var(--cl-schema-accent)",t["cl-schema-accent"]),t=encodeURIComponent(t),"url('data:image/svg+xml,".concat(t,"')").concat(e.positionOptions)}off(){var e;null===(e=this.subscription)||void 0===e||e.off()}}var cr=new class{execute(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;var i=4<arguments.length?arguments[4]:void 0;return i={method:t,headers:Object.assign({"Content-Type":"text/plain"},(3<arguments.length?arguments[3]:void 0)||{}),credentials:"same-origin",body:null,signal:i},n&&(i.body="string"==typeof n?n:JSON.stringify(n)),fetch(e,i)}};class dr{constructor(e){this._count=0,this.onUpdateCb=e}increment(){this._count++,this.onUpdateCb(this.count())}decrement(){0<this._count&&this._count--,this.onUpdateCb(this.count())}count(){return this._count}}class hr{constructor(e,t){this.getPending=()=>this.counters.pending,this.onCounterStateUpdate=e=>{0===e&&this.systemEventEmitter.emit("COMPONENT_RESOURCES_LOADED",this.componentId)},this.onResourceLoadFailure=e=>{this.systemEventEmitter.emit("FAILED_TO_LOAD_COMPONENT_RESOURCE","Failed to load: ".concat(e))},this.componentId=e,this.systemEventEmitter=t,this.counters={pending:new dr(this.onCounterStateUpdate)}}}let ur=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:[]})),{});return{get:e=>i[e],clear:()=>ur(...t)}},mr={DESKTOP:"desktop",MOBILE:"mobile"};mr.MOBILE;class pr extends HTMLElement{constructor(){super(),this.construct=()=>{var e=this.getAttribute(p("id")),t=this.getWidgetContainerNode();if(!t)throw Error("Widget container not found in construct");let n;(t=t.closest("[".concat(p("widget-id"),"]")))&&(n=t.getAttribute(p("widget-id"))),e=new CustomEvent("cl-props-request",{detail:{nodeName:this.nodeName,path:this.getAttribute(p("path")),id:e,widgetId:n},bubbles:!0,composed:!0}),window.dispatchEvent(e),Object.assign(this,e.detail.props),this.observers=ur("props","shared","environment"),this.subscriptions=new class{constructor(){this.subscriptions=[]}push(e){this.subscriptions.push(e)}off(){this.subscriptions.forEach((e=>null==e?void 0:e.off()))}},this.state=new ai,this.componentEventEmitter=new Xn,this.componentResourceManager=new hr(this.model.id,this.services.eventEmitter),this.mergeTagsProcessor=this.services.mergeTagsProcessorFactory.create(),this._actionFactory=this.services.actionFactory,this._handlerFactory=new or(this._actionFactory,this.services.actionRegister),this.prevProps=this.model.props,this.prevEnvironment=this.getEnvironment(),this.documentModel.on("".concat("COMPONENT_PROPS_UPDATE","_").concat(this.model.id),(e=>{this.model.props=e,this.observers.get("props").forEach((t=>t(this.prevProps,e))),this.prevProps=e})),this.documentModel.on("SHARED_UPDATE_ALL",(()=>{this.applyAutoAdaptiveStyles(this.prevProps.adaptiveStyles),this.observers.get("shared").forEach((e=>e(this.getShared())))})),this.model.props.backgroundDynamicInlineSVGElements&&(this.colorSchemaListener=new lr(this.documentModel,this.getHostElement(),(()=>this.getShared()),(()=>this.model.props),(()=>this.getEnvironment()),cr),this.colorSchemaListener.apply(this.getEnvironment()).then((()=>{this.subscriptions.push(this.colorSchemaListener.on())}))),this.prevProps.adaptiveStyles&&this.subscriptions.push(this.resizeListener.on(Ci.changeEventName,(()=>{this.applyAutoAdaptiveStyles(this.prevProps.adaptiveStyles);let e=this.getEnvironment();this.observers.get("environment").forEach((t=>t(this.prevEnvironment,e))),this.prevEnvironment=e})))},this.attachHandlers=()=>{this.model.props.handlers&&this.model.props.handlers.length&&(this.handlers=this.model.props.handlers.map((e=>this._handlerFactory.get(e))),this.handlers.map((e=>()=>e.activate(this.state,this.componentEventEmitter,this.getHostElement.bind(this)))).forEach((e=>e())))},this.postponeHandlers=()=>{var e;null===(e=this.handlers)||void 0===e||e.forEach((e=>e.postpone()))},this.releaseHandlers=()=>{var e;null===(e=this.handlers)||void 0===e||e.forEach((e=>e.release()))},this.getProps=()=>this.model.props,this.getShared=()=>this.documentModel.getShared(),this.getEnvironment=()=>this.resizeListener.isMobile()?"mobile":"desktop",this.getRootElement=()=>this.shadowRoot?this.shadowRoot:this,this.getHostElement=()=>this,this.observeProps=e=>{this.observers.get("props").push(e),e(null,this.prevProps)},this.observeShared=e=>{this.observers.get("shared").push(e),e(this.getShared())},this.observeEnvironment=e=>{this.observers.get("environment").push(e),e(null,this.getEnvironment())},this.getElements=()=>[this.getHostElement(),...Array.from(this.getRootElement().querySelectorAll("[".concat(p("element"),"]"))).filter((e=>!e.hasAttribute(p("component"))))],this.getElement=(e,t)=>this.getElements().find((n=>t?n.getAttribute(p("element"))===e&&n.id===t:n.getAttribute(p("element"))===e)),this.applyAutoAdaptiveStyles=e=>{if(e){var t=this.getElements();if(t.length){var n=p("type"),i=this.getRootElement().querySelector("style[".concat(n,'="').concat("element-styles",'"]'));i||((i=document.createElement("style")).setAttribute(n,"element-styles"),this.getRootElement().appendChild(i)),i.innerHTML="",t.forEach((t=>{var n=t.getAttribute(p("element")),r=this.getEnvironment();(r=R(e,r,n))&&(this.resizeListener.isMobile()&&(n=R(e,"desktop",n))&&(r=Object.assign(Object.assign({},r),{styleAttributes:Object.assign(Object.assign({},n.styleAttributes),r.styleAttributes)})),this.applyStylesToElement(t,this.applySharedClassesToElementModel(r),i))})),this._addLinkColor(i,this.getShared())}}},this.registerComponentResourceManagement=()=>{this.viewResourceManager.registerComponent(this.model.id,this.componentResourceManager)},this.applyStylesToElement=(e,t,n)=>{var i,r,o=[];if("host"===(t=pr._resolveTogglableStylesForElementModel(t)).element&&(Si.applyHostStyles(this.model.type,e,null,this.layoutType),"desktop"===this.getEnvironment()&&null!==(i=this.model.props.backgroundDynamicInlineSVGElements)&&void 0!==i&&i.desktop||"mobile"===this.getEnvironment()&&null!==(r=this.model.props.backgroundDynamicInlineSVGElements)&&void 0!==r&&r.mobile)&&(this.colorSchemaListener.apply(this.getEnvironment()),o.push("background")),r=(i=t.styleAttributes.background)&&i.match(/url\("([^"]*)"\)/),this.manifest.waitForResourcesLoad&&r){this.componentResourceManager.getPending().increment();let e=new Image;e.src=r[1],xe(e,"load",(()=>{this.componentResourceManager.getPending().decrement()})),xe(e,"error",(()=>{this.componentResourceManager.onResourceLoadFailure(e.src),"UPDATING"===this.services.config.getConfig("entryModuleType")&&this.componentResourceManager.getPending().decrement()}))}o=Object.assign(Object.assign({},t),{styleAttributes:N(t.styleAttributes,o)}),sr.set(e,o),this._setClassAttributes(e,t),n&&(t.hoverStyleAttributes&&(o=t.hoverStyleAttributes,"FILL_UP"===t.hoverAnimationType&&(e.style.boxShadow="inset 0px 0px 0px 0px rgb(0, 0, 0, 0)",o=Object.assign(Object.assign({},t.hoverStyleAttributes),{background:i,boxShadow:"inset 0px -".concat(e.getBoundingClientRect().height,"px 0px 0px ").concat(o.background),transition:"0.3s"})),this._addStylesToStyleElement(n,t.element,o,":not(.".concat(p("no-hover"),"):hover"),!0)),t.placeholderStyleAttributes&&this._addStylesToStyleElement(n,t.element,t.placeholderStyleAttributes,"::placeholder"),this._addFontStylesToStyleElement(n,this.getShared()),this.stylesAppliedToElement(e,t,n))},this._fixMarginOverflow=e=>{var t=this.getParentComponent();t=t&&("flex"===t.style.display||"inline-flex"===t.style.display);var n="host"===e.getAttribute(p("element"));if(t&&n&&(t=this.getProps(),n=this.getEnvironment(),({styleAttributes:t}=R(t.adaptiveStyles,n,"host")||{}),t&&(n="100%"===t.width,(t.marginLeft||t.marginRight)&&n))){let i=(n=parseFloat(t.marginLeft)||0)+(t=parseFloat(t.marginRight)||0);i&&setTimeout((()=>{e.style.width="calc(100% - ".concat(i,"px)")}))}},this.applySharedClassesToElementModel=e=>function(e,t){let n=e;return(n.classes||"").split(" ").filter((e=>e.startsWith(Vn.SYSTEM_CLASS_PREFIX))).forEach((e=>{var i;(e=null===(i=t.textClasses)||void 0===i?void 0:i[e])&&(e.styleAttributes.fontFamily||(e.isHeader&&t.headerFontFamily&&(e=Object.assign(Object.assign({},e),{styleAttributes:Object.assign(Object.assign({},e.styleAttributes),{fontFamily:t.headerFontFamily})})),!e.isHeader&&t.textFontFamily&&(e=Object.assign(Object.assign({},e),{styleAttributes:Object.assign(Object.assign({},e.styleAttributes),{fontFamily:t.textFontFamily})}))),n=Object.assign(Object.assign({},n),{styleAttributes:Object.assign(Object.assign({},n.styleAttributes),e.styleAttributes),placeholderStyleAttributes:Object.assign(Object.assign({},n.placeholderStyleAttributes),e.placeholderStyleAttributes)}))})),n.styleAttributes.fontFamily||(n=Object.assign(Object.assign({},n),{styleAttributes:Object.assign(Object.assign({},n.styleAttributes),{fontFamily:t.textFontFamily})})),n}(e,this.documentModel.getShared()),this.getModel=()=>this.model,this._addStylesToStyleElement=function(e,t,n){let i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",r=4<arguments.length?arguments[4]:void 0,o=Object.keys(n).reduce(((e,t)=>e+" ".concat(bi.camelCaseToDashCase(t),": ").concat(n[t]).concat(r?" !important;":";")),"");e.innerHTML+="[".concat(p("element"),'="').concat(t,'"]').concat(i," { ").concat(o," }")},this._addFontStylesToStyleElement=(e,t)=>{e.innerHTML+="[cl-type] {font-family:".concat(t.textFontFamily||"inherit","}")},this._addLinkColor=(e,t)=>{var n,i,r,o;t.linkColor&&(e.innerHTML+="a {color: ".concat(t.linkColor,"}, a:visited {color: ").concat(t.linkColor,"}")),null!==(n=t.linkParams)&&void 0!==n&&n.color&&(e.innerHTML+="a {color: ".concat(null===(i=t.linkParams)||void 0===i?void 0:i.color,"}, a:visited {color: ").concat(null===(r=t.linkParams)||void 0===r?void 0:r.color,"}")),null!==(o=t.linkParams)&&void 0!==o&&o.removeUnderline&&(e.innerHTML+="a {text-decoration: none}, a:visited {text-decoration: none}")},this._setClassAttributes=(e,t)=>{Array.from(e.classList).filter((e=>e!==Vn.SYSTEM_CLASS_PREFIX+"hovered"&&e!==Vn.SYSTEM_CLASS_PREFIX+"focused")).forEach((t=>{t.startsWith(Vn.SYSTEM_CLASS_PREFIX)&&e.classList.remove(t)})),t=((e.getAttribute("class")||"")+" "+t.classes).trim(),e.setAttribute("class",t)},this.getParentComponent=()=>w(this.parentNode,p("element"),"host"),this.getWidgetContainerNode=()=>{let e=null==this?void 0:this.getAttribute(p("path"));return e&&1===e.split(",").length?this.parentNode:w(this.parentNode,p("path"),void 0,(e=>e&&1===e.split(",").length))},this.getWidgetLanguages=()=>A(this.services.config),this.getTranslationsMap=e=>O(e,this.getWidgetLanguages()),this.stylesAppliedToElement=(e,t,n)=>{},this.updateContext=()=>{var e;let t=this.getModel();this.services.context.updateRecord(t.id,{label:this.getContextRecordLabel(t.props),viewIndex:null===(e=t.path)||void 0===e?void 0:e[0]})},this.addContextRecord=()=>{var e;let t=this.getModel();this.services.context.addRecord(t.id,{recordKey:t.id,id:t.props.control.name,label:this.getContextRecordLabel(t.props),value:t.props.control.defaultValue||"",viewIndex:null===(e=t.path)||void 0===e?void 0:e[0],sourceId:"FORM",initialData:{fallbackValue:"",exampleValue:this.getContextRecordExampleValue(t.props)}})},this.getContextRecordLabel=e=>{var t,n;let i=e.control.name;return["email","first_name","last_name"].includes(i)?i.toUpperCase():e.content.label&&null!==(n=null===(t=e.adaptiveStyles.desktop.find((e=>"label"===e.element)))||void 0===t?void 0:t.params)&&void 0!==n&&n.enabled?(e=(new DOMParser).parseFromString(e.content.label,"text/html"),this.capitalizeFirstLetter(e.body.textContent||"")):e.content.placeholder?this.capitalizeFirstLetter(e.content.placeholder):e.control.integrationName?this.capitalizeFirstLetter(e.control.integrationName).replace(/_/g," "):void 0},this.capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1),this.getContextRecordExampleValue=e=>{switch(e.control.name){case"email":return"myemail@example.com";case"first_name":return"Maria";case"last_name":return"Taylor";default:return this.getContextRecordLabel(e)}},this.completeSubmitAction=e=>{e=e||{viewIndexOnSuccess:1,viewIndexOnSubscribed:1};let t=this.services.actionRegister.getRegisteredActions().find((e=>"SUBMIT"===e.category));t?null==t||t.execute(void 0,void 0,!0,e):this.services.actionFactory.get({type:tr.REQUEST}).execute(void 0,void 0,!0,e)},this.attachShadow({mode:"open"})}connectedCallback(){this.construct(),this.registerComponentResourceManagement(),Promise.resolve().then((()=>{this.attachHandlers()}))}disconnectedCallback(){var e;this.observers.clear(),this.subscriptions.off(),this.state.destroy(),this.componentEventEmitter.destroy(),null===(e=this.mergeTagsProcessor)||void 0===e||e.destroy()}static _resolveTogglableStylesForElementModel(e){let t=Object.assign({},e);return Object.keys(t).forEach((e=>{e.toLowerCase().includes("styleattributes")&&(t[e]=pr._resolveTogglableStyles(t[e]))})),t}static _resolveTogglableStyles(e){let t=Object.assign({},e);return(e=(e,n,i)=>{n in t&&(e.forEach((e=>{e in t&&(t[e]=t[n]?t[e]:i)})),delete t[n])})(["marginTop","marginBottom","marginLeft","marginRight"],"_marginEnabled","0px"),e(["paddingTop","paddingBottom","paddingLeft","paddingRight"],"_paddingEnabled","0px"),t}}class gr extends pr{constructor(){super(...arguments),this.manifest={name:"SysContainerComponent"},this.processStyles=()=>{this.innerHTML+='\n      <style>\n      [cl-component="'.concat(this.componentName,'"] {\n        position: relative;\n        min-width: 50px;\n        min-height: 50px;\n      }\n      </style>')}}get componentName(){return this.manifest.name}connectedCallback(){super.connectedCallback(),this.processStyles(),this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles)}))}disconnectedCallback(){super.disconnectedCallback()}}class Er extends gr{constructor(){super(...arguments),this.manifest=er,this.connectResizeObserver=()=>{this.resizeObserver=new ResizeObserver((e=>{for(let t of e)t.contentRect&&this.updateResponsiveRules(this.getResponsiveStyleElement())})),this.resizeObserver.observe(this.getWidgetContainerNode())},this.updateResponsiveRules=e=>{if(this.getProps().isResponsive){var t=this.getWidgetContainerNode(),{width:n,height:i}=t.getBoundingClientRect();e.innerHTML='[cl-component="'.concat(this.componentName,1.6<i/n?'"] {flex-direction: column !important;}':'"] {flex-direction: row !important;}')}else e.innerHTML=""},this.getResponsiveStyleElement=()=>[...this.children].find((e=>"responsive-styles"===e.getAttribute("name"))),this.appendResponsiveStyles=()=>{this.innerHTML+='<style name="responsive-styles">\n      [cl-component="'.concat(this.componentName,'"] {}\n    </style>')}}connectedCallback(){super.connectedCallback(),this.appendResponsiveStyles(),this.observeProps(((e,t)=>{t.isResponsive&&this.updateResponsiveRules(this.getResponsiveStyleElement())})),this.getProps().isResponsive&&this.connectResizeObserver()}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.resizeObserver)||void 0===e||e.disconnect()}}Er.define={name:"sys-container",model:er.name,manifest:er};var vr={name:"SysImageComponent",componentType:"IMAGE",version:"1.0.0",contextMenuModel:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}],floatingPanelModel:[],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"RADIO_BUTTONS",elementProp:"styleAttributes",elementSubProp:"objectFit",element:"image",params:{label:"DOCUMENT_IMAGE",options:[{label:"DOCUMENT_IMAGE_RESIZE_COVER",value:"cover"},{label:"DOCUMENT_IMAGE_RESIZE_CONTAIN",value:"contain"},{label:"DOCUMENT_IMAGE_RESIZE_NONE",value:"none"}]}},{type:"CONTROL",name:"IMAGE_SOURCES",element:"image",propPath:["control","imageSource"]},{type:"CONTROL",name:"FLOATING_COMPONENT_POSITION",element:"host",elementProp:"styleAttributes",displayCondition:"return sdk.component.floating ? !sdk.component.getProps().control.positioning : false;",params:{label:"DOCUMENT_POSITION"}},{type:"CONTROL",name:"DISPLAY",elementProp:"styleAttributes",elementSubProp:"display",element:"host",params:{label:"DOCUMENT_DISPLAY_ON_DESKTOP"}},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"image"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"RADIO_BUTTONS",elementProp:"styleAttributes",elementSubProp:"objectFit",element:"image",params:{label:"DOCUMENT_IMAGE",options:[{label:"DOCUMENT_IMAGE_RESIZE_COVER",value:"cover"},{label:"DOCUMENT_IMAGE_RESIZE_CONTAIN",value:"contain"},{label:"DOCUMENT_IMAGE_RESIZE_NONE",value:"none"}]}},{type:"CONTROL",name:"IMAGE_SOURCES",element:"image",propPath:["control","imageSource"]},{type:"CONTROL",name:"FLOATING_COMPONENT_POSITION",element:"host",elementProp:"styleAttributes",displayCondition:"return sdk.component.floating ? !sdk.component.getProps().control.positioning : false;",params:{label:"DOCUMENT_POSITION"}},{type:"CONTROL",name:"DISPLAY",elementProp:"styleAttributes",elementSubProp:"display",element:"host",params:{label:"DOCUMENT_DISPLAY_ON_MOBILE"},displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE'"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"image"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"MARGIN"}}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!1}}]},i18nPropPaths:["handlers,[id],actions,[id],params,link","handlers,[id],actions,[id],params,customData"],events:{dispatch:[],listen:[]},defaultProps:{control:{imageSource:{url:""}},adaptiveStyles:{desktop:[{element:"host",styleAttributes:{width:"150px",minWidth:"150px",height:"auto",minHeight:null,paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",_paddingEnabled:!1,display:"block"},classes:""},{element:"image",styleAttributes:{background:"transparent",objectFit:"cover",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"},classes:""}],mobile:[{element:"host",styleAttributes:{width:"150px",minWidth:"150px",height:"auto",minHeight:null,paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",_paddingEnabled:!1,display:"block"},classes:""},{element:"image",styleAttributes:{background:"transparent",objectFit:"cover",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"},classes:""}]}},metaDescription:{sortWeight:66,icon:"/claspo-editor/image-component-icon.svg",label:{en:"Image",ru:"Изображение",uk:"Зображення",es:"Imagen",fr:"Menu déroulant",de:"Bild",it:"Immagine",pt:"Imagem",ro:"Imagine",bg:"Изображение",cs:"Obrázek",el:"Εικόνα",nl:"Afbeelding",pl:"Obraz",sv:"Bild",tr:"Resim",ar:"الصورة",zh:"图像",da:"Billede",he:"תמונה",fi:"Kuva",hi:"इमेज ",hr:"Slika",hu:"Kép",id:"Gambar",ja:"画像",ko:"이미지",no:"Bilde",sk:"Obrázok",sl:"Slika",sr:"Slika"}},waitForResourcesLoad:!0,resourcesPropPaths:[["control","imageSource","url"]]};class _r extends pr{constructor(){super();var e=this;this.manifest=vr,this.applyStylesRespectingRelativePositioning=()=>{let e=this.processPositioningStyles(this.getProps());this.originalApplyAutoAdaptiveStyles(e),this.fixFloatingImageSize(e)},this.recalculateStylesAfterImageLoad=()=>{this.resourcesLoadedListener=this.services.eventEmitter.on("VIEW_COMPONENT_RESOURCES_LOADED",(()=>{requestAnimationFrame((()=>{this.applyAdaptiveStyles(this.getProps())}))}))},this._getHostNewDimensionsWithStyles=function(){let t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.getHostElement();"height width minHeight minWidth maxHeight maxWidth".split(" ").forEach((e=>{t[e]?n.style[e]=t[e]:n.style[e]&&(n.style[e]="")}));let{offsetWidth:i,offsetHeight:r}=n;return{width:i,height:r}},this.processPositioningStyles=e=>{var t,n,i;let r=e.adaptiveStyles;if("fixed"===((null===(t=e.control)||void 0===t?void 0:t.positioningMode)||"fixed"))return r;if(t=this.getEnvironment(),e=(null===(i=null===(n=e.control)||void 0===n?void 0:n.positioning)||void 0===i?void 0:i[t])||{},!("x"in(i=(null==e?void 0:e.diff)||{}))||!("y"in i))return r;n=this.getEnvironment(),({styleAttributes:t}=R(r,n,"host"));let{width:o,height:s}=this._getHostNewDimensionsWithStyles(t);t=N(t,["left","right","top","bottom"]);let a=i.x-o/2;return"left"===e.horizontalPosition?(t.left="".concat(a,"px"),t.right="auto"):"right"===e.horizontalPosition?(t.right="".concat(-o-a,"px"),t.left="auto"):(t.left="calc(50% + ".concat(a,"px)"),t.right="auto"),i=i.y-s/2,"top"===e.verticalPosition?(t.top="".concat(i,"px"),t.bottom="auto"):"bottom"===e.verticalPosition?(t.bottom="".concat(-s-i,"px"),t.top="auto"):(t.top="calc(50% + ".concat(i,"px)"),t.bottom="auto"),function(e,t,n){let i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return Object.assign(Object.assign({},e),{[t]:e[t].map((e=>e.element===n?Object.assign(Object.assign({},e),{styleAttributes:Object.assign({},i)}):e))})}(r,n,"host",t)},this.deleteElementIfPresent=(e,t)=>{(e=e.querySelector(t))&&e.remove()},this.upsertSvg=(e,t)=>{let n=e.querySelector("svg");return n&&n.getAttribute("inline-svg-url")===t?Promise.resolve():(n&&this.deleteElementIfPresent(this.getRootElement(),".svgOverflowContainer"),fetch(t).then((e=>e.text())).then((n=>{var i=document.createElement("template");let r=document.createElement("div");return r.style.overflow="hidden",r.style.width="100%",r.style.height="inherit",r.classList.add("svgOverflowContainer"),i.append(r),i.firstChild.innerHTML=n.trim(),(i=(n=i.firstChild).querySelector("svg")).setAttribute("cl-element","image"),i.setAttribute("inline-svg-url",t),this.componentResourceManager.getPending().decrement(),e.append(n),e})).catch((t=>{this.upsertImage(e,null)})))},this.upsertImage=(e,t)=>{let n=e.querySelector("img");if(n)return n.src=t,xe(n,"load",(()=>{this.componentResourceManager.getPending().decrement()})),xe(n,"error",(()=>{this.componentResourceManager.onResourceLoadFailure(n.src)})),Promise.resolve();let i=new Image;return i.setAttribute("cl-element","image"),i.src=t,xe(i,"load",(()=>{this.componentResourceManager.getPending().decrement()})),xe(i,"error",(()=>{this.componentResourceManager.onResourceLoadFailure(i.src)})),e.append(i),Promise.resolve()},this.applyAdaptiveStyles=e=>{var t;this.applyAutoAdaptiveStyles(e.adaptiveStyles);var n=this.getEnvironment();e=(n=e.adaptiveStyles[n]).find((e=>"host"===e.element));let i=n.find((e=>"image"===e.element)),r={cover:"xMidYMid slice",contain:"xMidYMid meet",none:""},o=(n=this.getElement("image"))&&"svg"===n.nodeName,s=(null===(t=null==i?void 0:i.styleAttributes)||void 0===t?void 0:t.objectFit)&&r.hasOwnProperty(i.styleAttributes.objectFit);o&&s&&(n.setAttribute("preserveAspectRatio",r[i.styleAttributes.objectFit]),"none"===i.styleAttributes.objectFit?(n.setAttribute("width",n.viewBox.baseVal.width+"px"),n.setAttribute("height",n.viewBox.baseVal.height+"px")):(t=n.viewBox.baseVal.width/n.viewBox.baseVal.height,"auto"!==e.styleAttributes.width&&"auto"!==e.styleAttributes.height?(n.setAttribute("height","100%"),n.setAttribute("width","100%")):"auto"===e.styleAttributes.width&&"auto"===e.styleAttributes.height?(n.setAttribute("width",n.viewBox.baseVal.width+"px"),n.setAttribute("height",n.viewBox.baseVal.height+"px")):("auto"===e.styleAttributes.width&&(n.setAttribute("height","100%"),n.setAttribute("width","".concat(Math.round(parseInt(e.styleAttributes.height,10)*t),"px"))),"auto"===e.styleAttributes.height&&(n.setAttribute("width","100%"),n.setAttribute("height","".concat(Math.round(parseInt(e.styleAttributes.width,10)/t),"px"))))))},this.fixFloatingImageSize=e=>{let t=this.getElement("image");t&&(this.getModel().floating&&"auto"===R(e,this.getEnvironment(),"host").styleAttributes.width?t.style.width="":t.style.width="100%")},this.originalApplyAutoAdaptiveStyles=this.applyAutoAdaptiveStyles,this.applyAutoAdaptiveStyles=this.applyStylesRespectingRelativePositioning,this.getRootElement().innerHTML="\n        ".concat("\n        <style>\n            img {\n              display: block;\n              max-height: inherit;\n              height: inherit;\n              min-height: inherit;\n            }\n        </style>\n    ",'\n        <img cl-element="image" draggable="false" alt="">\n    ')}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.resourcesLoadedListener)||void 0===e||e.off()}connectedCallback(){super.connectedCallback(),this.componentResourceManager.getPending().increment(),this.recalculateStylesAfterImageLoad(),this.observeProps(((e,t)=>{var n;this.applyAutoAdaptiveStyles(t.adaptiveStyles);var i=this.getElement("image");null!==(n=t.control)&&void 0!==n&&n.imageSource.url&&i&&"src"in i&&(i.src=t.control.imageSource.url),n=t.control.imageSource.url,i=e&&e.control.imageSource.url;let r=String(t.control.imageSource.url).endsWith(".svg")?t.control.imageSource.url:null;e=e&&String(e.control.imageSource.url).endsWith(".svg")?e.control.imageSource.url:null,r?r===e?this.applyAdaptiveStyles(t):(this.deleteElementIfPresent(this.getRootElement(),"img"),this.upsertSvg(this.getRootElement(),r).then((()=>{this.applyAdaptiveStyles(t)}))):n?n===i?this.applyAdaptiveStyles(t):(this.deleteElementIfPresent(this.getRootElement(),".svgOverflowContainer"),this.upsertImage(this.getRootElement(),n).then((()=>{this.applyAdaptiveStyles(t)}))):(this.deleteElementIfPresent(this.getRootElement(),".svgOverflowContainer"),this.upsertImage(this.getRootElement(),"".concat(this.services.config.getConfig("staticResourcesUrl"),"img/image-placeholder.svg")).then((()=>{this.applyAdaptiveStyles(t)})))}))}}_r.define={name:"sys-image",model:vr.name,manifest:vr};var fr={name:"SysTextComponent",componentType:"TEXT",version:"1.0.0",events:{dispatch:[],listen:[]},contextMenuModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]}],floatingPanelModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text"}]}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text"}]}]}],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host",params:{hideHeight:!0}},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host",params:{hideHeight:!0}},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"INSERT_BLOCK",params:[{element:"text",label:"DOCUMENT_TEXT",isLinkAvailable:!0,origin:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"host",elementProp:"styleAttributes",params:{onlyColorSelection:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"text",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"INSERT_BLOCK",params:[{element:"text",label:"DOCUMENT_TEXT",isLinkAvailable:!0,origin:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"host",elementProp:"styleAttributes",params:{onlyColorSelection:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"text",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]}]},autoContrast:[{slave:{element:"text",elementProp:"styleAttributes",elementSubProp:"color"},master:{element:"host",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","textContrastEnabled"]}],i18nPropPaths:["content,text","content,textrollers","content,mergeTags"],i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"INSERT_BLOCK",params:[{element:"text",label:"DOCUMENT_TEXT",isLinkAvailable:!0,origin:!1}]}]},defaultProps:{adaptiveStyles:{desktop:[{element:"host",styleAttributes:{width:"100%",minWidth:null,height:"auto",minHeight:null,marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",_marginEnabled:!1}},{element:"text",styleAttributes:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",_paddingEnabled:!1,color:"rgb(50, 66, 67)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},classes:""}],mobile:[{element:"host",styleAttributes:{width:"100%",minWidth:null,height:"auto",minHeight:null,marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",_marginEnabled:!1}},{element:"text",styleAttributes:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",_paddingEnabled:!1,color:"rgb(50, 66, 67)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},classes:""}]},content:{text:"Text",textContrastEnabled:!0}},metaDescription:{sortWeight:75,icon:"/claspo-editor/text-component-icon.svg",label:{en:"Text",ru:"Текст",uk:"Текст",es:"Texto",de:"Text",fr:"Texte",it:"Testo",pt:"Texto",ro:"Text",bg:"Текст",cs:"Text",el:"Κείμενο",nl:"Tekst",pl:"Tekst",sv:"Text",tr:"Metin",ar:"النَّص",zh:"文本字段",da:"Tekst",he:"טקסט",fi:"Teksti",hi:"टेक्स्ट",hr:"Tekst",hu:"Szöveg",id:"Teks",ja:"テキスト",ko:"텍스트",no:"Tekst",sk:"Text",sl:"Besedilo",sr:"Tekst"}}};let yr={maxWidth:"100%",width:"fit-content",display:"inline-flex",fontFamily:"inherit"},Tr={padding:"0 5px",display:"inline-block",maxWidth:"calc(100% - 0px)",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},Cr={display:"inline-flex",justifyContent:"center",minHeight:"fit-content"};class Ir extends pr{constructor(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:fr;super();var t=this;this.processTextRoller=function(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.getElement("text");if(n){var i="STATIC"===t.services.config.getConfig("entryModuleType");n.childNodes.forEach((t=>{if(t.nodeType!==Node.TEXT_NODE&&"TEXT_ROLLER"===t.getAttribute("cl-type")){var n=t.getAttribute("cl-id");if(n=e[n])if(i)D(t,n);else{var r=n;(n=document.createElement("span")).classList.add("outer");let e=document.createElement("span");e.classList.add("inner"),e.innerHTML=r.options.at(0)||"Option 1",e.setAttribute("contenteditable","false"),n.appendChild(e);let i=Object.assign(Object.assign({},Tr),r.styleAttributes),o=window.getComputedStyle(t.parentElement);x(e,i),r=V(r.options),x(n,Object.assign(Object.assign({},Cr),{borderRadius:e.style["border-radius"]||Cr.borderRadius,justifyContent:o["text-align"]||Cr.justifyContent}),r,i,parseFloat(o.width)),t.innerHTML="",x(t,Object.assign({},yr)),t.appendChild(n)}}}))}},this.stylesAppliedToElement=(e,t)=>{"text"===t.element&&t.styleAttributes.textAlign&&"flex"===getComputedStyle(e).display&&(e.style.justifyContent="center"===t.styleAttributes.textAlign?"center":"flex-".concat(t.styleAttributes.textAlign))},this.manifest=e,this.getRootElement().innerHTML='\n      <style>\n        .text {\n          outline: none;\n          min-height: 20px;\n          width: 100%;\n          overflow-wrap: break-word;\n        }\n      </style>\n      \n      <style>\n        [cl-type="TEXT_ROLLER"] {\n          position: relative;\n        }\n\n        .text {\n          align-items: center;\n        }\n        \n        .container--staticTextRoller {\n          display: inline-flex;\n          max-width: 100%;\n          width: fit-content;\n        }\n      \n        .container {\n          display: inline-flex;\n          align-items: center;\n          overflow: hidden;\n          position: relative;\n          height: 100%;\n        }\n\n        .opts {\n          position: absolute;\n          height: 100%;\n          width: 100%;\n          top: 0;\n          left: 0;\n          z-index: 1;\n          padding: 0;\n          margin: 0;\n          display: flex;\n          gap: 1px;\n          flex-direction: column-reverse;\n          transform: translateY(-100%);\n        }\n      \n        .opt {\n          width: 100%;\n          height: 100%;\n          text-align: center;\n          display: inline-flex;\n          justify-content: center;\n        }\n  \n        .opt span {\n         white-space: nowrap;\n         align-items: center;\n         text-overflow: ellipsis;\n         overflow: hidden;\n         width: fit-content;\n         max-width: 100%;\n         padding: 0 2px;\n        }\n      </style>\n\n      <div class="text" cl-element="text" cl-inline-edit="content, text"></div>\n    '}connectedCallback(){super.connectedCallback(),this.observeProps(((e,t)=>{var n,i,r;this.applyAutoAdaptiveStyles(t.adaptiveStyles),null!==(n=t.content)&&void 0!==n&&n.text&&this.getElement("text")&&(this.getElement("text").innerHTML=null===(i=t.content)||void 0===i?void 0:i.text,this.mergeTagsProcessor.process(this.getElement("text"),t.content.mergeTags,this.getModel().id)),this.processTextRoller(null===(r=t.content)||void 0===r?void 0:r.textrollers)})),this.observeShared((()=>{var e;let t=this.getProps();this.processTextRoller(null===(e=t.content)||void 0===e?void 0:e.textrollers)}))}}Ir.define={name:"sys-text",model:fr.name,manifest:fr};var Sr={name:"SysInputComponent",componentType:"INPUT",version:"1.0.0",mappingTypes:["TEXT","INTEGER","FLOAT"],contextMenuModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]}],floatingPanelModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.desktop.find(element => element.element === 'label').params.enabled"}]}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.mobile.find(element => element.element === 'label').params.enabled"}]}]}],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"input",elementProp:"styleAttributes",params:{width:{options:["fixed","fill"]},height:{options:["fixed","fill"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0,isLineSpaceAvailable:!0,isTextTransformAvailable:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.desktop.find(element => element.element === 'label').params.enabled",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"input",elementProp:"styleAttributes"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"INPUT_LABEL",elementProp:"params",element:"label"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"input",params:{indentationType:"PADDING",horizontalOnly:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"input",elementProp:"styleAttributes",params:{width:{options:["fixed","fill"]},height:{options:["fixed","fill"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0,isLineSpaceAvailable:!0,isTextTransformAvailable:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.desktop.find(element => element.element === 'label').params.enabled",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"input",elementProp:"styleAttributes"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"INPUT_LABEL",elementProp:"params",element:"label"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"input",params:{indentationType:"PADDING",horizontalOnly:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]}],general:[{type:"CONTROL",name:"TEXT_INPUT",propPath:["content","placeholder"],params:{label:"DOCUMENT_INPUT_PLACEHOLDER"}},{type:"CONTROL",name:"INTEGRATION_FIELD_MAPPING",displayCondition:"const controlName = sdk.component.getProps().control.name; return !['email', 'phone', 'first_name', 'last_name'].includes(controlName);",params:{integrationNamePropPath:["control","integrationName"],groupNamePropPath:["control","groupName"],fieldNamePropPath:["control","fieldName"],fieldTypePropPath:["control","fieldType"],validationPropPath:["control","validation"],placeholderPropPath:["content","placeholder"],labelPropPath:["content","label"],optionsPropPath:["control","options"]}},{type:"CONTROL",name:"INPUT_VALIDATION",params:{validationPropPath:["control","validation"],fieldTypePropPath:["control","fieldType"],required:!0,options:[{label:"not selected",value:null},{label:"email",value:"EMAIL"},{label:"name",value:"SYS_NAME"}],validationErrors:{EMAIL:[{key:"EMAIL_IS_INVALID",value:"Email is invalid"},{key:"MAX_LENGTH_50",value:"Maximum length is 50"}],SYS_NAME:[{key:"NAME_CONTAINS_NUMBERS",value:"Name contains numbers"},{key:"NAME_CONTAINS_FORBIDDEN_CHARACTERS",value:"Name contains forbidden characters"},{key:"MAX_LENGTH_40",value:"Maximum length is 40"}]}}}]},autoContrast:[{slave:{element:"input",elementProp:"styleAttributes",elementSubProp:"color"},master:{element:"input",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","textContrastEnabled"]},{slave:{element:"input",elementProp:"placeholderStyleAttributes",elementSubProp:"color",dimmed:!0},master:{element:"input",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","placeholderTextContrastEnabled"]}],i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"TEXT_INPUT",propPath:["content","placeholder"],params:{label:"DOCUMENT_INPUT_PLACEHOLDER"}}]},focusableElements:["input","label"],events:{dispatch:[],listen:[]},i18nPropPaths:["content,label","content,suggestionLabel","content,placeholder"],i18n:{en:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Up to 3 words comprising up to 3 characters","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Up to 3 words comprising more than 3 characters","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Invalid characters used: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 digits maximum","control,validation,validationErrors,MAX_LENGTH_40":"Maximum length is 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximum length is 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Add alphabetical characters","control,validation,validationErrors,EMAIL_IS_INVALID":"Email is invalid","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Emails with this domain are not acceptable. Please use a business email address","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"No more than 4 numbers are allowed","control,validation,validationErrors,REQUIRED":"Required field","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximum length is 1000","content,label":"Title","content,suggestionLabel":"Did you mean"},ru:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"До 3 слов до 3 символов каждое","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"До 3 слов более 3 символов каждое","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Недопустимые символы: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"До 3 цифр","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Name consisting only of numbers and special characters is not allowed","control,validation,validationErrors,MAX_LENGTH_40":"Максимальная длина 40 символов","control,validation,validationErrors,MAX_LENGTH_50":"Максимальная длина 50 символов","control,validation,validationErrors,EMAIL_IS_INVALID":"Неверно заполнен Email","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Email с таким доменом не может быть использован. Пожалуйста, используйте корпоративный email","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>До 40 алфавитных символов.</p><p>Также допускаются:</p><ul><li>апострофы «'»</li><li>дефисы «-»</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Допускается не более 4 цифры","control,validation,validationErrors,REQUIRED":"Обязательное поле","control,validation,validationErrors,INTEGER_FORMAT":"Значение должно быть целым числом","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Минимальное значение -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Максимальное значение 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Значение должно быть числом с разделителем точкой","control,validation,validationErrors,MAX_LENGTH_1000":"Максимальная длина 1000 символов","content,label":"Заголовок","content,suggestionLabel":"Вы имели в виду"},uk:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"До 3-х слів до 3-х символів кожне","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"До 3-х слів більш ніж 3 символи кожне","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Заборонені символи: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"До 3 цифр","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Додайте алфавітні символи","control,validation,validationErrors,EMAIL_IS_INVALID":"Неправильно заповнено Email","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Email-адреса з таким доменом не може бути використана. Будь ласка, використовуйте корпоративну email-адресу","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>До 40 алфавітних символів.</p><p>Також дозволяються:</p><ul><li>апострофи «'»</li><li>дефіси «-»</li></ul>","control,validation,validationErrors,MAX_LENGTH_40":"Максимальна довжина 40","control,validation,validationErrors,MAX_LENGTH_50":"Максимальна довжина 50","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Допускається не більше 4 цифри","control,validation,validationErrors,REQUIRED":"Обов'язкове поле","control,validation,validationErrors,INTEGER_FORMAT":"Значення має бути цілим числом","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Мінімальне значення -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Максимальне значення 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Значення має бути цілим числом с роздільником крапкою","control,validation,validationErrors,MAX_LENGTH_1000":"Максимальна довжина 1000","content,label":"Заголовок","content,suggestionLabel":"Ви мали на увазi"},es:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Hasta 3 palabras que comprenden hasta 3 caracteres","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Hasta 3 palabras de más de 3 caracteres","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caracteres no válidos utilizados: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 dígitos máximo","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Añadir caracteres alfabéticos","control,validation,validationErrors,EMAIL_IS_INVALID":"Este email no es válido","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"No se aceptan correos electrónicos con este dominio. Utilice una dirección de correo electrónico comercial","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Máximo 40 caracteres alfabéticos.</p><p>Están premitidos:</p><ul><li>apóstrofes (')</li><li>guiones (-)</li></ul>","control,validation,validationErrors,MAX_LENGTH_40":"Longitud máxima es de 40","control,validation,validationErrors,MAX_LENGTH_50":"Logitud máxima es de 50","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"No están permitidos más de 4 números","control,validation,validationErrors,REQUIRED":"Campo obligatorio","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Longitud máxima es de 1000","content,label":"Título","content,suggestionLabel":"Quiso decir"},de:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Bis zu 3 Wörter mit bis zu 3 Zeichen","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Bis zu 3 Wörter mit mehr als 3 Zeichen","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ungültige Zeichen verwendet: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximal 3 Ziffern","control,validation,validationErrors,MAX_LENGTH_40":"Maximale Länge beträgt 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximale Länge beträgt 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Alphabetische Zeichen hinzufügen","control,validation,validationErrors,EMAIL_IS_INVALID":"E-Mail-Adresse ist ungültig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-Mails mit dieser Domain werden nicht akzeptiert. Bitte verwenden Sie eine geschäftliche E-Mail-Adresse","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Maximal 40 alphabetische Zeichen ohne Leerzeichen, auch Apostrophe und Bindestriche sind erlaubt.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Es sind nicht mehr als 4 Nummern erlaubt","control,validation,validationErrors,REQUIRED":"Pflichtfeld","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximale Länge beträgt 1000","content,label":"Titel","content,suggestionLabel":"Meinten Sie"},fr:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Jusqu'à 3 mots comprenant jusqu'à 3 caractères","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Jusqu'à 3 mots comprenant plus de 3 caractères","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caractères non valides utilisés: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 chiffres maximum","control,validation,validationErrors,MAX_LENGTH_40":"La longueur maximale est de 40","control,validation,validationErrors,MAX_LENGTH_50":"La longueur maximale est de 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Ajouter des caractères alphabétiques","control,validation,validationErrors,EMAIL_IS_INVALID":"Le courriel est invalide","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Les e-mails avec ce nom de domaine ne sont pas acceptables. Veuillez utiliser une adresse e-mail professionnelle","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Max 40 caractères alphabétiques sans espaces. Également autorisés : apostrophes, tirets.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Pas plus de 4 numéros sont autorisés","control,validation,validationErrors,REQUIRED":"Champs requis","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"La longueur maximale est de 1000","content,label":"Titre","content,suggestionLabel":"Vouliez-vous dire"},it:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Fino a 3 parole composte da un massimo di 3 caratteri","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Fino a 3 parole composte da più di 3 caratteri","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caratteri non validi utilizzati: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 cifre massimo","control,validation,validationErrors,MAX_LENGTH_40":"La lunghezza massima è 40","control,validation,validationErrors,MAX_LENGTH_50":"La lunghezza massima è 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Aggiunga caratteri alfabetici","control,validation,validationErrors,EMAIL_IS_INVALID":"L'email non è valida","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Le email con questo dominio non sono accettate. Utilizzare un indirizzo email aziendale","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Massimo 40 caratteri alfabetici senza spazi. Consentiti anche apostrofi e trattini","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Non sono ammessi più di 4 numeri","control,validation,validationErrors,REQUIRED":"Campo obbligatorio","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"La lunghezza massima è 1000","content,label":"Titolo","content,suggestionLabel":"Intendevi"},pt:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Até 3 palavras com até 3 caracteres","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Até 3 palavras com mais de 3 caracteres","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caracteres inválidos usados: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Máximo de 3 dígitos","control,validation,validationErrors,MAX_LENGTH_40":"Comprimento máximo de 40","control,validation,validationErrors,MAX_LENGTH_50":"Comprimento máximo de 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Adicionar caracteres alfabéticos","control,validation,validationErrors,EMAIL_IS_INVALID":"Email inválido","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Os emails com este domínio não são aceites. Utilize um endereço de email profissional","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Máximo de 40 caracteres alfabéticos sem espaços. Também permitido: apóstrofes, hífens","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Não são permitidos mais de 4 espaços","control,validation,validationErrors,REQUIRED":"Campo obrigatório","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Comprimento máximo de 1000","content,label":"Título","content,suggestionLabel":"Quiz dizer"},ro:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Până la 3 cuvinte care să conțină cel mult 3 caractere","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Până la 3 cuvinte care să conțină mai mult de 3 caractere","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caractere nevalide folosite: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Cel mult 3 cifre","control,validation,validationErrors,MAX_LENGTH_40":"Lungimea maximă este de 40","control,validation,validationErrors,MAX_LENGTH_50":"Lungimea maximă este de 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Adăugați caractere alfabetice","control,validation,validationErrors,EMAIL_IS_INVALID":"Emailul nu este valid","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mailurile cu acest domeniu nu sunt acceptabile. Vă rugăm să folosiți o adresă de e-mail de afaceri","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Cel mult 40 de caractere alfabetice fără spații. Sunt permise și apostrofuri, cratime.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Nu sunt permise mai mult de 4 cifre","control,validation,validationErrors,REQUIRED":"Câmp obligatoriu","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Lungimea maximă este de 1000","content,label":"Titlu","content,suggestionLabel":"Ai vrut să spui"},bg:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"До 3 думи, съдържащи до 3 символа","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"До 3 думи, състоящи се от повече от 3 символа","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Използвани са невалидни: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 цифри максимум","control,validation,validationErrors,MAX_LENGTH_40":"Максималната дължина е 40","control,validation,validationErrors,MAX_LENGTH_50":"Максималната дължина е 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Добави азбучни символи","control,validation,validationErrors,EMAIL_IS_INVALID":"Имейлът е невалиден","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Имейли с този домейн са неприемливи. Моля, използвайте бизнес имейл адрес.","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Максимум 40 азбучни знака без интервали. Допустими са още: апострофи, тирета.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Не са допустими повече от 4 цифри","control,validation,validationErrors,REQUIRED":"Изисквано поле","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Максималната дължина е 1000","content,label":"Заглавие","content,suggestionLabel":"Имахте предвид"},cs:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Až 3 slova obsahující až 3 znaky","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Až 3 slova obsahující více než 3 znaky","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Použité neplatné znaky: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximum 3 číslice","control,validation,validationErrors,MAX_LENGTH_40":"Maximální délka je 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximální délka je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Přidejte znaky abecedy","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail je neplatný","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-maily s touto doménou nejsou přípustné. Použijte prosím firemní e-mailovou adresu","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Nanejvýš 40 znaků abecedy bez mezer. Také jsou povoleny: apostrofy, pomlčky.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Nejsou povolena více než 4 čísla","control,validation,validationErrors,REQUIRED":"Vyžadované pole","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximální délka je 1000","content,label":"Titul","content,suggestionLabel":"Mysleli jste"},el:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Μέχρι 3 λέξεις που περιέχουν μέχρι 3 χαρακτήρες","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Μέχρι 3 λέξεις που περιέχουν περισσότερους από 3 χαρακτήρες","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Χρησιμοποιήθηκαν άκυροι χαρακτήρες: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 ψηφία μάξιμουμ","control,validation,validationErrors,MAX_LENGTH_40":"Το μέγιστο μήκος είναι 40","control,validation,validationErrors,MAX_LENGTH_50":"Το μέγιστο μήκος είναι 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Πρόσθεσε αλφαβητικούς χαρακτήρες","control,validation,validationErrors,EMAIL_IS_INVALID":"Η ηλεκτρονική διεύθυνση είναι α΄κυρη","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Τα email με αυτόν τον τομέα δεν είναι αποδεκτά. Παρακαλούμε χρησιμοποιήστε μια επαγγελματική διεύθυνση ηλεκτρονικού ταχυδρομείου","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Μάξιμουμ 40 αλφαβητικοί χαρακτήρες χωρίς κενά. Επίσης επιτρέπονται: απόστροφοι, παύλες","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Δεν επιτρέπονται πάνω από 4 αριθμοί","control,validation,validationErrors,REQUIRED":"Απαιτητό πεδίο","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Το μέγιστο μήκος είναι 1000","content,label":"Τίτλος","content,suggestionLabel":"Εννοούσες"},nl:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Maximaal 3 woorden bestaande uit maximaal 3 tekens","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Maximaal 3 woorden bestaande uit meer dan 3 tekens","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ongeldige tekens gebruikt: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximaal 3 cijfers","control,validation,validationErrors,MAX_LENGTH_40":"Maximale lengte is 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximale lengte is 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Voeg alfabetische tekens toe","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail is ongeldig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mails met dit domein worden niet geaccepteerd. Gebruik een zakelijk e-mailadres","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Max. 40 alfabetische tekens zonder spaties. Ook toegestaan: apostrofs, koppeltekens.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Niet meer dan 4 cijfers toegestaan","control,validation,validationErrors,REQUIRED":"Verplicht veld","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximale lengte is 1000","content,label":"Titel","content,suggestionLabel":"Bedoelde u"},pl:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Do 3 słów złożonych z nie więcej niż 3 znaków","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Do 3 słów złożonych z ponad 3 znaków","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Użyto nieprawidłowych znaków: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maksymalnie 3 cyfry","control,validation,validationErrors,MAX_LENGTH_40":"Maksymalna długość to 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksymalna długość to 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Wszystkie znaki alfabetu","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail jest nieprawidłowy","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Adresy e-mail z tej domeny nie są akceptowane. Użyj firmowego adresu e-mail","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Maks. 40 znaków alfabetu be spacji. Dozwolone także: apostrofy, łączniki.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Dozwolone są maksymalnie 4 cyfry","control,validation,validationErrors,REQUIRED":"Wymagane pole","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksymalna długość to 1000","content,label":"Tytuł","content,suggestionLabel":"Czy miałeś(-aś) na myśli"},sv:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Upp till 3 ord med upp till 3 tecken","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Upp till 3 ord med mer än 3 tecken","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ogiltiga tecken används: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Max 3 siffror","control,validation,validationErrors,MAX_LENGTH_40":"Maximal längd är 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximal längd är 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Lägg till alfabetiska tecken","control,validation,validationErrors,EMAIL_IS_INVALID":"Ogiltig e-post","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-postadresser från denna domän är inte godkända. Var vänlig använd en företagsadress","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Max 40 alfabetiska tecken utan mellanslag.Också tillåtet: apostrofer, bindestreck.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Max 4 siffror är tillåtna","control,validation,validationErrors,REQUIRED":"Obligatoriskt fält","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximal längd är 1000","content,label":"Tytuł","content,suggestionLabel":"Menade du"},tr:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"3 karaktere kadar en fazla 3 kelime","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"3'ten fazla karakter içeren en fazla 3 kelime","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Geçersiz karakterler kullanıldı: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maksimum 3 hane","control,validation,validationErrors,MAX_LENGTH_40":"Maksimum uzunluk 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimum uzunluk 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Alfabetik karakterler ekle","control,validation,validationErrors,EMAIL_IS_INVALID":"E-posta geçersiz","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Bu alan adına sahip e-postalar kabul edilmez. Lütfen bir iş e-posta adresi kullanın","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Boşluksuz en fazla 40 alfabetik karakter. Ayrıca şunlara izin verilir: kesme işaretleri, tireler.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"4'ten fazla sayıya izin verilmez","control,validation,validationErrors,REQUIRED":"Gerekli alan","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimum uzunluk 1000","content,label":"Başlık","content,suggestionLabel":"Mi demek istediniz"},ar:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"ما يصل إلى 3 كلمات تتكون من 3 أحرف","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"ما يصل إلى 3 كلمات تتكون من أكثر من 3 أحرف","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":"الأحرف غير الصالحة المستخدَمة {{characters}}","control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 أرقام كحد أقصى","control,validation,validationErrors,MAX_LENGTH_40":"الحد الأقصى للطول هو 40","control,validation,validationErrors,MAX_LENGTH_50":"الحد الأقصى للطول هو 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"أضف أحرفًا أبجدية","control,validation,validationErrors,EMAIL_IS_INVALID":"البريد الإلكتروني غير صالح","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"رسائل البريد الإلكتروني من هذا المجال غير مقبولة. الرجاء استخدام عنوان بريد إلكتروني خاص بالعمل","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"40 حرفًا أبجديًا كحد أقصى، يُسمح أيضًا: المسافات والفواصل والفواصل العليا والشرطات.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"لا يسمح بأكثر من 4 أرقام","control,validation,validationErrors,REQUIRED":"الحقل المطلوب","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"الحد الأقصى للطول هو 1000","content,label":"عنوان","content,suggestionLabel":"هل تقصد"},zh:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"最多 3 个单词，每个单词最多 3 个字符","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"最多 3 个超过 3 个字符的单词","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'使用了无效的字符: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"最多 3 位数","control,validation,validationErrors,MAX_LENGTH_40":"最大长度为 40","control,validation,validationErrors,MAX_LENGTH_50":"最大长度为 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"添加字母字符","control,validation,validationErrors,EMAIL_IS_INVALID":"电子邮箱无效","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"不接受含有此域名的电子邮箱，请使用企业电子邮箱地址","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"No more than 4 numbers are allowed","control,validation,validationErrors,REQUIRED":"必填字段","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"最大长度为 1000","content,label":"Title","content,suggestionLabel":"您是想说 吗"},da:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Op til 3 ord med op til 3 tegn","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Op til 3 ord med mere end 3 tegn","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ugyldige tegn brugt: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Højest 3 cifre","control,validation,validationErrors,MAX_LENGTH_40":"Maksimum længde er 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimum længde er 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Tilføj alfabetiske tegn","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail er ugyldig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mails med dette domæne er ikke acceptable. Brug venligst en virksomheds-e-mailadresse","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Maks. 40 alfabetiske tegn.</p><p>Også tilladt:</p><ul><li>apostrof (')</li><li>bindestreger (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Der er ikke tilladt mere end 4 pladser","control,validation,validationErrors,REQUIRED":"Påkrævet felt","control,validation,validationErrors,INTEGER_FORMAT":"Værdien skal være heltal","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimumsværdien er -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maksimal værdi er 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Værdien skal være tal med punktafgrænser","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimum længde er 1000","content,label":"Titel","content,suggestionLabel":"Mente du"},he:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"עד 3 מילים הכוללות עד 3 תווים","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"עד 3 מילים הכוללות יותר מ-3 תווים","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'שימוש בתווים לא חוקיים "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"מקסימום 3 ספרות","control,validation,validationErrors,MAX_LENGTH_40":"אורך מקסימלי הוא 40","control,validation,validationErrors,MAX_LENGTH_50":"אורך מקסימלי הוא 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"הוסיפו תווים אלפבתיים","control,validation,validationErrors,EMAIL_IS_INVALID":"אימייל לא תקין","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":'אימיילים עם דומיין זה אינם קבילים. אנא השתמשו בכתובת דוא"ל עסקית',"control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"אסור יותר מ-4 רווחים","control,validation,validationErrors,REQUIRED":"שדה נדרש","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"אורך מקסימלי הוא 1000","content,label":"Title","content,suggestionLabel":"האם התכוונתם ל"},fi:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Enintään kolme sanaa, joissa on korkeintaan kolme merkkiä","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Enintään kolme sanaa, joissa on yli kolme merkkiä","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Virheellisiä merkkejä käytettiin "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Korkeintaan kolme lukua","control,validation,validationErrors,MAX_LENGTH_40":"Maksimipituus on 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimipituus on 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Lisää aakkosellisia merkkejä","control,validation,validationErrors,EMAIL_IS_INVALID":"Sähköposti on virheellinen","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Tämän verkkotunnuksen sähköposteja ei hyväksytä. Käytä yritys- tai työsähköpostia","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Enintään 4 numeroa sallitaan","control,validation,validationErrors,REQUIRED":"Vaadittu kenttä","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimipituus on 1000","content,label":"Title","content,suggestionLabel":"Tarkoititko tätä:"},hi:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"अधिकतम 3 अक्षर वाले 3 शब्द","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"3 से अधिक अक्षरों वाले 3 शब्द तक","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'अमान्य वर्णों का उपयोग किया गया "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"अधिकतम 3 संख्या","control,validation,validationErrors,MAX_LENGTH_40":"अधिकतम लंबाई 40 है","control,validation,validationErrors,MAX_LENGTH_50":"अधिकतम लंबाई 50 है","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"वर्णमाला के वर्ण जोड़ें","control,validation,validationErrors,EMAIL_IS_INVALID":"ईमेल अमान्य है","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"इस डोमेन वाले ईमेल स्वीकार्य नहीं हैं. कृपया बिज़नेस ईमेल एड्रेस इस्तेमाल करें","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"अधिकतम 4 नंबर की अनुमति है","control,validation,validationErrors,REQUIRED":"आवश्यक फील्ड","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"अधिकतम लंबाई 1000 है","content,label":"Title","content,suggestionLabel":"क्या आपका मतलब"},hr:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Najviše 3 riječi koje sadrže do 3 znaka","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Najviše 3 riječi koje sadrže više od 3 znaka","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Korišteni su nevažeći znakovi "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Najviše 3 znamenke","control,validation,validationErrors,MAX_LENGTH_40":"Maksimalna duljina je 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimalna duljina je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Dodajte abecedne znakove","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail nije ispravan","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mail adrese s ovom domenom nisu prihvatljive. Molimo koristite poslovnu e-mail adresu","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Dopuštena su najviše 4 broja","control,validation,validationErrors,REQUIRED":"Obavezno polje","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimalna duljina je 1000","content,label":"Title","content,suggestionLabel":"Jeste li mislili"},hu:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Legfeljebb 3 szó, amely legfeljebb 3 karakterből áll","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Legfeljebb 3 szó, amely több mint 3 karakterből áll","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Érvénytelen karakterek használata "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Legfeljebb három számjegy","control,validation,validationErrors,MAX_LENGTH_40":"A maximális hossz 40","control,validation,validationErrors,MAX_LENGTH_50":"A maximális hossz 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Betűk hozzáadása","control,validation,validationErrors,EMAIL_IS_INVALID":"Az e-mail érvénytelen","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Az ezzel a domainnel küldött e-mailek nem fogadhatók el. Kérjük, használjon üzleti e-mail címet","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Legfeljebb 4 szám megengedett","control,validation,validationErrors,REQUIRED":"Kötelező mező","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"A maximális hossz 1000","content,label":"Title","content,suggestionLabel":"Úgy értetted, hogy"},id:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Hingga 3 kata yang terdiri dari hingga 3 karakter","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Hingga 3 kata yang terdiri lebih dari 3 karakter","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Karakter tidak valid yang digunakan "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maksimal 3 digit","control,validation,validationErrors,MAX_LENGTH_40":"Panjang maksimum adalah 40","control,validation,validationErrors,MAX_LENGTH_50":"Panjang maksimum adalah 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Tambahkan karakter alfabet","control,validation,validationErrors,EMAIL_IS_INVALID":"Email tidak valid","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Email dengan domain ini tidak dapat diterima. Silakan gunakan alamat email bisnis","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Tidak lebih dari 4 angka yang diizinkan","control,validation,validationErrors,REQUIRED":"Bidang yang wajib diisi","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Panjang maksimum adalah 1000","content,label":"Title","content,suggestionLabel":"Apakah yang Anda maksud adalah"},ja:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"最大3文字の単語を最大3つまで","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"3文字を超える単語を最大3つまで","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'無効な文字が使用されています "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"最大3桁","control,validation,validationErrors,MAX_LENGTH_40":"最長40文字です","control,validation,validationErrors,MAX_LENGTH_50":"最長50文字です","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"アルファベット文字を追加","control,validation,validationErrors,EMAIL_IS_INVALID":"メールアドレスが無効です","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"このドメインのメールは受け付けられません。ビジネス用のメールアドレスをお使いください。","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"数字は4つまでしか使用できません","control,validation,validationErrors,REQUIRED":"必須フィールド","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"最長1000文字です","content,label":"Title","content,suggestionLabel":"ということですか"},ko:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"최대 3자로 구성된 단어 최대 3개까지","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"3자 이상으로 구성된 단어 최대 3개까지","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'"{{characters}}"(이)가 사용된 잘못된 문자',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"최대 3자리","control,validation,validationErrors,MAX_LENGTH_40":"최대 길이 40","control,validation,validationErrors,MAX_LENGTH_50":"최대 길이 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"알파벳 문자 추가","control,validation,validationErrors,EMAIL_IS_INVALID":"유효하지 않은 이메일","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"이 도메인이 사용된 이메일은 허용되지 않습니다. 업무용 이메일 주소를 사용하십시오.","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"숫자는 4개 이상 사용할 수 없습니다","control,validation,validationErrors,REQUIRED":"필수 칸","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"최대 길이 1000","content,label":"Title","content,suggestionLabel":"(을)를 의미하신 건가요"},no:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Opptil tre ord bestående av opptil tre tegn","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Opptil tre ord med mer enn tre tegn","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ugyldige tegn brukt "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maks. tre sifre","control,validation,validationErrors,MAX_LENGTH_40":"Maksimal lengde er 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimal lengde er 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Legg til alfabetiske tegn","control,validation,validationErrors,EMAIL_IS_INVALID":"E-posten er ugyldig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-post med dette domenet er ikke akseptabelt. Bruk en bedrifts-e-postadresse","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Ikke mer enn fire tall er tillatt","control,validation,validationErrors,REQUIRED":"Obligatorisk felt","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimal lengde er 1000","content,label":"Title","content,suggestionLabel":"Mente du"},sk:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Maximálne 3 slová obsahujúce až 3 znaky","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Maximálne 3 slová obsahujúce viac ako 3 znaky","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Použité neplatné znaky "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximálne 3 číslice","control,validation,validationErrors,MAX_LENGTH_40":"Maximálna dĺžka je 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximálna dĺžka je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Pridajte abecedné znaky","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail je neplatný","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-maily s touto doménou nie sú prijateľné. Použite firemnú e-mailovú adresu","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Nie sú povolené viac ako 4 číslice","control,validation,validationErrors,REQUIRED":"Povinné pole","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximálna dĺžka je 1000","content,label":"Title","content,suggestionLabel":"Mali ste na mysli slovo"},sl:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Do 3 besede, ki vsebujejo do 3 znake","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Do 3 besede, ki vsebujejo več kot 3 znake","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Uporabljeni neveljavni znaki "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Največ 3 števke","control,validation,validationErrors,MAX_LENGTH_40":"Največja dolžina je 40","control,validation,validationErrors,MAX_LENGTH_50":"Največja dolžina je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Dodajte abecedne znake","control,validation,validationErrors,EMAIL_IS_INVALID":"E-poštni naslov je neveljaven","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-poštna sporočila s to domeno niso sprejemljiva. Uporabite poslovni e-poštni naslov.","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Dovoljene so največ 4 številke","control,validation,validationErrors,REQUIRED":"Obvezno polje","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Največja dolžina je 1000","content,label":"Title","content,suggestionLabel":"Ste mislili"},sr:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Do 3 reči koje sadrže do 3 znaka","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Do 3 reči koje sadrže više od 3 znaka","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Korišćeni su nevažeći znakovi "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 cifre maksimalno","control,validation,validationErrors,MAX_LENGTH_40":"Maksimalna dužina je 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimalna dužina je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Dodajte abecedne znakove","control,validation,validationErrors,EMAIL_IS_INVALID":"E-pošta je nevažeća","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Adrese e-pošte sa ovim domenom nisu prihvatljive. Koristite poslovnu adresu e-pošte","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Nije dozvoljeno više od 4 broja","control,validation,validationErrors,REQUIRED":"Obavezno polje","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimalna dužina je 1000","content,label":"Title","content,suggestionLabel":"Da li ste mislili"}},defaultProps:{content:{placeholder:"Placeholder",label:"Title",suggestionLabel:"Did you mean",textContrastEnabled:!0,placeholderTextContrastEnabled:!0},control:{name:"email",integrationName:"email",defaultValue:"",validation:{required:!0,validator:"EMAIL",validationErrors:{EMAIL_IS_INVALID:"Email is invalid",REQUIRED:"This field can't be empty"}}},adaptiveStyles:{desktop:[{element:"host",styleAttributes:{marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",_marginEnabled:!1},classes:""},{element:"input",styleAttributes:{width:"100%",minWidth:null,height:"35px",minHeight:"35px",background:"rgb(255, 255, 255)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"1px",borderTopColor:"rgba(0, 0, 0, 0.1)",borderBottomWidth:"1px",borderBottomColor:"rgba(0, 0, 0, 0.1)",borderLeftWidth:"1px",borderLeftColor:"rgba(0, 0, 0, 0.1)",borderRightWidth:"1px",borderRightColor:"rgba(0, 0, 0, 0.1)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none",color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",_paddingEnabled:!0},placeholderStyleAttributes:{color:"rgb(81, 81, 81)"},classes:""},{element:"label",styleAttributes:{color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},params:{enabled:!1,position:"TOP",margin:5},classes:""}],mobile:[{element:"host",styleAttributes:{marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",_marginEnabled:!1},classes:""},{element:"input",styleAttributes:{width:"100%",minWidth:null,height:"35px",minHeight:"35px",background:"rgb(255, 255, 255)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"1px",borderTopColor:"rgba(0, 0, 0, 0.1)",borderBottomWidth:"1px",borderBottomColor:"rgba(0, 0, 0, 0.1)",borderLeftWidth:"1px",borderLeftColor:"rgba(0, 0, 0, 0.1)",borderRightWidth:"1px",borderRightColor:"rgba(0, 0, 0, 0.1)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none",color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",_paddingEnabled:!0},placeholderStyleAttributes:{color:"rgb(81, 81, 81)"},classes:""},{element:"label",styleAttributes:{color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},params:{enabled:!1,position:"TOP",margin:5},classes:""}]}},metaDescription:{sortWeight:40,icon:"/claspo-editor/email-input-component-icon.svg",label:{en:"Text input",ru:"Текстовое поле",uk:"Текстове поле",es:"Entrada de texto",fr:"Saisie de texte",de:"Text-Input",it:"Input testo",pt:"Introdução de texto",ro:"Text input",bg:"Text input",cs:"Text input",el:"Text input",nl:"Text input",pl:"Text input",sv:"Text input",tr:"Text input",ar:"Text input",zh:"文本输入",da:"Tekst input",he:"הזנת טקסט",fi:"Tekstinsyöttö",hi:"टेक्स्ट इनपुट",hr:"Unos teksta",hu:"Szövegbevitel",id:"Masukan teks",ja:"テキスト入力",ko:"텍스트 입력",no:"Tekstinntasting",sk:"Zadávanie textu",sl:"Vnos besedila",sr:"Unos teksta"}}};class br{constructor(){this.emailSuggestionOverlayBackdrop=this.lastEmailSuggestionCheckedValue=null}suggestEmail(e,t,n,i,r,o,s,a){!t.value||this.lastEmailSuggestionCheckedValue===t.value&&!n||e.control.validation&&e.control.validation.restrictFreeDomains||(this.lastEmailSuggestionCheckedValue=t.value,o.elementRef.classList.contains("invalid")||br.mostPopularProviders.includes(t.value.toLowerCase().split("@")[1])||(n=e=>{this.createSuggestionOverlay(i,e,t,o,a),br.preventSubmit(r)},(e=br.suggestEmailSync(t.value))?n(e):(o.setPending(!0),this.checkSuggestionOnBackend(n,t,o,s))))}emailValueChanged(){this.lastEmailSuggestionCheckedValue=null}hideEmailSuggestion(){this.emailSuggestionOverlayBackdrop&&this.emailSuggestionOverlayBackdrop.click()}createSuggestionOverlay(e,t,n,i,r){this.hideEmailSuggestion(),setTimeout((()=>{this.emailSuggestionOverlayBackdrop=e.overlay.createMenuOverlay({triggerElement:n,overlayStyles:F(e.overlay.getMenuOverlayContentClassName()),createOverlayContent:(e,n)=>{br.createOverlayContent(t,e,n,i,r)},overlayWidth:220,overlayHeight:90,positionByDefault:"top",isHorizontallyCentered:!0,isBackdropDisabledOnUI:!0,onDestroy:()=>{this.emailSuggestionOverlayBackdrop=null},offset:10}).backdrop}),50)}checkSuggestionOnBackend(e,t,n,i){return fetch("".concat(i,"forms/v1/suggestion/email?value=").concat(t.value),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"text/plain",Accept:"application/json, text/plain, */*"}}).then((e=>{if(!e.ok)throw Error();return e.text()})).then((t=>{t&&e(t),n.setPending(!1)})).catch((e=>{n.setPending(!1)}))}static createOverlayContent(e,t,n,i,r){var o=r();(r=document.createElement("div")).classList.add("suggestion-text-container");let s=document.createElement("div");s.classList.add("did-you-mean-text"),s.innerHTML=o["content,suggestionLabel"],(o=document.createElement("div")).classList.add("suggestion-text"),o.innerHTML="".concat(e,"?");let a=document.createElement("div");a.classList.add("accept-button");let l=document.createElement("div");l.classList.add("deny-button"),r.appendChild(s),r.appendChild(o),a.addEventListener("click",(()=>{let n=i.value.split("@")[0];i.setValue("".concat(n,"@").concat(e)),t.click()})),l.addEventListener("click",(()=>{t.click()})),n.appendChild(r),n.appendChild(a),n.appendChild(l)}static preventSubmit(e){e.setPreventSubmit(!0),setTimeout((()=>e.setPreventSubmit(!1)),200)}static suggestEmailSync(e){if(e=e.toLowerCase().split("@")[1]||"",-1<br.mostPopularProviders.indexOf(e))return null;var t=br.getSuggestionAfterDotChecks(e);if(t)return t;if(2!==(e=e.split(".")).length)return null;var n=e[1];let i=e[0];var r=br.mostPopularProviders.map((e=>e.replace(".".concat(br.providersListTopLevelDomain),"")));e=br.getLevenshteinDistance(br.providersListTopLevelDomain,n);var o=r.map((e=>br.getLevenshteinDistance(e,i)));return t=Math.min(...o),2<e||2<t?null:(r=br.getAllMinimalDistanceDomains(t,o,r),n=br.isTwoCharsWrongOrder([br.providersListTopLevelDomain],n),o=br.isTwoCharsWrongOrder(r,i),1>=e&&1>=t?"".concat(r[0],".").concat(br.providersListTopLevelDomain):1<e&&1>=t?n?"".concat(r[0],".").concat(br.providersListTopLevelDomain):null:1>=e&&1<t?o?"".concat(o,".").concat(br.providersListTopLevelDomain):null:2===e&&2===t&&n&&o?"".concat(o,".").concat(br.providersListTopLevelDomain):null)}static getSuggestionAfterDotChecks(e){return br.mostPopularProviders.find((t=>br.isDotLocatedInWrongPlace(t,e)))}static isDotLocatedInWrongPlace(e,t){if(t)return t.replace(".","")===e.replace(".","")}static getLevenshteinDistance(e,t){if(!e.length)return t.length;if(!t.length)return e.length;let n=[];for(let i=0;i<=t.length;i++){n[i]=[i];for(let r=1;r<=e.length;r++)n[i][r]=0===i?r:Math.min(n[i-1][r]+1,n[i][r-1]+1,n[i-1][r-1]+(e[r-1]===t[i-1]?0:1))}return n[t.length][e.length]}static getAllMinimalDistanceDomains(e,t,n){let i=t.reduce(((t,n,i)=>(n===e&&t.push(i),t)),[]);return n.filter(((e,t)=>i.includes(t)))}static isTwoCharsWrongOrder(e,t){return e.find((e=>{let n=br.findIndexOfFirstDiffInTwoStrings(t,e);return t.charAt(n)===e.charAt(n+1)&&e.charAt(n)===t.charAt(n+1)}))}static findIndexOfFirstDiffInTwoStrings(e,t){return[...e].findIndex(((e,n)=>e!==t[n]))}}br.providersListTopLevelDomain="com",br.mostPopularProviders="gmail.com yahoo.com outlook.com hotmail.com aol.com protonmail.com icloud.com mail.com tutanota.com gmx.com live.com yandex.com zoho.com".split(" ");class Ar{static emailValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{if(!/^[_A-Za-z0-9-\p{L}]+(\.[_A-Za-z0-9-\p{L}]+)*(\+.*)?@([A-Za-z0-9-\p{L}]+(\.[A-Za-z0-9\p{L}]+)+)+$/u.test(e))return{isValid:!1,errorKey:Ar.validationErrorKeys.EMAIL_IS_INVALID}}catch(t){if(!/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*(\+.*)?@([A-Za-z0-9-]+(\.[A-Za-z0-9]+)+)+$/.test(e))return{isValid:!1,errorKey:Ar.validationErrorKeys.EMAIL_IS_INVALID}}return{isValid:50>=e.length,errorKey:Ar.validationErrorKeys.MAX_LENGTH_50}}static nameValidationCb(){let e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim(),t=(e||"").split(" ");return 3<t.filter((e=>3<e.length)).length?{isValid:!1,errorKey:Ar.validationErrorKeys.MORE_THAN_THREE_LONG_WORDS}:3<t.filter((e=>3>=e.length)).length?{isValid:!1,errorKey:Ar.validationErrorKeys.MORE_THAN_THREE_SHORT_WORDS}:Ar.lastNameValidator(e)||{value:e,isValid:!0}}static lastNameValidator(e){if(40<(e=e.trim()).length)return{isValid:!1,errorKey:Ar.validationErrorKeys.MAX_LENGTH_40};var t=Ar.sanitizeExceptDoubleQuotes(e);return t&&t.length?{isValid:!1,errorKey:Ar.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:t[0][0]}:(t=Ar.forbiddenCharactersValidator(e,"[\\d\\.\\s\\p{Alphabetic}".concat(" .'’ʼ`´ʹʻʽʾʿˈˊˮʹ΄՚᾽᾿‘‛′‵Ꞌꞌ＇-","]"))).length?{isValid:!1,errorKey:Ar.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:[...new Set(t)].join("")}:Ar.nameContainsDotValidator(e)?{isValid:!1,errorKey:Ar.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:""}:Ar.nameContainsMoreThanThreeDigitsValidator(e)?{isValid:!1,errorKey:Ar.validationErrorKeys.NAME_CONTAINS_MORE_THAN_3_DIGITS}:Ar.nameConsistingOfAlphabeticCharactersValidator(e)?{isValid:!1,errorKey:Ar.validationErrorKeys.NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED}:(e=Ar.symbolPositionValidator(e))&&e.length?{isValid:!1,errorKey:Ar.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:e[0][0]}:null}static lastNameValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return Ar.lastNameValidator(e)||{value:e.trim().replace(/\s+/g," "),isValid:!0}}static esTextValidationCb(){return{isValid:1e3>=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim().length,errorKey:Ar.validationErrorKeys.MAX_LENGTH_1000}}static esIntegerValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e?/^(\-)?(\d)+$/.test(e)?-2147483647>e?{isValid:!1,errorKey:Ar.validationErrorKeys.MIN_VALUE_MINUS_2147483648}:{isValid:2147483647>=e,errorKey:Ar.validationErrorKeys.MAX_VALUE_2147483648}:{isValid:!1,errorKey:Ar.validationErrorKeys.INTEGER_FORMAT}:{isValid:!0}}static esFloatValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(!e)return{isValid:!0};let t=/,/.test(e),n=/^(\-)?(\d)+(\.(\d)+)?$/.test(e);return t||!n?{isValid:!1,errorKey:Ar.validationErrorKeys.FLOAT_FORMAT}:-9007199254740991>e?{isValid:!1,errorKey:Ar.validationErrorKeys.MIN_VALUE_MINUS_2147483648}:{isValid:9007199254740991>=e,errorKey:Ar.validationErrorKeys.MAX_VALUE_2147483648}}static asyncEmailValidationCb(e,t,n,i){return t&&Array.isArray(t)&&t.filter((e=>"EMAIL_DOMAIN_INVALID"!==e)).length||!(e&&n.control&&"email"===n.control.name&&n.control.validation&&n.control.validation.restrictFreeDomains)?{isValid:!0,value:e}:(t=e.toLowerCase().split("@")[1],br.mostPopularProviders.includes(t)?{isValid:!1,errorKey:"EMAIL_DOMAIN_INVALID"}:fetch("".concat(i,"forms/v1/validation/email/business?value=").concat(e),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"text/plain",Accept:"application/json, text/plain, */*"}}).then((e=>e.json())).then((e=>({isValid:e.valid,value:e.value,errorKey:"EMAIL_DOMAIN_INVALID"}))).catch((()=>({isValid:!1,errorKey:"EMAIL_DOMAIN_INVALID"}))))}static sanitizeExceptDoubleQuotes(e){let t=new RegExp(/[%^*|~{};<>]/,"g");return t.test(e)?e.match(t):null}static forbiddenCharactersValidator(e,t){try{return!new RegExp(t,"gu").test(e)}catch(n){return!new RegExp(t.replace("\\p{Alphabetic}",""),"gu").test(e)}}static nameContainsDotValidator(e){return/(\p{Alphabetic}{4,}\.)/gmu.test(e)}static nameContainsMoreThanThreeDigitsValidator(e){return 3<e.replace(/\D+/g,"").length}static nameConsistingOfAlphabeticCharactersValidator(e){try{return!/[\p{Alphabetic}]/gu.test(e)}catch(t){return/^[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~\d]*$/g.test(e)}}static symbolPositionValidator(e){let t=new RegExp("[".concat(" .'’ʼ`´ʹʻʽʾʿˈˊˮʹ΄՚᾽᾿‘‛′‵Ꞌꞌ＇-","][").concat(" .'’ʼ`´ʹʻʽʾʿˈˊˮʹ΄՚᾽᾿‘‛′‵Ꞌꞌ＇-","]|(^[").concat(" .'’ʼ`´ʹʻʽʾʿˈˊˮʹ΄՚᾽᾿‘‛′‵Ꞌꞌ＇-","])|([").concat(" '’ʼ`´ʹʻʽʾʿˈˊˮʹ΄՚᾽᾿‘‛′‵Ꞌꞌ＇-","]$)"),"g");return t.test(e)?e.match(t).filter((e=>". "!==e)).map((e=>e.trim())):null}}Ar.validationErrorKeys={NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED:"NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED",NAME_CONTAINS_MORE_THAN_3_DIGITS:"NAME_CONTAINS_MORE_THAN_3_DIGITS",MORE_THAN_THREE_LONG_WORDS:"MORE_THAN_THREE_LONG_WORDS",MORE_THAN_THREE_SHORT_WORDS:"MORE_THAN_THREE_SHORT_WORDS",CONTAINS_FORBIDDEN_CHARACTERS:"CONTAINS_FORBIDDEN_CHARACTERS",EMAIL_IS_INVALID:"EMAIL_IS_INVALID",NAME_CONTAINS_FORBIDDEN_CHARACTERS:"NAME_CONTAINS_FORBIDDEN_CHARACTERS",MAX_LENGTH_50:"MAX_LENGTH_50",MAX_LENGTH_40:"MAX_LENGTH_40",NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED:"NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED",INTEGER_FORMAT:"INTEGER_FORMAT",MIN_VALUE_MINUS_2147483648:"MIN_VALUE_MINUS_2147483648",MAX_VALUE_2147483648:"MAX_VALUE_2147483648",FLOAT_FORMAT:"FLOAT_FORMAT",MAX_LENGTH_1000:"MAX_LENGTH_1000"},Ar.validationMap={EMAIL:Ar.emailValidationCb,SYS_NAME:Ar.nameValidationCb,SYS_LAST_NAME:Ar.lastNameValidationCb,ES_TEXT:Ar.esTextValidationCb,ES_INTEGER:Ar.esIntegerValidationCb,ES_FLOAT:Ar.esFloatValidationCb},Ar.asyncValidationMap={EMAIL:Ar.asyncEmailValidationCb};class Or{constructor(e,t,n,i,r,o,s){this.utils=this.configService=this.formService=this.getRootElement=this.getProps=null,this.emailSuggesting=new br,this.forbiddenChar="",this.componentId=e,this.getProps=t,this.getRootElement=n,this.formService=i,this.configService=r,this.utils=o,this.i18n=s}init(){var e=this;let t=this.getProps(),n=this.getRootElement(),i=n.querySelector(".input-tooltip"),r=n.querySelector("input");"first_name"===t.control.name&&(r.setAttribute("name","name"),r.setAttribute("autocomplete","off")),"email"===t.control.name&&(r.setAttribute("name","email"),r.setAttribute("autocomplete","on")),this.formService.hasControl(t.control.name)?r.value=this.formService.getControl(t.control.name).value||"":this.formService.registerControl(Object.assign(Object.assign({},t.control),{componentId:this.componentId}),r,Object.keys(Ar.validationMap).reduce(((t,n)=>(t[n]=function(){let t=Ar.validationMap[n](...arguments);return void 0!==t.forbiddenChar&&(e.forbiddenChar=t.forbiddenChar),t},t)),{}),Object.assign(Object.assign({},Ar.asyncValidationMap),{EMAIL:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return Ar.asyncValidationMap.EMAIL(...n,e.getProps(),e.configService.getConfig("hostUrl"))}}));let o=this.formService.getControl(t.control.name);"email"===t.control.name&&(this.listenForEmailValueChanges(o),this.suggestEmailFixOnFocusOut(r,o)),this.utils.handleControlStatusChange({control:o,inputElement:r,tooltipElement:i,configService:this.configService,i18n:this.i18n,validCallback:()=>{"email"===t.control.name&&n.activeElement!==r&&this.suggestEmailFix(r,o,!0)},errorMessageMapper:(e,t)=>e===Ar.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS?t.replace("{{characters}}",this.forbiddenChar):t})}destroy(){this.emailSuggesting.hideEmailSuggestion()}listenForEmailValueChanges(e){e.on("valueChanged",(t=>{this.emailSuggesting.emailValueChanged(),this.emailSuggesting.hideEmailSuggestion(),this.formatEmailValue(t,e)}))}formatEmailValue(e,t){e.trim().toLowerCase()!==e&&t.setValue(e.trim().toLowerCase())}suggestEmailFixOnFocusOut(e,t){e.addEventListener("focusout",(()=>this.suggestEmailFix(e,t)))}suggestEmailFix(e,t,n){this.emailSuggesting.suggestEmail(this.getProps(),e,n,this.utils,this.formService,t,this.configService.getConfig("hostUrl"),this.getCurrentLanguageMap.bind(this))}getCurrentLanguageMap(){return O(this.i18n,A(this.configService)).translations}}class Nr extends pr{constructor(){super(...arguments),this.manifest=Sr,this.inputFormControl=null}connectedCallback(){super.connectedCallback(),this.getRootElement().innerHTML+="\n".concat("\n<style>\n.main-container {\n  height: 100%;\n}\n\n.label-with-input-container {\n  height: 100%;\n  display: flex;\n}\n\n.label {\n  min-height: 10px;\n}\n\n.label.cl-focused {\n  min-height: auto;\n}\n\n.input-with-tooltip {\n  position: relative;\n  display: flex;\n  height: 100%;\n  width: 100%;\n}\n\n.invalid {\n  border: 1px solid #ff0000 !important;\n}\n\n.input-tooltip {\n  visibility: hidden;\n  position: absolute;\n  right: -10px;\n  top: -10px;\n  z-index: 1;\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none;   /* Chrome/Safari/Opera */\n  -khtml-user-select: none;    /* Konqueror */\n  -moz-user-select: none;      /* Firefox */\n  -ms-user-select: none;       /* Internet Explorer/Edge */\n  user-select: none;\n}\n\ninput {\n  width: 100%;\n  padding-top: 0 !important;\n  padding-bottom: 0 !important;\n  margin: 0;\n  -moz-appearance:none;\n  -webkit-appearance:none;\n  -o-appearance:none;\n}\n\ninput.focus-outline-defined:focus {\n  outline: var(--clFocusOutline);\n}\n</style>\n    ",'\n<div class="main-container">\n  <div class="label-with-input-container">\n    <div cl-element="label"\n         cl-inline-edit="content, label"\n         class="label">\n    </div>\n    <div class="input-with-tooltip">\n      <input cl-element="input"\n             type="text"\n             name="fname">\n      <div class="input-tooltip">\n        <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M1.5 13.0604C1.5 19.4116 6.6481 24.5605 13.0075 24.5605C19.353 24.5605 24.5 19.4107 24.5 13.0604C24.5 6.70865 19.3531 1.55909 13.0075 1.55908C6.64806 1.55908 1.5 6.7077 1.5 13.0604ZM12.9775 17.9668C12.7032 17.9668 12.4807 17.7443 12.4807 17.47C12.4807 17.1956 12.7032 16.9732 12.9775 16.9732C13.2519 16.9732 13.4743 17.1956 13.4743 17.47C13.4743 17.7443 13.2519 17.9668 12.9775 17.9668ZM12.9775 13.4764C12.7032 13.4764 12.4807 13.254 12.4807 12.9796L12.4807 8.48924C12.4807 8.21487 12.7032 7.99245 12.9775 7.99245C13.2519 7.99245 13.4743 8.21487 13.4743 8.48924L13.4743 12.9796C13.4743 13.254 13.2519 13.4764 12.9775 13.4764Z" fill="#FF0000" stroke="white" stroke-width="2"></path>\n        </svg>\n      </div>\n    </div>\n  </div>\n</div>\n\n'),this.inputFormControl=new Or(this.getModel().id,this.getProps.bind(this),this.getRootElement.bind(this),this.services.form,this.services.config,this.utils,this.manifest.i18n),this.inputFormControl.init(),this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles),e=this.getEnvironment();let n=this.getElement("input");this.utils.applyLabelParams(t,e,this.getRootElement(),".label-with-input-container"),n.setAttribute("placeholder",t.content.placeholder),this.utils.setInputHostSize(t,e,this.getHostElement(),n,this.getElement("label")),this.utils.setFocusOutline(n),this.updateContext()})),this.observeEnvironment(((e,t)=>{e=this.getProps(),this.utils.applyLabelParams(e,t,this.getRootElement(),".label-with-input-container"),this.utils.setInputHostSize(e,t,this.getHostElement(),this.getElement("input"),this.getElement("label"))})),this.addContextRecord()}disconnectedCallback(){super.disconnectedCallback(),this.inputFormControl.destroy(),this.services.context.deleteRecord(this.getModel().id)}}Nr.define={name:"sys-input",model:Sr.name,manifest:Sr};var Rr={name:"SysButtonComponent",componentType:"BUTTON",version:"1.0.0",contextMenuModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]}],floatingPanelModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button"}]}]}],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"ICON",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"block"}},{type:"CONTROL",name:"TEXT_VISIBILITY",elementSubProp:"--textDisplay",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"inline"}},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"HOVER_ANIMATION",elementProp:"hoverStyleAttributes",element:"button",params:{animationTypeProp:"hoverAnimationType"}},{type:"CONTROL",name:"LOOP_ANIMATION",elementProp:"styleAttributes",element:"button",params:{label:"LOOP_ANIMATION_LABEL",loopAnimation:{type:null}}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"button",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"ICON",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"block"}},{type:"CONTROL",name:"TEXT_VISIBILITY",elementSubProp:"--textDisplay",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"inline"}},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"HOVER_ANIMATION",elementProp:"hoverStyleAttributes",element:"button",params:{animationTypeProp:"hoverAnimationType"}},{type:"CONTROL",name:"LOOP_ANIMATION",elementProp:"styleAttributes",element:"button",params:{label:"LOOP_ANIMATION_LABEL",loopAnimation:{type:null}}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"button",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]}],general:[{type:"CONTROL",name:"NPS_ACTIONS",propPath:["content"],params:{syncContentComponentName:"SysNetPromoterScoreComponent"},displayCondition:"return sdk.documentUtils.findComponentsByName([sdk.componentView], 'SysNetPromoterScoreComponent')?.length > 0"},{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0,showTitleCondition:"return sdk.documentUtils.findComponentsByName([sdk.componentView], 'SysNetPromoterScoreComponent')?.length === 0"}}]},autoContrast:[{slave:{element:"button",elementProp:"styleAttributes",elementSubProp:"color"},master:{element:"button",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","textContrastEnabled"]}],events:{dispatch:[],listen:[]},i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!1}}]},i18nPropPaths:["content,text","handlers,[id],actions,[id],params,link","handlers,[id],actions,[id],params,customData"],i18n:{en:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"At least one field is required: email or phone number"},ru:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Хотя бы одно из полей должно быть заполнено: Email или Номер телефона"},uk:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Хоча б одне з полів має бути заповнене: Email або Номер телефону"},es:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Necesita, como mínimo, un campo obligatorio: email o número de teléfono"},de:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Mindestens ein Feld ist erforderlich: E-Mail-Adresse oder Telefonnummer"},fr:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Au moins un champ est obligatoire : courriel ou numéro de téléphone"},it:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Almeno un campo è obbligatorio: email o numero di telefono"},pt:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"É necessário pelo menos um campo: email ou número de telefone"},ro:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Cel puțin un câmp este obligatoriu: e-mail sau număr de telefon"},bg:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Изисква се поне едно поле: имейл или телефонен номер"},cs:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Je vyžadováno alespoň jedno pole: e-mail nebo telefonní číslo"},el:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Απαιτείται τουλάχιστον ένα πεδίο: ηλεκτρονική διεύθυνση ή τηλέφωνο"},nl:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Er is minimaal één veld vereist: e-mail of telefoonnummer"},pl:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Wymagane jest co najmniej jedno pole: adres e-mail lub numer telefonu"},sv:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Minst ett fält krävs: e-post eller telefonnummer"},tr:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"En az bir alan gereklidir: e-posta veya telefon numarası"},ar:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"مطلوب حقل واحد على الأقل: البريد الإلكتروني أو رقم الهاتف"},zh:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"至少一个字段为必填：电子邮箱或电话号码"},da:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Mindst ét ​​felt er påkrævet: e-mail eller telefonnummer"},he:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"נדרש לפחות שדה אחד: אימייל או מספר טלפון"},fi:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Vähintään yksi kenttä vaaditaan: sähköposti tai puhelinnumero"},hi:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"कम से कम एक फ़ील्ड आवश्यक है: ईमेल या फ़ोन नंबर"},hr:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Potrebno je ispuniti barem jedno polje: e-mail ili telefonski broj"},hu:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Legalább egy mező kitöltése kötelező: e-mail vagy telefonszám."},id:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Setidaknya satu bidang wajib diisi: email atau nomor telepon"},ja:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"少なくとも1つのフィールドが必須です：メールアドレスまたは電話番号"},ko:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"최소 한 칸 필수 입력: 이메일 또는 전화번호"},no:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Minst ett felt er obligatorisk: e-post eller telefonnummer"},sk:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Aspoň jedno pole je povinné: e-mail alebo telefónne číslo"},sl:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Vsaj eno polje je obvezno: e-poštni naslov ali telefonska številka"},sr:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Najmanje jedno polje je obavezno: e-pošta ili broj telefona"}},defaultProps:{adaptiveStyles:{desktop:[{element:"host",styleAttributes:{width:"auto",minWidth:null,height:"35px",minHeight:"35px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",_marginEnabled:!1}},{element:"button",styleAttributes:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",flexDirection:"row",background:"rgb(0, 0, 0)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"200px",borderTopRightRadius:"200px",borderBottomLeftRadius:"200px",borderBottomRightRadius:"200px",boxShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"20px",paddingRight:"20px",_paddingEnabled:!0,color:"rgba(255, 255, 255, 1)",textAlign:"center",lineHeight:"120%",fontWeight:"700",fontSize:"16px",textShadow:"none","--iconDisplay":"none","--iconSize":"20px","--iconOrder":"-1","--iconDistanceToText":"15px","--iconURL":"","--textDisplay":"inline"},hoverStyleAttributes:{background:"rgba(0, 0, 0, 0.2)"},classes:"cl-text-class-button cl-loop-animation-PULSE"}],mobile:[{element:"host",styleAttributes:{width:"auto",minWidth:null,height:"35px",minHeight:"35px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",_marginEnabled:!1}},{element:"button",styleAttributes:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",flexDirection:"row",background:"rgb(0, 0, 0)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"200px",borderTopRightRadius:"200px",borderBottomLeftRadius:"200px",borderBottomRightRadius:"200px",boxShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"20px",paddingRight:"20px",_paddingEnabled:!0,color:"rgba(255, 255, 255, 1)",textAlign:"center",lineHeight:"120%",fontWeight:"700",fontSize:"16px",textShadow:"none","--iconDisplay":"none","--iconSize":"20px","--iconOrder":"-1","--iconDistanceToText":"15px","--iconURL":"","--textDisplay":"inline"},hoverStyleAttributes:{background:"rgba(0, 0, 0, 0.2)"},classes:"cl-text-class-button cl-loop-animation-PULSE"}]},content:{text:"Subscribe",textContrastEnabled:!0}},metaDescription:{sortWeight:60,icon:"/claspo-editor/button-component-icon.svg",label:{en:"Button",ru:"Кнопка",uk:"Кнопка",es:"Botón",fr:"Bouton",de:"Schaltfläche",it:"Pulsante",pt:"Botão",ro:"Buton",bg:"Копче",cs:"Tlačítko",el:"Πλήκτρο",nl:"Knop",pl:"Przycisk",sv:"Knapp",tr:"Buton",ar:"الزِّر",zh:"按钮",da:"Knap",he:"כפתור",fi:"Painike",hi:"बटन",hr:"Gumb",hu:"Gomb",id:"Tombol",ja:"ボタン",ko:"버튼",no:"Knapp",sk:"Tlačidlo",sl:"Gumb",sr:"Dugme"}}};class Mr extends pr{constructor(){super(),this.manifest=Rr,this.hideErrorTooltip=()=>{this.getRootElement().querySelector(".input-tooltip").style.visibility="hidden"},this.updateButtonTextNode=e=>{this.getRootElement().querySelector(".editable-text").innerHTML=e.content.text},this.mapStyleControlValuesToInnerButtonContent=()=>{let e=this.getRootElement().querySelector("button"),t=this.getRootElement().querySelector(".editable-text");e&&t&&(this.mapAlignValueToButtonContent(e),t.style.minWidth="20px",t.style.width="max-content",t.style.minHeight=e.style.fontSize,t.style.textAlign=e.style.textAlign,t.style.lineHeight=e.style.lineHeight,t.style.fontWeight=e.style.fontWeight,t.style.fontSize=e.style.fontSize,t.style.textShadow=e.style.textShadow,t.style.textTransform=e.style.textTransform,t.style.letterSpacing=e.style.letterSpacing,t.style.fontFamily=e.style.fontFamily)},this.mapAlignValueToButtonContent=e=>{"center"===e.style.textAlign&&(e.style.alignItems="center",e.style.justifyContent="center"),"start"===e.style.textAlign&&(e.style.alignItems="column"===e.style.flexDirection?"flex-start":"center",e.style.justifyContent="column"===e.style.flexDirection?"center":"flex-start"),"end"===e.style.textAlign&&(e.style.alignItems="column"===e.style.flexDirection?"flex-end":"center",e.style.justifyContent="column"===e.style.flexDirection?"center":"flex-end")},this.createIconNode=e=>{if(!e.querySelector(".icon")){let t=document.createElement("p");t.classList.add("icon"),e.appendChild(t)}},this.showErrorTooltip=e=>{let t=this.getRootElement().querySelector(".main-container"),n=t.querySelector(".input-tooltip"),i=this.getTranslationsMap(this.manifest.i18n).translations,r=Object.keys(i).find((t=>t.includes(e)));this.utils.setInvalidStyle(t,n,r?i[r]:e)},this.getRootElement().innerHTML="\n<style>".concat("\n.main-container {\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: inherit;\n}\n\nbutton {\n  cursor: pointer;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  outline: none;\n  min-height: 20px;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  gap: var(--iconDistanceToText, 15px);\n}\n\n.editable-text {\n  display: var(--textDisplay, 'inline');\n}\n\n.input-tooltip {\n  visibility: hidden;\n  position: absolute;\n  right: -10px;\n  top: -10px;\n  z-index: 1;\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none;   /* Chrome/Safari/Opera */\n  -khtml-user-select: none;    /* Konqueror */\n  -moz-user-select: none;      /* Firefox */\n  -ms-user-select: none;       /* Internet Explorer/Edge */\n  user-select: none;\n}\n\n.icon {\n  display: var(--iconDisplay, none);\n  width: var(--iconSize, 20px);\n  height: var(--iconSize, 20px);\n  order: var(--iconOrder, -1);\n  background: var(--iconURL);\n  margin-top: 0px;\n  margin-bottom: 0px;\n  background-size: cover;\n}\n\nbutton.focus-outline-defined:focus {\n  outline: var(--clFocusOutline);\n}\n",'</style>\n<div class="main-container">\n  <button cl-element="button">\n    <div class="editable-text" cl-inline-edit="content, text"></div>\n  </button>\n\n  <div class="input-tooltip">\n    <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M1.5 13.0604C1.5 19.4116 6.6481 24.5605 13.0075 24.5605C19.353 24.5605 24.5 19.4107 24.5 13.0604C24.5 6.70865 19.3531 1.55909 13.0075 1.55908C6.64806 1.55908 1.5 6.7077 1.5 13.0604ZM12.9775 17.9668C12.7032 17.9668 12.4807 17.7443 12.4807 17.47C12.4807 17.1956 12.7032 16.9732 12.9775 16.9732C13.2519 16.9732 13.4743 17.1956 13.4743 17.47C13.4743 17.7443 13.2519 17.9668 12.9775 17.9668ZM12.9775 13.4764C12.7032 13.4764 12.4807 13.254 12.4807 12.9796L12.4807 8.48924C12.4807 8.21487 12.7032 7.99245 12.9775 7.99245C13.2519 7.99245 13.4743 8.21487 13.4743 8.48924L13.4743 12.9796C13.4743 13.254 13.2519 13.4764 12.9775 13.4764Z" fill="#FF0000" stroke="white" stroke-width="2"></path>\n    </svg>\n  </div>\n</div>')}connectedCallback(){super.connectedCallback(),this.stylesUpdateObserver=new MutationObserver(this.mapStyleControlValuesToInnerButtonContent.bind(this)),this.stylesUpdateObserver.observe(this.getRootElement().querySelector("button"),{attributes:!0,childList:!1,subtree:!1});let e=this.getElement("button");if(e.addEventListener("click",(e=>{this.services.trackingService.send("FormButtonClick_[Name]")})),this.getProps().handlers){var t=this.getProps().handlers.find((e=>"CLICK"===e.type));if(t&&t.actions){let n=t.actions.find((e=>"SUBSCRIBE_CONTACT"===e.type));t=t.actions.find((e=>"REQUEST"===e.type)),n&&(this.invalidListener=this.services.eventEmitter.on("SET_SUBSCRIBE_CONTACT_BUTTON_AS_INVALID",(()=>{this.showErrorTooltip("EMAIL_OR_PHONE_IS_REQUIRED")})),this.validListener=this.services.eventEmitter.on("SET_SUBSCRIBE_CONTACT_BUTTON_AS_VALID",(()=>{this.hideErrorTooltip()}))),(n||t)&&this.services.eventEmitter.on("CONTACT_DATA_SUBMIT",(()=>{e.disabled=!0}))}}this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles),this.utils.setFocusOutline(this.getElement("button")),this.mapStyleControlValuesToInnerButtonContent(),e=this.getRootElement().querySelector("button"),this.updateButtonTextNode(t),this.createIconNode(e)}))}disconnectedCallback(){super.disconnectedCallback(),this.invalidListener&&this.invalidListener.off(),this.validListener&&this.validListener.off(),this.stylesUpdateObserver.disconnect()}}Mr.define={name:"sys-button",model:Rr.name,manifest:Rr};let Lr={COMPONENT_FOCUSED:"COMPONENT_FOCUSED",REMOVE_FOCUS:"REMOVE_FOCUS",SET_FOCUS:"SET_FOCUS",COMPONENT_MOUSE_MOVE:"COMPONENT_MOUSE_MOVE",COMPONENT_CLICKED:"COMPONENT_CLICKED",COMPONENT_DOUBLE_CLICKED:"COMPONENT_DOUBLE_CLICKED",COMPONENT_DRAGSTART:"COMPONENT_DRAGSTART",COMPONENT_DRAGEND:"COMPONENT_DRAGEND",COMPONENT_DRAGOVER:"COMPONENT_DRAGOVER",DOCUMENT_DROP:"DOCUMENT_DROP",SHOW_INLINE_EDIT:"SHOW_INLINE_EDIT",VIEW_COMPONENT_RESOURCES_LOADED:"VIEW_COMPONENT_RESOURCES_LOADED",FAILED_TO_LOAD_COMPONENT_RESOURCE:"FAILED_TO_LOAD_COMPONENT_RESOURCE"},wr={CONTAINER:"CONTAINER",TEXT:"TEXT",INPUT:"INPUT",BUTTON:"BUTTON",IMAGE:"IMAGE",FLOATING_IMAGE:"FLOATING_IMAGE",VIDEO:"VIDEO",COLUMN:"COLUMN"};var Pr=Object.assign(Object.assign({},er),{name:"SysColumnComponent",componentType:"COLUMN",preventDraggable:!0,focusParentOnClick:!1,recursiveRemove:!0,version:"1.0.0",defaultProps:Object.assign(Object.assign({},er.defaultProps),{adaptiveStyles:L([{element:"host",styleAttributes:{display:"inline-flex",position:"relative",width:"auto",minWidth:"min-content",height:"100%",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",_paddingEnabled:!0,marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",_marginEnabled:!1,borderStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none",flexBasis:"0"},classes:""}]),content:{size:1}}),propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"},hideSyncSelect:!0},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host",hideSyncSelect:!0},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",hideSyncSelect:!0},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",hideSyncSelect:!0},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",hideSyncSelect:!0},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"},hideSyncSelect:!0}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"},hideSyncSelect:!0},{type:"CONTROL",name:"DISPLAY",elementProp:"styleAttributes",elementSubProp:"display",element:"host",params:{label:"DOCUMENT_DISPLAY_ON_MOBILE",displayPropertyValue:"inline-flex"},displayCondition:"return (sdk.appConfig.columnsOptions?.allowHideColumnOnMobile ?? true) === true"},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host",hideSyncSelect:!0},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",hideSyncSelect:!0},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",hideSyncSelect:!0},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",hideSyncSelect:!0},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"},hideSyncSelect:!0}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"]},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"]},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"}}]}],contextMenuModel:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT",params:{hideForEntryType:"VIEW"}}],metaDescription:null}),Dr=function(){let{flexGrow:e}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{path:[],type:Pr.componentType,name:Pr.name,version:Pr.version,focusParentOnClick:!1,recursiveRemove:!0,preventDraggable:!0,props:Object.assign(Object.assign({},Pr.defaultProps),{content:Object.assign(Object.assign({},Pr.defaultProps.content),{size:e||"1"})}),children:[]}},xr={name:"SysColumnsComponent",componentType:"COLUMNS",version:"1.0.0",contextMenuModel:[],floatingPanelModel:[],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host",params:{minWidth:50,minHeight:50}},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"}},{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"],params:{parent:!0}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host",params:{minWidth:50,minHeight:50}},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"],params:{parent:!0}}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"],minValue:50},height:{options:["fixed","fill","hug"],minValue:50}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"COLUMNS",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SWITCH",propPath:["isResponsive"],params:{label:"ADAPTIVE_COLUMNS",boldLabel:!0}},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"COLUMNS",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SWITCH",propPath:["isResponsive"],params:{label:"ADAPTIVE_COLUMNS",boldLabel:!0}},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},events:{dispatch:[],listen:[]},defaultProps:{adaptiveStyles:L([{element:"host",styleAttributes:{position:"relative",width:"100%",minWidth:"50px",height:"auto",gap:"10px"}}]),isResponsive:!0},presets:[{name:"100%",label:"",sortWeight:20,icon:"/claspo-editor/columns-frame-100.svg",overrides:{defaultChildren:[Dr()]}},{name:"50%-50%",label:"",sortWeight:10,icon:"/claspo-editor/columns-frame-50-50.svg",overrides:{defaultChildren:[Dr(),Dr()]}},{name:"33%-66%",label:"",sortWeight:0,icon:"/claspo-editor/columns-frame-33-66.svg",overrides:{defaultChildren:[Dr({flexGrow:1}),Dr({flexGrow:2})]}}],metaDescription:{sortWeight:70,icon:"/claspo-editor/container-component-icon.svg",label:{en:"Columns",ru:"Колонки",uk:"Колонки",es:"Columns",fr:"Columns",de:"Columns",it:"Columns",pt:"Columns",ro:"Columns",bg:"Columns",cs:"Columns",el:"Columns",nl:"Columns",pl:"Columns",sv:"Columns",tr:"Columns",ar:"Columns",zh:"Columns",da:"Columns",he:"Columns",fi:"Columns",hi:"Columns",hr:"Columns",hu:"Columns",id:"Columns",ja:"Columns",ko:"Columns",no:"Columns",sk:"Columns",sl:"Columns",sr:"Columns"},defaultPreset:"50%-50%"}};class kr extends pr{constructor(){super(),this.manifest=xr,this.updateResponsiveStyles=()=>{this.getProps().isResponsive&&"mobile"===this.getEnvironment()&&this.mobileDeviceOrientationListener.isPortrait()?this.getRootElement().querySelector(".columns-container").style.flexDirection="column":this.getRootElement().querySelector(".columns-container").style.flexDirection="row"},this.getRootElement().innerHTML="\n      ".concat("\n  <style>\n    :host {\n      position: relative;\n      min-width: 50px;\n      min-height: 50px; \n      display:flex;\n    }\n\n    .columns-container {\n      height: auto;\n      min-height: 50px; \n      width: 100%;\n      min-width: 50px;\n      display: flex;\n      gap: inherit;\n    }\n  </style>\n  ","\n      <div ").concat(p("render-outlet"),' class="columns-container"></div>\n    ')}connectedCallback(){super.connectedCallback(),this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles),this.updateResponsiveStyles()})),this.observeEnvironment(((e,t)=>{this.updateResponsiveStyles()})),this.subscriptions.push(this.mobileDeviceOrientationListener.on(Ti.changeEventName,(()=>{this.updateResponsiveStyles()})))}}kr.define={name:"sys-columns",model:xr.name,manifest:xr};class Vr extends gr{constructor(){super(...arguments),this.manifest=Pr,this.updateResponsiveStyles=()=>{var e,t;let n=null===(t=null===(e=this.getParentComponent())||void 0===e?void 0:e.getProps())||void 0===t?void 0:t.isResponsive;e=[...this.shadowRoot.children].filter((e=>e.hasAttribute("cl-element")));let i=this.getHostElement().style;e.length?i.minWidth="min-content":(["paddingTop","paddingBottom","paddingLeft","paddingRight","padding"].map((e=>i[e])).map((e=>e&&parseFloat(e))).some(Boolean)&&(i.minWidth="min-content"),i.minWidth="20px"),"mobile"===this.getEnvironment()&&n&&(e.length?i.minHeight="auto":i.background.includes("url")?i.minHeight="150px":e.length||(i.minHeight="50px"))},this.updateEmptyState=()=>{let e=!(Array.from(this.getRootElement().children).filter((e=>"STYLE"!==e.tagName&&"SCRIPT"!==e.tagName))||[]).length;this.setAttribute(p("empty"),e)},this.watchChildren=()=>{let e=this;this.mutationObserver=new MutationObserver((function(){e.updateEmptyState(),e.updateResponsiveStyles()})),this.mutationObserver.observe(this.getRootElement(),{childList:!0})},this.processSize=e=>{var t;e=null!==(t=null!=e?e:this.style.flexGrow)&&void 0!==t?t:"1",this.style.flexGrow=e},this.processStyles=()=>{this.innerHTML+='\n      <style>\n      [cl-component="'.concat(this.componentName,'"] {\n        position: relative;\n        min-width: 50px;\n        min-height: 50px;\n      }\n      </style>')}}connectedCallback(){var e;super.connectedCallback(),this.updateEmptyState(),this.watchChildren(),this.observeEnvironment((()=>{this.updateResponsiveStyles()})),this.observeProps(((e,t)=>{var n;this.updateResponsiveStyles(),this.processSize(null===(n=t.content)||void 0===n?void 0:n.size)})),null===(e=this.getParentComponent())||void 0===e||e.observeProps((()=>{this.updateResponsiveStyles()}))}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.mutationObserver)||void 0===e||e.disconnect()}}Vr.define={name:"sys-column",model:Pr.name,manifest:Pr};var Fr=new class{constructor(){this.classes=[Ir,Er,kr,Vr,_r,Nr,Mr],this.modelNameToTagMap=this.classes.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.define.model]:t.define.name})),{})}register(e,t){this.decorator=e,this.classes.forEach((e=>this.registerComponent(e,t)))}registerComponent(e,t){let n=this.getComponentTagName(e.define.name,t);customElements.get(n)||(e="STATIC"===t?U(e):H(e),customElements.define(n,e),this.modelNameToTagMap[e.define.model]=e.define.name)}getComponent(e,t){let n=(i=e,i.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()))).replace("-component","");var i;if(t=this.getComponentTagName(n,t),!(t=customElements.get(t)))throw Error("Not defined or loaded component: "+e);return t}getComponentTagName(e,t){return t=t.toLowerCase(),"".concat(e,"-").concat(t)}};class Ur{constructor(e,t,n,i,r,o,s,a,l,c,d,h,u,m,p){this.state=e,this.eventEmitter=t,this.form=n,this.documentModel=i,this.resizeListener=r,this.mobileDeviceOrientationListener=p,this.config=o,this.commonStylesService=s,this.trackingService=a,this.layoutType=l,this.actionFactory=c,this.actionRegister=d,this.prizePoolFactory=h,this.context=u,this.mergeTagsProcessorFactory=m}create(e,t){let n=new(this.getComponentClass(e,t)),i=p("content-container");if(e.type===pi.VIEW&&"SysColumnsComponent"!==e.name){let e=document.createElement("div");e.setAttribute(i,""),e.style.display="inherit",e.style.gap="inherit",e.style.justifyContent="inherit",e.style.alignItems="inherit",e.style.flexDirection="inherit",e.style.width="100%",e.style.height="100%",n.getRootElement().appendChild(e),n.contentContainer=e}return n.setAttribute(p("type"),e.type),n.setAttribute(p("id"),e.id),n.setAttribute(p("component"),e.name),n.setAttribute(p("path"),e.path),n.setAttribute(p("element"),"host"),"UPDATING"===t&&this.commonStylesService.setStyles("* {cursor:pointer !important;} *:focus {outline: none !important;}"),this.processStyles(n.getRootElement(),e,t),Si.applyHostStyles(e.type,n,e,this.layoutType),n}getComponentClass(e,t){return Fr.getComponent(e.name,t)}constructProps(e,t){return{model:e,documentModel:this.documentModel,resizeListener:this.resizeListener,mobileDeviceOrientationListener:this.mobileDeviceOrientationListener,config:this.config,layoutType:this.layoutType,viewResourceManager:t,services:{state:this.state,eventEmitter:this.eventEmitter,form:this.form,config:this.config,trackingService:this.trackingService,actionFactory:this.actionFactory,actionRegister:this.actionRegister,prizePoolFactory:this.prizePoolFactory,context:this.context,mergeTagsProcessorFactory:this.mergeTagsProcessorFactory},utils:new $i}}processStyles(e,t,n){let i=this.commonStylesService.getStyles(),r=document.createElement("style");this.constructAnimationStyles(e,t,n),r.textContent=i,e.appendChild(r)}constructAnimationStyles(e,t,n){"UPDATING"!==n&&(t=Ai.constructAnimationStylesByTypes(Ni.extractLoopAnimationsFromAdaptiveStylesClasses(t)))&&((n=document.createElement("style")).textContent=t,e.appendChild(n))}}class Br{constructor(e){this._onComponentResourcesLoaded=e=>{this.componentResourcesMap.delete(e),this.viewHasPendingResources()||this.systemEventEmitter.emit(Lr.VIEW_COMPONENT_RESOURCES_LOADED)},this.systemEventEmitter=e,this.componentResourcesMap=new Map,this.systemEventEmitter.on("COMPONENT_RESOURCES_LOADED",this._onComponentResourcesLoaded)}registerComponent(e,t){this.componentResourcesMap.set(e,t)}viewHasPendingResources(){return 0<[...this.componentResourcesMap.entries()].filter((e=>([,e]=e,0<e.getPending().count()))).length}}class Hr{constructor(e,t,n,i,r){this.isMobile=null,this.resizeListener=t,this.documentModel=e,this.factory=i,this.eventEmitter=r,this.viewResourceManager=new Br(this.eventEmitter),this.destroy=this.destroy.bind(this)}render(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"STATIC",i=this.factory.create(e,n,this.viewResourceManager);if(this.documentModel.setComponentRef(e.id,i),e.componentRef=i,e.type===pi.VIEW&&"SysColumnsComponent"===e.name){let t=p("content-container"),n=this.getRenderOutlet(e.componentRef.getRootElement());null==n||n.setAttribute(t,"")}return e.children.forEach((t=>{this.renderComponent(e,t,n)})),Promise.resolve().then((()=>{this.viewResourceManager.viewHasPendingResources()||this.eventEmitter.emit(Lr.VIEW_COMPONENT_RESOURCES_LOADED)})),i}destroy(e){var t;null!==(t=e.model)&&void 0!==t&&t.path&&this.documentModel.destroyView(e.model.path[0])}renderComponent(e,t,n){let i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Qn.INSIDE,r=this.factory.create(t,n,this.viewResourceManager);this.documentModel.setComponentRef(t.id,r);var o=e.componentRef.getRootElement();return o=t.type===pi.FLOATING_IMAGE?o:this.selectElementToAppendTo(e.componentRef.contentContainer)||this.selectElementToAppendTo(o),i===Qn.INSIDE?r.connect(i,o,r):r.connect(i,e.componentRef,t.componentRef),t.children&&t.children.forEach((e=>this.renderComponent(t,e,n))),t}selectElementToAppendTo(e){return e?this.getRenderOutlet(e)||e:null}getRenderOutlet(e){return e.querySelector("[".concat(p("render-outlet"),"]"))}}let Gr=["DOCUMENT_VIEW_TYPE_SUCCESS","DOCUMENT_VIEW_TYPE_SUBSCRIBED","DOCUMENT_VIEW_TYPE_SUCCESSFUL_REQUEST","DOCUMENT_VIEW_TYPE_ERROR","REQUEST_FORM_VIEW_TYPE_SUCCESS"];class jr{constructor(e,t,n,i,r,o,s,a,l){this.id=n.id,this.params=n.params,this.form=t,this.eventEmitter=e,this.httpClient=i,this.configService=r,this.formEventsListener=null,this.tracking=o,this.stateService=s,this.context=a,this.getServices=l,this.category="SUBMIT"}getTrackingMessageBeforeSentData(){return""}getTrackingMessageByStatus(e){return""}execute(e,t,n,i){if(this.formEventsListener&&this.formEventsListener.off(),!this.form.submitQueuedAfterPending||!0===e){if(!this.form.preventSubmit)return new Promise((r=>{if(!this.form.isPending())return this.form.submitQueuedAfterPending=!1,this.submit(!0===e?t:r,n,i);this.form.submitQueuedAfterPending=!0,setTimeout((()=>this.execute(!0,r,n,i)),500)}));this.form.submitQueuedAfterPending=!1}}submit(e,t,n){var i=this.getServices().viewRouter.getCurrentViewIndex();let r=0<this.getServices().documentModel.getViews().slice(i+1).filter((e=>!Gr.includes(e.label))).length,o=Object.assign(Object.assign({},this.params),n);if(this.form.markAsTouched(),this.stateService.getState().emitActionOnSubmit&&this.eventEmitter.emit(this.stateService.getState().emitActionOnSubmit.eventName),!this.stateService.getState().interceptSubmitActions||t)if(this.form.isValid()||o.skipValidation){t=this.form.getControlsMap();var s=(n=this.stateService).getState().conditionalRedirectViewId,a=o.conditionalRedirectViewId||s;s&&(o.conditionalRedirectViewId=s,n.setState({conditionalRedirectViewId:null}));var l=this.getServices().documentModel.getViews()[i+1];if(a&&(G(l=this.getServices().documentModel.getViews().find((e=>e.id===o.conditionalRedirectViewId)))||l&&Gr.includes(l.label)))return this.goToView(l.path[0],o),void e(!0);r&&G(l)?(this.goToView(i+1,o),e(!0)):(i=this.context.getKVMap(),this.eventEmitter.emit("CONTACT_DATA_SUBMIT"),this.getTrackingMessageBeforeSentData()&&this.tracking.send("FormFinish_[Name]"),this.configService.getConfig("isBot")?e():this.httpClient.execute(this.configService.getConfig("subscribeContactUrl"),"POST",this.constructRequestPayload(i,t),this.constructRequestHeaders()).then((e=>e.json().then((t=>429===e.status?{state:"TOO_MANY_REQUESTS"}:{contactId:t.contactId,state:t&&t.next&&t.next.type}))),(()=>({state:"ERROR"}))).then((t=>{let n=this.getTrackingMessageByStatus(t.state);switch(t.state){case"SUCCESS":n&&this.tracking.send(n),this.goToView(a&&l?l.path[0]:this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_SUCCESS"===e.label||"DOCUMENT_VIEW_TYPE_SUCCESSFUL_REQUEST"===e.label||"REQUEST_FORM_VIEW_TYPE_SUCCESS"===e.label)));break;case"ALREADY_SUBSCRIBED":n&&this.tracking.send(n),this.goToView(a&&l?l.path[0]:this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_SUBSCRIBED"===e.label)));break;case"ERROR":n&&this.tracking.send(n),this.goToView(a&&l?l.path[0]:this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_ERROR"===e.label)));break;case"TOO_MANY_REQUESTS":n&&this.tracking.send(n),this.goToView(a&&l?l.path[0]:this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_ERROR"===e.label))),this.eventEmitter.emit("TOO_MANY_REQUESTS")}t.contactId&&"0"!==t.contactId&&this.eventEmitter.emit("CONTACT_ID_WAS_RECEIVED",t.contactId),e("SUCCESS"===t.state||"ALREADY_SUBSCRIBED"===t.state)})).catch((()=>{this.goToView(o.viewIndexOnError),e(!1)})))}else this.eventEmitter.emit("INVALID_CONTACT_DATA_SUBMIT_ATTEMPT"),e(!1)}constructDataToSent(e,t){let n=Object.assign({},e);return Object.keys(t).forEach((e=>{if(e.startsWith("clConsentId")){if(!e.endsWith("_label")){var i={value:t[e]};t["".concat(e,"_label")]&&(i.text=t["".concat(e,"_label")]),n.consents?n.consents[e]=i:n.consents={[e]:i}}}else n[e]=t[e]})),n}constructRequestPayload(e,t){return e={data:this.constructDataToSent(e,t),referrer:window.location.href,triggeredBy:this.configService.getConfig("triggeredBy")},this.configService.getConfig("widgetDebugMode")&&(e.ignoreTracking=!0),e}constructRequestHeaders(){let e={},t=this.configService.getConfig("clCustomerId");return t&&Object.assign(e,{"cl-customer-id":t}),e}goToView(e,t){this.eventEmitter.emit(tr.GO_TO_VIEW,e,t)}}class Wr extends jr{constructor(){super(...arguments),this.type=tr.SUBSCRIBE_CONTACT}formDataValidation(e){return!(!e.email&&!e.phone)||(this.eventEmitter.emit("SET_SUBSCRIBE_CONTACT_BUTTON_AS_INVALID"),this.formEventsListener=this.form.on(di.validationStatusChanged,(()=>{this.eventEmitter.emit("SET_SUBSCRIBE_CONTACT_BUTTON_AS_VALID")})),!1)}getTrackingMessageBeforeSentData(){return"FormFinish_[Name]"}getTrackingMessageByStatus(e){return{SUCCESS:"FormSuccessSubscribe_[Name]",ALREADY_SUBSCRIBED:"FormAlreadySubscribe_[Name]",ERROR:"FormErrorSubscribe_[Name]",TOO_MANY_REQUESTS:"RequestFormError_[Name]"}[e]||""}}class zr extends jr{constructor(){super(...arguments),this.type=tr.REQUEST}getTrackingMessageBeforeSentData(){return"RequestFormFinish_[Name]"}getTrackingMessageByStatus(e){return{SUCCESS:"RequestFormSuccess_[Name]",ERROR:"RequestFormError_[Name]",TOO_MANY_REQUESTS:"RequestFormError_[Name]"}[e]||""}}class Kr{constructor(e,t){this.type=tr.DISPATCH_EVENT,this.eventEmitter=e,this.config=t}execute(e){return this.eventEmitter.emit(this.config.params.eventName,null),Promise.resolve(!0)}}class Qr{constructor(e){this.type=tr.GO_TO_PREVIOUS_VIEW,this.eventEmitter=e}execute(){return this.eventEmitter.emit(this.type),Promise.resolve(!0)}}class qr{constructor(e){this.type=tr.GO_TO_NEXT_VIEW,this.eventEmitter=e}execute(){return this.eventEmitter.emit(this.type),Promise.resolve(!0)}}class Xr{constructor(e){this.configService=e}track(e,t){if(!this.configService.getConfig("widgetDebugMode")){var n=this.configService.getConfig("formVariantId");if(n){e=+n.split("v")[1];let i=+n.split("v")[0].replace("f","");n=this.configService.getConfig("hostUrl")+"forms/v1/event";let r=this.configService.getConfig("clCustomerId"),o=this.configService.getConfig("clContactId"),s=this.configService.getConfig("triggeredBy"),a=this.configService.getConfig("interactionId"),l=this.configService.getConfig("revision"),c=this.configService.getConfig("appearanceRevision"),d=this.configService.getConfig("browserLanguage"),h=this.configService.getConfig("browserLanguage"),u=this.configService.getConfig("appearanceLanguage");t=btoa(JSON.stringify({formId:i,variantId:e,clCustomerId:r,contactId:o,iid:a,revision:l,appearanceRevision:c,type:"click",referrer:window.location.href,params:t,triggeredBy:s,lang:d,browserLanguage:h,appearanceLanguage:u}));try{navigator.sendBeacon(n,t)}catch(e){ar.log(e)}}}}}class Yr extends Xr{constructor(e,t,n){super(n),this.type=tr.GO_TO_VIEW,this.eventEmitter=e,this.config=t}execute(){return this.eventEmitter.emit(this.type,this.config.params.viewId||this.config.params.viewIndex),this.config.params.trackClick&&this.track("GoToViewAction",this.config.params.trackClickParams),Promise.resolve(!0)}}class Zr{constructor(e,t){this.type=tr.SHOW_WIDGET,this.params=t.params||{},this.eventEmitter=e}execute(){return this.eventEmitter.emit(this.type,this.params),Promise.resolve(!0)}}class Jr extends Xr{constructor(e,t,n){super(t),this.type=tr.OPEN_LINK,this.params=e.params,this.configService=t,this.tracking=n}execute(e,t){return t.stopPropagation(),this.tracking.send("FormClick_[Name]"),this.track("OpenLinkAction",this.params.trackClickParams),t=this.params.link,e=this.configService.getConfig("utmTag"),this.params.tagsEnabled&&null!=e&&e.enabled&&(t=Jr.getDynamicUtmParamsMap(this.configService),e=Jr.getUtmTags(e,t),t=Jr.appendQueryParamsToLink(this.params.link,e)),window.open(t,this.params.target),Promise.resolve(!0)}static appendQueryParamsToLink(e,t){let n=new URL(e);return Object.keys(t).forEach((e=>{n.searchParams.has(e)||n.searchParams.append(e,t[e])})),n.href}static getUtmTags(e,t){let n={},i=new Map([["utmSource","utm_source"],["utmMedium","utm_medium"],["utmCampaign","utm_campaign"],["utmContent","utm_content"],["utmTerm","utm_term"]]);return["utmSource","utmMedium","utmCampaign","utmContent","utmTerm"].filter((t=>void 0!==(null==e?void 0:e[t]))).forEach((r=>{let o=i.get(r);r=t.has(e[r])?t.get(e[r]):encodeURIComponent(e[r]),n[o]=r})),null!=e&&e.customTagsEnabled&&Object.keys((null==e?void 0:e.utmCustomTags)||{}).filter((t=>{var n;return void 0!==(null===(n=null==e?void 0:e.utmCustomTags)||void 0===n?void 0:n[t])})).forEach((t=>n[t]=encodeURIComponent(e.utmCustomTags[t]))),n}static getDynamicUtmParamsMap(e){return new Map([["$widgetId",Jr.normalizeUtmParam(e.getConfig("widgetId"))],["$widgetName",encodeURIComponent(Jr.normalizeUtmParam(e.getConfig("widgetName")))],["$widgetType",Jr.normalizeUtmParam(e.getConfig("type"))],["$widgetLang",Jr.normalizeUtmParam(e.getConfig("browserLanguage"))],["$contactId",encodeURIComponent(Jr.normalizeUtmParam(e.getConfig("clContactId")))]])}static normalizeUtmParam(e){return null==e?"":String(e)}}class $r extends Xr{constructor(e,t,n){super(n),this.type=tr.CLOSE_WIDGET,this.params=t.params,this.eventEmitter=e,this.configService=n}execute(){return new Promise((e=>{this.eventEmitter.emit(this.type,(()=>{e(!0)})),this.track("CloseWidgetAction",this.params.trackClickParams)}))}}class eo{constructor(e,t,n,i,r,o,s){this.eventEmitter=e,this.form=t,this.configService=n,this.tracking=i,this.stateService=r,this.context=o,this.getServices=s}get(e){switch(e.type){case tr.SUBSCRIBE_CONTACT:return new Wr(this.eventEmitter,this.form,e,cr,this.configService,this.tracking,this.stateService,this.context,this.getServices);case tr.REQUEST:return new zr(this.eventEmitter,this.form,e,cr,this.configService,this.tracking,this.stateService,this.context,this.getServices);case tr.DISPATCH_EVENT:return new Kr(this.eventEmitter,e);case tr.GO_TO_VIEW:return new Yr(this.eventEmitter,e,this.configService);case tr.GO_TO_PREVIOUS_VIEW:return new Qr(this.eventEmitter);case tr.GO_TO_NEXT_VIEW:return new qr(this.eventEmitter);case tr.SHOW_WIDGET:return new Zr(this.eventEmitter,e);case tr.OPEN_LINK:return new Jr(e,this.configService,this.tracking);case tr.CLOSE_WIDGET:return new $r(this.eventEmitter,e,this.configService);default:throw Error("Not supported action type ".concat(e.type))}}}class to{constructor(e,t,n){this.instanceModel=e,this.httpClient=t,this.configService=n,this.configService.getConfig("prizePoolModels")&&(e=this.configService.getConfig("prizePoolModels").find((e=>e.id===this.instanceModel.id)))&&(this.instanceModel=e),this.prizeOption=null,this.storageService=this.configService.getConfig().storage,this.randomDistributor=new Mt}async load(){if("MANUAL"===this.instanceModel.sourceType&&!this.instanceModel.options){let e="".concat(this.configService.getConfig("hostUrl"),"forms/v1/prize/pool/").concat(this.instanceModel.id);this.instanceModel=await this.httpClient.execute(e,"GET").then((e=>e.json()))}}getModel(){return this.instanceModel}async getPrize(){var e,t;if(!this.instanceModel)return null;if("FIXED"===this.instanceModel.model)return this.instanceModel.data;if("MANUAL"===this.instanceModel.sourceType){let n=null===(e=this.storageService)||void 0===e?void 0:e.get(this.instanceModel.id);return e=n&&this.instanceModel.options.find((e=>e.id===n)),n&&e?this.mapPrizeOption(e):(this.prizeOption=this._calculatePrize(),null===(t=this.storageService)||void 0===t||t.set(this.instanceModel.id,this.prizeOption.id),this.mapPrizeOption(this.prizeOption))}}submitPrize(){}mapPrizeOption(e){let t=this._mapLabelSuffix(e.value,e.valueType);return{id:e.id,label:t,value:e.code}}_calculatePrize(){let e=h(this.instanceModel.options.map((e=>parseFloat(e.weight))));return this.randomDistributor.calculateFromWeights(this.instanceModel.options,e)}_mapLabelSuffix(e,t){return"DISCOUNT_PERCENTAGE"===t?"".concat(e,"%"):e}}class no{constructor(e,t){this.httpClient=e,this.configService=t}get(e){return new to(e,this.httpClient,this.configService)}}class io{constructor(e,t){this.eventEmitter=e,this.getServices=t,this.registeredActions=[],this.eventEmitter.on("EXECUTE_ACTION_BY_PREDICATE",(e=>{var t;"function"==typeof e.predicate&&(null===(t=this.registeredActions.find(e.predicate))||void 0===t||t.execute(void 0,void 0,!0,e.overrideParams))}))}register(e){e.registeredAtViewIndex=this.getServices().viewRouter.currentViewIndex,this.registeredActions.push(e)}getRegisteredActions(){return this.registeredActions}}class ro extends Xn{constructor(e,t,n){super(),this.addRecord=(e,t)=>{e=this.data.addRecord(e,t),this.subscribeToSource(t),this.emit("RECORD_ADDED",e)},this.updateRecord=(e,t)=>{null!=(e=this.data.getRecord(e))&&e.update(t)&&this.emit("RECORD_UPDATED",e.getValue())},this.getRecord=e=>this.data.getRecord(e),this.sourceRegistry=e,this.data=t,this.isStaticMode=n,this.initSources()}getRegistry(){return this.sourceRegistry}deleteRecord(e){let t=this.data.getRecord(e);t&&!this.isStaticMode&&(this.data.deleteRecord(e),this.emit("RECORD_DELETED",t))}getRecordsMap(){return this.data.getRecordsMap()}getKVMap(){return this.data.getKVMap()}initSources(){this.sourceRegistry.registerInitialSources(),this.sourceRegistry.getSources().forEach((e=>{e=e.getValue(),!this.isStaticMode&&e&&Object.keys(e).length&&Object.entries(e).forEach((e=>{let[t,n]=e;this.addRecord(t,n)}))}))}subscribeToSource(e){(e=this.sourceRegistry.getSource(e.sourceId))&&!e.isSubscribed()&&e.subscribe((e=>{let{value:t,componentId:n}=e;this.updateRecord(n,{value:t})}))}}class oo{constructor(e,t){this.context=e,this.configService=t}destroy(){}process(e,t,n){this.element=e,this.mergeTags=t,this.componentId=n,this.mergeTags&&0!==Object.keys(this.mergeTags).length&&this.element.childNodes.forEach((e=>{if(e.nodeType!==Node.TEXT_NODE&&"MERGE_TAG"===e.getAttribute("cl-type")){var t=e.getAttribute("cl-id");(t=this.mergeTags[t])&&this.processSingleMergeTag(e,t)}}))}processSingleMergeTag(e,t){throw Error("BaseMergeTagsProcessor: processSingleMergeTag is not implemented")}}class so extends oo{processSingleMergeTag(e,t){let n=this.context.getRecord(t.id),i=this.context.getRegistry().getSource(t.sourceId);var r,o=this.context.getKVMap();let s;!n&&o[t.id]&&(s=o[t.id]),i&&(s=(null==(o=i.getValue((null==n?void 0:n.value.id)||t.id))?void 0:o.value)||s,o&&"function"==typeof o.processor&&(r=o.processor(i,t))),o=this.configService.getConfig("previewMode")||this.configService.getConfig("editorPreviewMode")||this.configService.getConfig("demoMode"),r=r||s||(null==n?void 0:n.value.value)||t.fallbackValue||(o?t.exampleValue:""),n||this.context.addRecord(t.id,Object.assign(Object.assign({recordKey:t.id,id:t.id,sourceId:t.sourceId},i?i.getValue(t.id):{}),{value:r})),e.style.fontFamily="inherit",j(e).textContent=r}}class ao extends Xn{constructor(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};super(),this.config=e}subscribe(){}getValue(e){return e?{processor:(e,t)=>ao.processModel(t,this.config.sessionUrlSearchParams)}:{}}static processModel(e,t){if(!e.arguments)return"";if(e=e.arguments.find((e=>"urlQueryParamName"===e.name)),t||(t=[new URL(window.location.href).search]),!e||!e.value)return"";let n;for(let i=t.length-1;0<=i;i--){let r=new URLSearchParams(t[i]).getAll(e.value).filter(Boolean);if(r.length){n=r;break}}return n?n.join(", "):""}}ao.sourceId="URL_QUERY_PARAMS";class lo extends oo{constructor(e){super(e),this.contextSubscriptions=[this.context.on("RECORD_ADDED",this._handleContextEvents.bind(this)),this.context.on("RECORD_UPDATED",this._handleContextEvents.bind(this)),this.context.on("RECORD_DELETED",this._handleContextEvents.bind(this))]}destroy(){super.destroy(),this.contextSubscriptions&&this.contextSubscriptions.forEach((e=>e.off()))}processSingleMergeTag(e,t){if(e){var n=this.context.getRecord(t.id);e.style.fontFamily="inherit",j(e).textContent=t.exampleValue;var i=!t.exampleValue||t.arguments&&!t.arguments.every((e=>e.value));!n&&t.sourceId!==Yn.sourceId&&t.sourceId!==ao.sourceId||i?e.classList.add("tag-error"):e.classList.remove("tag-error")}}_handleContextEvents(e){var t;(e=null===(t=this.mergeTags)||void 0===t?void 0:t[e.key])&&this.processSingleMergeTag(this.element.querySelector('[cl-id="'.concat(e.id,'"]')),e)}}class co{constructor(e,t,n){this.isStaticMode=e,this.context=t,this.configService=n}create(){return this.isStaticMode?new so(this.context,this.configService):new lo(this.context,this.configService)}}class ho{constructor(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.id=e,this.subscriptionEntry=t,this.config=n,this.subscribed=!1}subscribe(e){this.subscribed=!0,this.subscriptionEntry.subscribe(e)}getValue(e){return this.subscriptionEntry.getValue(e)}isSubscribed(){return this.subscribed}}class uo{constructor(e){this.formService=e}subscribe(e){this.formService.on(ui.valueChanged,(t=>{e({key:t.getName(),value:t.getValue(),componentId:t.getComponentId()})})),this.formService.on(ui.controlRegistered,(t=>{e({key:t.getName(),value:t.getValue()})}))}getValue(e){var t;return e?null===(t=this.formService.getControl(e))||void 0===t?void 0:t.getValue():this.formService.getControlsMap()}}class mo{constructor(e,t){this.registeredSourcesMap={},this.sources=[new ho("FORM",new uo(e)),new ho("DATA_LAYER",new Yn),new ho("URL_QUERY_PARAMS",new ao(t))]}registerSource(e){if(this.registeredSourcesMap[e.id])throw Error("Source with id ".concat(e.id," already registered"));return this.registeredSourcesMap[e.id]=e}getSource(e){return this.registeredSourcesMap[e]}getSources(){return Object.values(this.registeredSourcesMap)}registerInitialSources(){return this.sources.map((e=>this.registerSource(e)))}}class po{constructor(e,t){this.key=e,this.value=t}getKey(){return this.key}getValue(){return this.value}update(e){let t=JSON.stringify(this.value);return e=Object.assign(Object.assign({},this.value),e),t!==JSON.stringify(e)&&(this.value=e,!0)}}class go{constructor(){this.records={}}getRecord(e){return this.records[e]}addRecord(e,t){return t=new po(e,t),this.records[e]=t}deleteRecord(e){let t=this.records,n=t[e];e=["symbol"==typeof e?e:e+""];var i,r={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)0>e.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(r[i[o]]=t[i[o]])}return this.records=r,n}getRecordsMap(){return this.records}getKVMap(){return Object.keys(this.records).reduce(((e,t)=>(e[(t=this.records[t]).value.id]=t.value.value,e)),{})}}class Eo{constructor(e,t,n,i,r,o,s,a,l){var c;e=new Ei(e);var d=!r;r=d?new Ci(e):new _i(e,r);let h=new ai,u=new vi(t),m=new Ti(e,u),p=new Si;p.setStyles(o);let g=null!==(c=t.componentFactoryClass)&&void 0!==c?c:Ur;c=new Xn,o=new mi(i);var E=new mo(o,t),v=new go;E=new ro(E,v,d),l=new(null!=l?l:eo)(c,o,u,i,h,E,(()=>this.services)),v=new io(c,(()=>this.services));let _=new no(cr,u);s=new g(h,c,o,e,r,u,p,i,s,l,v,_,E,d=new co(d,E,u),m),t=new Hr(e,r,t,s,c),this.services={documentService:new Ii(e,t,a),componentResolver:n,documentModel:e,state:h,form:o,eventEmitter:c,config:u,resizeListener:r,mobileDeviceOrientationListener:m,componentFactory:s,viewRenderer:t,commonStylesService:p,tracking:i,actionFactory:l,actionRegister:v,prizePoolFactory:_,context:E,mergeTagsProcessorFactory:d}}destroy(){Object.keys(this.services).filter((e=>"viewRenderer"!==e)).forEach((e=>this.services[e]&&this.services[e].destroy&&this.services[e].destroy()))}}class vo extends Xn{constructor(e,t,n,i,r){super(),this.eventEmitter=e,this.documentModel=t,this.viewRenderer=n,this.optionalDocumentStyles=i,this.services=r,this.currentViewComponentRef=this.currentViewIndex=null,this.eventEmitter.on("TOO_MANY_REQUESTS",(()=>{this.viewDestroy(),this.documentContainer.innerText="Too many requests"})),this.transitions=[]}getCurrentViewIndex(){return this.currentViewIndex}start(){return this.documentContainer=window.document.createElement("div"),this.documentContainer.setAttribute("cl-document",""),this.optionalDocumentStyles&&Object.keys(this.optionalDocumentStyles).forEach((e=>{this.documentContainer.style[e]=this.optionalDocumentStyles[e]})),this.navigate(0),this.eventEmitter.on(tr.GO_TO_VIEW,((e,t,n)=>{"number"==typeof e?this.navigate(e,n):-1===(t=this.documentModel.getModel().views.findIndex((t=>t.id===e)))?this.eventEmitter.emit("WIDGET_NAVIGATION_STATE_NOT_FOUND",{viewPointer:e}):this.navigate(t,n)})),this.eventEmitter.on(tr.GO_TO_PREVIOUS_VIEW,(()=>{0<this.getCurrentViewIndex()&&this.navigate(this.getCurrentViewIndex()-1)})),this.eventEmitter.on(tr.GO_TO_NEXT_VIEW,(()=>{this.documentModel.getModel().views[this.getCurrentViewIndex()+1]&&this.navigate(this.getCurrentViewIndex()+1)})),this.eventEmitter.on("CONTACT_DATA_SUBMIT",(()=>{this.contactDataSubmitted=!0})),this.documentContainer}destroy(){this.viewDestroy(),this.documentContainer&&this.documentContainer.remove()}navigate(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this.documentModel.getView(e),i=this.currentViewIndex;if(this.currentViewIndex!==e){if(!n)throw this.eventEmitter.emit("WIDGET_NAVIGATION_STATE_NOT_FOUND",{navigateTo:e}),Error("View was not found by index: "+e);setTimeout((()=>{let e=Gr.includes(n.label),t=this.contactDataSubmitted,r=0<this.services.form.getControlsAsArray().length;e&&r&&!t&&(this.eventEmitter.emit("WIDGET_NAVIGATION_STATE_NOT_FOUND",{toSystemStateWithoutSubmitFromIndex:i,ctx:this.services.context.getKVMap()}),this.services.actionFactory.get({type:tr.REQUEST}).execute(void 0,void 0,!0,{skipValidation:!0}))}),300);var r=this.viewRenderer.render(n,e);this.viewDestroy(),this.documentContainer.appendChild(r),this.currentViewComponentRef=r,this.currentViewIndex=e,this.transitions.push({prevViewIndex:i,currentViewIndex:e,currentViewComponentRef:r,contactDataSubmitted:this.contactDataSubmitted,routeState:t}),this.emit("NAVIGATION_END")}}viewDestroy(){this.currentViewComponentRef&&this.viewRenderer.destroy(this.currentViewComponentRef)}getDocumentContainer(){return this.documentContainer}getLastTransition(){return this.transitions[this.transitions.length-1]}}class _o{static getValueByPropPath(e,t){let n=e||{};return t.forEach((e=>{n=null==n?void 0:n[e]})),n}static transformPropPathStringToArray(e){return e.split(",")}static constructDynamicPropPath(e,t){let n=[];return e.filter((e=>e.includes("[id]"))).length?(e.forEach((e=>{var i=e.split(",[id");if(!(i=_o.getValueByPropPath(t.props,_o.transformPropPathStringToArray(i[0]))))return null;Object.keys(i).forEach((t=>{n.push(e.replace("[id]",t))})),n=_o.constructDynamicPropPath(n,t)})),n):e}static applyTranslationObjectToComponentsIfNeeded(e,t,n){let i=e.views;return n?(n=JSON.parse(n||"{}"),Object.keys(n).length?(e.views=this.applyTranslationObjectToComponents(i,t,n),e):e):e}static setProp(e,t,n){e[t.id]&&(e=e[t.id][n])&&(t.props=this._setValueByPropPath({props:t.props,propPath:n.split(","),value:e}))}static applyTranslationObjectToComponents(e,t,n){let i=e=>{const r=t.find((t=>t.name===e.name&&t.version===e.version));r&&r.i18nPropPaths&&r.i18nPropPaths.length&&r.i18nPropPaths.forEach((t=>{t.includes("[id]")?_o.constructDynamicPropPath(["".concat(t)],e).forEach((t=>{_o.setProp(n,e,t)})):_o.setProp(n,e,t)})),e.children&&e.children.length&&e.children.forEach(i)};return e.forEach(i),e}static _setValueByPropPath(e){let t=e.props;var n=e.propPath;let i=e.property;return i||e.element&&e.elementProp||(i=n.slice(-1)[0],n=n.slice(0,-1)),n.forEach((e=>{t=t&&t[e]})),e.element&&e.elementProp?(n=t.findIndex((t=>t.element===e.element)),"object"==typeof t[n][e.elementProp]?t.splice(n,1,Object.assign(Object.assign({},t[n]),{[e.elementProp]:Object.assign(Object.assign({},t[n][e.elementProp]),{[i]:e.value})})):t.splice(n,1,Object.assign(Object.assign({},t[n]),{[e.elementProp]:e.value})),e.props):(t[i]=e.value,e.props)}}class fo{constructor(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length?arguments[3]:void 0,r=4<arguments.length?arguments[4]:void 0,o=5<arguments.length?arguments[5]:void 0;var s;this.entryModuleType="STATIC",this.componentResolver=t,this.config=Object.assign(Object.assign({},n),{entryModuleType:this.entryModuleType}),this.documentJson=e,this.translations=i,this.viewRouter=this.viewRenderer=this.compositionRoot=null,this.trackingService=r||{send:()=>{},trackClick:()=>{}},this.layoutType=o,(null!==(s=this.config.componentRegister)&&void 0!==s?s:Fr).register(U,this.entryModuleType)}init(e){this.documentJson=_o.applyTranslationObjectToComponentsIfNeeded(JSON.parse(JSON.stringify(this.documentJson)),this.componentResolver.getComponentManifests(),this.translations),e=new Eo(this.documentJson,this.config,this.componentResolver,this.trackingService,null,"",this.layoutType,this.entryModuleType,e);let t=new vo(e.services.eventEmitter,e.services.documentModel,e.services.viewRenderer,this.config&&this.config.optionalDocumentStyles,e.services);e.services.viewRouter=t,this.compositionRoot=e,this.viewRenderer=e.services.viewRenderer,this.componentFactory=e.services.componentFactory,this.viewRouter=t;let n=this.compositionRoot.services.documentModel.getShared().cssVars;return Promise.resolve().then((()=>si.override(n,this.viewRouter.getDocumentContainer()))),t.start()}destroy(){var e,t;null===(e=this.viewRouter)||void 0===e||e.destroy(),null===(t=this.compositionRoot)||void 0===t||t.destroy()}performAction(e,t){if(t=this.compositionRoot.services.documentService.handleModelUpdate(e,t),"COLOR_SCHEMA_UPDATE"===e)e=this.compositionRoot.services.documentModel.getShared().cssVars,si.override(e,this.viewRouter.getDocumentContainer());return t}listenAction(e,t){this.compositionRoot.services.eventEmitter.on(e,((e,n)=>{t(e,n)}))}}class yo extends Xn{constructor(e){super(),this.propsRequestListener=e=>{var t=e.detail.id;let n=e.detail.widgetId;n&&this.params.config.formVariantId&&this.params.config.formVariantId!==n||(t=qn.getNodeById(this.entryModule.compositionRoot.services.documentModel.getViews(),t))&&(e.detail.props=this.entryModule.componentFactory.constructProps(t,this.entryModule.viewRenderer.viewResourceManager))},this.params=e,this.entryModule=null,this.controllers=[]}disconnect(){window.removeEventListener("cl-props-request",this.propsRequestListener)}addPropsRequestEventListener(){window.addEventListener("cl-props-request",this.propsRequestListener)}setEntryModule(e){this.entryModule=e}navigate(e){this.entryModule&&this.entryModule.viewRouter&&this.entryModule.viewRouter.navigate(e)}updateSharedPropsByType(e,t,n){for(let i of this.controllers)if("function"==typeof i.updateSharedPropsByType&&i.params.widgetType===e)return i.updateSharedPropsByType(t,n);return{}}updateSharedParams(e,t){var n;let i=this.updateSharedPropsByType(this.params.widgetType,e.documentModel.shared,t);return Object.assign(Object.assign({},e),{documentModel:Object.assign(Object.assign({},e.documentModel),{shared:Object.assign(Object.assign(Object.assign({},e.documentModel.shared),{closeIcon:Object.assign(Object.assign({},e.documentModel.shared.closeIcon),null===(n=t.shared)||void 0===n?void 0:n.closeIcon)}),i)})})}setPosition(e){this.controllers.forEach((t=>{"function"==typeof t.setPosition&&(t.params=this.updateSharedParams(t.params,e),t.setPosition(e.isMobileEnv))}))}setCloseIcon(e){this.controllers.forEach((t=>{"function"==typeof t.setCloseIconParams&&(t.params=this.updateSharedParams(t.params,e),t.setCloseIconParams(e.isMobileEnv))}))}setLauncherEntryAnimationAndPosition(e){this.controllers.forEach((t=>{"function"==typeof t.setEntryAnimationAndPosition&&(t.params=this.updateSharedParams(t.params,e),t.setEntryAnimationAndPosition(e.isMobileEnv))}))}performAction(e,t){let n=this.entryModule.performAction(e,t);return this.controllers.forEach((n=>{if("COLOR_SCHEMA_UPDATE"===e)si.override(t,n.getConnectedElement())})),n}setEnvironment(e){this.entryModule.performAction("ENVIRONMENT_UPDATE",e);let t={isMobileEnv:e.isMobileEnv};this.setCloseIcon(t),this.setPosition(t),this.setLauncherEntryAnimationAndPosition(t),this.controllers.forEach((t=>{"function"==typeof t.updateScrollbar&&t.updateScrollbar(e.isMobileEnv)}))}}class To{constructor(){this.loadedGoogleFonts=[]}addGoogleFonts(e,t){(e||[]).length&&(e=this.getDynamicUrlPart(e,t))&&this.addFonts(e,t)}getDynamicUrlPart(e,t){let n=[];return((t||document).fonts||[]).forEach((e=>n.push("".concat(e.family," ").concat(e.weight," ").concat(e.style)))),t=new Set(n),this.combineUrlDynamicPart(e,t)}combineUrlDynamicPart(e,t){let n="",i=this.makeFontOptions();return e.forEach((e=>{let r="",o="";i.forEach((n=>{if(!t.has("".concat(e," ").concat(n," normal"))){let e="1,".concat(n);o=o?o+";".concat(e):o+e}t.has("".concat(e," ").concat(n," italic"))||(n="0,".concat(n),r=r?r+";".concat(n):r+n)})),(r||o)&&(n+="&family=".concat(e.replace(/ /g,"+"),":ital,wght@").concat(r,";").concat(o))})),n}makeFontOptions(){let e=[];for(let t=0;9>t;t++)e.push(100*(t+1));return e}addFonts(e,t){if((t||document).head){var n=document.createElement("link");n.rel="stylesheet",n.href="https://fonts.googleapis.com/css2?display=swap"+e,(t||document).head.appendChild(n),this.loadedGoogleFonts.push(n)}}removeGoogleFonts(){this.loadedGoogleFonts.forEach((e=>e.remove())),this.loadedGoogleFonts=[]}}class Co extends To{constructor(e,t,n,i){super(),this.params=e,this.eventEmitter=t,this.viewRouter=n,this.documentModel=i,this.connectedElement=null}hasComponentWithResourcesOnTheView(e){if("UPDATING"!==this.params.entryModuleType){var t=0;return e.iterateViewModelAndExecute(this.viewRouter.currentViewIndex,(e=>{var n,i;!0===(null===(i=null===(n=null==e?void 0:e.componentRef)||void 0===n?void 0:n.manifest)||void 0===i?void 0:i.waitForResourcesLoad)&&t++})),0<t}}createSvgElement(e,t,n){let i=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.setAttributeNS(null,"viewBox","0 0 "+e+" "+t),i.setAttributeNS(null,"width",e),i.setAttributeNS(null,"height",t),i.innerHTML=n,i}getHideIcon(){return this.createSvgElement(21,21,'<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5582 11.167C13.6018 10.9519 13.6247 10.7293 13.6247 10.5013C13.6247 8.66035 12.1323 7.16797 10.2913 7.16797C10.0634 7.16797 9.84072 7.19086 9.6256 7.23446L10.3945 8.00339C11.6932 8.05612 12.7365 9.09947 12.7892 10.3981L13.5582 11.167ZM8.1189 9.2633C7.91046 9.62829 7.79134 10.0509 7.79134 10.5013C7.79134 11.882 8.91063 13.0013 10.2913 13.0013C10.7418 13.0013 11.1644 12.8822 11.5293 12.6737L12.1346 13.279C11.6067 13.6301 10.9729 13.8346 10.2913 13.8346C8.45039 13.8346 6.95801 12.3423 6.95801 10.5013C6.95801 9.81975 7.16256 9.18597 7.51361 8.65801L8.1189 9.2633Z" fill="#2C2C2C"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M15.7837 13.3901C16.4728 12.7662 17.0357 12.1378 17.4361 11.6517L17.4851 11.5924C17.7606 11.2595 18.0164 10.9504 18.0164 10.4987C18.0164 10.047 17.7606 9.73786 17.4851 9.40501L17.4361 9.3457C16.832 8.61222 15.8577 7.55476 14.6386 6.67763C13.4227 5.80287 11.9277 5.08203 10.2911 5.08203C9.46902 5.08203 8.68264 5.26393 7.94942 5.55587L8.59862 6.20507C9.14557 6.02176 9.71248 5.91536 10.2911 5.91536C11.6843 5.91536 13.0094 6.53209 14.1519 7.35408C15.2911 8.17371 16.2136 9.1722 16.7929 9.8755C17.1465 10.3049 17.183 10.3791 17.183 10.4987C17.183 10.6183 17.1465 10.6925 16.7929 11.1219C16.4027 11.5957 15.8567 12.2034 15.1937 12.8001L15.7837 13.3901ZM6.30424 7.44623C5.22306 8.24755 4.34715 9.19835 3.78941 9.8755C3.43577 10.3049 3.39925 10.3791 3.39925 10.4987C3.39925 10.6183 3.43577 10.6925 3.78941 11.1219C4.36868 11.8252 5.29119 12.8237 6.43042 13.6433C7.57294 14.4653 8.89795 15.082 10.2911 15.082C11.2901 15.082 12.2539 14.765 13.1406 14.2826L13.7526 14.8946C12.7242 15.4892 11.5495 15.9154 10.2911 15.9154C8.65456 15.9154 7.1596 15.1945 5.94374 14.3198C4.72459 13.4426 3.7503 12.3852 3.14617 11.6517L3.09716 11.5924C2.82173 11.2595 2.56592 10.9504 2.56592 10.4987C2.56592 10.047 2.82172 9.73786 3.09716 9.40501L3.14617 9.3457C3.711 8.65993 4.5994 7.69096 5.70897 6.85095L6.30424 7.44623Z" fill="#2C2C2C"/>\n        <path d="M4.45752 2.16602L17.7909 15.4993" stroke="#2C2C2C" stroke-width="0.833333"/>')}getClaspoIcon(){return this.createSvgElement(17,10,'<path d="M13.8946 6.59451C13.337 7.15222 12.5956 7.45921 11.807 7.45921H3.68778C3.09624 7.45921 2.54034 7.22894 2.12199 6.81068C1.70373 6.39243 1.52894 5.83644 1.52894 5.24489C1.52894 4.65345 1.70373 4.09746 2.12199 3.67911C2.54034 3.26095 3.09624 3.03058 3.68778 3.03058C4.23793 3.03058 4.75748 3.23004 5.16396 3.59453V5.36522L10.1517 2.06086L10.1518 2.06116C10.6365 1.73171 11.2081 1.5544 11.807 1.5544C12.5956 1.5544 13.337 1.8614 13.8946 2.4191C14.4524 2.97671 14.7436 3.71827 14.7436 4.50686C14.7436 5.29544 14.4524 6.0369 13.8946 6.59451ZM11.807 0.078125C10.8924 0.078125 10.0424 0.355518 9.33667 0.830762L9.33636 0.830259L5.16396 3.59443V1.8617C4.71187 1.66425 4.21276 1.5544 3.68778 1.5544C1.64956 1.5544 0 3.20678 0 5.24489C0 7.28311 1.64956 8.93549 3.68778 8.93549H11.807C14.2529 8.93549 16.2911 6.95275 16.2911 4.50686C16.2911 2.06086 14.2529 0.078125 11.807 0.078125Z" fill="#F3492C"/>')}addBrandingUTMParametersToURL(e,t){return t={utm_campaign:"Powered_by_promo",utm_medium:"referral",utm_source:t},(e=new URL(e)).search=e.search?e.search+"&".concat(new URLSearchParams(t).toString()):"?".concat(new URLSearchParams(t).toString()),e.toString()}createBrandingElement(){var e=this.getClaspoIcon();let t=this.getHideIcon();this.brandingElement=document.createElement("div"),this.brandingElement.classList.add("cl-branding");var n=document.createElement("a");n.classList.add("cl-link"),n.setAttribute("href",this.addBrandingUTMParametersToURL("https://claspo.io/",this.params.config.siteId)),n.setAttribute("rel","nofollow"),n.setAttribute("target","_blank");let i=document.createElement("span");i.classList.add("cl-branding-text"),i.innerText="Powered by ",n.append(i),n.append(e),(e=document.createElement("span")).classList.add("cl-branding-brand"),e.innerText="Claspo",n.append(e),this.brandingElement.append(n),this.params.config.upgradePlanButton&&((n=document.createElement("div")).classList.add("cl-branding-upgrade-overlay"),n.addEventListener("click",(()=>{this.params.config.upgradePlanUrl&&window.open(this.params.config.upgradePlanUrl,"_self")})),(e=document.createElement("div")).classList.add("cl-branding-upgrade"),e.appendChild(t),this.brandingElement.append(e),this.brandingElement.append(n))}addBrandingElementListeners(){this.brandingElement.addEventListener("click",(()=>{this.eventEmitter.emit("BRANDING_ELEMENT_CLICKED",this.params.widgetType)}))}isMobileEnv(e){return window.matchMedia("(max-width: ".concat(e,"px)")).matches}setConnectedElement(e){this.connectedElement=e}getConnectedElement(){return this.connectedElement}updateSharedPropsByType(e,t){return{}}getDisabledWidgetStyles(e){return"".concat(e,":after {\n      content: '';\n      height: 100%;\n      width: 100%;\n      position: absolute;\n      left: 0;\n      top: 0;\n      z-index: 1;\n    }")}getBrandingStyles(){return".cl-branding {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          border-radius: 20px;\n          background: #FFFFFF;\n          height: 21px;\n          line-height: 21px !important;\n          font-family: Arial, sans-serif !important;\n          letter-spacing: 0.3px !important;\n          font-size: 10px !important;\n          font-weight: 400 !important;\n          padding: 0 10px !important;\n          gap: 8px;\n          position: absolute;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n          z-index: 1;\n        }\n        \n        .cl-link {\n          display: flex;\n          align-items: center;\n          gap: 5px;\n          text-decoration: none;\n          cursor: pointer;\n        }\n\n      .cl-branding-text {\n        color: #121221;\n        flex: none;\n        order: 0;\n        flex-grow: 0;\n        font-size: 10px !important;\n        font-family: Arial, sans-serif !important;\n        font-weight: 400 !important;\n        font-style: normal !important;\n      }\n\n      .cl-branding-brand{\n        display: flex;\n        align-items: center;\n        gap: 2px;\n        color: #F3492C;\n        flex: none;\n        order: 1;\n        flex-grow: 0;\n        font-size: 10px !important;\n        font-family: Arial, sans-serif !important;\n        font-weight: 400;\n        font-style: normal !important;\n      }\n\n      .cl-branding-link-overlay,\n      .cl-branding-upgrade-overlay {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        cursor: pointer;\n      }\n\n      .cl-branding-upgrade {\n        display: flex;\n        align-items: center;\n        order: 2;\n        flex-grow: 0;\n      }\n\n      .cl-branding:hover {\n        box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.07);\n      }"}getViewportWidth(e,t){return Math.max((e||document).documentElement.clientWidth,(t||window).innerWidth||0)}getContainerElementHeight(){return"BODY"===this.containerElement.tagName?Math.max(document.documentElement.clientHeight,window.innerHeight||0):this.containerElement.getBoundingClientRect().height}getActualSizeByEnv(e){var t;return(e=null===(t=this.params.documentModel.shared.actualSize)||void 0===t?void 0:t[e?"mobile":"desktop"])?e:null}getViewContentContainer(){var e;return null===(e=this.documentElement.querySelector('[cl-type="VIEW"]'))||void 0===e?void 0:e.shadowRoot.querySelector("[cl-content-container]")}changeViewAlignToTop(){let e=this.documentElement.querySelector('[cl-type="VIEW"]');"row"===e.style.flexDirection?e.style.alignItems="flex-start":e.style.justifyContent="flex-start"}addWidgetContentClickEventListener(e){e.addEventListener("click",(()=>{this.eventEmitter.emit("WIDGET_CONTENT_CLICKED",e)}))}}class Io extends Co{getDefaultCloseIconParams(){let e={verticalOffset:"-42px",horizontalOffset:"-42px",width:"34px",height:"34px",content:"0",inlineSvg:!0,color:"rgb(255, 255, 255)"};return{desktop:e,mobile:Object.assign(Object.assign({},e),{verticalOffset:"-37px",horizontalOffset:"0px"})}}applyCloseIconParams(e,t,n){if(e&&!t)e.style.display="none";else if(e&&t){var i="STATIC"===this.params.entryModuleType,r=i?this.viewRouter.getCurrentViewIndex():this.params.viewIndex;this.setCloseIconVisibility(e,t,r),i&&this.viewRouter.on("NAVIGATION_END",(()=>{this.setCloseIconVisibility(e,t,this.viewRouter.getCurrentViewIndex())})),n=n?t.mobile:t.desktop,e.style.width=n.width,e.style.height=n.height,e.style.top=n.verticalOffset,n.horizontalPosition&&"RIGHT"!==n.horizontalPosition?(e.style.left=n.horizontalOffset,e.style.right=""):(e.style.right=n.horizontalOffset,e.style.left=""),n.inlineSvg?(e.style.color=n.color,e.innerHTML=this.getInlineSvg(n.content),(n=e.firstElementChild).style.width="100%",n.style.height="100%"):(e.style.color="",e.innerHTML="",(i=document.createElement("img")).src=n.content,i.style.width="100%",e.appendChild(i))}}setCloseIconVisibility(e,t,n){var i;t.showOnViews?(n=null===(i=this.documentModel.getModel().views[n])||void 0===i?void 0:i.id,e.style.display=n?t.showOnViews.includes(n)?"block":"none":"block"):e.style.display="block"}getInlineSvg(e){switch(+e){case 0:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 9.70662L9.70711 15.7066L8.29289 14.2924L14.2929 8.2924L15.7071 9.70662Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 9.70711L14.2929 15.7071L15.7071 14.2929L9.70711 8.29289L8.29289 9.70711Z" fill="currentColor"/>\n</svg>\n';case 1:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.9916 5.34171C19.4472 5.79732 19.4472 6.53602 18.9916 6.99163L6.99163 18.9916C6.53602 19.4472 5.79732 19.4472 5.34171 18.9916C4.8861 18.536 4.8861 17.7973 5.34171 17.3417L17.3417 5.34171C17.7973 4.8861 18.536 4.8861 18.9916 5.34171Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.34171 5.34171C4.8861 5.79732 4.8861 6.53602 5.34171 6.99163L17.3417 18.9916C17.7973 19.4472 18.536 19.4472 18.9916 18.9916C19.4472 18.536 19.4472 17.7973 18.9916 17.3417L6.99163 5.34171C6.53602 4.8861 5.79732 4.8861 5.34171 5.34171Z" fill="currentColor"/>\n</svg>\n';case 2:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 3C6.80558 3 3 6.80558 3 11.5C3 16.1944 6.80558 20 11.5 20C16.1944 20 20 16.1944 20 11.5C20 6.80558 16.1944 3 11.5 3ZM2 11.5C2 6.25329 6.25329 2 11.5 2C16.7467 2 21 6.25329 21 11.5C21 16.7467 16.7467 21 11.5 21C6.25329 21 2 16.7467 2 11.5Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M14.8536 8.85319L8.85355 14.8532L8.14645 14.1461L14.1464 8.14608L14.8536 8.85319Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.14645 8.85355L14.1464 14.8536L14.8536 14.1464L8.85355 8.14645L8.14645 8.85355Z" fill="currentColor"/>\n</svg>\n';case 3:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17.8648 6.13518C18.0451 6.31542 18.0451 6.60765 17.8648 6.7879L6.78792 17.8648C6.60768 18.0451 6.31545 18.0451 6.13521 17.8648C5.95496 17.6846 5.95496 17.3923 6.13521 17.2121L17.2121 6.13518C17.3923 5.95494 17.6846 5.95494 17.8648 6.13518Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.13518 6.13518C5.95494 6.31542 5.95494 6.60765 6.13518 6.7879L17.2121 17.8648C17.3923 18.0451 17.6846 18.0451 17.8648 17.8648C18.045 17.6846 18.045 17.3923 17.8648 17.2121L6.78789 6.13518C6.60765 5.95494 6.31542 5.95494 6.13518 6.13518Z" fill="currentColor"/>\n</svg>\n';case 4:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM7.29289 16.7071C6.90237 16.3166 6.90237 15.6834 7.29289 15.2929L10.5858 12L7.29289 8.70711C6.90237 8.31658 6.90237 7.68342 7.29289 7.29289C7.68342 6.90237 8.31658 6.90237 8.70711 7.29289L12 10.5858L15.2929 7.29289C15.6834 6.90237 16.3166 6.90237 16.7071 7.29289C17.0976 7.68342 17.0976 8.31658 16.7071 8.70711L13.4142 12L16.7071 15.2929C17.0976 15.6834 17.0976 16.3166 16.7071 16.7071C16.3166 17.0976 15.6834 17.0976 15.2929 16.7071L12 13.4142L8.70711 16.7071C8.31658 17.0976 7.68342 17.0976 7.29289 16.7071Z" fill="currentColor"/>\n</svg>\n';case 5:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="10" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 9.70662L9.70711 15.7066L8.29289 14.2924L14.2929 8.2924L15.7071 9.70662Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 9.70711L14.2929 15.7071L15.7071 14.2929L9.70711 8.29289L8.29289 9.70711Z" fill="currentColor"/>\n</svg>\n';case 6:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM2.5 12C2.5 6.75329 6.75329 2.5 12 2.5C17.2467 2.5 21.5 6.75329 21.5 12C21.5 17.2467 17.2467 21.5 12 21.5C6.75329 21.5 2.5 17.2467 2.5 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.3536 9.35306L9.35355 15.3531L8.64645 14.646L14.6464 8.64596L15.3536 9.35306Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.64645 9.35355L14.6464 15.3536L15.3536 14.6464L9.35355 8.64645L8.64645 9.35355Z" fill="currentColor"/>\n</svg>\n        ';case 7:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM7.29289 16.7071C6.90237 16.3166 6.90237 15.6834 7.29289 15.2929L10.5858 12L7.29289 8.70711C6.90237 8.31658 6.90237 7.68342 7.29289 7.29289C7.68342 6.90237 8.31658 6.90237 8.70711 7.29289L12 10.5858L15.2929 7.29289C15.6834 6.90237 16.3166 6.90237 16.7071 7.29289C17.0976 7.68342 17.0976 8.31658 16.7071 8.70711L13.4142 12L16.7071 15.2929C17.0976 15.6834 17.0976 16.3166 16.7071 16.7071C16.3166 17.0976 15.6834 17.0976 15.2929 16.7071L12 13.4142L8.70711 16.7071C8.31658 17.0976 7.68342 17.0976 7.29289 16.7071Z" fill="currentColor"/>\n</svg>\n        ';case 8:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.9138 8.08736C16.1416 8.31516 16.1416 8.68451 15.9138 8.91232L8.9138 15.9123C8.68599 16.1401 8.31664 16.1401 8.08884 15.9123C7.86103 15.6845 7.86103 15.3152 8.08884 15.0874L15.0889 8.08736C15.3167 7.85955 15.686 7.85955 15.9138 8.08736Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.08882 8.08736C7.86102 8.31516 7.86102 8.68451 8.08882 8.91232L15.0888 15.9123C15.3166 16.1401 15.686 16.1401 15.9138 15.9123C16.1416 15.6845 16.1416 15.3152 15.9138 15.0874L8.91378 8.08736C8.68598 7.85955 8.31663 7.85955 8.08882 8.08736Z" fill="currentColor"/>\n</svg>\n        ';case 9:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.705 8.29392C15.8189 8.40783 15.8189 8.5925 15.705 8.7064L8.70495 15.7064C8.59105 15.8203 8.40638 15.8203 8.29247 15.7064C8.17857 15.5925 8.17857 15.4078 8.29247 15.2939L15.2925 8.29392C15.4064 8.18002 15.5911 8.18002 15.705 8.29392Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29246 8.29392C8.17856 8.40783 8.17856 8.5925 8.29246 8.7064L15.2925 15.7064C15.4064 15.8203 15.5911 15.8203 15.705 15.7064C15.8189 15.5925 15.8189 15.4078 15.705 15.2939L8.70494 8.29392C8.59104 8.18002 8.40636 8.18002 8.29246 8.29392Z" fill="currentColor"/>\n</svg>\n        '}}addCloseIconEventListener(){this.closeIconElement.addEventListener("click",(()=>{this.eventEmitter.emit("CLOSE_ICON_CLICKED",this.closeIconElement)}))}}class So extends Io{constructor(e,t,n,i){super(e,t,n,i),this.zIndex=this.params.zIndex,e=this.params.documentModel.shared.mobileBreakpointWidth,this.floatingBoxRootElement=document.createElement("div"),this.floatingBoxRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.floatingBoxElement=this.floatingBoxRootElement.querySelector(So.floatingBoxSelector),this.floatingBoxElement.setAttribute("cl-connector-root-element",oi.FLOATING_BOX),this.params.config.formVariantId&&this.floatingBoxElement.setAttribute("cl-widget-id",this.params.config.formVariantId),e=this.isMobileEnv(e),this.closeIconElement=this.floatingBoxElement.querySelector(So.floatingBoxCloseIconSelector),this.addCloseIconEventListener(),this.addWidgetContentClickEventListener(this.floatingBoxRootElement.querySelector(So.floatingBoxContentSelector)),this.setPosition(e),this.setCloseIconParams(e),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(),this.floatingBoxElement.appendChild(this.brandingElement),this.addBrandingElementListeners())}adjustBrandingPosition(){this.brandingElement.style.bottom="-30px",this.brandingElement.style.right="0"}setDefaultPositionMobileParams(){var{documentModel:{shared:{floatingBox:e}}}=this.params;null!=e&&e.mobile||(e={verticalPosition:"BOTTOM",horizontalPosition:"LEFT",verticalOffset:this.getMinVerticalOffset(),horizontalOffset:"0px"},this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{floatingBox:Object.assign(Object.assign({},this.params.documentModel.shared.floatingBox),{mobile:Object.assign({},e)})})})}))}clearPosition(){var e;this.floatingBoxElement.removeAttribute("style"),this.floatingBoxElement.style.zIndex=this.zIndex,this.floatingBoxElement.style.position=null!==(e=this.params.displayPosition)&&void 0!==e?e:"fixed"}getMinVerticalOffset(){return this.params.config.branded?32:0}getVerticalOffset(e){var t=this.params.documentModel.shared.floatingBox;return e=e?t.mobile.verticalOffset:t.verticalOffset,t=this.getMinVerticalOffset(),parseFloat(e)<t?"".concat(t,"px"):e}setPosition(e){this.clearPosition(),this.setDefaultPositionMobileParams();let t=this.params.documentModel.shared.floatingBox,n=e?t.mobile.horizontalOffset:t.horizontalOffset,i=this.getVerticalOffset(e);this.floatingBoxElement.style[(e?t.mobile.horizontalPosition:t.horizontalPosition).toLowerCase()]=n;let r=e?t.mobile.verticalPosition.toLowerCase():t.verticalPosition.toLowerCase();this.params.disableLayoutAnimations||"SLIDE_TO_TOP"!==t.entryAnimation.type?this.floatingBoxElement.style[r]=i:(this.floatingBoxElement.style[r]="".concat(parseFloat(i)-20,"px"),this.floatingBoxElement.style.opacity="0",setTimeout((()=>{this.floatingBoxElement.style[r]=i,this.floatingBoxElement.style.opacity="1"}),50))}setDefaultCloseIconParams(){if(!this.params.documentModel.shared.closeIcon){let e=this.getDefaultCloseIconParams();this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{closeIcon:Object.assign(Object.assign({},e),{desktop:Object.assign(Object.assign({},e.desktop),{color:"rgb(0, 0, 0)"}),mobile:Object.assign(Object.assign({},e.mobile),{color:"rgb(0, 0, 0)"})})})})})}}setCloseIconParams(e){this.setDefaultCloseIconParams(),this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}connect(e,t,n){return this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel)&&(this.floatingBoxElement.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Lr.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.floatingBoxElement.style.visibility="visible"}))),this.documentElement=e,this.containerElement=t,this.floatingBoxRootElement.querySelector(So.floatingBoxContentSelector).appendChild(e),t.appendChild(this.floatingBoxElement),this.setConnectedElement(this.floatingBoxElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),this.updateScrollbar(e),this.floatingBoxElement}disconnect(){this.floatingBoxElement.remove(),this.removeGoogleFonts()}updateSharedPropsByType(e,t){var n;return{floatingBox:Object.assign(Object.assign({},e.floatingBox),null===(n=t.shared)||void 0===n?void 0:n.floatingBox)}}updateScrollbar(e){if(!this.params.disableScrollbarCalculation){var t=this.getViewContentContainer();if(t){var n=this.getActualSizeByEnv(e);if(n){var i=parseFloat(this.closeIconElement.style.top);e=this.getVerticalOffset(e),e=parseFloat(e),(i=this.getContainerElementHeight()-(0<i?0:Math.abs(i))-e)>parseFloat(n.height)||(t.style.overflowY="auto",t.style.overflowX="hidden",t.style.maxHeight="".concat(i,"px"),this.changeViewAlignToTop())}}}}_getTemplate(e){return'\n<div class="cl-floating-box">\n  <style>\n  .cl-floating-box {\n    '.concat(this.params.disableLayoutAnimations?"":"transition: 0.3s;","\n  }\n\n  ").concat(e.disabled?this.getDisabledWidgetStyles(So.floatingBoxSelector):"","\n\n  .cl-floating-box-inner-content {\n     position: relative;\n     max-width: 100vw;\n     z-index: 1;\n  }\n\n  .cl-floating-box-close-icon {\n    position: absolute;\n    cursor: pointer;\n    z-index: 99;\n  }\n\n  ").concat(this.getBrandingStyles(),'\n\n  </style>\n\n  <div class="cl-floating-box-inner-content">\n    <div class="cl-floating-box-close-icon"></div>\n    <div class="cl-floating-box-content"></div>\n  </div>\n</div>\n')}}So.floatingBoxSelector=".cl-floating-box",So.floatingBoxContentSelector=".cl-floating-box-content",So.floatingBoxCloseIconSelector=".cl-floating-box-close-icon";class bo extends Io{constructor(e,t,n,i){var r;super(e,t,n,i),this.contentLockerRootElement=document.createElement("div"),this.contentLockerRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.contentLockerElement=this.contentLockerRootElement.querySelector(bo.contentLockerSelector),this.contentLockerElement.setAttribute("cl-connector-root-element",oi.CONTENT_LOCKER),this.params.config.formVariantId&&this.contentLockerElement.setAttribute("cl-widget-id",this.params.config.formVariantId),this.contentLockerElement.style.position=null!==(r=this.params.displayPosition)&&void 0!==r?r:"fixed",this.contentLockerElement.style.zIndex=this.params.zIndex,this.params.documentModel.shared.closeIcon&&(e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),t=this.contentLockerRootElement.querySelector(bo.contentLockerContentSelector),this.closeIconElement=document.createElement("div"),this.closeIconElement.classList.add("cl-content-locker-close-icon"),t.appendChild(this.closeIconElement),this.addCloseIconEventListener(),this.addWidgetContentClickEventListener(this.contentLockerElement.querySelector(bo.contentLockerContentSelector)),this.setCloseIconParams(e)),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(),this.contentLockerElement.appendChild(this.brandingElement),this.addBrandingElementListeners())}adjustBrandingPosition(){this.brandingElement.style.right="10px",this.brandingElement.style.bottom="10px"}addBlurryBackdrop(e){e.style.backdropFilter="blur(20px)";let t=new MutationObserver((t=>{t.forEach((t=>{var n;"attributes"===t.type&&"style"===t.attributeName&&(null!==(n=e.style.backdropFilter)&&void 0!==n&&n.includes("blur(20px)")||(e.style.backdropFilter="blur(20px)"))}))}));return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>t.disconnect()}setCloseIconParams(e){this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}connect(e,t,n){this.documentElement=e,this.containerElement=t,this.params.disableGlobalScroll&&document.body.classList.add("cl-noscroll"),this.removeBlurryBackdrop=this.addBlurryBackdrop(this.contentLockerElement);let i=this.contentLockerRootElement.querySelector(bo.contentLockerContentSelector);return i.appendChild(e),t.appendChild(this.contentLockerElement),this.setConnectedElement(this.contentLockerElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),this.updateScrollbar(e),this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel)&&(i.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Lr.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{i.style.visibility="visible"}))),this.contentLockerElement}disconnect(){var e;this.params.disableGlobalScroll&&document.body.classList.remove("cl-noscroll"),null===(e=this.removeBlurryBackdrop)||void 0===e||e.call(this),this.contentLockerElement.remove(),this.removeGoogleFonts()}updateScrollbar(e){if(!this.params.disableScrollbarCalculation){var t=this.getViewContentContainer();if(t&&this.params.documentModel.shared.actualSize&&(e=this.getActualSizeByEnv(e))){var n=this.getContainerElementHeight();n>parseFloat(e.height)||(t.style.overflowY="auto",t.style.overflowX="hidden",t.style.minHeight="".concat(n,"px"),this.changeViewAlignToTop())}}}_getTemplate(e){return'\n      <div class="cl-content-locker">\n        <style>\n        .cl-content-locker {\n          display: block;\n          top: 0;\n          left: 0;\n          bottom: 0;\n          right: 0;\n          width: 100%;\n          height: 100%;\n        }\n\n        '.concat(e.disabled?this.getDisabledWidgetStyles(bo.contentLockerSelector):"","\n\n        .cl-content-locker-content {\n            width: 100%;\n            height: 100%;\n            min-height: fit-content;\n        }\n\n        .cl-noscroll {\n          overflow: hidden !important;\n        }\n\n        .cl-content-locker-close-icon {\n          z-index: 99;\n          position: absolute;\n          cursor: pointer;\n        }\n\n        ").concat(this.getBrandingStyles(),'\n\n        </style>\n\n          <div class="cl-content-locker-content"></div>\n      </div>')}}bo.contentLockerSelector=".cl-content-locker",bo.contentLockerContentSelector=".cl-content-locker-content",bo.contentLockerCloseIconSelector=".cl-content-locker-close-icon";class Ao extends Io{constructor(e,t,n,i){super(e,t,n,i),this.zIndex=this.params.zIndex,e=this.params.documentModel.shared.mobileBreakpointWidth,this.floatingBarRootElement=document.createElement("div"),this.floatingBarRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.floatingBarElement=this.floatingBarRootElement.querySelector(Ao.floatingBarSelector),this.floatingBarElement.setAttribute("cl-connector-root-element",oi.FLOATING_BAR),this.params.config.formVariantId&&this.floatingBarElement.setAttribute("cl-widget-id",this.params.config.formVariantId),e=this.isMobileEnv(e),this.closeIconElement=this.floatingBarElement.querySelector(Ao.floatingBarCloseIconSelector),this.addCloseIconEventListener(),this.addWidgetContentClickEventListener(this.floatingBarRootElement.querySelector(Ao.floatingBarContentSelector)),this.setCloseIconParams(e),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(e),this.floatingBarElement.appendChild(this.brandingElement),this.addBrandingElementListeners())}getSharedParams(){return this.params.documentModel.shared.floatingBar}isBottomPosition(e){return"BOTTOM"===e.verticalPosition}adjustBrandingPosition(e){let t=this.getSharedParams();e=e?t.mobile:t.desktop,this.brandingElement.style.right="10px",this.brandingElement.style.zIndex="2",this.isBottomPosition(e)?this.brandingElement.style.top="-30px":this.brandingElement.style.bottom="-30px"}clearPosition(){var e;this.floatingBarElement.removeAttribute("style"),this.floatingBarElement.style.zIndex=this.zIndex,this.floatingBarElement.style.position=null!==(e=this.params.displayPosition)&&void 0!==e?e:"fixed",this.modifiedHtmlBodyElement&&this.originalHtmlBodyElementMarginTop&&(this.modifiedHtmlBodyElement.style.marginTop=this.originalHtmlBodyElementMarginTop),this.modifiedFloatingElement&&(this.modifiedFloatingElement.style.top=this.originalModifiedFloatingElementTop)}setTopPosition(e){this.floatingBarElement.style.left="0px",this.floatingBarElement.style.top="0px"}setBottomPosition(e){this.floatingBarElement.style.left="0px",this.floatingBarElement.style.bottom="0px"}setPosition(e){this.clearPosition();var t=this.getSharedParams();t=e?t.mobile:t.desktop,this.isBottomPosition(t)?this.setBottomPosition(t):this._setTopPosition(e,t)}updateSharedPropsByType(e,t){var n;return{floatingBar:Object.assign(Object.assign({},e.floatingBar),null===(n=t.shared)||void 0===n?void 0:n.floatingBar)}}getOtherStyles(){return""}async _setTopPosition(e,t){if(this.modifiedHtmlBodyElement=this.modifiedFloatingElement=null,"body"===this.containerElement.tagName.toLowerCase()&&this.params.documentModel.shared.actualSize&&!this.params.disableSmartPosition&&(e=e?this.params.documentModel.shared.actualSize.mobile:this.params.documentModel.shared.actualSize.desktop)){e=e.height;var n=this.containerElement.getRootNode(),i=this._getElementAtTheTopOfTheViewport(n);i&&(i=this._findFloatingElement(i))&&(this.modifiedFloatingElement=i,this.originalModifiedFloatingElementTop=getComputedStyle(i).top,i.style.top=e),this.modifiedHtmlBodyElement=n.body,this.originalHtmlBodyElementMarginTop=getComputedStyle(this.modifiedHtmlBodyElement).marginTop,this.modifiedHtmlBodyElement.style.marginTop=e}this.setTopPosition(t)}_getElementAtTheTopOfTheViewport(e){let t=this.getViewportWidth(e,e.defaultView||e.parentWindow)/2,n=e.elementFromPoint(t,0);return n!==e.body?n:e.elementFromPoint(t,50)}_findFloatingElement(e){let t=null;for(;e;){let n=getComputedStyle(e);if(!(e&&e.getAttribute("cl-connector-root-element")||"fixed"!==n.position)||"sticky"===n.position){t=e;break}e=e.parentElement}return t}setCloseIconParams(e){this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}connect(e,t,n){return this.containerElement=t,this.floatingBarRootElement.querySelector(Ao.floatingBarContentSelector).appendChild(e),t.appendChild(this.floatingBarElement),this.setConnectedElement(this.floatingBarElement),this.setPosition(this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth)),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel)&&(this.floatingBarElement.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Lr.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.floatingBarElement.style.visibility="visible"}))),this.floatingBarElement}disconnect(){this.clearPosition(),this.floatingBarElement.remove(),this.removeGoogleFonts()}_getTemplate(e){return'\n      <div class="cl-floating-bar">\n        <style>\n        .cl-floating-bar {\n          width: 100%;\n        }\n\n        '.concat(e.disabled?this.getDisabledWidgetStyles(Ao.floatingBarSelector):"","\n\n        .cl-floating-bar-inner-content {\n           position: relative;\n           max-width: 100vw;\n           z-index: 1;\n        }\n\n        .cl-floating-bar-close-icon {\n          position: absolute;\n          cursor: pointer;\n          z-index: 99;\n        }\n\n      ").concat(this.getOtherStyles(),"\n\n       ").concat(this.getBrandingStyles(),'\n        </style>\n\n        <div class="cl-floating-bar-inner-content">\n          <div class="cl-floating-bar-close-icon"></div>\n          <div class="cl-floating-bar-content"></div>\n        </div>\n      </div>\n    ')}}Ao.floatingBarSelector=".cl-floating-bar",Ao.floatingBarContentSelector=".cl-floating-bar-content",Ao.floatingBarCloseIconSelector=".cl-floating-bar-close-icon";class Oo extends Co{constructor(e,t,n,i){super(e,t,n,i),this.zIndex=this.params.zIndex,this.launcherRootElement=document.createElement("div"),this.launcherRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.launcherElement=this.launcherRootElement.querySelector(Oo.launcherSelector),this.launcherElement.setAttribute("cl-connector-root-element",oi.LAUNCHER),this.params.config.formVariantId&&this.launcherElement.setAttribute("cl-widget-id",this.params.config.formVariantId),this.defaultStylesElement=this.launcherElement.querySelector(Oo.launcherStylesSelector).cloneNode(!0),this.addWidgetContentClickEventListener(this.launcherRootElement.querySelector(Oo.launcherContentSelector))}connect(e,t,n){return this.launcherRootElement.querySelector(Oo.launcherContentSelector).appendChild(e),t.appendChild(this.launcherElement),this.setEntryAnimationAndPosition(this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth)),this.setConnectedElement(this.launcherElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel)&&(this.launcherElement.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Lr.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.launcherElement.style.visibility="visible"}))),this.launcherElement}disconnect(){this.launcherElement.remove(),this.removeGoogleFonts()}setEntryAnimationAndPosition(e){var t=this.params.documentModel.shared.launcher;this.setLoopAnimation(t.loopAnimation);let n=(e=e?t.mobile:t.desktop).verticalPosition.toLowerCase(),i=e.horizontalPosition.toLowerCase();var r=["SLIDE_TO_TOP","SLIDE_TO_BOTTOM","SLIDE_TO_LEFT","SLIDE_TO_RIGHT"];if(this.params.disableLayoutAnimations||!r.includes(t.entryAnimation.type))this.launcherElement.style[i]=e.horizontalOffset,this.launcherElement.style[n]=e.verticalOffset,this.launcherElement.style.opacity="1";else{if("SLIDE_TO_TOP"===t.entryAnimation.type||"SLIDE_TO_BOTTOM"===t.entryAnimation.type){r=i;var o=e.horizontalOffset,s=n,a=e.verticalOffset;t="SLIDE_TO_TOP"===t.entryAnimation.type?"TOP"===e.verticalPosition?20:-20:"TOP"===e.verticalPosition?-20:20}else r=n,o=e.verticalOffset,s=i,a=e.horizontalOffset,t="SLIDE_TO_LEFT"===t.entryAnimation.type?"LEFT"===e.horizontalPosition?20:-20:"LEFT"===e.horizontalPosition?-20:20;this.launcherElement.style[r]=o,this.launcherElement.style[s]="".concat(parseFloat(a)+t,"px"),setTimeout((()=>{this.launcherElement.style[s]=a,this.launcherElement.style.opacity="1"}),50)}}clearLoopAnimations(){var e;let t=[];this.launcherElement.classList.forEach((e=>{e.startsWith(Ai.animationClassPrefix)&&t.push(e)})),this.launcherElement.classList.remove(...t),this.launcherElement.querySelector(Oo.launcherStylesSelector).innerHTML=this.defaultStylesElement.innerHTML,this.launcherElement.removeAttribute("style"),this.launcherElement.style.zIndex=this.zIndex,this.launcherElement.style.position=null!==(e=this.params.displayPosition)&&void 0!==e?e:"fixed"}updateSharedPropsByType(e,t){var n;return{launcher:Object.assign(Object.assign({},e.launcher),null===(n=t.shared)||void 0===n?void 0:n.launcher)}}setLoopAnimation(e){this.clearLoopAnimations(),this.params.disableLayoutAnimations||(this._applyLoopAnimationParams(e),this.launcherElement.classList.add(Ai.animationClassPrefix+e.type))}_applyLoopAnimationParams(e){e.params&&Object.keys(e.params).forEach((t=>{let n=e.params[t];this.launcherElement.style.setProperty("--cl-".concat(e.type,"-").concat(t),"".concat(n||Ai.getDefaultParamValueByAnimationType(e.type,t)))}))}_getTemplate(e){var t;return'\n      <div class="cl-launcher">\n        <style class="cl-launcher-styles">\n\n        '.concat(Ai.constructAnimationStylesByTypes([null===(t=e.documentModel.shared.launcher.loopAnimation)||void 0===t?void 0:t.type]),"\n\n        .cl-launcher {\n          ").concat(this.params.disableLayoutAnimations?"":"transition: 0.3s;","\n          cursor: pointer;\n          opacity: 0;\n        }\n\n        ").concat(e.disabled?this.getDisabledWidgetStyles(Oo.launcherSelector):"",'\n\n        .cl-launcher-inner-content {\n           position: relative;\n        }\n        </style>\n\n        <div class="cl-launcher-inner-content">\n          <div class="cl-launcher-content"></div>\n        </div>\n      </div>\n')}}Oo.launcherSelector=".cl-launcher",Oo.launcherContentSelector=".cl-launcher-content",Oo.launcherStylesSelector=".cl-launcher-styles";class No extends Io{constructor(e,t,n,i){var r;super(e,t,n,i),this.zIndex=this.params.zIndex,this.setDefaultDialogParams(),e=this.params.documentModel.shared.mobileBreakpointWidth,this.dialogRootElement=document.createElement("div"),this.dialogRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(Object.assign(Object.assign({},this.params),{background:this.params.documentModel.shared.dialog.background}))),this.dialogElement=this.dialogRootElement.querySelector(No.dialogSelector),this.dialogElement.style.zIndex=this.zIndex,this.dialogElement.setAttribute("cl-connector-root-element",oi.DETACHED),this.params.config.formVariantId&&this.dialogElement.setAttribute("cl-widget-id",this.params.config.formVariantId),this.dialogElement.style.position=null!==(r=this.params.displayPosition)&&void 0!==r?r:"fixed",r=this.isMobileEnv(e),this.closeIconElement=this.dialogElement.querySelector(No.dialogCloseIconSelector),this.addBackDropClickEventListener(),this.addCloseIconEventListener(),this.addWidgetContentClickEventListener(this.dialogRootElement.querySelector(No.dialogContentSelector)),this.setCloseIconParams(r),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(),this.dialogElement.querySelector(".cl-dialog-inner-content-wrapper").appendChild(this.brandingElement),this.addBrandingElementListeners()),this.boundEscapeListener=this.escapeListenerCallback.bind(this),window.addEventListener("keyup",this.boundEscapeListener)}adjustBrandingPosition(){this.brandingElement.style.position="relative",this.brandingElement.style.marginTop="10px"}setDefaultDialogParams(){this.params.documentModel.shared.dialog||(this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{dialog:{background:"rgba(0, 0, 0, 0.7)"}})})}))}setDefaultCloseIconParams(){if(!this.params.documentModel.shared.closeIcon){let e=this.getDefaultCloseIconParams();this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{closeIcon:{desktop:e.desktop,mobile:e.mobile}})})})}}addBackDropClickEventListener(){this.dialogElement.addEventListener("click",(e=>{e.target===this.dialogElement&&this.eventEmitter.emit("CLOSE_WIDGET")}))}setCloseIconParams(e){this.setDefaultCloseIconParams(),this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}updateSharedPropsByType(e,t){var n;return{dialog:Object.assign(Object.assign({},e.dialog),null===(n=t.shared)||void 0===n?void 0:n.dialog)}}connect(e,t,n){return this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel)?(this.dialogElement.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Lr.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.showDialog()}))):this.showDialog(),this.documentElement=e,this.containerElement=t,this.params.disableGlobalScroll&&document.body.classList.add("cl-noscroll"),this.dialogRootElement.querySelector(No.dialogContentSelector).appendChild(e),t.appendChild(this.dialogElement),this.setConnectedElement(this.dialogElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),this.updateScrollbar(e),this.dialogElement}disconnect(){this.params.disableGlobalScroll&&document.body.classList.remove("cl-noscroll"),this.dialogElement.remove(),window.removeEventListener("keyup",this.boundEscapeListener),this.removeGoogleFonts()}updateScrollbar(e){if(!this.params.disableScrollbarCalculation){var t=this.getViewContentContainer();if(t&&(e=this.getActualSizeByEnv(e))){var n=.9*this.getContainerElementHeight();n>parseFloat(e.height)||(t.style.overflowY="auto",t.style.overflowX="hidden",this._extendContainerOuterSizeToFitInnerContentShadows(t),this.dialogElement.querySelector(".cl-dialog-inner-content-wrapper").style.maxHeight="".concat(n,"px"),this.dialogElement.style.overflowY="auto",this.dialogElement.style.overflowX="hidden",this.changeViewAlignToTop())}}}escapeListenerCallback(e){"Escape"===e.key&&this.eventEmitter.emit("CLOSE_WIDGET")}showDialog(){this.dialogElement.style.visibility="visible"}_extendContainerOuterSizeToFitInnerContentShadows(e){e.style.width="calc(100% + ".concat(40,"px)"),e.style.margin="-".concat(20,"px"),e.style.padding="".concat(20,"px")}getOtherStyles(){return""}_getTemplate(e){return'\n<div class="cl-dialog">\n  <style>\n  .cl-dialog {\n    top: 0;\n    left: 0;\n    right: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: '.concat(e.background,";\n    box-sizing: border-box;\n  }\n\n  ").concat(e.disabled?this.getDisabledWidgetStyles(No.dialogSelector):"","\n\n  .cl-dialog-inner-content-wrapper {\n     display: flex;\n     flex-direction: column;\n     align-items: end;\n  }\n  \n  .cl-dialog-inner-content {\n     position: relative;\n     max-width: 100vw;\n  }\n\n  .cl-dialog-close-icon {\n    z-index: 99;\n    position: absolute;\n    cursor: pointer;\n  }\n\n  ").concat(this.getBrandingStyles(),"\n\n  ").concat(this.getOtherStyles(),'\n  </style>\n\n  <div class="cl-dialog-inner-content-wrapper">\n    <div class="cl-dialog-inner-content">\n      <div class="cl-dialog-close-icon"></div>\n      <div class="cl-dialog-content"></div>\n    </div>\n  </div>\n</div>\n')}}No.dialogSelector=".cl-dialog",No.dialogContentSelector=".cl-dialog-content",No.dialogCloseIconSelector=".cl-dialog-close-icon";let Ro={BEFORE_BEGIN:"beforebegin",AFTER_BEGIN:"afterbegin",BEFORE_END:"beforeend",AFTER_END:"afterend",REPLACE:"REPLACE"};class Mo{static map(e){return Ro.hasOwnProperty(e)?Ro[e]:Ro.AFTER_END}}class Lo extends Co{constructor(e,t,n,i){super(e,t,n,i),this.builtInElement=null,this.params.config.branded&&this.createBrandingElement()}connect(e,t,n){return this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel)&&(e.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Lr.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{e.style.visibility="visible"}))),this.params.placement?(n=(t=document.querySelector(this.params.placement.selector)).getRootNode(),e.setAttribute("cl-connector-root-element",oi.BUILT_IN),this.params.config.formVariantId&&e.setAttribute("cl-widget-id",this.params.config.formVariantId),this.params.placement.insertType===Ro.REPLACE?t.replaceWith(e):t.insertAdjacentElement(Mo.map(this.params.placement.insertType),e)):(n=t.getRootNode(),t.appendChild(e)),this.params.disabled&&((t=document.createElement("style")).innerHTML=this.getDisabledWidgetStyles('[class^="cl-widget"]'),e.appendChild(t)),this.builtInElement=e,this.setConnectedElement(this.builtInElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,n),this.params.config.branded&&((t=document.createElement("style")).innerHTML=this.getBrandingStyles(),this.adjustBrandingPosition(),e.appendChild(this.brandingElement),"VIEW"===e.getAttribute("cl-type")?(e.shadowRoot.appendChild(t),e.shadowRoot.appendChild(this.brandingElement)):(e.style.position="relative",e.appendChild(t),e.appendChild(this.brandingElement)),this.addBrandingElementListeners()),this.addWidgetContentClickEventListener(n),this.builtInElement}adjustBrandingPosition(){this.brandingElement.style.position="absolute",this.brandingElement.style.bottom="10px",this.brandingElement.style.right="10px"}disconnect(){this.builtInElement&&this.builtInElement.remove(),this.removeGoogleFonts()}}class wo{static create(e,t,n,i){let{widgetType:r}=e;switch(r){case oi.FLOATING_BOX:return new So(e,t,n,i);case oi.FLOATING_BAR:return new Ao(e,t,n,i);case oi.DETACHED:return new No(e,t,n,i);case oi.CONTENT_LOCKER:return new bo(e,t,n,i);case oi.LAUNCHER:return new Oo(e,t,n,i);case oi.BUILT_IN:return new Lo(e,t,n,i);default:throw Error("LayoutFactory: unknown widget type ".concat(r))}}}class Po extends yo{constructor(e){super(e);let{documentModel:t,componentResolver:n,config:i={},translations:r,trackingService:o,widgetType:s}=e;e=new fo(t,n,i,r,o,s),this.setEntryModule(e)}connect(e){var t,n,i;let r=this.entryModule.init();r.style.display="flex";let{layoutFactoryClass:o=wo,widgetType:s,documentModel:a}=this.params,l=Object.assign(Object.assign({},this.params),{zIndex:null!==(n=null===(t=null==a?void 0:a.shared)||void 0===t?void 0:t.zIndex)&&void 0!==n?n:W(s)});return this.controllers.push(o.create(Object.assign(Object.assign({},l),{viewIndex:0,entryModuleType:this.entryModule.entryModuleType}),this,this.entryModule.viewRouter,this.entryModule.compositionRoot.services.documentModel)),super.addPropsRequestEventListener(),this.params.config.formVariantId?r.classList.add("cl-widget-"+this.params.config.formVariantId):r.classList.add("cl-widget"),this.entryModule.listenAction("*",((e,t)=>{this.emit(t,e),"CLOSE_WIDGET"===t&&e&&"function"==typeof e&&e()})),null===(i=this.controllers[0])||void 0===i?void 0:i.connect(r,e,this.entryModule)}disconnect(){super.disconnect(),this.entryModule&&this.entryModule.viewRouter&&this.entryModule.compositionRoot&&this.entryModule.destroy(),this.controllers[0]&&this.controllers[0].disconnect(),this.controllers=[]}destroy(){this.disconnect()}}class Do{constructor(e){this._payload={...e,type:"view"},e.addReferrer&&(this._payload.referrer=window.location.href)}get(){return btoa(JSON.stringify(this._payload))}}class xo extends an{constructor(e,t){super(e,!0),this.params=t}handle(){super.handle(this.onFormShown.bind(this))}onFormShown(){if(!ke.isBot()){var e=new Do({...this.params,addReferrer:"DEBUG"!==zn.getFormVariant("f".concat(this.params.formId,"v").concat(this.params.variantId)).publishStatus}).get();tt.execute(new Hn("/forms/v1/event").get(),"POST",e,{"Content-Type":"text/plain","cl-customer-id":at.getUserIdentifier()}).catch((e=>Ce.error(e,"onFormsReceived error on FormViewedEventHandler: ")))}}}var ko=new class extends Xn{};class Vo{static isFormBranded(e){return!!zn.getForm(e).branded}}class Fo{constructor(e){let{placement:t,placements:n=[]}=e;this._placements=[],t&&this._placements.push(t),n.length&&this._placements.push(...n),this._placementsMap=new Map}getUniquePresentPlacements(){return this.constructPlacementsMap(),Array.from(this._placementsMap.values()).filter((e=>document.querySelector(e.selector)))}static createPlacementKey(e){return"".concat(e.selector,"_").concat(e.insertType)}constructPlacementsMap(){this._placements.forEach((e=>{null!=e&&e.selector&&null!=e&&e.insertType&&this._placementsMap.set(Fo.createPlacementKey(e),e)}))}}class Uo{constructor(e){t(this,"obs",null),this.targetNode=e}observe(e){this.obs=new MutationObserver((function(t,n){for(const n of t)"childList"===n.type&&(0<(t=Array.from(n.removedNodes)).length&&e&&e(t))})),this.obs.observe(this.targetNode,{childList:!0,subtree:!0})}observing(){return null!==this.obs}disconnect(){this.obs&&(this.obs.disconnect(),this.obs=null)}}class Bo extends Ae{constructor(e){super(),this.prefix="".concat(e,"component.sdk.")}get(e){return super.get(this.getKey(e))}set(e,t){return super.set(this.getKey(e),t)}getKey(e){return this.prefix+e}}var Ho=new class{constructor(){}activate(){document.addEventListener("visibilitychange",(function(){if("hidden"===document.visibilityState){let e=Le.getState(),t=[];Object.keys(e).filter((t=>t.includes("_dlCheckForAlertState")&&"QUEUED"===e[t])).forEach((e=>{let n=e.split("_")[0];t.push(n),Le.setState({[e]:"SENT"})})),t.length&&Zn.track("WIDGET_HAS_UNRESOLVED_DATA_LAYER_MERGE_TAGS",{widgetIds:t,siteId:Le.getConfig().siteId,accountId:Le.getConfig().accountId,clCustomerId:at.getUserIdentifier()})}}))}checkPreconditionForDataLayerAndMarkForAlertIfNeeded(e,t,n){!1===t&&!0===n.TARGETING.enabled&&!1===n.TARGETING.fulfilled&&(t=!1===(n=N(n.TARGETING.rule.state,["pageFulfilled"])).DATA_LAYER_EVENT,n=1===Object.values(n).filter((e=>!1===e)).length,t&&n&&(e="".concat(e.id,"_dlCheckForAlertState"),"SENT"!==Le.getState()[e]&&Le.setState({[e]:"QUEUED"})))}checkIfDataLayerAlertKeyMustBeCancelled(e){e="".concat(e.id,"_dlCheckForAlertState"),Le.getState(e)&&Le.setState({[e]:"CANCELLED"})}};var Go=new class extends Jn{constructor(e,n){super(e,n),t(this,"_variantsQueue",[]),t(this,"_injectedVariants",[]),t(this,"_staticPreviews",[]),t(this,"destroyForm",(e=>{let t=e.id;e=this._staticPreviews.findIndex((e=>e.params.config.formVariantId===t));let n=this._staticPreviews[e];n&&(n.disconnect(),this._staticPreviews.splice(e,1),e=this._injectedVariants.findIndex((e=>e.id===t)),this._injectedVariants.splice(e,1))})),this.removedNodeObserver=new Uo(document.body)}activate(e,t){super.activate(e,t),this._variantsQueue=zn.getStaticActiveFormVariants(Le.getConfig()).filter((e=>!e.rules||!e.rules.CUSTOM_CODE.enabled)).slice()}showFormFromCustomCode(e,t){let n=!0===e.rules.CUSTOM_CODE.enabled;e.rules&&!n||this._injectVariants([{...e,triggeredBy:t}])}showFormBySelector(e){let t=!0===e.rules.SELECTOR.enabled;e.rules&&!t||this._injectVariants([e])}destroy(){this._staticPreviews.forEach((e=>{let t=new ri(e.params.config.formVariantId);t.activate(),t.send("FormClose_[Name]"),t.destroy(),e.disconnect()})),this._injectedVariants=[],this.removedNodeObserver.disconnect()}showForm(e){if(!this.isVariantAlreadyInjected(e.id))return this._injectVariants([e])}isVariantAlreadyInjected(e){return!!this.getInjectedConnectorIds().find((t=>t===e))}getInjectedConnectorIds(){return this._injectedVariants.map((e=>e.id))}async _injectVariants(e){return await Promise.all(P(e.filter((e=>e&&(e.placement||e.placements))).map((e=>{const{id:t}=e,n=new Fo(e).getUniquePresentPlacements();return n.length?(this._removeInjectedVariantsFromQueue(t),this._injectedVariants.push(e),this.prepareForm(e).then((t=>{let{appearance:i}=t;return z(n.map((t=>this._injectVariant(e,i,t))))})).catch((t=>{Ce.error(t,"Error injectBuiltInForm call formVariantId="+e.id)}))):Promise.reject({formVariantId:t,message:"No placements found"})})),1))}async _injectVariant(e,t,n){var i,r,o;let{id:s,formId:a,triggeredBy:c}=e,d=t&&t.document||{};var h=this.isDocumentModelValid(d,e);if(!h.valid)return Promise.reject({formVariantId:s,message:h.errorMessage});let u=new ri(s);u.activate(),h=Kn.isInDebugMode(a);let m,p=()=>{u.send("FormClose_[Name]"),this.userActionsDetector.formVariantStat.close(e.id),v.disconnect()},E=Le.getConfig().forms,v=new Po({widgetType:"BUILT_IN",documentModel:d,componentResolver:this.componentResolver,config:{siteId:Le.getConfig().siteId,clCustomerId:at.getUserIdentifier(),interactionId:null==E||null===(i=E[e.formId])||void 0===i?void 0:i.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:s,hostUrl:Le.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Hn("/forms/v1/subscribe/".concat(Bn.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:h,utmTag:null===(r=Le.getConfig().formConfig)||void 0===r?void 0:r.utmTag,widgetId:e.formId,widgetName:null==E||null===(o=E[e.formId])||void 0===o?void 0:o.name,type:e.type,widgetType:e.widgetType,clContactId:g(e),branded:Vo.isFormBranded(e.formId),isBot:ke.isBot(),staticResourcesUrl:Le.getConfig().apiConfig.staticResourcesUrl,triggeredBy:c||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new Bo(Le.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:t.translations,trackingService:u,placement:n});this.addWidgetClickHandler(v,u,e),v.on("CONTACT_ID_WAS_RECEIVED",(e=>{e&&(Ne.set("clContactId",e),Le.setUserInfo({...Le.getUserInfo(),clContactId:e}),l({contactId:e}),lt.addToQueue({widgetSubscriptionContactId:e},"[WebContactService] BuiltInWidgetTypeService. After widget subscription")),ko.emit("CONTACT_DATA_SUBMIT",{formVariantId:s})})),v.on("SHOW_WIDGET",(t=>{t.closeWidget&&p(),ko.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:c})})),v.on("CLOSE_WIDGET",(()=>p())),v.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(s)})),v.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Zn.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:a,siteId:Le.getConfig().siteId,accountId:Le.getConfig().accountId,clCustomerId:at.getUserIdentifier(),clContactId:g(e)})})),this.addInjectedDocumentConnector(s,v);try{if(!document.querySelector(n.selector))return Promise.reject({formVariantId:s,message:"No container element found"});m=v.connect(),this.observeRemovedNodesIfNeeded()}catch(t){throw Ce.error(t,"Error _showForm connect"+e.id),t}return h||(this.userActionsDetector.formVariantStat.view(s),this.userActionsDetector.formVariantHoverStat.visible(s),vn.collect("FORM_RENDERED"),new xo(m,Bn.createFormParams(s,c,t.lang)).handle()),u.send("FormShow_[Name]"),Ho.checkIfDataLayerAlertKeyMustBeCancelled(e),this._staticPreviews.push(v),{rootElement:m,documentConnector:v}}_getReadyToInjectVariants(){return this._variantsQueue.filter((e=>e.placement&&e.placement.selector&&document.querySelector(e.placement.selector))).map((e=>[e,e.placement.selector&&document.querySelector(e.placement.selector)]))}_removeInjectedVariantsFromQueue(e){let t=this._variantsQueue.findIndex((t=>t.id===e));this._variantsQueue.splice(t,1)}observeRemovedNodesIfNeeded(){this.removedNodeObserver.observing()||this.removedNodeObserver.observe((()=>{this._injectedVariants.filter((e=>{var t,n,i;return!1===(null===(t=this.injectedPreviewMap[e.id])||void 0===t||null===(n=t.controllers[0])||void 0===n||null===(i=n.connectedElement)||void 0===i?void 0:i.isConnected)})).forEach(this.destroyForm)}))}}(new Gn,Ut);var jo=new class extends Jn{constructor(e,t){super(e,t)}showFormBySelector(e){let t=e.id;e&&e.rules&&e.rules.SELECTOR.enabled&&(this.isAppearanceLoading()||this.isVariantAlreadyInjected(t)||this.prepareAppearanceAndShowForm(e))}showFormFromCustomCode(e,t){let n=e.id;e&&e.rules&&(this.isAppearanceLoading()||this.isVariantAlreadyInjected(n)||this.prepareAppearanceAndShowForm(e,t))}showForm(e){if(!(this.isAppearanceLoading()||this.isDialogOpened()||this.isVariantAlreadyInjected(e.id)))return this.prepareAppearanceAndShowForm(e)}prepareAppearanceAndShowForm(e,t){return this.addInjectedConnectorId(e.id),this.prepareForm(e).then((n=>(({appearance:n}=n),this._showForm(e,n,t)))).catch((t=>{Ce.error(t,"Error showDetachedForm call formVariantId="+e.id)}))}async _showForm(e,t,n){var i,r,o;let s=t&&t.document||{};var a=this.isDocumentModelValid(s,e);if(!a.valid)return Promise.reject({formVariantId:e.id,message:a.errorMessage});let c=new ri(e.id);c.activate();let d=()=>{c.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)};a=Le.getConfig().forms;let h,u=new Po({widgetType:"DETACHED",documentModel:s,componentResolver:this.componentResolver,config:{siteId:Le.getConfig().siteId,clCustomerId:at.getUserIdentifier(),interactionId:null==a||null===(i=a[e.formId])||void 0===i?void 0:i.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:Le.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Hn("/forms/v1/subscribe/".concat(Bn.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:Kn.isInDebugMode(e.formId),utmTag:null===(r=Le.getConfig().formConfig)||void 0===r?void 0:r.utmTag,widgetId:e.formId,widgetName:null==a||null===(o=a[e.formId])||void 0===o?void 0:o.name,type:e.type,widgetType:e.widgetType,clContactId:g(e),branded:Vo.isFormBranded(e.formId),isBot:ke.isBot(),staticResourcesUrl:Le.getConfig().apiConfig.staticResourcesUrl,triggeredBy:n||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new Bo(Le.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:t.translations,trackingService:c,displayPosition:"fixed",disableGlobalScroll:!0});this.addWidgetClickHandler(u,c,e),u.on("CONTACT_ID_WAS_RECEIVED",(t=>{t&&(Ne.set("clContactId",t),Le.setUserInfo({...Le.getUserInfo(),clContactId:t}),l({contactId:t}),lt.addToQueue({widgetSubscriptionContactId:t},"[WebContactService] DetachedWidgetTypeService. After widget subscription")),ko.emit("CONTACT_DATA_SUBMIT",{formVariantId:e.id})})),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&d(),t.variantId&&ko.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:n})})),u.on("CLOSE_WIDGET",(()=>d())),u.on("CLOSE_ICON_CLICKED",(()=>d())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Zn.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:Le.getConfig().siteId,accountId:Le.getConfig().accountId,clCustomerId:at.getUserIdentifier(),clContactId:g(e)})}));try{h=u.connect(document.body)}catch(t){throw Ce.error(t,"Error _showForm connect"+e.id),t}return this.addInjectedDocumentConnector(e.id,u),this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),Kn.isInDebugMode(e.formId)||new xo(h,Bn.createFormParams(e.id,n,t.lang)).handle(),c.send("FormShow_[Name]"),Ho.checkIfDataLayerAlertKeyMustBeCancelled(e),{rootElement:h,documentConnector:u}}isDialogOpened(){return!!document.body.querySelector(".cl-dialog")}}(new Gn,Ut);var Wo=new class extends Jn{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let n=e.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(n)||(this.addInjectedConnectorId(n),this.prepareForm(e).then((i=>(({appearance:i}=i),this._showForm(e,i,t).catch((e=>{Ce.error(e,"Error _showForm connect1 "+n)}))))).catch((e=>{Ce.error(e,"Error showFloatingBoxForm call formVariantId="+n)})))}showForm(e){if(!this.isVariantAlreadyInjected(e.id))return this.addInjectedConnectorId(e.id),this.prepareForm(e).then((t=>(({appearance:t}=t),this._showForm(e,t)))).catch((t=>{Ce.error(t,"Error showFloatingBoxForm call formVariantId="+e.id)}))}async _showForm(e,t,n){var i,r,o;let s=t&&t.document||{};var a=this.isDocumentModelValid(s,e);if(!a.valid)return Promise.reject({formVariantId:e.id,message:a.errorMessage});let c=new ri(e.id);c.activate();let d=()=>{c.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)};a=Le.getConfig().forms;let h,u=new Po({widgetType:"FLOATING_BOX",documentModel:s,componentResolver:this.componentResolver,config:{siteId:Le.getConfig().siteId,clCustomerId:at.getUserIdentifier(),interactionId:null==a||null===(i=a[e.formId])||void 0===i?void 0:i.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:Le.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Hn("/forms/v1/subscribe/".concat(Bn.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:Kn.isInDebugMode(e.formId),utmTag:null===(r=Le.getConfig().formConfig)||void 0===r?void 0:r.utmTag,widgetId:e.formId,widgetName:null==a||null===(o=a[e.formId])||void 0===o?void 0:o.name,type:e.type,widgetType:e.widgetType,clContactId:g(e),branded:Vo.isFormBranded(e.formId),isBot:ke.isBot(),staticResourcesUrl:Le.getConfig().apiConfig.staticResourcesUrl,triggeredBy:n||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new Bo(Le.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:t.translations,trackingService:c,displayPosition:"fixed"});await this.componentResolver.loadComponentsIfNecessary(t.document,Le.getConfig().apiConfig.staticResourcesUrl),this.addWidgetClickHandler(u,c,e),u.on("CONTACT_ID_WAS_RECEIVED",(t=>{t&&(Ne.set("clContactId",t),Le.setUserInfo({...Le.getUserInfo(),clContactId:t}),l({contactId:t}),lt.addToQueue({widgetSubscriptionContactId:t},"[WebContactService] FloatingBoxWidgetTypeService. After widget subscription")),ko.emit("CONTACT_DATA_SUBMIT",{formVariantId:e.id})})),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&d(),t.variantId&&ko.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:n})})),u.on("CLOSE_WIDGET",(()=>d())),u.on("CLOSE_ICON_CLICKED",(()=>d())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Zn.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:Le.getConfig().siteId,accountId:Le.getConfig().accountId,clCustomerId:at.getUserIdentifier(),clContactId:g(e)})})),this.addInjectedDocumentConnector(e.id,u);try{h=u.connect(document.body)}catch(t){throw Ce.error(t,"Error _showForm connect"+e.id),t}return this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),Kn.isInDebugMode(e.formId)||new xo(h,Bn.createFormParams(e.id,n,t.lang)).handle(),c.send("FormShow_[Name]"),Ho.checkIfDataLayerAlertKeyMustBeCancelled(e),{rootElement:h,documentConnector:u}}isFloatingBoxVisible(){return!!document.body.querySelector(".cl-floating-box")}}(new Gn,Ut);var zo=new class extends Jn{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let n=e.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(n)||(this.addInjectedConnectorId(n),this.prepareForm(e).then((n=>{({appearance:n}=n),this._showForm(e,n,t)})).catch((e=>{Ce.error(e,"Error showFloatingBarForm call formVariantId="+n)})))}showForm(e){if(!this.isVariantAlreadyInjected(e.id))return this.addInjectedConnectorId(e.id),this.prepareForm(e).then((t=>(({appearance:t}=t),this._showForm(e,t)))).catch((t=>{Ce.error(t,"Error showFloatingBarForm call formVariantId="+e.id)}))}async _showForm(e,t,n){var i,r,o;let s=t&&t.document||{};var a=this.isDocumentModelValid(s,e);if(!a.valid)return Promise.reject({formVariantId:e.id,message:a.errorMessage});let c=new ri(e.id);c.activate();let d=()=>{c.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)};a=Le.getConfig().forms;let h,u=new Po({widgetType:"FLOATING_BAR",documentModel:s,componentResolver:this.componentResolver,config:{siteId:Le.getConfig().siteId,clCustomerId:at.getUserIdentifier(),interactionId:null==a||null===(i=a[e.formId])||void 0===i?void 0:i.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:Le.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Hn("/forms/v1/subscribe/".concat(Bn.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:Kn.isInDebugMode(e.formId),optionalDocumentStyles:{width:"100%"},utmTag:null===(r=Le.getConfig().formConfig)||void 0===r?void 0:r.utmTag,widgetId:e.formId,widgetName:null==a||null===(o=a[e.formId])||void 0===o?void 0:o.name,type:e.type,widgetType:e.widgetType,clContactId:g(e),branded:Vo.isFormBranded(e.formId),isBot:ke.isBot(),staticResourcesUrl:Le.getConfig().apiConfig.staticResourcesUrl,triggeredBy:n||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new Bo(Le.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:t.translations,trackingService:c,displayPosition:"fixed"});this.addWidgetClickHandler(u,c,e),u.on("CONTACT_ID_WAS_RECEIVED",(t=>{t&&(Ne.set("clContactId",t),Le.setUserInfo({...Le.getUserInfo(),clContactId:t}),l({contactId:t}),lt.addToQueue({widgetSubscriptionContactId:t},"[WebContactService] FloatingBarWidgetTypeService. After widget subscription")),ko.emit("CONTACT_DATA_SUBMIT",{formVariantId:e.id})})),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&d(),t.variantId&&ko.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:n})})),u.on("CLOSE_WIDGET",(()=>d())),u.on("CLOSE_ICON_CLICKED",(()=>d())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Zn.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:Le.getConfig().siteId,accountId:Le.getConfig().accountId,clCustomerId:at.getUserIdentifier(),clContactId:g(e)})})),this.addInjectedDocumentConnector(e.id,u);try{h=u.connect(document.body)}catch(t){throw Ce.error(t,"Error _showForm connect"+e.id),t}return this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),Kn.isInDebugMode(e.formId)||new xo(h,Bn.createFormParams(e.id,n,t.lang)).handle(),c.send("FormShow_[Name]"),Ho.checkIfDataLayerAlertKeyMustBeCancelled(e),{rootElement:h,documentConnector:u}}}(new Gn,Ut);var Ko=new class extends Jn{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let n=e.id,i=e.linkedToVariantId;this.isAppearanceLoading()||this.isLauncherVisible()||(this.addInjectedConnectorId(n),this.prepareForm(e).then((n=>{({appearance:n}=n),this._showForm(e,i,n,t)})).catch((e=>{Ce.error(e,"LauncherMainService:Error showLauncher call formVariantId="+n)})))}showForm(e){let t=e.id,n=e.linkedToVariantId;this.isAppearanceLoading()||this.isLauncherVisible()||this.isVariantAlreadyInjected(t)||(this.addInjectedConnectorId(t),this.prepareForm(e).then((t=>{({appearance:t}=t),this._showForm(e,n,t)})).catch((e=>{Ce.error(e,"LauncherMainService:Error showForm call formVariantId="+t)})))}async _showForm(e,t,n,i){var r,o,s;let a=n&&n.document||{};var l=this.isDocumentModelValid(a,e);if(!l.valid)return Promise.reject({formVariantId:e.id,message:l.errorMessage});let c=new ri(e.id);c.activate();let d=()=>{this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)};l=Le.getConfig().forms;let h,u=new Po({widgetType:"LAUNCHER",documentModel:a,componentResolver:this.componentResolver,config:{siteId:Le.getConfig().siteId,clCustomerId:at.getUserIdentifier(),interactionId:null==l||null===(r=l[e.formId])||void 0===r?void 0:r.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:Le.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Hn("/forms/v1/subscribe/".concat(Bn.createVariantUUID(e.id,n.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:n.lang,widgetDebugMode:Kn.isInDebugMode(e.formId),utmTag:null===(o=Le.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==l||null===(s=l[e.formId])||void 0===s?void 0:s.name,type:e.type,widgetType:e.widgetType,clContactId:g(e),staticResourcesUrl:Le.getConfig().apiConfig.staticResourcesUrl,triggeredBy:i||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},optionalDocumentStyles:{display:"flex"},storage:new Bo(Le.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:n.translations,trackingService:c,displayPosition:"fixed"});u.on("SHOW_WIDGET",(n=>{n.closeWidget&&d(),t&&(ko.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t,formVariantId:e.id,triggeredByLauncher:!0}),c.send("LauncherClick_[Name]"))})),this.addWidgetClickHandler(u,c,e),u.on("CLOSE_WIDGET",(()=>d())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Zn.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:Le.getConfig().siteId,accountId:Le.getConfig().accountId,clCustomerId:at.getUserIdentifier(),clContactId:g(e)})})),this.addInjectedDocumentConnector(e.id,u);try{h=u.connect(document.body)}catch(t){throw Ce.error(t,"Error _showForm connect"+e.id),t}this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),Kn.isInDebugMode(e.formId)||new xo(h,Bn.createFormParams(e.id,i,n.lang)).handle(),c.send("LauncherShow_[Name]"),Ho.checkIfDataLayerAlertKeyMustBeCancelled(e)}isLauncherVisible(){return!!document.body.querySelector(".cl-launcher")}}(new Gn,Ut);var Qo=new class extends Jn{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let n=e.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(n)||(this.addInjectedConnectorId(n),this.prepareForm(e).then((n=>(({appearance:n}=n),this._showForm(e,n,t)))).catch((e=>{Ce.error(e,"Error showContentLocker call formVariantId="+n)})))}showForm(e){if(!(this.isAppearanceLoading()||this.isContentLockerVisible()||this.isVariantAlreadyInjected(e.id))){this.addInjectedConnectorId(e.id);var t=this._showBackdropWhileLoading();this.prepareForm(e).then((t=>{({appearance:t}=t),this._showForm(e,t)})).catch((t=>{Ce.error(t,"Error showContentLocker call formVariantId="+e.id)})).finally(t)}}_showBackdropWhileLoading(){let e=document.createElement("div");return e.classList.add("cl-content-locker-backdrop"),e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.1)",e.style.backdropFilter="blur(20px)",e.style.display="flex",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.zIndex="99999999",document.body.appendChild(e),()=>e.remove()}async _showForm(e,t,n){var i,r,o;let s=t&&t.document||{};var a=this.isDocumentModelValid(s,e);if(!a.valid)return Promise.reject({formVariantId:e.id,message:a.errorMessage});let l=new ri(e.id);l.activate();let c=()=>{l.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),h.disconnect(),this.removeInjectedConnectorId(e.id)};a=Le.getConfig().forms;let d,h=new Po({widgetType:"CONTENT_LOCKER",documentModel:s,componentResolver:this.componentResolver,config:{siteId:Le.getConfig().siteId,clCustomerId:at.getUserIdentifier(),interactionId:null==a||null===(i=a[e.formId])||void 0===i?void 0:i.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:Le.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Hn("/forms/v1/subscribe/".concat(Bn.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,optionalDocumentStyles:{width:"100%",height:"100%"},widgetDebugMode:Kn.isInDebugMode(e.formId),utmTag:null===(r=Le.getConfig().formConfig)||void 0===r?void 0:r.utmTag,widgetId:e.formId,widgetName:null==a||null===(o=a[e.formId])||void 0===o?void 0:o.name,type:e.type,widgetType:e.widgetType,clContactId:g(e),branded:Vo.isFormBranded(e.formId),isBot:ke.isBot(),staticResourcesUrl:Le.getConfig().apiConfig.staticResourcesUrl,triggeredBy:n||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new Bo(Le.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:t.translations,trackingService:l,displayPosition:"fixed",disableGlobalScroll:!0});this.addWidgetClickHandler(h,l,e),h.on("SHOW_WIDGET",(t=>{t.closeWidget&&c(),t.variantId&&ko.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:n})})),h.on("CLOSE_WIDGET",(()=>c())),h.on("CLOSE_ICON_CLICKED",(()=>c())),h.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),h.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Zn.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:Le.getConfig().siteId,accountId:Le.getConfig().accountId,clCustomerId:at.getUserIdentifier(),clContactId:g(e)})})),this.addInjectedDocumentConnector(e.id,h);try{d=h.connect(document.body)}catch(t){throw Ce.error(t,"Error _showForm connect"+e.id),t}this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),Kn.isInDebugMode(e.formId)||new xo(d,Bn.createFormParams(e.id,n,t.lang)).handle(),l.send("FormShow_[Name]"),Ho.checkIfDataLayerAlertKeyMustBeCancelled(e)}isContentLockerVisible(){return!!document.body.querySelector(".cl-content-locker")}}(new Gn,Ut);class qo{constructor(){t(this,"showForm",(e=>this._delegate(e.type,"showForm",[e])))}activateAll(e,t){Object.values(qo._delegates).forEach((n=>n.activate(e,t)))}destroyAll(){Object.values(qo._delegates).forEach((e=>e.destroy()))}getShownForms(){return Object.keys(qo._delegates).reduce(((e,t)=>({...e,[t]:qo._delegates[t].getInjectedConnectorIds()})),{})}showFormFromSelectorClick(e){"BUILT_IN"===e.type||"DETACHED"===e.type?this._delegate(e.type,"showFormBySelector",[e]):this._delegate(e.type,"showFormFromCustomCode",[e])}showFormFromCustomCode(e,t){this._delegate(e.type,"showFormFromCustomCode",[e,t])}getAppearanceFromCacheOrLoad(e){return this._delegate(e.type,"getAppearanceFromCacheOrLoad",[e])}prepareForm(e,t){return this._delegate(e.type,"prepareForm",[e,t])}destroyForm(e){return this._delegate(e.type,"destroyForm",[e])}_delegate(e,t,n){let i=qo._delegates[e];if(!i)throw Error("WidgetTypeFacade: ".concat(e," class is not delegated"));let r=i[t];if(!r||"function"!=typeof r)throw Error("WidgetTypeFacade: ".concat(e," class ").concat(t," method is not delegated"));return r.apply(i,n)}}t(qo,"_delegates",{BUILT_IN:Go,DETACHED:jo,FLOATING_BOX:Wo,FLOATING_BAR:zo,LAUNCHER:Ko,CONTENT_LOCKER:Qo});var Xo=new qo;var Yo=new class{constructor(){this.changeObserver=new Je,this.formVariantListenedMap=new Map}activate(){let e=zn.getFormVariants(Le.getConfig()).filter((e=>{var t,n,i,r;return e.rules&&(null===(t=e.rules.SELECTOR)||void 0===t?void 0:t.enabled)&&((null===(n=e.rules.SELECTOR)||void 0===n?void 0:n.selector)||(null===(i=e.rules.SELECTOR)||void 0===i||null===(r=i.selectors)||void 0===r?void 0:r.length))})).filter((e=>zn.filterByStatus(e)));this._tryToAddClickListener(e),this.changeObserver.observe((()=>this._tryToAddClickListener(e)))}_doesFormVariantListenedMapContainValue(e,t){return!!this.formVariantListenedMap.has(e)&&(!!(e=this.formVariantListenedMap.get(e))&&e.has(t))}_setFormVariantListenedMapValue(e,t){this.formVariantListenedMap.has(e)?this.formVariantListenedMap.get(e).add(t):this.formVariantListenedMap.set(e,new Set([t]))}_tryToAddClickListener(e){e.forEach((e=>{var t,n;let i=null===(t=e.rules.SELECTOR)||void 0===t?void 0:t.selector;t=(null===(n=e.rules.SELECTOR)||void 0===n?void 0:n.selectors)||[],i&&!t.includes(i)&&t.push(i),t.length&&t.forEach((t=>{if(!this._doesFormVariantListenedMapContainValue(e.id,t))try{Array.from(document.querySelectorAll(t)).forEach((n=>{n&&(this._setFormVariantListenedMapValue(e.id,t),n.addEventListener("click",this.formVariantClickHandler(e)))}))}catch(t){Ce.error(t,"Failed to add click listener formVariantId="+e.id)}}))}))}formVariantClickHandler(e){return()=>{Xo.showFormFromSelectorClick(e),ko.emit("SHOW_WIDGET_BY_CLICKING_ELEMENT",e)}}destroy(){this.changeObserver.disconnect()}};var Zo=new class{constructor(){this.changeObserver=new Je,this.formVariantListened={}}activate(){let e=zn.getFormVariants(Le.getConfig()).filter((e=>e.rules&&e.rules.CUSTOM_CODE.enabled&&e.rules.CUSTOM_CODE.selector)).filter((e=>zn.filterByStatus(e)));this._tryToAddClickListener(e),this.changeObserver.observe((()=>this._tryToAddClickListener(e)))}_tryToAddClickListener(e){e.forEach((e=>{let t=e.rules.CUSTOM_CODE.selector;if(t&&!this.formVariantListened[e.id])try{let n=document.querySelector(t);n&&(this.formVariantListened[e.id]=e,n.addEventListener("click",(()=>{Xo.showFormFromCustomCode(e),ko.emit("SHOW_WIDGET_BY_CUSTOM_CODE",e.id)})))}catch(t){Ce.error(t,"Failed to add click listener formVariantId="+e.id)}}))}destroy(){this.changeObserver.disconnect()}};let Jo=new Set(["FLOATING_BOX","FLOATING_BAR"]),$o={corners:[],edges:[],content:[],offset:[],all:[]};var es=new class{isMobile(e){return K(e.document)}getWidgetSize(e,t,n){return t=t.document.shared.actualSize&&t.document.shared.actualSize[n?"mobile":"desktop"],{width:"FLOATING_BAR"===e.type?Xi.width:parseInt(t.width),height:parseInt(t.height)}}getCoords(e,t){var n;if(!t)return $o;let i=this.isMobile(t);return(!i||null!==(n=t.document.shared.actualSize)&&void 0!==n&&n.mobile)&&(n=this.mapProps(e.type,t.document.shared,i))?(t=this.getWidgetSize(e,t,i),"DETACHED"===e.type&&(n.horizontalOffset=(Xi.width-t.width)/2,n.verticalOffset=(Xi.height-t.height)/2),e={x:parseInt(n.horizontalOffset),y:parseInt(n.verticalOffset)},this.buildCoordsLists({...n,widgetSize:t,indentationPosition:e})):$o}findTheWidgetsRootElementToBeOverlapped(e,t,n){let i,r=localStorage.getItem("esOverlapDebug");return n.find(((t,n)=>{let[o,s]=t;return t=document.elementsFromPoint(o,s),t=this.getTargetElementThatRelateToWidget(t),r&&((n=document.createElement("div")).id=e.id,n.innerHTML="".concat(e.id),n.style.backgroundColor=t?"red":"green",n.style.color="white",n.style.fontSize="8px",n.style.width="auto",n.style.height="auto",n.style.position="fixed",n.style.left="".concat(o,"px"),n.style.top="".concat(s,"px"),n.style.zIndex=String(Math.round(Number.MAX_SAFE_INTEGER/1e7)),document.body.appendChild(n)),i=t})),i}mapProps(e,t,n){switch(e){case"FLOATING_BAR":return n?t.floatingBar.mobile:t.floatingBar.desktop;case"FLOATING_BOX":return n?t.floatingBox.mobile:t.floatingBox;case"DETACHED":return{};default:throw Error("Can not map props for overlap calculation of ".concat(e))}}getTargetElementThatRelateToWidget(e){return e.filter((e=>e instanceof HTMLElement)).find((e=>null!=e&&e.hasAttribute("cl-connector-root-element")?Jo.has(e.getAttribute("cl-connector-root-element")):null!=e&&e.hasAttribute("cl-type")?(e=e.closest("[cl-connector-root-element]"),Jo.has(e.getAttribute("cl-connector-root-element"))):null))}getCornersPoints(e){let{horizontalPosition:t,verticalPosition:n,widgetSize:i,indentationPosition:r}=e;return{x0:e="LEFT"===t?r.x:Xi.width-(r.x+i.width),x1:"LEFT"===t?e+i.width:Xi.width-r.x,y0:"BOTTOM"===n?Xi.height-r.y:r.x+i.height,y1:"TOP"===n?r.y:Xi.height-(r.y+i.height)}}buildCoordsLists(e){let{x0:t,x1:n,y0:i,y1:r}=this.getCornersPoints(e);var{widgetSize:o}=e;e=[[t,i],[t,r],[n,i],[n,r]];let s=[],a=[],l=[],c=Math.round(o.height/2),d=Math.round(o.height/6),h=Math.round(o.width/2);o=Math.round(o.width/6);for(let e=0;6>=e;e++)s.push([t+o*e,i]),s.push([t+o*e,r]),s.push([t,r+d*e]),s.push([n,r+d*e]),a.push([t+h,r+c]);let u=[[-50,-50],[-50,50],[50,-50],[50,50]];return e.forEach(((e,t)=>{let[n,i]=e;u.forEach(((e,t)=>{let[r,o]=e;l.push([n+r,i+o])}))})),{corners:e,edges:s,content:a,offset:l,all:e.concat(s).concat(a).concat(l)}}};class ts{createScaledPixelMatrix(){return Array.apply(null,Array(Math.round(Xi.width/ts.pxScaleFactor))).map((()=>Array.apply(null,Array(Math.round(Xi.height/ts.pxScaleFactor)))))}getIntersectionsForBatch(e){let t=this.createScaledPixelMatrix(),n=new Set;e.forEach((e=>{let i=e.fV.id,r=Math.round(e.coordsMap.corners[1][0]/ts.pxScaleFactor),o=Math.round(e.coordsMap.corners[3][0]/ts.pxScaleFactor),s=Math.round(e.coordsMap.corners[1][1]/ts.pxScaleFactor);e=Math.round(e.coordsMap.corners[0][1]/ts.pxScaleFactor);for(let a=r;a<o;a++)for(let l=s;l<e;l++)try{t[a][l]?(t[a][l]+="_".concat(i),n.add(t[a][l])):t[a][l]=i}catch(t){Ce.warn("Virtual overlap coords fV ".concat(i," x S").concat(r," xE ").concat(o," yStart ").concat(s," yEnd ").concat(e),t)}}));let i=[...n.values()],r=new Set,o=[],s=new Set,a=[];return i.forEach(((e,t)=>{s.add(t);let n=e.split("_");(e=i.filter(((e,t)=>!s.has(t))).filter((e=>n.filter((e=>!r.has(e))).find((t=>e.includes(t)))))).length?(e=e.join("_").split("_"),e=n.concat(e),e=[...new Set(e).values()],o.push(e),e.forEach((e=>r.add(e)))):a.push(n)})),a.forEach((e=>{let t=e.filter((e=>!r.has(e))).length;e.length===t&&(o.push(e),e.forEach((e=>r.add(e))))})),{list:o,set:r}}}t(ts,"pxScaleFactor",10);var ns=new ts;class is{static get(e){let t=e.filter((e=>e.rules.pageFulfilled)),n=[];return 1===t.length?t[0]:(n=t.length?t:e,n[Math.floor(Math.random()*n.length)])}}class rs{constructor(){let{unlockTimeout:e=null}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t(this,"_unlockTimeout",null),t(this,"_timers",{}),t(this,"_locked",{}),this._unlockTimeout=e}setStatus(e){let t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!0===t?this._locked[e]=t:(delete this._locked[e],clearTimeout(this._timers[e]),delete this._timers[e])}is(e){return this._locked[e]===(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])}canLock(e){return!this.is(e,!0)}isLocked(){return Object.values(this._locked).some((e=>!0===e))}lock(e){this.canLock(e)&&this.setStatus(e,!0);let t=this.unlock.bind(this,e);return this._unlockTimeout&&Object.assign(this._timers,{[e]:setTimeout(t,this._unlockTimeout)}),t}lockAll(e){e.forEach((e=>this.lock(e)))}unlock(e){this.is(e,!0)&&this.setStatus(e,!1)}unlockAll(e){(e||Object.keys(this._locked)).forEach((e=>this.unlock(e)))}}class os extends rs{unlockWhenReady(e,t){let n,i,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3,o=new Promise((e=>{n=t.documentConnector.entryModule.viewRenderer.viewResourceManager.systemEventEmitter.on("VIEW_COMPONENT_RESOURCES_LOADED",(()=>{e()})).off}));Promise.race([o,new Promise((e=>{i=setTimeout(e,r)}))]).finally((()=>{var t;this.unlock(e),null===(t=n)||void 0===t||t(),clearTimeout(i)}))}}class ss{constructor(){t(this,"semaphore",new os),this.q=[]}async getOverlapState(e){var t,n,i=await Xo.getAppearanceFromCacheOrLoad(e);return null!=i&&null!==(t=i.document)&&void 0!==t&&null!==(n=t.shared)&&void 0!==n&&n.actualSize?(t=es.getCoords(e,i)).all.length?{fV:e,rootElement:i=es.findTheWidgetsRootElementToBeOverlapped(e,i,t.all),coordsMap:t}:{fV:e,rootElement:void 0,coordsMap:t}:{fV:e,rootElement:void 0,coordsMap:$o}}async processBatch(e){if(this.semaphore.isLocked())return Promise.resolve();var t=await Promise.all(this.q.map((e=>this.getOverlapState(e).then((t=>({fV:e,...t}))))));this.q=[];let n=t.filter((e=>!e.coordsMap.all.length));await Promise.all(n.map((t=>(e(t.fV.id),Xo.showForm(t.fV)))));let i=(t=t.filter((e=>e.coordsMap.all.length)).filter((e=>!e.rootElement))).reduce(((e,t)=>(e.set(t.fV.id,t),e)),new Map);if(1<t.length){let{list:n,set:r}=ns.getIntersectionsForBatch(t);t.filter((e=>!r.has(e.fV.id))).forEach((t=>{Xo.showForm(t.fV),e(t.fV.id)}));let o=new Set;n.forEach((e=>{e=e.map((e=>i.get(e))).map((e=>e.fV)),e=is.get(e),o.add(e.id),this.semaphore.lock(e.id)})),await Promise.all([...o].map((async t=>{t=i.get(t),e(t.fV.id);let n=await Xo.showForm(t.fV);return this.semaphore.unlockWhenReady(t.fV.id,n),n})))}else if(t.length)return[t]=t,e(t.fV.id),Xo.showForm(t.fV);return Promise.resolve()}async addBatch(e,t){this.q.push(...e),await this.processBatch(t)}}var as=new class{constructor(){this.floatingDisplayQueue=new ss}async display(e,t,n,i,r){let o=[],s=[],a=[],l=[],c=[];if(e.forEach((e=>{var t,n,i,r;"SHOW_IN_INTERVAL"===(null==e||null===(t=e.rules)||void 0===t||null===(n=t.ANNOYANCE)||void 0===n?void 0:n.type)||"SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===(null==e||null===(i=e.rules)||void 0===i||null===(r=i.ANNOYANCE)||void 0===r?void 0:r.type)?c.push(e):"DETACHED"===e.type?l.push(e):Jo.has(e.type)?o.push(e):"BUILT_IN"===e.type?a.push(e):s.push(e)})),await this.floatingDisplayQueue.addBatch(o,t),await Promise.all(l.map((e=>(t(e.id),Xo.showForm(e))))),0===o.concat(l).length&&c.length){1<c.length&&c.find((e=>{var t,n;return"SHOW_IN_INTERVAL"===(null==e||null===(t=e.rules)||void 0===t||null===(n=t.ANNOYANCE)||void 0===n?void 0:n.type)}))&&(c=c.filter((e=>{var t,i;let r="SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"!==(null==e||null===(t=e.rules)||void 0===t||null===(i=t.ANNOYANCE)||void 0===i?void 0:i.type);return r||n(e.id),r})));let e=c.length,i=c.filter((e=>{var t,n;return"SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===(null==e||null===(t=e.rules)||void 0===t||null===(n=t.ANNOYANCE)||void 0===n?void 0:n.type)})).length,o=is.get(c);t(o.id),c.filter((e=>e.id!==o.id)).forEach((t=>{n(t.id),1<e&&i===e&&r(t.id)})),await Xo.showForm(o)}else c.forEach((e=>n(e.id)));await Promise.all(s.map((async e=>(t(e.id),Xo.showForm(e))))),await z(this.reorderBuiltInForms(a).map((async e=>Xo.showForm(e).then((n=>{if((n=n.length?n[0]:n).length&&"rejected"===n[0].status||"rejected"===n.status)return i(e.id);t(e.id)}),(()=>{i(e.id)})))))}async prepareForDisplay(e){return Xo.prepareForm(e,{ignoreLoading:!0})}reorderBuiltInForms(e){return e.sort(((e,t)=>(e=e.placement&&e.placement.insertType===Wt.REPLACE||e.placements&&e.placements.some((e=>e.insertType===Wt.REPLACE)),t=t.placement&&t.placement.insertType===Wt.REPLACE||t.placements&&t.placements.some((e=>e.insertType===Wt.REPLACE)),e&&!t?1:!e&&t?-1:0)))}};var ls=new class{log(){localStorage.getItem("esRulesLogger")&&console.log(...arguments)}};class cs{static isEnabled(){return"true"===Se.get().formConfig.ANNOYANCE_SAFEGUARD_ENABLED}static get(){try{var e="object"==typeof Se.get().formConfig.ANNOYANCE_SAFEGUARD?Se.get().formConfig.ANNOYANCE_SAFEGUARD:JSON.parse(Se.get().formConfig.ANNOYANCE_SAFEGUARD)}catch(t){e=null}return e||cs.fallbackConfig}}t(cs,"fallbackConfig",{unit:"SECOND",amount:"10"});class ds{static getCurrentNumberOfAnnoyanceWidgets(){let e=Xo.getShownForms(),t=[];return Object.keys(e).filter((e=>xn.has(e))).forEach((n=>{t.push(...e[n])})),t.length}static isAlreadyRendered(e,t){let n=Xo.getShownForms();return n[e]&&n[e].includes(t)}static isRenderingAllowed(e,t,n){if(this.isAlreadyRendered(n,t))return!0;let{sessionAnnoyanceLastWidgetClosedMs:i,sessionAnnoyanceLastWidgetPagesCount:r,sessionPagesCount:o}=e;if(An.getAll().includes(cs.get().unit)){if(Number.isInteger(i))return e=i>(e=On.convert(cs.get().unit,An.MILLISECOND,cs.get().amount)),ls.log("annoyance time diffing ".concat(JSON.stringify(cs.get())," = ").concat(e)),e&&0===ds.getCurrentNumberOfAnnoyanceWidgets()}else if(r)return e=o-r>=(e=cs.get().amount),ls.log("annoyance pages count ".concat(o," (sessionPagesCount) ").concat(JSON.stringify(cs.get())," = ").concat(e)),e&&0===ds.getCurrentNumberOfAnnoyanceWidgets();return 0===ds.getCurrentNumberOfAnnoyanceWidgets()}}let hs=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>!!e)).join("__")},us={COOKIE:"cookie",CONTACT_ID:"contactId",EXTERNAL_CUSTOMER_ID:"externalCustomerId",EMAIL:"email",PHONE:"phone"};class ms{constructor(e,t,n,i,r){this.cookie=e,this.contactId=t,this.email=n,this.phone=i,this.externalCustomerId=r}toJSON(){return JSON.stringify(this)}toLocatorsList(){return Object.keys(us).filter((e=>!!this[us[e]])).map((e=>({type:us[e],value:this[us[e]]})))}static fromUserInfo(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new ms(void 0,e.clContactId||e.esContactId||e.utmContactId,e.email,e.phone,e.externalCustomerId)}}class ps{static async request(e){let t=Le.getConfig(),n=at.getUserIdentifier(),i=ms.fromUserInfo(Le.getUserInfo());return i.cookie=n,e={accountId:t.accountId||t.orgId,contactId:i.contactId,locators:i.toLocatorsList(),checks:e},tt.execute(t.apiConfig.asyncRulesCheckUrlV2,"POST",e,ps.getHeadersV2()).then((e=>e.body)).catch((e=>(Ce.error(e,"Failed on async rules check V2 "),null)))}}t(ps,"getHeadersV2",(()=>({"cl-customer-id":at.getUserIdentifier()})));class gs{set(e,t){return Mn.set(e,t)}get(e){return Mn.get(e)}remove(e){return Mn.remove(e)}}class Es{constructor(e,t,n){let i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;this.cacheProvider=e,this.cacheKey=t,this.cleanupInterval=n,this.defaultTTl=i,this.cleanupInterval&&this.startCleanup()}startCleanup(){this.interval=setInterval((()=>this.cleanup()),this.cleanupInterval)}stopCleanup(){this.interval&&(clearInterval(this.interval),this.interval=null)}cleanup(){var e=this.getMap();let t=!1;for(let n in e)e[n].expirationDate&&Date.now()>e[n].expirationDate&&(delete e[n],t=!0);t&&(e=JSON.stringify(e),this.cacheProvider.set(this.cacheKey,e))}set(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.defaultTTl,i=3<arguments.length?arguments[3]:void 0,r=4<arguments.length?arguments[4]:void 0;try{let o=n?Date.now()+n:null,s=this.getMap();s[e]={value:t,expirationDate:o,clContactId:i,webId:r};let a=JSON.stringify(s);this.cacheProvider.set(this.cacheKey,a)}catch(e){Ce.info("Failed to set item to session storage",e)}}get(e){try{let t=this.getMap();if(!t.hasOwnProperty(e))return null;let n=t[e];return n.expirationDate&&Date.now()>n.expirationDate?(this.delete(e),null):n}catch(e){return Ce.info("Failed to get item from session storage",e),null}}delete(e){try{let t=this.getMap();delete t[e];let n=JSON.stringify(t);this.cacheProvider.set(this.cacheKey,n)}catch(e){Ce.info("Failed to remove item from session storage",e)}}getMap(){try{let e=this.cacheProvider.get(this.cacheKey);return e?JSON.parse(e):{}}catch(e){return Ce.info("Failed to get item from session storage",e),{}}}clear(){this.cacheProvider.remove(this.cacheKey)}}var vs=new class{constructor(){if(this.isFeatureEnabled()){var e,t;this.lock=new rs,this.initAsyncRulesCheckCache();let n=Le.getConfig();this.segmentationWithoutContactIdEnabled=(null===(e=n.features)||void 0===e?void 0:e.SEGMENT_BY_CONTACT_ACTIVITY_IN_WIDGET)&&!0===(null===(t=n.features)||void 0===t?void 0:t.SEGMENT_BY_CONTACT_ACTIVITY_IN_WIDGET),this.generalHideForSubscribersCache=!1,this.widgetHideForSubscribersCache=new Map,this.serviceFailedToProcess=!1}}initAsyncRulesCheckCache(){Mn.registerKeys("es.async.rules.check.cache","es.async.rules.check.cache.duration.ms"),this.asyncRulesCheckCache=new Es(new gs,"es.async.rules.check.cache",4e3);let e=Mn.get("es.async.rules.check.cache.duration.ms");this.asyncRulesCheckCacheDuration=!isNaN(e)&&+e||3e5}isFeatureEnabled(){var e,t;return(null===(e=Le.getConfig().features)||void 0===e?void 0:e.CHECK_SEGMENT_MEMBERSHIP)&&!0===(null===(t=Le.getConfig().features)||void 0===t?void 0:t.CHECK_SEGMENT_MEMBERSHIP)}getTtl(e,t){var n,i;let r=null;return 429===(null===(n=e.response.error)||void 0===n?void 0:n.status)?r=5e3:e.response.error&&404!==(null===(i=e.response.error)||void 0===i?void 0:i.status)||(r=t),r}processAsyncRule(e,t,n,i,r,o,s,a,l,c){r=hs(r,a),i[e.formId].push(r),(e=this.asyncRulesCheckCache.get(a))&&!e[l]&&e[l]!==c&&(this.asyncRulesCheckCache.delete(a),e=void 0),e?t[r]=e.value.response.checkResult:(t[r]=void 0,n.push({type:o,params:{[s]:a},response:void 0}))}processResponse(e,t,n,i,r,o){e[t=hs(t,n.params[i])]=n.response.checkResult,this.asyncRulesCheckCache.set(n.params[i],n,this.getTtl(n,this.asyncRulesCheckCacheDuration),r,o)}containsIdentifyFields(e){return!!e.fields&&e.fields.some((e=>!!("phone"===e.id|"email"===e.id)))}async processAsyncRules(e,t,n){if(this.lock.isLocked())return[];let i=[],r=[];return e.reduce(((e,i)=>{let r="FOR_ALL"===zn.getForm(i.formId).publishStatus&&i.useCase===Un.REQUEST_FORM;var o=n===i.formId,s=Wn.isDebugVariantShouldBeShown(zn.getDebugFormVariants(),i.id);return o=t&&(o||s),s=!zn.formVariantHasEnabledAsyncRules(i),o||s&&!r?e.push({fV:i,shouldBeRendered:!0}):e.push({fV:i,shouldBeCheckedByAsyncRules:!0}),e}),[]).forEach((e=>{let{fV:t,shouldBeCheckedByAsyncRules:n}=e;n?i.push(t):r.push(t)})),e=await this.checkBatch(i),r.concat(e)}async checkBatch(e){var t;let n=[];if(this.serviceFailedToProcess)return n;let i=[],r={},o={},s=Ne.get("clContactId")||null,a=!!s,l=at.getUserIdentifier();if(e.forEach((e=>{o[e.formId]=[];var t=e.asyncRules.SHOW_IF_SEGMENT_MEMBER;let n=e.asyncRules.HIDE_FOR_SUBSCRIBERS;var c=t&&t.enabled;let d=c&&(this.segmentationWithoutContactIdEnabled||a),h=e.useCase===Un.REQUEST_FORM&&!d&&!this.containsIdentifyFields(e);d?this.processAsyncRule(e,r,i,o,"SHOW_IF_SEGMENT_MEMBER","IS_IN_SEGMENT","segmentId",t.segmentId,"clContactId",s):c&&(o[e.formId].push(hs("SHOW_IF_SEGMENT_MEMBER",null==t?void 0:t.segmentId)),r[hs("SHOW_IF_SEGMENT_MEMBER",null==t?void 0:t.segmentId)]=void 0),h&&this.processAsyncRule(e,r,i,o,"SHOW_IF_WEB_ID_MAPPED","IS_WEB_ID_MAPPED","webId",l,"webId",l),n&&n.enabled&&(t=hs("HIDE_FOR_SUBSCRIBERS",n.checkThisWidgetOnly&&e.formId),o[e.formId].push(t),(c=n.checkThisWidgetOnly?this.widgetHideForSubscribersCache.get(e.formId):this.generalHideForSubscribersCache)?r[t]=!c.response.checkResult:(r[t]=void 0,i.push({type:"IS_ALREADY_SUBSCRIBED",params:{widgetId:n.checkThisWidgetOnly&&e.formId||void 0},response:void 0})))})),!i.length)return Q(e,o,r);i=function(e){return Object.values(e.reduce(((e,t)=>{let n=hs(t.type,t.params.segmentId,t.params.widgetId);return e[n]||(e[n]=t),e}),{}))}(i),this.lock.lock(0);let c=await ps.request(i.filter((e=>!e.response)));return this.lock.unlock(0),c?(null==c||null===(t=c.checks)||void 0===t||t.forEach((e=>{if("IS_IN_SEGMENT"===e.type)hs("SHOW_IF_SEGMENT_MEMBER",e.params.segmentId),this.processResponse(r,"SHOW_IF_SEGMENT_MEMBER",e,"segmentId",s,l);else if("IS_WEB_ID_MAPPED"===e.type)this.processResponse(r,"SHOW_IF_WEB_ID_MAPPED",e,"webId",s,l);else if("IS_ALREADY_SUBSCRIBED"===e.type){let t=hs("HIDE_FOR_SUBSCRIBERS",e.params.widgetId);r[t]=!e.response.checkResult,e.params.widgetId?this.widgetHideForSubscribersCache.set(e.params.widgetId,e):this.generalHideForSubscribersCache=e}})),Q(e,o,r)):(this.serviceFailedToProcess=!0,n)}};class _s{constructor(){}activate(){this._setupCache()}_setupCache(){var{storagePrefix:e}=Le.getPrefix();let t="".concat(e,"check.segment.cache");e="".concat(e,"check.segment.cache.duration.ms"),Mn.registerKeys(t,e),e=Mn.get(e),e=!isNaN(e)&&+e||3e5,this.cache=new Es(new gs,t,4e3,e)}async processAsyncRules(e,t,n){return e=e.map((e=>new Promise(((i,r)=>{if((!t||n!==e.formId&&!Wn.isDebugVariantShouldBeShown(zn.getDebugFormVariants(),e.id))&&zn.formVariantHasEnabledAsyncRules(e))return this.check(e).then(i);i({fV:e,shouldBeRendered:!0})})).catch((e=>{Ce.error(e,"Failed on form rules check")})))),(await Promise.all(e)).filter((e=>e&&e.shouldBeRendered)).map((e=>(({fV:e}=e),e)))}async check(e){if(this.cache.get(e.id))return{fV:e,shouldBeRendered:this.cache.get(e.id).value};var t=Le.getConfig().apiConfig.asyncRulesCheckUrl.replace("{id}",Bn.createVariantUUID(e.id));return t=await tt.execute(t,"GET",null,_s.getHeaders()).then((e=>e.body)).then((e=>!e.hideByAsyncRules)).catch((t=>(Ce.error(t,"Failed on async rules check fV:"+e.id),!1))),this.cache.set(e.id,t),{fV:e,shouldBeRendered:t}}}t(_s,"getHeaders",(()=>({"Content-Type":"text/plain","cl-customer-id":at.getUserIdentifier()})));var fs=new _s;class ys{isRuleTypeEnabled(e,t){return!!e[t]&&(!e[t].hasOwnProperty("enabled")||e[t].enabled)}}let Ts={ANNOYANCE:"ANNOYANCE",FREQUENCY:"FREQUENCY",CUSTOM_CODE:"CUSTOM_CODE",TARGETING:"TARGETING",HIDE:"HIDE",SCHEDULE:"SCHEDULE",SELECTOR:"SELECTOR",PLACEMENT:"PLACEMENT"};class Cs extends ys{constructor(e,t){super(),this.rule=e,this.fV=t}isEnabled(){return this.isRuleTypeEnabled(this.fV.rules,Ts.CUSTOM_CODE)}isFulfilled(){return this.isEnabled()}}class Is{constructor(e,t){var n,i;this.annoyanceType=(null===(n=e.rules)||void 0===n||null===(i=n.ANNOYANCE)||void 0===i?void 0:i.type)||"SHOW_IN_INTERVAL",this.fV=e,this.sessionStat=t}isEnabled(){return xn.has(this.fV.type)&&cs.isEnabled()}isFulfilled(e){return!!ds.isAlreadyRendered(this.fV.type,this.fV.id)||("SHOW_REGARDLESS_OF_THE_DISPLAY_OF_WIDGETS"===this.annoyanceType||("SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===this.annoyanceType?!e.skipList.includes(this.fV.id)&&0===ds.getCurrentNumberOfAnnoyanceWidgets():ds.isRenderingAllowed(e,this.fV.id)))}}t(Is,"config",cs.get());class Ss extends ys{constructor(e,t,n){super(),this.rule=e,this.fV=t,this.excludedRuleTypes=n}isEnabled(){return!this.excludedRuleTypes.includes("FREQUENCY")&&this.isRuleTypeEnabled(this.fV.rules,"FREQUENCY")}isBasedOnTime(){var e;return 0<((null===(e=this.rule)||void 0===e?void 0:e.predicates)||[]).filter((e=>e.isActive)).filter((e=>["MIN_INTERVAL","ONCE_PER_SESSION"].includes(e.name))).length}isFulfilled(e){var t;return 0<((null===(t=this.rule)||void 0===t?void 0:t.predicates)||[]).filter((e=>e.isActive)).filter((t=>!Ss.predicates[t.name]||new Ss.predicates[t.name](t,this.fV).is(e))).length}}t(Ss,"predicates",{NO_LIMIT:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){return!this.fV.useCase||this.fV.useCase!==Un.AGE_VERIFY||!(null!=(e=e.formVariants[this.fV.id])&&e.closeDate)}},ONCE_PER_SITE:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){return e=e.formVariants[this.fV.id],this.fV.useCase&&this.fV.useCase===Un.AGE_VERIFY?!(null!=e&&e.closeDate):!e}},MIN_INTERVAL:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){let t=On.convert(this.predicate.params.unit,An.MILLISECOND,this.predicate.params.amount);if(this.fV.useCase&&this.fV.useCase===Un.AGE_VERIFY){var n,i=null===(n=e.formVariants[this.fV.id])||void 0===n?void 0:n.closeDate;if(i)return 0<=new Date-new Date(i)-t}else if(n=null===(i=e.formVariants[this.fV.id])||void 0===i?void 0:i.view)return 0<=new Date-new Date(n)-t;return!0}},ONCE_PER_SESSION:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){let t=e.formVariants[this.fV.id];return this.fV.useCase&&this.fV.useCase===Un.AGE_VERIFY?!t||!t.closeDate||new Date(t.closeDate).getTime()<new Date(e.currentSession.getStartISOString()).getTime():!t||!t.view||new Date(t.view).getTime()<new Date(e.currentSession.getStartISOString()).getTime()}}});class bs{constructor(e){this.condition=e}isFulfilled(e,t,n){var i;let r=null===(i=e.formVariants[t.id])||void 0===i?void 0:i.close;if((i=t.useCase&&t.useCase===Un.AGE_VERIFY)&&n.basedOnTime){var o=!n.fulfilled&&r>=this.condition.params.amount;return ls.log("WIDGET_AGE_VERIFY_BASED_ON_TIME_CLOSED ".concat(o)),o}return i?(e=(null===(o=e.formVariants[t.id])||void 0===o?void 0:o.closeDate)&&r>=this.condition.params.amount,ls.log("WIDGET_AGE_VERIFY_CLOSED ".concat(e)),e):(o=r>=this.condition.params.amount,ls.log("WIDGET_CLOSED ".concat(o)),o)}}class As{static create(e){if("WIDGET_CLOSED"===e.name)return new bs(e);throw Error("Unknown ConditionName: "+e.name)}}let Os={AND:"AND",OR:"OR"};class Ns extends ys{constructor(e,t,n){super(),this.rule=e,this.fV=t,this.excludedRuleTypes=n,this.isFulfilled=this.isFulfilled.bind(this)}isEnabled(){return!this.excludedRuleTypes.includes("HIDE")&&this.isRuleTypeEnabled(this.fV.rules,"HIDE")}isFulfilled(e,t){if(!this.isEnabled())return!1;let n=this.rule.conditions.filter((n=>As.create(n).isFulfilled(e,this.fV,t)));return q(this.rule.conditions.length,n.length,this.rule.relation)}}class Rs{constructor(e,t){this.predicate=e,this.fV=t}is(e){return!this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone,e.cacheTimeShiftMs)}_isDateWithTimeZoneInPast(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return 0>=new Date(e).getTime()+(n||0)-this._setTimeZoneToNativeDate(null,t).getTime()}_isDayAndTimeAllowed(e,t,n){var i=this._setTimeZoneToNativeDate(null,n);n=i.toLocaleString("en-EN",{weekday:"long"}).toLowerCase();var r=60*i.getHours()+i.getMinutes();if(i=this._getPreviousDay(i).toLocaleString("en-EN",{weekday:"long"}).toLowerCase(),"00"===e.from.hours&&"00"===e.from.minutes&&"00"===e.to.hours&&"00"===e.to.minutes)r=!0;else{var o=e.to.hours;let s=e.to.minutes;if("00"===o&&"00"===s&&(o="23",s="59"),e=60*parseInt(e.from.hours,10)+parseInt(e.from.minutes,10),0>(o=60*parseInt(o,10)+parseInt(s,10))-e)return e<=r&&t.includes(n)||r<=o&&t.includes(i);r=e<=r&&r<=o}return r&&t.includes(n)}_setTimeZoneToNativeDate(e,t){return e=e?new Date(e):new Date,t?new Date(e.toLocaleString("en-US",{timeZone:X(t)})):e}_getPreviousDay(e){return(e=new Date(e)).setDate(e.getDate()-1),e}}class Ms extends ys{constructor(e,t){super(),this.rule=e,this.fV=t}isEnabled(){return this.isRuleTypeEnabled(this.fV.rules,"SCHEDULE")}isFulfilled(e){var t;return 0===((null===(t=this.rule)||void 0===t?void 0:t.predicates)||[]).filter((e=>e.isActive)).map((t=>!Ms.predicates[t.name]||{fulfilled:new Ms.predicates[t.name](t,this.fV).is(e)})).filter((e=>!e.fulfilled)).length}}t(Ms,"predicates",{HIDE_AFTER:class extends Rs{constructor(e,t){super(e,t)}is(e){return!this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone,e.cacheTimeShiftMs)}},SHOW_AFTER:class extends Rs{constructor(e,t){super(e,t)}is(e){return this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone,e.cacheTimeShiftMs)}},SPECIFIC_DAYS_AND_TIME:class extends Rs{constructor(e,t){super(e,t)}is(e){return this._isDayAndTimeAllowed(this.predicate.params.time,this.predicate.params.days,this.predicate.params.timeZone,e.cacheTimeShiftMs)}},HIDE_AFTER_RELATIVE_TIMER_FOR_AMOUNT_OF_TIME:class{constructor(e,n){t(this,"_dayInMs",864e5),t(this,"_hourInMs",36e5),t(this,"_minuteInMs",6e4),this.predicate=e,this.fV=n,this.isShownInCurrentSessionKey=Mn.getKey("f.isRelativeTimerShownInCurrentSession"),Mn.registerKeys(this.isShownInCurrentSessionKey),this.relativeTimerStorageKey=Mn.getKey("f.fv.relativeTimerViewDate")}is(e){var t,n=null===(t=e.formVariants[this.fV.id])||void 0===t?void 0:t.relativeTimerViewDate;let i=(t=this._getPersistedShownParams())||this.predicate.params;if(!n||"FROM_THE_START_OF_DISPLAYING"!==i.mode)return this.allowDisplay();if((n=(e=new Date(n).getTime()+(e.cacheTimeShiftMs||0)+this._getLengthMs(i.lengthFromTheStart))<Date.now())&&i.isShowAgainAllowed){if("NEXT_SESSION"===i.showAgainMode)return t?this.restrictDisplay():this.allowDisplay(!0);if("AFTER_FIXED_PERIOD"===i.showAgainMode)return e+(t=this._getShowAgainMs(i.showAgainUnit,i.showAgainAmount))<=Date.now()?this.allowDisplay(!0):this.restrictDisplay()}return n?this.restrictDisplay():this.allowDisplay()}restrictDisplay(){return!1}allowDisplay(e){return this._getPersistedShownParams()||this._setPersistedShownParams(),e&&localStorage.removeItem(this.relativeTimerStorageKey),!0}_getAllPersistedShownParams(){return Mn.get(this.isShownInCurrentSessionKey)||{}}_getPersistedShownParams(){var{id:e}=this.fV;return({[e]:e}=this._getAllPersistedShownParams()),e||null}_setPersistedShownParams(){let e={[this.fV.id]:this.predicate.params},t=this._getAllPersistedShownParams();Object.assign(t,e),Mn.set(this.isShownInCurrentSessionKey,t)}_getLengthMs(e){let[t,n,i,r]=e.split(".").map(Number);return t*this._dayInMs+n*this._hourInMs+i*this._minuteInMs+1e3*r}_getShowAgainMs(e,t){return{DAYS:this._dayInMs,HOURS:this._hourInMs,MINUTES:this._minuteInMs}[e]*t}}});let Ls=[{operandName:"VISITOR",operators:[{type:"TIME",name:"TIME_SPENT_ON_PAGE"},{type:"TIME",name:"TIME_SPENT_ON_SITE"},{type:"INTEGER",name:"PAGE_READ_PERCENT"},{type:"INTEGER",name:"PAGES_VIEWED"},{type:"TIME",name:"UN_ACTIVE_TIME"},{type:"VOID",name:"USER_LEAVES_PAGE"},{type:"VOID",name:"USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM"},{type:"VOID",name:"USER_NOT_HOVER_WIDGET"},{type:"VOID",name:"NEW_VISITORS"}]},{operandName:"DEVICE_TYPE",operators:[{type:"SELECT",name:"EQUALS",options:[{label:"ANY",value:null},{label:"MOBILE",value:"MOBILE"},{label:"DESKTOP",value:"DESKTOP"}]}]},{operandName:"URL",operators:[{type:"STRING",name:"EQUALS"},{type:"STRING",name:"CONTAINS"},{type:"STRING",name:"CONTAINS_ONE_OF"},{type:"STRING",name:"STARTS_WITH"},{type:"STRING",name:"ENDS_WITH"},{type:"STRING",name:"REG_EX"}]},{operandName:"URL_SEARCH_PARAM",operators:[{type:"STRING",name:"EQUALS"},{type:"STRING",name:"CONTAINS"},{type:"STRING",name:"CONTAINS_ONE_OF"},{type:"STRING",name:"STARTS_WITH"},{type:"STRING",name:"ENDS_WITH"},{type:"STRING",name:"REG_EX"},{type:"STRING",name:"EXISTS"}]},{operandName:"HTML_ELEMENT",operators:[{type:"HTML_ELEMENT",name:"MATCHES"}]},{operandName:"COUNTRY",operators:[{type:"STRING",name:"CONTAINS_ONE_OF"}]},{operandName:"REGION",operators:[{type:"STRING",name:"CONTAINS_ONE_OF"}]},{operandName:"CITY",operators:[{type:"STRING",name:"CONTAINS_ONE_OF"}]},{operandName:"DATA_LAYER_EVENT",operators:[{type:"STRING",name:"STARTS_WITH"},{type:"STRING",name:"CONTAINS_ONE_OF"},{type:"STRING",name:"ENDS_WITH"},{type:"STRING",name:"EQUALS"},{type:"FLOAT",name:"LESS_THAN"},{type:"FLOAT",name:"GREATER_THAN"},{type:"STRING",name:"REG_EX"},{type:"STRING",name:"EXISTS"}]}];class ws{static getOperatorType(e,t){return Ls.find((t=>t.operandName===e)).operators.find((e=>e.name===t)).type}}class Ps{constructor(e){t(this,"operatorNameMap",{CONTAINS:Y,STARTS_WITH:Z,EQUALS:$,ENDS_WITH:J,REG_EX:ee,CONTAINS_ONE_OF:te,EXISTS:ne}),this.name=e}isMatched(e,t,n,i){return this.operatorNameMap[this.name](e,t,n,i)}}class Ds{constructor(e){t(this,"operatorNameMap",{TIME_SPENT_ON_PAGE:re,TIME_SPENT_ON_SITE:oe,UN_ACTIVE_TIME:se}),this.name=e}isMatched(e,t,n,i){return e=this.operatorNameMap[this.name](e,t,n,i),ls.log("time  ".concat(this.name," ").concat(JSON.stringify(n)," = ").concat(e)),e}}class xs{constructor(e){t(this,"operatorNameMap",{MATCHES:ae}),this.name=e}isMatched(e,t,n,i){return this.operatorNameMap[this.name](e,t,n,i)}}class ks{constructor(e){t(this,"operatorNameMap",{USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM:le,USER_LEAVES_PAGE:ce,USER_NOT_HOVER_WIDGET:he,NEW_VISITORS:de}),this.name=e}isMatched(e,t,n,i){return e=this.operatorNameMap[this.name](e,t,n,i),ls.log("".concat(this.name,"  ").concat(JSON.stringify(n)," = ").concat(e)),e}}class Vs{constructor(e){t(this,"operatorNameMap",{PAGE_READ_PERCENT:ue,PAGES_VIEWED:me}),this.name=e}isMatched(e,t,n,i){return this.operatorNameMap[this.name](e,t,n,i,this.name)}}class Fs{constructor(e){t(this,"operatorNameMap",{LESS_THAN:pe,GREATER_THAN:ge}),this.name=e}isMatched(e,t,n,i){return this.operatorNameMap[this.name](e,t,n,i,this.name)}}class Us{static create(e,t){switch(e){case"STRING":case"SELECT":return new Ps(t);case"TIME":return new Ds(t);case"HTML_ELEMENT":return new xs(t);case"INTEGER":return new Vs(t);case"VOID":return new ks(t);case"FLOAT":return new Fs(t);default:throw Error("Unknown OperatorType: "+e)}}}class Bs{constructor(e){this.condition=e}isOperandValueMatched(e,t,n,i){var r=ws.getOperatorType(this.condition.operand.name,this.condition.operator);let o;r=Us.create(r,this.condition.operator);try{o=i?decodeURIComponent(this.condition.value):this.condition.value}catch(e){o=this.condition.value}return e=r.isMatched(e,t,o,n),ls.log("".concat(n,"  ").concat(this.condition.operator," ").concat(o," = ").concat(e)),e}}class Hs extends Bs{constructor(e){super(e)}urlWithoutDebugParams(){let e=new URL(window.location.href);"esDebugForm clDebugForm clPublishedForm esPublishedForm clIgnoreRules esIgnoreRules".split(" ").forEach((t=>{e.searchParams.delete(t)}));let t=Array.from(e.searchParams.entries()).map((e=>"".concat(encodeURIComponent(e[0]),"=").concat(encodeURIComponent(e[1])))).join("&"),n=e.pathname.split("/").map((e=>{try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}}));return"".concat(this._decodeURIComponent(e.origin)).concat(this._decodeURIComponent(n.join("/"))).concat(t?"?"+this._decodeURIComponent(t):"").concat(this._decodeURIComponent(e.hash))}_decodeURIComponent(e){try{return decodeURIComponent(e)}catch(t){return e}}isFulfilled(e,t){return this.isOperandValueMatched(e,t,this.urlWithoutDebugParams(),!0)}}class Gs extends Bs{constructor(e){super(e)}isFulfilled(e,t){return e.sessionUrlSearchParams.some((n=>{if((n=new URLSearchParams(n).get(this.condition.operand.value))&&this.isOperandValueMatched(e,t,n,!0))return!0}))}}class js extends Bs{constructor(e){super(e)}isFulfilled(e,t){let n=ws.getOperatorType(this.condition.operand.name,this.condition.operator);return Us.create(n,this.condition.operator).isMatched(e,t,this.condition.value)}}class Ws extends Bs{constructor(e){super(e)}isFulfilled(e,t){if(!this.condition.value)return!0;var n=navigator.userAgent||navigator.vendor||window.opera;return n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))?"MOBILE":"DESKTOP",this.isOperandValueMatched(e,t,n)}}class zs extends Bs{constructor(e){super(e)}isFulfilled(e,t){let n=ws.getOperatorType(this.condition.operand.name,this.condition.operator);return e=!!Us.create(n,this.condition.operator).isMatched(e,t,this.condition.value),ls.log("HTML_ELEMENT  ".concat(this.condition.operator," ").concat(this.condition.value," = ").concat(e)),e}}class Ks extends Bs{constructor(e){super(e)}isFulfilled(e,t,n){return this.isOperandValueMatched(e,t,[n.countryCode])}}class Qs extends Bs{constructor(e){super(e)}isFulfilled(e,t,n){return this.isOperandValueMatched(e,t,[String(n.regionGeonameId)])}}class qs extends Bs{constructor(e){super(e)}isFulfilled(e,t,n){return this.isOperandValueMatched(e,t,[String(n.cityGeonameId)])}}let Xs={},Ys=null;class Zs extends Bs{constructor(e){super(e)}isFulfilled(e,t){var n,i,r=btoa(JSON.stringify(this.condition));if(this.shouldInvalidateResultsCache())Ys=null===(n=window.dataLayer)||void 0===n?void 0:n.length,Xs={};else if(void 0!==(null===(i=Xs[t.id])||void 0===i?void 0:i[r]))return r=Xs[t.id][r],ls.log("data layer event condition ".concat(JSON.stringify(this.condition)," ").concat(r?"matches":"not matches"," (from cache)")),r;return n=this.condition.value.parameters.relation===Os.AND?this.condition.value.parameters.values.every((n=>this.isParameterValueMatches(e,t,n))):this.condition.value.parameters.values.some((n=>this.isParameterValueMatches(e,t,n))),Xs[t.id]?Xs[t.id][r]=n:Xs[t.id]={[r]:n},n}isParameterValueMatches(e,t,n){let i=this.getParameterValue(n);if(!this.isParameterValueValid(i))return!1;let r=ws.getOperatorType(this.condition.operand.name,n.operator);return e=Us.create(r,n.operator).isMatched(e,t,n.value,i),ls.log("".concat(i," ").concat(n.operator," ").concat(n.value," = ").concat(e)),e}isParameterValueValid(e){return!(_(e)||Array.isArray(e)&&(!e.length||_(e[0])||Array.isArray(e[0])))}getParameterValue(e){return Yn.processModel({arguments:[{name:"dataLayerEventName",value:this.condition.value.event},{name:"dataLayerPropPath",value:e.name}]})}shouldInvalidateResultsCache(){var e;return null==Ys||Ys!==(null===(e=window.dataLayer)||void 0===e?void 0:e.length)}}class Js{static create(e){switch(e.operand.name){case"URL":return new Hs(e);case"URL_SEARCH_PARAM":return new Gs(e);case"VISITOR":return new js(e);case"DEVICE_TYPE":return new Ws(e);case"HTML_ELEMENT":return new zs(e);case"COUNTRY":return new Ks(e);case"REGION":return new Qs(e);case"CITY":return new qs(e);case"DATA_LAYER_EVENT":return new Zs(e);default:throw Error("Unknown OperandName: "+e.operand.name)}}}class $s extends ys{constructor(e,t,n){super(),this.rule=e,this.fV=t,this.state={},this.cachingState={},this.locationData=n,this.isFulfilled=this.isFulfilled.bind(this)}isEnabled(){return this.isRuleTypeEnabled(this.fV.rules,"TARGETING")}isFulfilled(e){return!this.isExcludeFulfilled(this.rule.schema.exclude,e)&&(e=this.isIncludeFulfilled(this.rule.schema.include,e),this.state.pageFulfilled=e&&(this.state.URL||this.state.URL_SEARCH_PARAM||this.state.HTML_ELEMENT),this.fV.rules.pageFulfilled=this.state.pageFulfilled,e)}isIncludeFulfilled(e,t){return this.areGroupsFulFilled(e.groups,e.relation,t,{exclude:!1})}isExcludeFulfilled(e,t){return!!e.groups.length&&this.areGroupsFulFilled(e.groups,e.relation,t,{exclude:!0})}areGroupsFulFilled(e,t,n){this.cachingState={relation:t,fulfilledGroupsCount:0};let i=e.map(((e,t)=>(((e=this.isGroupFulfilled(e,n)).hasUserLeavesPage||e.hasReadPercent)&&(this.cachingState.groupIndexContainingCachingRules=t),this.cachingState.fulfilledGroupsCount+=Number(e.groupFulfilled),e))),r=i.filter((e=>(({groupFulfilled:e}=e),e)));return e=q(e.length,r.length,t),this.cachingState={...this.cachingState,fulfilled:e,groups:i,relation:t},e}isGroupFulfilled(e,t){var n=e.relation;let i=e.conditions.length,r={groupFulfilled:!0,groupRelation:n,conditions:[]};if(!i)return r;let o=!1,s=!1,a=0;return n=q(i,(e=e.conditions.map((e=>{const n=Js.create(e).isFulfilled(t,this.fV,this.locationData);return Object.assign(this.state,{[e.operand.name]:n}),"PAGE_READ_PERCENT"===e.operator&&(s=!0),"USER_LEAVES_PAGE"===e.operator&&(o=!0),n||"PAGE_READ_PERCENT"===e.operator||"USER_LEAVES_PAGE"===e.operator||a++,{fulfilled:n,conditionModel:e}}))).filter((e=>(({fulfilled:e}=e),e))).length,n),{...r,groupFulfilled:n,conditions:e,hasReadPercent:s,hasUserLeavesPage:o,numberOfFailedConditions:a}}}class ea{constructor(e){this.fV=e,this.state={},this.uniquePlacementsGetter=new Fo(this.fV),this._uniquePresentPlacements=[],this.isFulfilled=this.isFulfilled.bind(this)}isEnabled(){return"BUILT_IN"===this.fV.type}uniquePresentPlacements(){return this._uniquePresentPlacements}checkUniquePresentPlacements(){this._uniquePresentPlacements=this.uniquePlacementsGetter.getUniquePresentPlacements()}isFulfilled(e){return this.checkUniquePresentPlacements(),0<this._uniquePresentPlacements.length||e(this.fV.id)}}class ta{constructor(e){t(this,"_semaphore",new rs),this.rulesService=e}invalidate(){let e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).filter((e=>{var t;return(t=this._semaphore.canLock(e.formVariant.id))&&(t=e.allRulesFulfilled||(!e.rules[Ts.FREQUENCY].enabled||e.rules[Ts.FREQUENCY].fulfilled)&&(!e.rules[Ts.HIDE].enabled||!e.rules[Ts.HIDE].fulfilled)&&(!e.rules[Ts.SCHEDULE].enabled||e.rules[Ts.SCHEDULE].fulfilled)&&(function(e){if(e.rules[Ts.TARGETING].enabled){if(({cachingState:e={}}=e.rules[Ts.TARGETING].rule),void 0===e.groupIndexContainingCachingRules)return!1;var t=e.groups[e.groupIndexContainingCachingRules];let n=t.groupRelation===Os.OR||!t.numberOfFailedConditions;return e.relation===Os.OR?e.fulfilled||t.fulfilled||n:(t=e.fulfilledGroupsCount-Number(t.groupFulfilled)==e.groups.length-1,e.fulfilled||t&&n)}return!1}(e)||!!(e.formVariant.rules[Ts.SELECTOR]&&e.formVariant.rules[Ts.SELECTOR].enabled&&e.formVariant.rules[Ts.SELECTOR].selector))),t}));return this._cache(e)}async _cache(e){if(e.length)return e=e.map((e=>(({formVariant:e}=e),e))),e=await this.rulesService.filterByAsyncRules(e),this._cacheForms(e),e}async _cacheForms(e){try{for await(let t of e){if(!this._semaphore.canLock(t.id))continue;this._semaphore.lock(t.id);let{manifests:e,appearance:n}=await as.prepareForDisplay(t),i=e.filter((e=>{var t;return 0<(null==e||null===(t=e.resourcesPropPaths)||void 0===t?void 0:t.length)})).map((e=>n.document.views.map((t=>{const i=[];return v(t,(t=>{if(t.name===e.name){var r=e.resourcesPropPaths.map((e=>_e(t.props,e,n))).filter(Boolean);r=P(r,1/0),i.push(...r.filter(Boolean))}})),z(t=i.map((e=>this._loadResource(e))))}))));await z(i)}}catch(t){throw this._semaphore.unlockAll(e.map((e=>e.id))),t}}_loadResource(e){var t;let n=e.startsWith("url")?((null===(t=/url\((.*)\)/.exec(e))||void 0===t?void 0:t[1])||"").replace(/['"]/g,""):e;return/^https?:\/\//.test(n)?new Promise(((t,i)=>{let r=new Image;r.onload=()=>t(e),r.onerror=()=>i(e),r.src=n})):Promise.reject("Not a URL")}}var na=new class{constructor(e){t(this,"intervalTimerId",null),t(this,"locationData",null),t(this,"resourcesSemaphore",new rs),t(this,"resourcesCache",new ta(this)),this.store=e,this.alreadyCheckedFormVariantIds=new Set,this.showAnotherWidgetFormVariantIds=new Set,this.currentPageRenderedWidgetIds=new Set,this.showFormByClickingElementFormVariantIds=new Set,this.showFormByCustomCodeFormVariantIds=new Set,this.showWidgetOnMouseoutIds=new Set,this.subscriptions=[]}activate(e,t){this.userActionsDetector=e,this.locationData=t,this.checkRules(),this.subscriptions.push(this.userActionsDetector.on("mouseout",(()=>{this.checkRules({mouseout:!0})})),this.userActionsDetector.on("mouseover",(()=>{this.checkRules({mouseout:!1})})),ko.on("PAGE_VIEW_CHANGED",this.onPageViewChanged.bind(this)),ko.on("SHOW_WIDGET_BY_CLICKING_ELEMENT",this.onShowWidgetByClickingElement.bind(this)),ko.on("SHOW_WIDGET_BY_CUSTOM_CODE",this.onShowWidgetByCustomCode.bind(this))),this.intervalTimerId=setInterval((()=>{this.checkRules()}),500)}getStats(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{...this.userActionsDetector.getStats(),...e}}currentPageRendered(e){return this.currentPageRenderedWidgetIds.has(e)}async checkRules(e){try{let t={...this.getStats(e),cacheTimeShiftMs:-500},n=this.getPublishedFormVariantsAvailableForRendering().filter((e=>this.resourcesSemaphore.canLock(e.id))).map((e=>Ee(e,t,this.userActionsDetector.sessionStat,this.locationData,(e=>this.currentPageRendered(e)))));this.destroyIfNeeded(t);let i=n.filter((e=>this.filterBySyncRulesFromFvStats(e))).map((e=>(({formVariant:e}=e),e)));i=i.filter((e=>this.filterByDataThatPresentInStorageBeforeAsyncRules(e,t)));let r=await this.filterByAsyncRules(i),o=r.map((e=>e.id));this.resourcesSemaphore.lockAll(o);let s=r.reduce(((e,t)=>Object.assign(e,{[t.id]:!0})),{}),a=n.filter((e=>!s[e.formVariant.id]));setTimeout((()=>{this.resourcesCache.invalidate(a)}),0),t.mouseout&&r.forEach((e=>this.showWidgetOnMouseoutIds.add(e.id))),r.length&&await as.display(r,(e=>{this.resourcesSemaphore.unlock(e),this.currentPageRenderedWidgetIds.add(e)}),(e=>{this.resourcesSemaphore.unlock(e)}),(e=>{this.resourcesSemaphore.unlock(e)}),(e=>{this.userActionsDetector.sessionStat.addToSkipList(e)}))}catch(e){this.resourcesSemaphore.unlockAll(),Ce.error(e,"Failed on form rules check")}}getAbTestsFormsToExclude(){let e=new Set,t=(Le.getConfig().formConfig||{}).abTests||[],n=Le.getFormAbTestsFormVariants().reduce(((e,t)=>e.concat(t.formId)),[]);return t.forEach((t=>{t.rules.forEach((t=>{n.includes(t.formId)||e.add(t.formId)}))})),e}getPublishedFormVariantsAvailableForRendering(){let e=Wn.publishedFormIdToDebug(),t=Wn.isDebugShouldIgnoreRules(),n=Le.getConfig(),i=zn.getFormVariantsToRender(n);return 0<e&&(i=i.filter((t=>t.formId===e||"FOR_ALL"===n.forms[t.formId].publishStatus))),t||(i=i.filter((e=>!this.getAbTestsFormsToExclude().has(e.formId)))),0<this.currentPageRenderedWidgetIds.size?i.filter((e=>!this.currentPageRenderedWidgetIds.has(e.id))):i}async filterByAsyncRules(e){let t=Wn.publishedFormIdToDebug(),n=Wn.isDebugShouldIgnoreRules(),{features:i={}}=Le.getConfig();return!0===(null==i?void 0:i.CHECK_SEGMENT_MEMBERSHIP)?vs.processAsyncRules(e,n,t):fs.processAsyncRules(e,n,t)}filterBySyncRulesFromFvStats(e){let t=e.formVariant;return!((!Wn.isDebugShouldIgnoreRules()||Wn.publishedFormIdToDebug()!==t.formId&&!Wn.isDebugVariantShouldBeShown(zn.getDebugFormVariants(),t.id))&&t.rules)||!t.rules.CUSTOM_CODE.enabled&&this._syncRulesStatsPredicate(e)}filterByDataThatPresentInStorageBeforeAsyncRules(e,t){var n,i,r,o;return!!Wn.isDebugShouldIgnoreRules()||!(null!==(n=e.asyncRules)&&void 0!==n&&null!==(i=n.HIDE_FOR_SUBSCRIBERS)&&void 0!==i&&i.enabled&&!1===(null===(r=e.asyncRules)||void 0===r||null===(o=r.HIDE_FOR_SUBSCRIBERS)||void 0===o?void 0:o.checkThisWidgetOnly)&&(e=Object.values(t.formVariants).find((e=>!!e.submit)),t=(t=Ne.get("clContactId"))&&"0"!==t,e&&t))}filterBySyncRules(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return!((!Wn.isDebugShouldIgnoreRules()||Wn.publishedFormIdToDebug()!==e.formId&&!Wn.isDebugVariantShouldBeShown(zn.getDebugFormVariants(),e.id))&&e.rules)||!e.rules.CUSTOM_CODE.enabled&&(n=Ee(e,t,this.userActionsDetector.sessionStat,this.locationData,(e=>this.currentPageRendered(e)),n),this._syncRulesStatsPredicate(n))}_syncRulesStatsPredicate(e){let{formVariant:t,allRulesFulfilled:n,rules:i,stats:r}=e;if(Ho.checkPreconditionForDataLayerAndMarkForAlertIfNeeded(t,n,i),ls.log("formVariant ".concat(t.id," annoyance"),i.ANNOYANCE.fulfilled),ls.log("formVariant ".concat(t.id," hide"),i.HIDE.fulfilled),ls.log("formVariant ".concat(t.id," schedule"),i.SCHEDULE.fulfilled),ls.log("formVariant ".concat(t.id," frequency"),i.FREQUENCY.fulfilled),ls.log("formVariant ".concat(t.id," targeting"),i.TARGETING.fulfilled),ls.log("formVariant ".concat(t.id," placement"),i.PLACEMENT.fulfilled),i.ANNOYANCE.enabled)if("SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===i.ANNOYANCE.rule.annoyanceType){e=n&&!i.ANNOYANCE.fulfilled;let o=n&&!ds.isRenderingAllowed(r,t.id,t.type);if(e||o)return r.skipList.includes(t.id)||this.userActionsDetector.sessionStat.addToSkipList(t.id),!1}else if(!i.ANNOYANCE.fulfilled)return!1;return!(i.HIDE.enabled&&i.HIDE.fulfilled||i.SCHEDULE.enabled&&!i.SCHEDULE.fulfilled||i.FREQUENCY.enabled&&!i.FREQUENCY.fulfilled||i.PLACEMENT.enabled&&!i.PLACEMENT.fulfilled)&&(i.TARGETING.enabled&&i.TARGETING.fulfilled)}isWidgetShownOnMouseout(e){return this.showWidgetOnMouseoutIds.has(e.id)?e.rules.TARGETING.schema.exclude.groups.some((e=>e.conditions.some((e=>"USER_NOT_HOVER_WIDGET"===e.operator))))?((e=JSON.parse(JSON.stringify(e))).rules.TARGETING.schema.include.groups.forEach((e=>{e.conditions=e.conditions.filter((e=>"USER_LEAVES_PAGE"!==e.operator))})),e.rules.TARGETING.schema.include.groups=e.rules.TARGETING.schema.include.groups.filter((e=>0<e.conditions.length)),{shown:!0,checkIt:!0,formVariant:e}):{shown:!0,checkIt:!1,formVariant:e}:{shown:!1,checkIt:!1,formVariant:e}}destroyIfNeeded(e){let t=Xo.getShownForms();Object.keys(t).filter((e=>0<t[e].length)).map((e=>t[e])).forEach((t=>{t.forEach((t=>{if(!this.showAnotherWidgetFormVariantIds.has(t)&&!this.showFormByClickingElementFormVariantIds.has(t)&&!this.showFormByCustomCodeFormVariantIds.has(t)){var n=zn.getFormVariant(t),i=this.isWidgetShownOnMouseout(n);if(!i.shown||i.checkIt){i.shown&&i.checkIt&&(n=i.formVariant),t=this.currentPageRenderedWidgetIds.has(t),i="LAUNCHER"===n.type;var r=this.filterByDataThatPresentInStorageBeforeAsyncRules(n,e);(!this.filterBySyncRules(n,e,t?["FREQUENCY","HIDE"]:[])||i&&!r)&&(Xo.destroyForm(n),this.alreadyCheckedFormVariantIds.delete(n.id),xn.has(n.type)&&this.userActionsDetector.sessionStat.setAnnoyLastClosed())}}}))}))}destroy(){this.userActionsDetector&&this.userActionsDetector.destroy(),this.intervalTimerId&&clearInterval(this.intervalTimerId),this.subscriptions.forEach((e=>e.off()))}onShowWidgetByClickingElement(e){this.showFormByClickingElementFormVariantIds.add(e.id)}onShowWidgetByCustomCode(e){this.showFormByCustomCodeFormVariantIds.add(e)}onShowWidgetFromAnotherWidget(e){this.showAnotherWidgetFormVariantIds.add(e.id)}onPageViewChanged(){this.showFormByClickingElementFormVariantIds=new Set,this.showAnotherWidgetFormVariantIds=new Set,this.currentPageRenderedWidgetIds=new Set,this.alreadyCheckedFormVariantIds=new Set,this.showFormByCustomCodeFormVariantIds=new Set,this.showWidgetOnMouseoutIds=new Set}}(Le);class ia{constructor(e){({accountId:e}=e),this._payload={accountId:e,type:"view",referrer:window.location.href}}get(){return btoa(JSON.stringify(this._payload))}}var ra=new class{constructor(e){this.params=e}handle(e){var t=Le.getPrefix();"localhost"===window.location.hostname||"cl"!==t.debugPrefix||(t=Wn.getQueryParamNames(),Wn.isDebugQueryStringPresentInUrl(t)||(t=0<zn.getFormVariants().filter((t=>"FOR_ALL"===zn.getForm(t.formId).publishStatus&&function(e,t){var n;let i=["HIDE_AFTER","SHOW_AFTER"];var r;return null===(n=e.rules.SCHEDULE)||void 0===n||!n.enabled||!((null===(r=e.rules.SCHEDULE)||void 0===r?void 0:r.predicates)||[]).filter((e=>(null==e?void 0:e.isActive)&&i.includes(null==e?void 0:e.name))).some((n=>!1===new Ms.predicates[n.name](n,e).is(t.sessionStat)))}(t,e))).length,Kn.isInstanceInDebugMode()||!t))||this.onPageViewed()}onPageViewed(){if(!ke.isBot()){var e=new ia(this.params).get();tt.execute(new Hn("/forms/v1/page/event").get(),"POST",e,{"Content-Type":"text/plain","cl-customer-id":at.getUserIdentifier()}).catch((e=>Ce.error(e,"onFormPageView error on FormPageViewedEventHandler: ")))}}}(Bn.createPageParams());class oa{constructor(){this.observer=this.prevPath=null,window.globalHistoryLength=window.history.length;let e={apply(){return window.globalHistoryLength=isNaN(window.globalHistoryLength)&&window.history.length||++window.globalHistoryLength,Reflect.apply(...arguments)}};history.pushState=new Proxy(history.pushState,e),history.replaceState=new Proxy(history.replaceState,e)}getPrevPath(){return this.prevPath}getCurrentPath(){let e=new URL(location.href);return e.search="",e.toString()}getPrevHistoryLength(){return this.prevHistoryLength}getCurrentHistoryLength(){return window.globalHistoryLength}setPrevPath(e){this.prevPath=e}setPrevHistoryLength(e){this.prevHistoryLength=e}isPathChanged(){return this.getCurrentPath()!==this.getPrevPath()}isHistoryLengthChanged(){return this.getCurrentHistoryLength()!==this.getPrevHistoryLength()}observe(e){this.setPrevPath(this.getCurrentPath()),this.observer=new MutationObserver((()=>{let t=this.isPathChanged(),n=this.isHistoryLengthChanged();t&&this.setPrevPath(this.getCurrentPath()),n&&this.setPrevHistoryLength(this.getCurrentHistoryLength()),t&&n&&e()})),this.observer.observe(document.body,oa.config)}destroy(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}}t(oa,"config",{childList:!0,subtree:!0});var sa=new oa;var aa=new class extends wt{constructor(e){super(e)}getExperimentVariantsConfig(){let e=Object.values(Le.getConfig().formVariants||{}),t=[];return Le.getFormAbTestsConfig().forEach((n=>{let i=[],r=n.rules.map((t=>{var n;const r=e.find((e=>e.formId===t.formId));return r&&i.push(r),{...t,variantId:null!==(n=null==r?void 0:r.id)&&void 0!==n?n:null}})).filter((e=>null!==e.variantId));i.length&&t.push({itemVariants:i,trafficSplitRules:r,testId:n.id})})),t}setExperimentVariants(e){Le.setFormAbTestFormVariants(e)}getExperimentVariants(){return Le.getFormAbTestsFormVariants()}addExperimentVariant(e,t,n){return e={testId:n,formId:e.formId,id:e.id,hash:this._generateHash(e.id,t)},Le.addAbTestFormVariant(e),e}getExperimentVariantsFromConfig(){return this.getExperimentVariantsConfig().reduce(((e,t)=>e.concat(t.itemVariants)),[])}}(Lt);var la=new class{execute(e){let t=e.rules.TARGETING.schema.include.groups[0].conditions.slice(),n=[];return t.find((e=>"HIDE_FOR_THOSE_WHO_CLOSED_WIDGET"===e.operand.name))&&(t=t.filter((e=>"HIDE_FOR_THOSE_WHO_CLOSED_WIDGET"!==e.operand.name)),n.push({name:"WIDGET_CLOSED",isActive:!0,params:{unit:"COUNT",amount:1}})),e.rules.TARGETING={...e.rules.TARGETING,schema:{...e.rules.TARGETING.schema,include:{...e.rules.TARGETING.schema.include,groups:[{...e.rules.TARGETING.schema.include.groups[0],conditions:t},...e.rules.TARGETING.schema.include.groups.slice(1)]},exclude:{...e.rules.TARGETING.schema.exclude,relation:Os.OR}}},e.rules.HIDE||(e.rules.HIDE={enabled:!!n.length,type:Ts.HIDE,relation:Os.OR,hideFor:null,conditions:n}),e}};var ca=new class extends En{getData(){if(!this._shouldMetricBeCollected(this._getLastDate(),24)){let e=this._getData().data;return e&&e.countryCode?Promise.resolve(e):this._requestDataFromServer()}return this._updateMetricCollectionDate(),this._requestDataFromServer()}_getData(){return Le.getLocationData()}_setData(e){Le.setLocationData(e)}_requestDataFromServer(){return tt.execute(new Hn("/forms/v1/location").get(),"GET",null,{"Content-Type":"application/json"}).then((e=>(this._storeData(e.body),e.body))).catch((()=>({body:{}})))}}(24);class da{static findTestId(e,t){return(e=e.find((e=>e.rules.some((e=>e.formId===t)))))?e.id:null}}class ha{constructor(e,t,n){this.store=e,this.userIdentifierStorageService=t,this.storageService=n}activate(){var e=this.userIdentifierStorageService.getUserIdentifier();this.storageKey="".concat(this.store.getPrefix().storagePrefix).concat(e,".interactions"),e=this.storageService.get(this.storageKey)||this._initializeInteractionMap(),this._appendInteractionIds(e)}_initializeInteractionMap(){let e={};var t=this.store.getConfig().forms;for(let n of Object.values(t))t=it.generate(),e[n.id]=t,n.__interactionId=t;return this.storageService.set(this.storageKey,e),e}_appendInteractionIds(e){var t=this.store.getConfig().forms;let n=[];for(let i of Object.values(t))(t=e[i.id])?i.__interactionId=t:(t=it.generate(),e[i.id]=t,i.__interactionId=t,n.push(i));0<n.length&&this.storageService.set(this.storageKey,e)}}var ua=new class{getGeolocationRules(e){let t=this.getGeolocationRulesIndex(e);return-1===t?null:e[t]}getGeolocationRulesIndex(e){return e.findIndex((e=>{var t;return["COUNTRY","REGION","CITY"].includes(null==e||null===(t=e.conditions[0])||void 0===t?void 0:t.operand.name)}))}getFormVariantsWithLocationRules(e){return e.filter((e=>{let t=this.getGeolocationRules(e.rules.TARGETING.schema.include.groups);return e=this.getGeolocationRules(e.rules.TARGETING.schema.exclude.groups),t||e}))}};class ma{constructor(){this.entryModuleType=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"STATIC"}getComponentManifests(){return this.getAllComponents().map((e=>{var t;return null===(t=e.define)||void 0===t?void 0:t.manifest}))}getAllComponents(){return Object.values(this.getWcRegister().modelNameToTagMap).map((e=>this.getWcRegister().getComponentTagName(e,this.entryModuleType))).map((e=>customElements.get(e))).filter((e=>!!e))}async loadComponentsIfNecessary(e,t){let n=new Set;e.views.forEach((e=>{qn.iterateDepthFirst(e,(e=>{n.add(e.name)}))}));let i=(e=this.getComponentManifests()).map((e=>e.name)),r=[...n].filter((e=>!i.includes(e)));return r.length?(await this.loadComponents(r,t),{manifests:this.getComponentManifests()}):{manifests:e}}async loadComponents(e,t){return e=this.buildComponentModulesPaths(this.getComponentNamesToLoad(e),t),e=await this.importComponentModules(e),this.registerModules(e),e.map((e=>e.default))}getComponentNamesToLoad(e){return e}buildComponentModulesPaths(e,t){return e.map((e=>"".concat(t,"scripts/").concat(e,".js")))}async importComponentModules(e){return Promise.all(e.map((e=>import(e))))}registerModules(e){e.forEach((e=>{this.getWcRegister().registerComponent(e.default,this.entryModuleType)}))}getWcRegister(){return Fr}}var pa=new class{async activate(){this.apiHandlers={},new ha(Le,at,Ne).activate(),this.userActionsDetector=new Fn,ko.on("SHOW_WIDGET_FROM_ANOTHER_WIDGET",this._showWidgetFromAnotherWidget.bind(this)),ko.on("CONTACT_DATA_SUBMIT",this._onContactSubmit.bind(this));let e=zn.getFormVariants().map((e=>la.execute(e))),t={};ua.getFormVariantsWithLocationRules(e).length&&(t=await ca.getData()),fs.activate(),aa.activate(),Xo.activateAll(this.userActionsDetector,new ma),na.activate(this.userActionsDetector,t),Yo.activate(),Zo.activate(),ra.handle(this.userActionsDetector),sa.observe(this.detectPageView.bind(this)),Fr.register(U,"STATIC"),ko.emit("COMPONENTS_LOADED",null),Ho.activate()}detectPageView(){ko.emit("PAGE_VIEW_CHANGED",null),this.userActionsDetector.performDetection(),ra.handle(this.userActionsDetector),na.checkRules()}showFormFromCustomCode(e){({formVariantId:e}=e);let t=zn.getForm(Bn.parseFormVariantId(e).formId);t&&("DEBUG"===t.publishStatus?Wn.isDebugVariantShouldBeShown(zn.getDebugFormVariants(),e)&&(Xo.showFormFromCustomCode(zn.getFormVariant(e)),ko.emit("SHOW_WIDGET_BY_CUSTOM_CODE",e)):(Xo.showFormFromCustomCode(zn.getFormVariant(e)),ko.emit("SHOW_WIDGET_BY_CUSTOM_CODE",e)))}addOnWidgetEventsHandlers(e,t){this.apiHandlers={...this.apiHandlers,CONTACT_DATA_SUBMIT:{...this.apiHandlers.CONTACT_DATA_SUBMIT,[e.formVariantId]:t}}}_onContactSubmit(e){({formVariantId:e}=e);try{this.apiHandlers.hasOwnProperty("CONTACT_DATA_SUBMIT")&&this.apiHandlers.CONTACT_DATA_SUBMIT[e]&&this.apiHandlers.CONTACT_DATA_SUBMIT[e]({type:"CONTACT_DATA_SUBMIT"})}catch(e){}}async _showWidgetFromAnotherWidget(e){let t=da.findTestId(Le.getFormAbTestsConfig(),e.linkedToVariantId);if(t){var n=aa.getExperimentVariants().find((e=>e.testId===t));n&&(e.linkedToVariantId=n.formId)}let i=zn.getFormVariantByVariantId(e.linkedToVariantId);n=zn.getFormVariant(e.formVariantId);let r=e.triggeredByLauncher?"Launcher":"Rules";Kn.isInDebugMode(n.formId)||new ii(Bn.createFormParams(n.id,e.triggeredBy)).handle(),i?Xo.showFormFromCustomCode(i,r):await(new jn).loadIfNeeded([e.linkedToVariantId]).then((()=>{if(i=zn.getFormVariantByVariantId(e.linkedToVariantId))Xo.showFormFromCustomCode(i,r);else{let t='Error SHOW_WIDGET: widget not found. "'.concat(e.formVariantId,'" tried to show "').concat(e.linkedToVariantId,'"');Ce.error(t)}})),i&&na.onShowWidgetFromAnotherWidget(i)}destroy(){var e;null===(e=this.userActionsDetector)||void 0===e||e.destroy(),Xo.destroyAll(),Yo.destroy(),Zo.destroy(),sa.destroy()}};class Ea{static execute(){requestAnimationFrame((()=>{let e=Le.getConfig().crawler;if(e&&e.params&&e.params.customCode)try{new Function([],e.params.customCode)()}catch(e){Ce.error(e)}}))}}class va{constructor(e){this.authToken=null,this.getAuthTokenCallback=e}_getAuthToken(){return this.authToken}setAuthToken(e){this.authToken=e}async refreshAuthTokenIfNeeded(e){if(this.authToken||await this._requestToken(),"function"!=typeof e)throw Error("AuthTokenHolder#refreshAuthTokenIfNeeded must accept callback");let t=await e(this._getAuthToken());if(200===t.status)return t.body;if(401===t.status){if(await this._requestToken(),200!==(e=await e(this._getAuthToken())).status)throw Error("AuthTokenHolder#refreshAuthTokenIfNeeded failed to execute request");return e.body}}async _requestToken(){let e=await this.getAuthTokenCallback();if(!e)throw Error("AuthTokenHolder#requestToken token is undefined");if(e&&e.error)throw Error("AuthTokenHolder#requestToken ".concat(e.error));("string"==typeof e||e instanceof String)&&this.setAuthToken(e)}}t(va,"AUTH_TOKEN_HEADER_NAME","es-pull-token");class _a{constructor(e){this.url=new Hn(_a.RESOURCE_PATH).get(),this.params=null,this.httpRequestService=e}static getParams(e){return JSON.stringify({ids:e,status:"OPENED"})}updateMessagesStatus(e){return this.params=_a.getParams(e),this.httpRequestService.doRequest((e=>({status:e.status,body:!0})),_a.MESSAGE,this.url,_a.METHOD,this.params,"application/json")}}t(_a,"RESOURCE_PATH","/appinbox/v1/messages/status"),t(_a,"MESSAGE","APP_INBOX_MESSAGES_STATUS_UPDATE"),t(_a,"METHOD","POST");class fa{constructor(e){this.url=new Hn(fa.RESOURCE_PATH).get(),this.httpRequestService=e}requestCount(){return this.httpRequestService.doRequest((e=>({body:200===e.status?e.body.count:null,status:e.status})),fa.MESSAGE,this.url,fa.METHOD)}}t(fa,"RESOURCE_PATH","/appinbox/v1/messages/count"),t(fa,"MESSAGE","APP_INBOX_MESSAGES_UNREAD_COUNT"),t(fa,"METHOD","GET");class ya{constructor(e){this.url=new Hn(ya.RESOURCE_PATH).get(),this.httpRequestService=e}requestMessages(){return this.httpRequestService.doRequest((e=>({body:200===e.status?e.body.list:null,status:e.status})),ya.MESSAGE,this.url,ya.METHOD)}}t(ya,"RESOURCE_PATH","/appinbox/v1/messages"),t(ya,"MESSAGE","APP_INBOX_MESSAGES"),t(ya,"METHOD","GET");class Ta{constructor(e,t){this.url=new URL(new Hn(Ta.RESOURCE_PATH).get());let n=this._mapParams(t);Object.keys(n).forEach((e=>{n[e]&&this.url.searchParams.append(e,n[e])})),this.httpRequestService=e}static _parseAppearance(e){return{...e,translations:JSON.parse(e.translations),structures:JSON.parse(e.structures),placement:JSON.parse(e.placement)}}_mapParams(e){return{language:null==e?void 0:e.language,externalId:null==e?void 0:e.externalId}}loadAppearance(){return this.httpRequestService.doRequest((e=>({body:200===e.status?Ta._parseAppearance(e.body):null,status:e.status})),Ta.MESSAGE,this.url,Ta.METHOD)}}t(Ta,"RESOURCE_PATH","/appinbox/v1/appearance"),t(Ta,"MESSAGE","APP_INBOX_MESSAGES_APPEARANCE"),t(Ta,"METHOD","GET");class Ca{static getModel(e,t){var n;return(e=null===(n=e.structures)||void 0===n?void 0:n.models)&&e[t]||void 0}static getSharedStyles(e){return e.structures.shared}static getPropValue(e,t,n){return e&&e[t]?e[t]:n}static getSharedModelStyles(e,t){var n;return null===(n=Ca.getModel(e,t))||void 0===n?void 0:n.props.styles.shared}static getSharedModelProp(e,t,n){return e=Ca.getSharedModelStyles(e,t),Ca.getPropValue(e,n)}static getElementStyles(e,t,n){var i;return null===(i=Ca.getModel(e,t))||void 0===i?void 0:i.props.styles.elements[n]}static getMediaQueries(e,t,n){var i,r;return null!==(i=null===(r=Ca.getElementStyles(e,t,n))||void 0===r?void 0:r.mediaQueries)&&void 0!==i?i:[]}static getInlineElementStyles(e,t,n){var i;return null===(i=Ca.getElementStyles(e,t,n))||void 0===i?void 0:i.inline}static getHoverElementStyles(e,t,n){var i;return null===(i=Ca.getElementStyles(e,t,n))||void 0===i?void 0:i.hover}static getBeforeElementStyles(e,t,n){var i;return null===(i=Ca.getElementStyles(e,t,n))||void 0===i?void 0:i.before}static getAfterElementStyles(e,t,n){var i;return null===(i=Ca.getElementStyles(e,t,n))||void 0===i?void 0:i.after}static getReadElementStyles(e,t,n){var i;return null===(i=Ca.getElementStyles(e,t,n))||void 0===i?void 0:i.read}static getInlineElementProp(e,t,n,i,r,o){return e=Ca.getInlineElementStyles(e,t,n),Ca.getPropValue(e,i,r)}static getHoverElementProp(e,t,n,i,r){return e=Ca.getHoverElementStyles(e,t,n),Ca.getPropValue(e,i,r)}static getAfterElementProp(e,t,n,i,r){return e=Ca.getAfterElementStyles(e,t,n),Ca.getPropValue(e,i,r)}static getBeforeElementProp(e,t,n,i,r){return e=Ca.getBeforeElementStyles(e,t,n),Ca.getPropValue(e,i,r)}static getReadElementProp(e,t,n,i,r){return e=Ca.getReadElementStyles(e,t,n),Ca.getPropValue(e,i,r)}static getSharedProp(e,t){return e=Ca.getSharedStyles(e),Ca.getPropValue(e,t)}}class Ia{static createCallButtonStyleElement(e){return"\n    <style>\n      * {\n        font-family: ".concat(Ca.getSharedProp(e,"textFontFamily"),";\n      }\n\n      .js-pull-notification-widget-call-button-container:hover {\n        cursor: pointer;\n        background: ").concat(Ca.getHoverElementProp(e,0,0,"background"),";\n        --bell-icon-color-hover: ").concat(Ca.getHoverElementProp(e,0,1,"color","unset"),";\n      }\n\n      .js-pull-notification-widget-call-button-container:hover .js-pull-notification-call-button-label {\n        color: ").concat(Ca.getHoverElementProp(e,0,1,"color","unset"),";\n        transition: ").concat(Ca.getHoverElementProp(e,0,1,"transition","unset"),";\n      }\n    </style>\n    ")}static createStyleElement(e,t){var n,i,r;return"\n    <style>\n      * {\n        font-family: ".concat(Ca.getSharedProp(e,"textFontFamily"),";\n      }\n\n\n      .js-pull-close:hover  {\n        opacity: ").concat(Ca.getHoverElementProp(e,1,6,"opacity","0.7"),";\n      }\n\n      .js-pull-close:hover svg{\n        color: ").concat(Ca.getHoverElementProp(e,1,6,"color",""),";\n      }\n\n      .js-pull-notification-messages-preview-overlay {\n        width: 100%;\n        height: 100%;\n        z-index: 1002;\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n      }\n\n      .js-pull-notification-loading-messages-container,\n      .js-pull-notification-empty-messages-container ,\n      .js-pull-notification-error-loading-messages-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        width: 100%;\n        min-height: ").concat(Ca.getSharedModelProp(e,3,"min-height"),";\n      }\n\n      .js-pull-notification-loading-messages-container {\n        flex-direction: row;\n      }\n\n      .js-pull-notification-loading-messages,\n      .js-pull-notification-no-messages-info,\n      .js-pull-notification-error-loading-messages {\n        color: ").concat(Ca.getSharedModelProp(e,3,"color"),";\n        font-size: ").concat(Ca.getSharedModelProp(e,3,"font-size"),";\n        line-height: ").concat(Ca.getSharedModelProp(e,3,"line-height"),";\n      }\n\n      .js-pull-notification-no-messages-info {\n        margin: ").concat(Ca.getInlineElementProp(e,3,2,"margin"),";\n      }\n\n      .js-pull-notification-error-loading-messages {\n        margin: ").concat(Ca.getInlineElementProp(e,3,1,"margin"),";\n      }\n\n      .js-pull-notification-loading-messages::before, .js-pull-notification-loading-messages::after {\n        content: '';\n        display: inline-block;\n        position: absolute;\n        top: 0;\n      }\n\n      .js-pull-notification-loading-messages::before {\n        width: ").concat(Ca.getBeforeElementProp(e,3,0,"width"),";\n        height: ").concat(Ca.getBeforeElementProp(e,3,0,"height"),";\n        right: ").concat(Ca.getBeforeElementProp(e,3,0,"right"),";\n        border-radius: ").concat(Ca.getBeforeElementProp(e,3,0,"border-radius"),";\n        background: ").concat(Ca.getBeforeElementProp(e,3,0,"background"),";\n        color: ").concat(Ca.getBeforeElementProp(e,3,0,"color"),";\n        animation: ").concat(Ca.getBeforeElementProp(e,3,0,"animation"),";\n        animation-delay:  ").concat(Ca.getBeforeElementProp(e,3,0,"animation-delay"),";\n      }\n\n      .js-pull-notification-loading-messages::after {\n        width: ").concat(Ca.getAfterElementProp(e,3,0,"width"),";\n        height: ").concat(Ca.getAfterElementProp(e,3,0,"height"),";\n        left: ").concat(Ca.getAfterElementProp(e,3,0,"left"),";\n        border-radius: ").concat(Ca.getAfterElementProp(e,3,0,"border-radius"),";\n        background: ").concat(Ca.getAfterElementProp(e,3,0,"background"),";\n        color: ").concat(Ca.getAfterElementProp(e,3,0,"color"),";\n        animation: ").concat(Ca.getAfterElementProp(e,3,0,"animation"),";\n        animation-delay:  ").concat(Ca.getAfterElementProp(e,3,0,"animation-delay"),";\n      }\n\n      ").concat(e.structures.models[3].props.styles.elements[0].animations,"\n\n      .js-pull-notification-error-loading-messages-retry-button svg {\n        margin: ").concat(Ca.getInlineElementProp(e,3,4,"margin"),";\n      }\n\n      .js-pull-notification-error-loading-messages-retry-button:hover {\n        background: ").concat(Ca.getHoverElementProp(e,3,3,"background"),";\n      }\n\n      .js-pull-notification-message-content-container {\n        display: ").concat(Ca.getInlineElementProp(e,2,5,"display","flex"),";\n        flex-direction: ").concat(Ca.getInlineElementProp(e,2,5,"flex-direction","column"),";\n        width: ").concat(Ca.getInlineElementProp(e,2,5,"width","100%"),";\n        margin: ").concat(Ca.getInlineElementProp(e,2,5,"margin"),";\n        position: ").concat(Ca.getInlineElementProp(e,2,5,"position","relative"),";\n      }\n\n      .js-pull-notification-retry-messages-button {\n        width: ").concat(Ca.getInlineElementProp(e,3,3,"width"),";\n        height: ").concat(Ca.getInlineElementProp(e,3,3,"height"),";\n      }\n\n      .js-pull-notification-message-divider {\n        border: ").concat(Ca.getInlineElementProp(e,1,3,"border"),";\n        border-top: ").concat(Ca.getInlineElementProp(e,1,3,"border-top"),";\n        margin: 0;\n      }\n\n      .js-pull-notification-widget-container {\n        display: flex;\n        color: ").concat(Ca.getInlineElementProp(e,1,4,"color"),";\n        margin: ").concat(Ca.getInlineElementProp(e,1,4,"margin"),";\n      }\n\n      .js-pull-notification-messages-container {\n        z-index: ").concat(t?1:11001,";\n      }\n\n      .js-pull-notification-messages::-webkit-scrollbar {\n         width: 5px;\n         background-color: transparent;\n        }\n\n      .js-pull-notification-messages::-webkit-scrollbar-thumb {\n        border-right: 2px solid ;\n        width: 2px;\n        background-color: transparent;\n        border-radius: 0;\n      }\n\n      .js-pull-notification-messages::-webkit-scrollbar-track-piece:end {\n        background: transparent;\n        margin-bottom: 40px;\n      }\n\n      .js-pull-notification-messages::-webkit-scrollbar-track-piece:start {\n        background: transparent;\n        margin-top: 40px;\n      }\n\n      .js-pull-notification-messages-backdrop {\n        width: 100vw;\n        height: 100vh;\n        position: fixed;\n        background: ").concat(Ca.getInlineElementProp(e,1,1,"background"),";\n        top: 0;\n        left: 0;\n        z-index: ").concat(t?999:11e3,";\n      }\n\n      .js-pull-notification-message:hover {\n        background: ").concat(Ca.getHoverElementProp(e,2,0,"background"),";\n        margin: ").concat(Ca.getHoverElementProp(e,2,0,"margin",""),";\n        padding: ").concat(Ca.getHoverElementProp(e,2,0,"padding",""),";\n        cursor: default;\n      }\n\n      .js-pull-notification-message-url:hover {\n        cursor: pointer;\n      }\n\n      .js-pull-notification-message-read {\n        opacity: ").concat(Ca.getReadElementProp(e,2,1,"opacity","1"),";\n      }\n\n      .js-pull-notification-message-content,\n      .js-pull-notification-message-title {\n        word-wrap: break-word;\n        word-break: break-word;\n      }\n\n      .js-pull-notification-message-read .js-pull-notification-message-title {\n        color: ").concat(null!==(n=Ca.getReadElementProp(e,2,2,"color"))&&void 0!==n?n:Ca.getHoverElementProp(e,2,2,"color"),";\n      }\n\n      .js-pull-notification-message:hover .js-pull-notification-message-title {\n        color: ").concat(Ca.getHoverElementProp(e,2,2,"color"),";\n      }\n\n      .js-pull-notification-message-read .js-pull-notification-message-content {\n        color: ").concat(null!==(i=Ca.getReadElementProp(e,2,3,"color"))&&void 0!==i?i:Ca.getHoverElementProp(e,2,3,"color"),";\n      }\n\n      .js-pull-notification-message:hover .js-pull-notification-message-content {\n        color: ").concat(Ca.getHoverElementProp(e,2,3,"color"),";\n      }\n\n      .js-pull-notification-message-read .js-pull-notification-message-created-date {\n        color: ").concat(null!==(r=Ca.getReadElementProp(e,2,4,"color"))&&void 0!==r?r:Ca.getHoverElementProp(e,2,4,"color"),";\n      }\n\n      .js-pull-notification-message:hover .js-pull-notification-message-created-date {\n        color: ").concat(Ca.getHoverElementProp(e,2,4,"color"),";\n      }\n\n      .js-pull-notification-message:hover .js-pull-notification-message-button {\n        background: ").concat(Ca.getHoverElementProp(e,2,5,"background"),";\n      }\n\n      ::-webkit-scrollbar {\n        width: 6px;\n        height: 6px;\n        background-color: transparent;\n      }\n\n      ::-webkit-scrollbar-track {\n        background-color: transparent;\n      }\n\n      ::-webkit-scrollbar-thumb {\n        border-radius: 6px;\n        background-color: #848484;\n      }\n\n      ::-webkit-scrollbar-thumb:hover {\n        background-color: #5e5d5d;\n      }\n    </style>\n    ")}}class Sa{static setDayStart(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}static combineParts(e){let t=Sa.getPartTypeValue(e,"day"),n=Sa.getPartTypeValue(e,"month"),i=Sa.getPartTypeValue(e,"year"),r=Sa.getPartTypeValue(e,"hour");return e=Sa.getPartTypeValue(e,"minute"),new Date(i,n-1,t,r,e)}static convertTZ(e,t){let n=Sa.getTimeFormatter(t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"UTC","numeric").formatToParts(e);return Sa.combineParts(n)}static yesterdayDate(e){let t=Sa.convertTZ(new Date,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"UTC");return t.setDate(t.getDate()-1),t.setHours(10,3,0,0),t}static getTimeFormatter(e){return new Intl.DateTimeFormat(Sa.locales[e],{weekday:"long",year:"numeric",month:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,timeZone:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"UTC"})}static getPartTypeValue(e,t){var n;return null===(n=e.find((e=>e.type===t)))||void 0===n?void 0:n.value}static getDisplayDate(e,t,n){var i=Sa.convertTZ(new Date,t.language,n);Sa.setDayStart(i);let r=6e4*i.getTimezoneOffset();i.setHours(0,0,0,0);var o=new Date(i);o.setDate(o.getDate()-1);let s=Sa.convertTZ(+e-r,t.language,n);Sa.setDayStart(s);var a=Sa.getTimeFormatter(t.language);return e=Sa.convertTZ(+e-r,t.language,n),n=a.formatToParts(e),a=Sa.getPartTypeValue(n,"hour"),e=Sa.getPartTypeValue(n,"minute"),s.setHours(0,0,0,0),s.getTime()===i.getTime()?t.translations[t.structures.models[2].props.date.today]+", "+("0"+a).slice(-2)+":"+("0"+e).slice(-2):s.getTime()===o.getTime()?t.translations[t.structures.models[2].props.date.yesterday]+", "+("0"+a).slice(-2)+":"+("0"+e).slice(-2):(t=Sa.getPartTypeValue(n,"day"),i=Sa.getPartTypeValue(n,"month"),o=Sa.getPartTypeValue(n,"year"),("0"+t).slice(-2)+" "+i+"".concat(i.endsWith(".")?" ":". ")+o+", "+("0"+a).slice(-2)+":"+("0"+e).slice(-2))}static formatDate(e,t,n,i){var r;return e.language=(null!==(r=e.language)&&void 0!==r?r:"").toLowerCase(),n=null!=n?n:Intl.DateTimeFormat().resolvedOptions().timeZone,i&&"preview"===i&&(t=Sa.yesterdayDate(e.language,n).getTime()),Sa.getDisplayDate(t,e,n)}}t(Sa,"locales",{ru:"ru-RU",en:"en-US",uk:"uk-UA",ua:"uk-UA"});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var ba,Aa,Oa,Na=(ba=Oa={exports:{}},Aa=function(){function e(e){var t=e.tags;if(!Object.keys(t).map((function(e){return typeof t[e]})).every((function(e){return"object"===e||"boolean"===e||"function"===e})))throw Error("The configuration was invalid");this.config=e}function t(e){return-1!==n.indexOf(e.nodeName)}var n="P LI TD TH DIV H1 H2 H3 H4 H5 H6 PRE".split(" "),i="A B STRONG I EM SUB SUP U STRIKE".split(" ");return e.prototype.clean=function(e){let t=document.implementation.createHTMLDocument(),n=t.createElement("div");return n.innerHTML=e,this._sanitize(t,n),n.innerHTML},e.prototype._sanitize=function(e,n){var r=e.createTreeWalker(n,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1),o=r.firstChild();if(o)do{if(o.nodeType!==Node.TEXT_NODE){if(o.nodeType===Node.COMMENT_NODE){n.removeChild(o),this._sanitize(e,n);break}var s,a=-1!==i.indexOf(o.nodeName);a&&(s=Array.prototype.some.call(o.childNodes,t));var l=!!n.parentNode,c=t(n)&&t(o)&&l,d=o.nodeName.toLowerCase();if(l="function"==typeof(l=this.config).tags[d]?l.tags[d](o):l.tags[d],(a=a&&s)||(a=void 0===l||"boolean"==typeof l&&!l),a||!this.config.keepNestedBlockElements&&c){if("SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName)for(;0<o.childNodes.length;)n.insertBefore(o.childNodes[0],o);n.removeChild(o),this._sanitize(e,n);break}for(a=0;a<o.attributes.length;a+=1){e:{var h=l,u=o,m=(d=c=o.attributes[a]).name.toLowerCase();if(!0!==h){if("function"==typeof h[m]){d=!h[m](d.value,u);break e}if(void 0===h[m]||!1===h[m]){d=!0;break e}if("string"==typeof h[m]){d=h[m]!==d.value;break e}}d=!1}d&&(o.removeAttribute(c.name),--a)}this._sanitize(e,o)}else if(""===o.data.trim()&&(o.previousElementSibling&&t(o.previousElementSibling)||o.nextElementSibling&&t(o.nextElementSibling))){n.removeChild(o),this._sanitize(e,n);break}}while(o=r.nextSibling())},e},void(ba.exports=Aa()),Oa.exports);class Ra{static sanitize(e){try{return new Na(Ra.config).clean(e)}catch(e){return Ce.error(e,"HTMLSanitizer failure"),""}}}t(Ra,"config",{tags:{b:{},i:{},u:{},a:{href:!0,target:!0},br:{},strike:{},span:{style:!0},div:{},ul:{},ol:{},li:{}}});class Ma{static widgetCallButtonMediaQueryConstructParams(e){return[{element:"widget_call_button_container",className:"js-pull-notification-widget-call-button-container",mediaQueries:()=>Ca.getMediaQueries(e,1,4)},{element:"messages_counter",className:"js-pull-notification-messages-counter",mediaQueries:()=>Ca.getMediaQueries(e,0,2)},{element:"call_button",className:"js-pull-notification-call-button-container",mediaQueries:()=>Ca.getMediaQueries(e,0,0)},{element:"bell_icon",className:"js-pull-notification-bell-icon",mediaQueries:()=>Ca.getMediaQueries(e,0,1)},{element:"call_button_label",className:"js-pull-notification-call-button-label",mediaQueries:()=>Ca.getMediaQueries(e,0,3)}]}static widgetMediaQueryConstructParams(e){return[{element:"widget_container",className:"js-pull-notification-widget-container",mediaQueries:()=>Ca.getMediaQueries(e,1,4)},{element:"container_host",className:"js-pull-notification-messages-container",mediaQueries:()=>Ca.getMediaQueries(e,1,0)},{element:"scroll_container",className:"js-pull-notification-messages",mediaQueries:()=>Ca.getMediaQueries(e,1,2)},{element:"messageWithImage_image",className:"js-pull-notification-message-image",mediaQueries:()=>Ca.getMediaQueries(e,2,1)},{element:"messageWithImage_title",className:"js-pull-notification-message-title",mediaQueries:()=>Ca.getMediaQueries(e,2,2)},{element:"messageWithImage_content",className:"js-pull-notification-message-content",mediaQueries:()=>Ca.getMediaQueries(e,2,3)},{element:"messageWithImage_date",className:"js-pull-notification-message-created-date",mediaQueries:()=>Ca.getMediaQueries(e,2,4)},{element:"messageWithImage_contentContainer",className:"js-pull-notification-message-content-container",mediaQueries:()=>Ca.getMediaQueries(e,2,5)},{element:"container_messagesHeader",className:"js-pull-close-header",mediaQueries:()=>Ca.getMediaQueries(e,1,5)},{element:"container_closeButton",className:"js-pull-close",mediaQueries:()=>Ca.getMediaQueries(e,1,6)},{element:"container_backdrop",className:"js-pull-notification-messages-backdrop",mediaQueries:()=>Ca.getMediaQueries(e,1,1)},{element:"container_messagesHeaderMessage",className:"js-pull-close-header-message",mediaQueries:()=>Ca.getMediaQueries(e,1,7)}]}static getMediaQueryByClass(e,t){return(e=[...Ma.widgetMediaQueryConstructParams(e),...Ma.widgetCallButtonMediaQueryConstructParams(e)].find((e=>e.className===t)))?e.mediaQueries():[]}static applyStyleToElement(e,t,n,i){n=n.style,Ma.getMediaQueryByClass(e,i).forEach((e=>{window.matchMedia(e.media).matches&&(t=Object.assign({},t,e.styleAttributes))}));for(let e in t)t.hasOwnProperty(e)&&n.setProperty(e,t[e])}static screenSizeChanged(e){let t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e(),window.addEventListener("resize",(function(){let i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;i===t&&r===n||(e(),t=i,n=r)}))}}class La{static createMessageElement(e,t,n,i,r,o,s){return(r=La.createMessageContainerElement(e,t,i,r,o,s)).appendChild(La.createMessageImageElement(e,t,e.structures.media.imagePlaceholder)),(o=La.createMessageContentContainerElement()).appendChild(La.createMessageTitleElement(e,t)),t.content&&o.appendChild(La.createMessageContentElement(e,t)),o.appendChild(La.createMessageDateElement(e,t.createDate,n,i)),La.getAppearanceContentButtonModel(e)&&e.translations["message.btn.label"]&&o.appendChild(La.createButtonElement(t,e)),r.appendChild(o),r}static getAppearanceContentButtonModel(e){var t;return!!(e=e.structures.models.find((e=>"MESSAGE_WITH_IMAGE"===e.type)))&&(null===(t=e.props.styles)||void 0===t?void 0:t.elements.find((e=>"button"===e.element)))}static async executeLink(e,t,n,i,r,o){t&&("testView"!==e&&(await i(),await r()),window.open(t,n))}static createMessageContainerElement(e,t,n,i,r,o){let s=document.createElement("div"),a=Ca.getInlineElementStyles(e,2,0);return Ma.screenSizeChanged((()=>Ma.applyStyleToElement(e,a,s,"js-pull-notification-message"))),s.setAttribute("id",t.id),s.classList.add("js-pull-notification-message"),t.newMessage||s.classList.add("js-pull-notification-message-read"),t.link&&s.classList.add("js-pull-notification-message-url"),s.addEventListener("click",(async e=>{var s;if("preview"!==n){var a=e.target.closest(".js-pull-notification-message-content a");a?(e.preventDefault(),await La.executeLink(n,a.href,a.target,i,r,o)):(e=null!=t&&null!==(s=t.settings)&&void 0!==s&&s.openLinkInNewTab?"_blank":"_self",await La.executeLink(n,t.link,e,i,r,o))}})),s}static createMessageContentContainerElement(){let e=document.createElement("div");return e.classList.add("js-pull-notification-message-content-container"),e}static getMessageContentContainerElement(e){return e.querySelector("div.js-pull-notification-message-content-container")}static createMessageTitleElement(e,t){var n;let i=document.createElement("span"),r=Ca.getInlineElementStyles(e,2,2);return Ma.screenSizeChanged((()=>Ma.applyStyleToElement(e,r,i,"js-pull-notification-message-title"))),i.classList.add("js-pull-notification-message-title"),i.innerText="".concat(null!==(n=t.title)&&void 0!==n?n:""),i}static getMessageTitleElement(e){return e.querySelector("span.js-pull-notification-message-title")}static createMessageContentElement(e,t){let n=document.createElement("span"),i=Ca.getInlineElementStyles(e,2,3);return Ma.screenSizeChanged((()=>Ma.applyStyleToElement(e,i,n,"js-pull-notification-message-content"))),n.classList.add("js-pull-notification-message-content"),n.innerHTML=Ra.sanitize(t.content),n}static getMessageContentElement(e){return e.querySelector("span.js-pull-notification-message-content")}static createMessageImageElement(e,t,n){let i=document.createElement("img"),r=Ca.getInlineElementStyles(e,2,1);return Ma.screenSizeChanged((()=>Ma.applyStyleToElement(e,r,i,"js-pull-notification-message-image"))),i.classList.add("js-pull-notification-message-image"),i.src=t.image?"".concat(t.image):"".concat(n),i}static getMessageImageElement(e){return e.querySelector("img.js-pull-notification-message-image")}static createMessageDateElement(e,t,n,i){let r=document.createElement("span"),o=Ca.getInlineElementStyles(e,2,4);return Ma.screenSizeChanged((()=>Ma.applyStyleToElement(e,o,r,"js-pull-notification-message-created-date"))),r.classList.add("js-pull-notification-message-created-date"),r.innerText=Sa.formatDate(e,t,n,i),r}static getMessageDateElement(e){return e.querySelector("span.js-pull-notification-message-created-date")}static createButtonElement(e,t){var n;let i=document.createElement("a"),r=Ca.getInlineElementStyles(t,2,6);return Ma.screenSizeChanged((()=>Ma.applyStyleToElement(t,r,i,"js-pull-notification-message-button"))),i.classList.add("js-pull-notification-message-button"),i.innerText=t.translations["message.btn.label"],i.href=e.link,i.target=null!=e&&null!==(n=e.settings)&&void 0!==n&&n.openLinkInNewTab?"_blank":"_self",t.structures.media.buttonIcon&&i.insertAdjacentHTML("beforeend","".concat(t.structures.media.buttonIcon)),i}static getButtonElement(e){return e.querySelector(".js-pull-notification-message-button")}static createMessageDivider(){let e=document.createElement("hr");return e.classList.add("js-pull-notification-message-divider"),e}constructor(){this._widgetBodyElement=this._messagesBackdrop=this._bellIconElement=this._messagesCounter=this._messagesElement=this._messagesContainer=this._widgetCallButtonElement=this._callButtonElement=this._widgetContainer=this._connector=null}setConnector(e){this._connector=e}setWidgetBodyElement(e){this._widgetBodyElement=e}getWidgetBodyElement(){return this._widgetBodyElement}callButtonHostElement(){var e;return null===(e=this._connector)||void 0===e?void 0:e.getRootElement()}hostElement(){return document.body.querySelector(".js-pull-notification-host-element")}widgetContainer(){return!this._widgetContainer&&this.hostElement()&&(this._widgetContainer=this.hostElement().shadowRoot.querySelector(".js-pull-notification-widget-container")),this._widgetContainer}widgetCallButtonElement(){return this._widgetCallButtonElement||(this._widgetCallButtonElement=this.callButtonHostElement().shadowRoot.querySelector(".js-pull-notification-widget-call-button-container")),this._widgetCallButtonElement}callButtonElement(){return this._callButtonElement||(this._callButtonElement=this.callButtonHostElement().shadowRoot.querySelector(".js-pull-notification-call-button-container")),this._callButtonElement}messagesBackdropElement(){return this._messagesBackdrop||(this._messagesBackdrop=this.hostElement().shadowRoot.querySelector(".js-pull-notification-messages-backdrop")),this._messagesBackdrop}messagesContainer(){return this._messagesContainer||(this._messagesContainer=this.hostElement().shadowRoot.querySelector(".js-pull-notification-messages-container")),this._messagesContainer}messagesElement(){return this._messagesElement||(this._messagesElement=this.hostElement().shadowRoot.querySelector(".js-pull-notification-messages")),this._messagesElement}messagesCounter(){return this._messagesCounter||(this._messagesCounter=this.callButtonHostElement().shadowRoot.querySelector(".js-pull-notification-messages-counter")),this._messagesCounter}bellIconElement(){return this._bellIconElement||(this._bellIconElement=this.callButtonHostElement().shadowRoot.querySelector(".js-pull-notification-bell-icon")),this._bellIconElement}}class wa{static setStyles(e,t){t&&Object.keys(t).forEach((n=>{e.style[n]=t[n]}))}constructor(e){this.pullMessageElements=new La,this.mode=e,this.injectedNewMessagesIds=[],this.updateReadStatusMessagesIds=[],this.injectedMessages=[],this._messages=[],this.messagesCount=0,this.loadigMessagesError=this.loadingMessages=!1,this._listeners=this._updateMessagesStatusFn=this._requestMessagesFn=this._retryFn=this._customEmptyMessageElementName=this._appearance=this._timeZone=null,this.setEventListeners()}setEventListeners(){this._listeners={retryButtonElementClick:{target:null,type:"click",listener:e=>{e.preventDefault(),e.stopPropagation(),this.retryRequests().then()}},retryButtonElementTouched:{target:null,type:"touchend",listener:e=>{e.preventDefault(),e.stopPropagation(),this.retryRequests().then()}},widgetCallButtonContainerClick:{target:null,type:"click",listener:e=>{e.preventDefault(),e.stopPropagation(),this.toggleVisibility().then()}},widgetCallButtonContainerTouched:{target:null,type:"touchend",listener:e=>{e.preventDefault(),e.stopPropagation(),this.toggleVisibility().then()}},closeButtonClick:{target:null,type:"click",listener:e=>{e.preventDefault(),e.stopPropagation(),this.toggleVisibility().then()}},closeButtonTouched:{target:null,type:"touchend",listener:e=>{e.cancelable&&e.preventDefault(),e.stopPropagation(),this.hideMessagesBackdropIfNeeded()}},messagesBackdropElementClick:{target:null,type:"click",listener:e=>{e.preventDefault(),e.stopPropagation(),this.toggleVisibility().then()}},messagesBackdropElementTouched:{target:null,touched:"touchend",listener:e=>{e.cancelable&&e.preventDefault(),e.stopPropagation(),this.hideMessagesBackdropIfNeeded()}},messagesBackdropElementTouchmove:{target:null,type:"touchmove",listener:e=>{this.hideMessagesBackdropIfNeeded()}}}}getEventListener(e){return this._listeners[e].listener}getEventType(e){return this._listeners[e].type}getEventListenerTarget(e){return this._listeners[e].target}setEventListenerTarget(e,t){this._listeners[e].target=t}addListener(e,t,n){this._listeners[e]={type:t,listener:n,target:3<arguments.length&&void 0!==arguments[3]?arguments[3]:null}}destroy(){Object.keys(this._listeners).forEach((e=>{this._listeners[e].target&&this._listeners[e].target.removeEventListener(this._listeners[e].type,this._listeners[e].listener)}));let e=this.pullMessageElements.getWidgetBodyElement(),t=this.pullMessageElements.callButtonHostElement();e&&e.remove(),t&&t.remove()}setMessages(e){this._messages=e}setTimeZone(e){this._timeZone=X(e)}setAppearance(e){this._appearance=e}getAppearance(){return this._appearance}setCustomEmptyMessageElementName(e){e.hasOwnProperty("customEmptyMessageElementName")&&(this._customEmptyMessageElementName=e.customEmptyMessageElementName)}getCustomEmptyMessageElementName(){return this._customEmptyMessageElementName}setRetryFn(e){this._retryFn=e}setUpdateMessagesStatusFn(e){this._updateMessagesStatusFn=e}setRequestMessagesFn(e){this._requestMessagesFn=e}toggleLoadingState(){this.loadingMessages=!this.loadingMessages,this.toggleSystemMessages()}retryRequests(){return Promise.resolve().then((()=>{this.loadigMessagesError=!1,this.toggleLoadingState(),this._retryFn()}))}removeElements(e){let t=this.pullMessageElements.hostElement();e.forEach((e=>{(e=t.shadowRoot.querySelectorAll(e)).length&&e.forEach((e=>e.remove()))}))}clearSystemMessages(){this.loadingMessages||this.removeElements([".js-pull-notification-loading-messages-container"]),this.loadigMessagesError||this.removeElements([".js-pull-notification-error-loading-messages-container"]),(this.loadingMessages||this.loadigMessagesError||this.injectedMessages.length)&&this.removeElements([".js-pull-notification-empty-messages-container"])}displayNoNotificationsMessage(){let e=document.createElement("div");e.classList.add("js-pull-notification-empty-messages-container");var t=this.getCustomEmptyMessageElementName();t?((t=customElements.get(t))&&e.appendChild(new t),this.pullMessageElements.messagesElement().appendChild(e),setTimeout((()=>{this.updateMessagesContainerPosition()}),1)):((t=document.createElement("span")).classList.add("js-pull-notification-no-messages-info"),t.innerText=this._appearance.translations[this._appearance.structures.models[3].props.emptyMessagesLabel],e.appendChild(t),this.pullMessageElements.messagesElement().appendChild(e))}displayLoadingNotificationsMessage(){let e=document.createElement("div");e.classList.add("js-pull-notification-loading-messages-container");let t=document.createElement("div");t.classList.add("js-pull-notification-loading-messages");let n=Ca.getInlineElementStyles(this._appearance,3,0);Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,n,t,"js-pull-notification-loading-messages"))),e.appendChild(t),this.pullMessageElements.messagesElement().appendChild(e)}displayLoadingErrorNotificationsMessage(){let e=document.createElement("div");e.classList.add("js-pull-notification-error-loading-messages-container");let t=document.createElement("div");t.classList.add("js-pull-notification-error-loading-messages"),t.innerHTML=this._appearance.translations[this._appearance.structures.models[3].props.retry.message];let n=this._appearance.structures.models[3].props.retry.buttonLabel,i=document.createElement("div");i.innerHTML="".concat(this._appearance.structures.media.reloadIcon," ").concat(this._appearance.translations[n]);let r=Ca.getInlineElementStyles(this._appearance,3,3);Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,r,i,"js-pull-notification-error-loading-messages-retry-button"))),i.classList.add("js-pull-notification-error-loading-messages-retry-button"),this.setEventListenerTarget("retryButtonElementClick",i),i.addEventListener(this.getEventType("retryButtonElementClick"),this.getEventListener("retryButtonElementClick")),this.setEventListenerTarget("retryButtonElementTouched",i),i.addEventListener(this.getEventType("retryButtonElementTouched"),this.getEventListener("retryButtonElementTouched")),e.appendChild(t),e.appendChild(i),this.pullMessageElements.messagesElement().appendChild(e)}toggleSystemMessages(){this.clearSystemMessages(),this.loadingMessages?this.displayLoadingNotificationsMessage():this.loadigMessagesError?this.displayLoadingErrorNotificationsMessage():this.loadingMessages||this.loadigMessagesError||this.injectedMessages.length||this.displayNoNotificationsMessage()}getDefaultMessagesHeight(){let e=this.pullMessageElements.messagesElement().scrollHeight,t=parseInt(this._appearance.structures.models[1].props.styles.elements[2].inline["max-height"],10);return 0<t?t:500<e?500:e}defaultMenuPosition(){var e,t,n=this._appearance.structures.models[1].props.styles.elements[0].offsetPosition;let i=parseInt(null!==(e=null==n?void 0:n.right)&&void 0!==e?e:"50",10);return e=parseInt(null!==(t=null==n?void 0:n.top)&&void 0!==t?t:"10",10),t=this.pullMessageElements.callButtonElement().getBoundingClientRect(),n=this.pullMessageElements.messagesContainer().getBoundingClientRect(),{messagesContainerStyles:{top:"".concat(e+t.top+t.height,"px"),left:"".concat(i+t.left+t.width-n.width,"px")},messagesStyles:{"max-height":"".concat(this.getDefaultMessagesHeight(),"px")}}}adjustPosition(e,t,n){let i,r=t;if(e+r<=n)return{top:e};if(0<e)for(;0<e;){if(i=e+r,i<=n)return{top:e};e-=10}return 0>=e&&(e=0,t>n&&(r=n)),{top:e,maxHeight:r}}rightMenuPosition(){var e=this.pullMessageElements.widgetCallButtonElement().getBoundingClientRect();let t=window.innerHeight||document.documentElement.clientHeight,n=25+e.left+e.width;return e=this.adjustPosition(e.top-69+e.height/2,this.getDefaultMessagesHeight(),t),{messagesContainerStyles:{transition:"top 0.5s linear 0s",top:"".concat(e.top,"px"),left:"".concat(n,"px")},messagesStyles:{"max-height":null!=e&&e.maxHeight?"".concat(e.maxHeight,"px"):"".concat(this.getDefaultMessagesHeight(),"px")}}}messagesPosition(){var e;let t=null===(e=this._appearance.structures.shared)||void 0===e?void 0:e.menuPosition;return t&&"right"===t?this.rightMenuPosition():this.defaultMenuPosition()}getBellIcon(){let e=document.createElement("div");e.classList.add("js-pull-notification-bell-icon");let t=Ca.getInlineElementStyles(this._appearance,0,1),n="var(--bell-icon-color-hover, var(--bell-icon-color, ".concat(Ca.getInlineElementProp(this._appearance,0,1,"color"),"))");return Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,{...t,color:n},e,"js-pull-notification-bell-icon"))),e.insertAdjacentHTML("afterbegin","".concat(this._appearance.structures.media.bellIcon)),e}async setMessageReadStatus(){await new Promise((e=>{let t=this.pullMessageElements.messagesElement();this.updateReadStatusMessagesIds.forEach((e=>{var n=t.querySelector(".js-pull-notification-message#".concat(e));n&&(n.classList.add("js-pull-notification-message-read"),-1<(n=this.injectedMessages.findIndex((t=>t.id===e)))&&(this.injectedMessages[n].newMessage=!1))})),this.updateReadStatusMessagesIds=[],e()})).catch((e=>{}))}hideMessagesBackdropIfNeeded(){"visible"===this.pullMessageElements.messagesBackdropElement().style.visibility&&this.toggleVisibility().then()}updateMessagesContainerPosition(){let e=this.pullMessageElements.messagesContainer();var t=this.messagesPosition();if(wa.setStyles(e,t.messagesContainerStyles),"default"!==(t=t.messagesStyles).maxHeight){let e=this.pullMessageElements.messagesElement();wa.setStyles(e,t)}Ma.applyStyleToElement(this._appearance,Ca.getInlineElementStyles(this._appearance,1,0),e,"js-pull-notification-messages-container")}async toggleVisibility(){let e=this.pullMessageElements.messagesBackdropElement(),t=this.pullMessageElements.messagesContainer();"hidden"===e.style.visibility?(this.updateMessagesContainerPosition(),e.style.visibility="visible",t.style.visibility="visible",t.style.opacity="1",this.toggleLoadingState(),await this._requestMessagesFn()):(t.style.opacity="0",setTimeout((()=>{t.style.visibility="hidden"}),300),e.style.visibility="hidden",this.loadigMessagesError=!1,this.clearSystemMessages(),await this._updateMessagesStatusFn(),await this.setMessageReadStatus(),this.updateUnreadCount(0))}prependMessages(e){this.removeElements([".js-pull-notification-message",".js-pull-notification-message-divider"]);let t=this.pullMessageElements.messagesElement(),n=t.querySelectorAll(".js-pull-notification-message");e.length&&(n.length&&t.prepend(La.createMessageDivider()),e.reverse().forEach(((n,i)=>{0!==i&&i<=e.length-1&&t.prepend(La.createMessageDivider()),t.prepend(n)})))}updateUnreadCount(e){this.messagesCount=e;let t=this.pullMessageElements.messagesCounter(),n=this.pullMessageElements.bellIconElement();(100<e||0<e&&100>e)&&(t.style.display="flex",t.innerHTML=100<e?"":"".concat(this.messagesCount),n.classList.add("js-pull-notification-bell-icon-active")),0===e&&(t.style.display="none",t.innerHTML="",n.classList.remove("js-pull-notification-bell-icon-active"))}toggleErrorState(){this.loadingMessages=!1,this.loadigMessagesError=!0,this.toggleSystemMessages()}updateMessages(){let e=[];this._messages.length&&(this._messages.sort(((e,t)=>new Date(t.createDate)-new Date(e.createDate))).forEach((t=>{t.newMessage&&this.injectedNewMessagesIds.push(t.id),t=La.createMessageElement(this._appearance,t,this._timeZone,this.mode,this._updateMessagesStatusFn,this.setMessageReadStatus,this.updateUnreadCount),e.push(t)})),this.injectedMessages=this._messages.slice()),this.toggleLoadingState(),this.prependMessages(e),this.updateMessagesContainerPosition()}createCallButton(e){var t,n,i,r,o,s=document.createElement("div");s.classList.add("js-pull-notification-call-button-host-element"),s.style.display="inline-flex",s.style.alignSelf="center",s.style.position="relative",s.style.justifyContent="center";let a=null!==(t=null===(n=this._appearance.structures.models[4])||void 0===n||null===(i=n.props.styles.elements[1].inline)||void 0===i?void 0:i.width)&&void 0!==t?t:null;a&&(s.style.width=a),s.attachShadow({mode:"open"}),t=Ia.createCallButtonStyleElement(this._appearance);let l=document.createElement("div");l.classList.add("js-pull-notification-widget-call-button-container");let c=Ca.getInlineElementStyles(this._appearance,1,4);Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,c,l,"js-pull-notification-widget-call-button-container"))),l.innerHTML=t;let d=document.createElement("div");d.classList.add("js-pull-notification-call-button-container");let h=Ca.getInlineElementStyles(this._appearance,0,0);Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,h,d,"js-pull-notification-call-button-container"))),d.appendChild(this.getBellIcon());let u=document.createElement("div"),m=Ca.getInlineElementStyles(this._appearance,0,2);if(Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,m,u,"js-pull-notification-messages-counter"))),u.style.display="none",u.classList.add("js-pull-notification-messages-counter"),d.appendChild(u),l.appendChild(d),null!==(r=null===(o=this._appearance.structures.shared)||void 0===o?void 0:o.showLabel)&&void 0!==r&&r){var p,g;let t=document.createElement("div"),n=Ca.getInlineElementStyles(this._appearance,0,3);Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,{...n,display:e?"none":"block"},t,"js-pull-notification-call-button-label"))),t.classList.add("js-pull-notification-call-button-label"),r=null===(p=this._appearance.structures.models[0])||void 0===p||null===(g=p.props)||void 0===g?void 0:g.menuLabel,t.innerText=r?this._appearance.translations[r]:"",l.appendChild(t)}return this.setEventListenerTarget("widgetCallButtonContainerClick",l),l.addEventListener(this.getEventType("widgetCallButtonContainerClick"),this.getEventListener("widgetCallButtonContainerClick")),this.setEventListenerTarget("widgetCallButtonContainerTouched",l),l.addEventListener(this.getEventType("widgetCallButtonContainerTouched"),this.getEventListener("widgetCallButtonContainerTouched")),s.shadowRoot.appendChild(l),(s=new Qt(this._appearance.placement,s,null)).connectRootToTarget(),s}closeButtonHeader(){var e,t,n;let i=document.createElement("div");i.classList.add("js-pull-close-header");let r=Ca.getInlineElementStyles(this._appearance,1,5);Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,r,i,"js-pull-close-header")));let o=document.createElement("div");o.classList.add("js-pull-close-header-message");let s=Ca.getInlineElementStyles(this._appearance,1,7);Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,s,o,"js-pull-close-header-message")));let a=null===(e=this._appearance.structures.models[1])||void 0===e||null===(t=e.props)||void 0===t?void 0:t.messagesHeader;o.innerText=a?this._appearance.translations[a]:"";let l=document.createElement("div");null!==(n=this._appearance.structures.media)&&void 0!==n&&n.closeIcon&&l.insertAdjacentHTML("afterbegin","".concat(this._appearance.structures.media.closeIcon)),l.classList.add("js-pull-close");let c=Ca.getInlineElementStyles(this._appearance,1,6);return Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,c,l,"js-pull-close"))),this.setEventListenerTarget("closeButtonClick",l),l.addEventListener(this.getEventType("closeButtonClick"),this.getEventListener("closeButtonClick")),this.setEventListenerTarget("closeButtonTouched",l),l.addEventListener(this.getEventType("closeButtonTouched"),this.getEventListener("closeButtonTouched")),e=La.createMessageDivider(),i.appendChild(o),i.appendChild(l),i.appendChild(e),i}createWidgetBody(){let e=document.createElement("div");e.classList.add("js-pull-notification-host-element"),e.style.alignSelf="center",e.attachShadow({mode:"open"});var t=Ia.createStyleElement(this._appearance);let n=document.createElement("div");n.classList.add("js-pull-notification-widget-container");let i=Ca.getInlineElementStyles(this._appearance,1,4);Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,i,n,"js-pull-notification-widget-container"))),n.innerHTML=t,t=this.closeButtonHeader();let r=document.createElement("div");r.classList.add("js-pull-notification-messages-container");let o=Ca.getInlineElementStyles(this._appearance,1,0);Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,o,r,"js-pull-notification-messages-container"))),r.style.opacity="0",setTimeout((()=>{r.style.visibility="hidden"}),300);let s=document.createElement("div"),a=Ca.getInlineElementStyles(this._appearance,1,2);Ma.screenSizeChanged((()=>Ma.applyStyleToElement(this._appearance,a,s,"js-pull-notification-messages"))),s.classList.add("js-pull-notification-messages"),this._listeners.windowResize={type:"resize",listener:e=>{this.updateMessagesContainerPosition()}},this.setEventListenerTarget("windowResize",window),window.addEventListener(this.getEventType("windowResize"),this.getEventListener("windowResize")),this.addListener("windowScroll","scroll",(()=>{this.updateMessagesContainerPosition()}),window),window.addEventListener(this.getEventType("windowScroll"),this.getEventListener("windowScroll"));let l=document.createElement("div");return l.classList.add("js-pull-notification-messages-backdrop"),l.style.visibility="hidden",this.setEventListenerTarget("messagesBackdropElementClick",l),l.addEventListener(this.getEventType("messagesBackdropElementClick"),this.getEventListener("messagesBackdropElementClick")),this.setEventListenerTarget("messagesBackdropElementTouched",l),l.addEventListener(this.getEventType("messagesBackdropElementTouched"),this.getEventListener("messagesBackdropElementTouched")),this.setEventListenerTarget("messagesBackdropElementTouchmove",l),l.addEventListener(this.getEventType("messagesBackdropElementTouchmove"),this.getEventListener("messagesBackdropElementTouchmove")),r.appendChild(t),r.appendChild(s),n.appendChild(l),n.appendChild(r),e.shadowRoot.appendChild(n),e}render(e){this.pullMessageElements.setWidgetBodyElement(this.createWidgetBody()),document.body.appendChild(this.pullMessageElements.getWidgetBodyElement()),e=this.createCallButton(e),this.pullMessageElements.setConnector(e),this.toggleSystemMessages()}}class Pa{constructor(e,t,n,i,r,o,s){this.instanceId=o,this.activatorParams=e,this.messagesStatus=t,this.messagesService=n,this.unreadMessagesCount=i,this.messagesAppearance=r,this.widget=new wa(null!=s?s:"view"),this.widget.setRetryFn(this.retryRequests.bind(this)),this.widget.setCustomEmptyMessageElementName(this.activatorParams),this.widget.setUpdateMessagesStatusFn(this.updateMessagesStatus.bind(this)),this.widget.setRequestMessagesFn(this.requestMessages.bind(this))}async activate(){return this.widget.setTimeZone(this.activatorParams.timeZone),this.loadAppearance().then((e=>{if(e&&(e.placement.selectors||e.placement.selector)&&new Qt(e.placement,document.createElement("div"),null).getTargetElement())return this.initRender(e)})).catch((e=>{var t,n;401===(null==e||null===(t=e.error)||void 0===t?void 0:t.status)?Ce.warn("APP_INBOX_WIDGET_ACTIVATION",{instanceId:this.instanceId,date:(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Kiev"}),errorStatus:401}):e.message&&e.message.startsWith("AuthTokenHolder#requestToken")?Ce.warn("APP_INBOX_WIDGET_ACTIVATION",{instanceId:this.instanceId,date:(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Kiev"}),errorMessage:e.message}):404!==(null==e||null===(n=e.error)||void 0===n?void 0:n.status)&&Ce.warn("APP_INBOX_WIDGET_ACTIVATION",e)}))}initRender(e){var t,n;return this.widget.setAppearance(e),this.widget.render(null!==(t=null===(n=this.activatorParams)||void 0===n?void 0:n.hideLabel)&&void 0!==t&&t),this.startRequests()}loadAppearance(){return this.messagesAppearance.loadAppearance().then((e=>{if(e)return e}))}requestMessages(){this.messagesService.requestMessages().then((e=>{e?(this.widget.setMessages(e),this.widget.updateMessages()):this.widget.toggleErrorState()}))}requestUnreadMessagesCount(){return this.unreadMessagesCount.requestCount().then((e=>{e&&this.widget.updateUnreadCount(e)}))}updateMessagesStatus(){this.widget.injectedNewMessagesIds.length&&this.messagesStatus.updateMessagesStatus(this.widget.injectedNewMessagesIds).then((e=>{e?(this.widget.updateReadStatusMessagesIds=this.widget.injectedNewMessagesIds.slice(),this.widget.injectedNewMessagesIds=[]):setTimeout((()=>{this.updateMessagesStatus()}),Pa.RETRY_TIMEOUT_MS)})).catch((e=>{setTimeout((()=>{this.updateMessagesStatus()}),Pa.RETRY_TIMEOUT_MS),401===(null==e?void 0:e.status)?Ce.warn("APP_INBOX_MESSAGES_STATUS_UPDATING",{instanceId:this.instanceId,ids:this.widget.injectedNewMessagesIds,date:(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Kiev"}),errorStatus:401}):Ce.warn(e,"APP_INBOX_MESSAGES_STATUS_UPDATING")}))}startRequests(){return this.retryTimerId=setInterval((async()=>{this.requestUnreadMessagesCount()}),Pa.TIMER_INTERVAL_MS),this.requestUnreadMessagesCount()}retryRequests(){this.requestMessages()}stopRequests(){clearInterval(this.retryTimerId)}destroy(){this.stopRequests(),this.widget.destroy(),this.widget=this.instanceId=this.activatorParams=this.messagesStatus=this.messagesService=this.unreadMessagesCount=this.messagesAppearance=null}}t(Pa,"TIMER_INTERVAL_MS",6e4),t(Pa,"RETRY_TIMEOUT_MS",2e4);class Da{constructor(e){this.widget=e}previewMessage(e,t,n){this.widget.setAppearance(Ta._parseAppearance(e)),this.activatorParams={...n,timeZone:X(n.timeZone)},e=Ia.createStyleElement(this.widget.getAppearance(),!0),(n=document.createElement("div")).classList.add("js-pull-notification-messages-container"),n.style.position="relative";let i=document.createElement("div");return i.classList.add("js-pull-notification-messages"),i.appendChild(La.createMessageElement(this.widget.getAppearance(),t,this.activatorParams.timeZone,"preview")),n.appendChild(i),(t=document.createElement("div")).classList.add("js-pull-notification-messages-preview-overlay"),n.appendChild(t),(t=document.createElement("div")).attachShadow({mode:"open"}),t.shadowRoot.innerHTML=e,t.shadowRoot.appendChild(n),t}}class xa{constructor(){this.errorsInRowCount=0,this.lastErrorTime=void 0}isErrorsInRowCountCritical(){return this.errorsInRowCount>=xa.MAX_ERRORS_IN_ROW_COUNT}increaseErrorsInRowCount(){this.errorsInRowCount+=1}resetErrorsInRowCount(){this.errorsInRowCount=0}}t(xa,"MAX_ERRORS_IN_ROW_COUNT",10);class ka{constructor(e,t,n){this.authTokenHolder=e,this.errorsHolder=t,this.instanceId=n}doRequest(e,t,n,i,r,o){return this.url=n,this.method=i,this.cb=e,this.message=t,this.body=null!=r?r:null,this.contentType=null!=o?o:null,this.authTokenHolder.refreshAuthTokenIfNeeded(this._executeRequest.bind(this))}_executeRequest(e){if(this.errorsHolder.isErrorsInRowCountCritical())return Promise.resolve({status:511,body:null});let t={[va.AUTH_TOKEN_HEADER_NAME]:e};return this.contentType&&(t["Content-Type"]=this.contentType),tt.execute(this.url,this.method,this.body,t).then((e=>{if(this.errorsHolder.resetErrorsInRowCount(),200===e.status){let t=e.headers.get(va.AUTH_TOKEN_HEADER_NAME);this.authTokenHolder.setAuthToken(t)}return this.cb(e)})).catch((t=>(this.errorsHolder.increaseErrorsInRowCount(),401===(null==t?void 0:t.status)?Ce.warn(this.message,{instanceId:this.instanceId,url:this.url,token:e,date:(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Kiev"}),errorStatus:401}):Ce.error(t,this.message),{status:t.status,body:null})))}}class Va{static getAuthTokenCallback(e){return e.hasOwnProperty("getAuthToken")?e.getAuthToken:e.getAuthTokenCallback}activate(e){let t=Math.floor(1e6*Math.random());var n=new xa,i=new va(Va.getAuthTokenCallback(e)),r=new ka(i,n,t);n=new _a(r),i=new ya(r);let o=new fa(r);r=new Ta(r,e),this.pullMessagesContainer=new Pa(e,n,i,o,r,t),this.pullMessagesContainer.activate().then()}previewMessage(e,t,n){return new Da(new wa("preview")).previewMessage(e,t,n)}reactivate(e){this.pullMessagesContainer&&this.pullMessagesContainer.destroy(),this.activate(e)}}var Fa=new Va;var Ua=new class{constructor(e){this.eventsTrackingService=e}activate(){this.eventsTrackingService.trackPageView()}}(Nt);var Ba=new class{constructor(e,n){t(this,"eventListeners",{}),this.store=e,this.urlChangeService=n,this.navigationChangeSubscriptions=[]}activate(){this._isCrawlerConfigHasAddToWishlist()&&(this._addEventListeners(),this.navigationChangeSubscriptions.push(this.urlChangeService.subscribeSingle((e=>this._urlChangeListener(e)))))}unsubscribeDataCollectorListeners(){this.navigationChangeSubscriptions.forEach((e=>e.unsubscribe()))}_getContainerElement(e,t){return({selector:t}=t.containerElement),e.closest(t)}_sendData(e){e.productKey&&Nt.trackInternalEvent(ct.AddToWishlist,{[ct.AddToWishlist]:e})}_eventHandler(e){this.store.getConfig().crawler.add_to_wishlist.forEach((t=>{let{selector:n}=t.actionElement;e.composedPath().forEach((i=>{i.matches&&i.matches(n)&&(i=this._getContainerElement(e.target,t),i=(new ut)._mapGetterConfigsObject(t.values,!0,i),this._sendData(i))}))}))}_addEventListeners(){this.listener=function(e){this._eventHandler(e)},document.body.addEventListener("touchend",this.listener.bind(this)),document.body.addEventListener("click",this.listener.bind(this))}_removeEventListeners(){this.listener&&(document.body.removeEventListener("touchend",this.listener),document.body.removeEventListener("click",this.listener))}_tryCancelChangeObservable(){this._removeEventListeners()}_urlChangeListener(){this._tryCancelChangeObservable(),this.unsubscribeDataCollectorListeners()}_isCrawlerConfigHasAddToWishlist(){return!!this.store.getConfig().crawler.add_to_wishlist}}(Le,Be,Tn);class Ha{static activate(){Ha.setEsContactId(),Ha.setIid()}static setEsContactId(){let e=ye();e&&(this.set({esContactId:e}),lt.addToQueue({utmContactId:e},"[WebContactService] RecomsContactDetector. After parsing user id from url source"))}static setIid(){var e=new URL(window.location.href),t=e.searchParams.get("etm_term");e=e.searchParams.get("utm_source"),t&&e&&nt.hasBrandName(e)?(t=atob(fe(t)),t=(t=new URLSearchParams(t).get("iid"))?t:null):t=void 0,t&&(this.set({iid:t}),lt.addToQueue({iid:t},"[WebContactService] RecomsContactDetector. After parsing user iid from url source"))}static set(e){var t;let n=null!==(t=Le.getUserInfo())&&void 0!==t?t:{};Le.setUserInfo({...n,...e})}}class Ga{static activate(){if(!this.parseFromCl()){var e=ye();e?this.set(e):(e=this.parseFromWebPushLocalStorage())&&(this.set(e),lt.addToQueue({webPushSubscriptionContactId:e},"[WebContactService] FormsContactDetector. After parsing webPushContactId from local store"))}}static parseFromWebPushLocalStorage(){return Ne.get("esWebPushContactId")}static parseFromCl(){return Ne.get("clContactId")}static set(e){Ne.set("clContactId",e)}}class ja{static getInstance(){var e=function(){e.c(arguments)};return e.q=[],e.c=function(){e.q.push(arguments)},window.eS=window.eS||e,window.eS}}class Wa extends Error{}var za=new class{run(e,t,n){this.validation(e,t),this._storeAndSend(e,t,!1,n)}runWithTags(e,t,n){this.validation(e,t),this._storeAndSend(e,t,!0,n)}_transformEventTypeToPageType(e){let t=(e||"").toUpperCase().includes("NOTFOUND")?Fe.NOT_FOUND:(e||"").toUpperCase().replace("PAGE","").replace("CART","");return Object.values(Fe).find((e=>e.includes(t)))||Fe.UNKNOWN}_storeEventData(e,t,n){switch(n){case Fe.PRODUCT:return e=this._getPayloadObject(e,t).productKey,Le.setProductPageId(e),!0;case Fe.CATEGORY:var i;return(e=null===(i=this._getPayloadObject(e,t))||void 0===i?void 0:i.categoryKey)&&Le.setCategoryKey(e),!0;case Fe.STATUS_CART:if(!e)return!0;t=(i=this._getPayloadObject(e,t)).map((e=>e.productKey)).filter((e=>!!e)),n=Le.getState().tracking.statusCart;var r=at.getUserIdentifier();return r=St.createIdentifier(i,r),!!St._isIdentifierChanged(n.identifier,r)&&(Le.setStatusCartProducts(t),Le.setPurchasedItems(i),Le.setStatusCartIdentifier({GUID:e.GUID||"",identifier:Le.getState().tracking.statusCart.identifier}),!0);case Fe.ANY:return(e=this._getPayloadObject(e,t))&&e.productKey&&Le.setProductPageId(e.productKey),e&&e.categoryKey&&Le.setCategoryKey(e.categoryKey),!1;default:return!0}}_storePageType(e,t){Le.setPageType({previous:t,current:e})}_getPayloadObject(e,t){return(e=e[t])&&e.Product?e.Product:e&&e.Products?e.Products:e}_storeAndSend(e,t,i,r){if(e===ct.CustomerData&&t.CustomerData){var o=Cn.getValidCustomerData({email:t.CustomerData.user_email,phone:t.CustomerData.user_phone,externalCustomerId:t.CustomerData.externalCustomerId,esContactId:t.CustomerData.user_es_contact_id});u(o.externalCustomerId);var s={...n(Object.entries(Le.getCustomerData()).filter((e=>([,e]=e,!!e)))),...o};Le.setCustomerData(s),lt.updateFromCustomerData(o,"[WebContactService] EventsParsingService. after getting customerData from CustomerData event")}if(function(e,t){if(e!==ct.CustomerData&&t&&t.hasOwnProperty("GeneralInfo")){let e={};Object.keys(t.GeneralInfo).forEach((n=>{switch(n){case"user_email":n=t.GeneralInfo.user_email,nt.isEmail(n)&&(e.email=n);break;case"user_phone":n=t.GeneralInfo.user_phone,nt.isPhoneNumber(n)&&(e.phone=n.match(nt.phonePattern).join(""));break;case"externalCustomerId":e.externalCustomerId=t.GeneralInfo.externalCustomerId;break;case"user_es_contact_id":e.esContactId=t.GeneralInfo.user_es_contact_id}})),u(e.externalCustomerId),l({contactId:e.esContactId,email:e.email,phone:e.phone,externalCustomerId:e.externalCustomerId}),e=n(Object.entries(e).filter((e=>([,e]=e,!!e)))),0<Object.values(e).length&&(e={...n(Object.entries(Le.getCustomerData()).filter((e=>([,e]=e,!!e)))),...e},Le.setCustomerData(e),lt.updateFromCustomerData(e,"[WebContactService] EventsParsingService. after getting customerData from event payload if it is not CustomerData event and have GeneralInfo prop"))}}(e,t),this._isTrackingEnabled())this._sendEvent(e,t,i,r);else if(o=this._transformEventTypeToPageType(e)){Le.setProductPageId(null),Le.setCategoryKey(null),e!==ct.StatusCartPage&&Le.setStatusCartProducts(null),s=Le.getState().pageType.current;let n=this._storeEventData(t,e,o);this._shouldPageTypeBeUpdated(e)&&(this._storePageType(o,s),$e.updateState({currentPageType:o,prevPageType:s})),n&&this._sendEvent(e,t,i,r)}}_shouldPageTypeBeUpdated(e){return![ct.CustomerData,ct.AddToWishlist,ct.SearchRequest].includes(e)}_sendEvent(e,t,n,i){e===ct.AnyPage||e===ct.NotFound||e===ct.MainPage||e===ct.PurchasedItems&&!a({orderNumber:t.OrderNumber,products:t.PurchasedItems||[]})||(n?Nt.trackEventV2(e,t,Date.now(),i):Nt.trackEvent(e,t,Date.now(),i))}_isTrackingEnabled(){return Le.getActivatorConfig().TRACKING}validation(e,t){if(e!==ct.StatusCartPage&&e!==ct.MainPage&&e!==ct.NotFound&&e!==ct.PageView&&e!==ct.AnyPage){if(!e||"string"!=typeof e)throw new Wa("[".concat(e,']: "eventType" must be a valid string'));if(!(0<Object.keys(t||{}).length))throw new Wa("[".concat(e,']: "eventPayload" must be an object'))}}};class Ka{static paramObjectHasFormVariantIdProperty(e){return!!(e[0][1]&&e[0][1].hasOwnProperty("formVariantId")&&"string"==typeof e[0][1].formVariantId&&e[0][1].formVariantId.length)}static callbackAsSecondArgPresent(e){return!(!e[0][2]||"function"!=typeof e[0][2])}static isShowFormFromCustomCodeValid(e){return Ka.paramObjectHasFormVariantIdProperty(e)}static isOnWidgetEventsValid(e){return Ka.paramObjectHasFormVariantIdProperty(e)&&Ka.callbackAsSecondArgPresent(e)}}let Qa=new class{init(e,t){window.eS.__inited=!0;var n=Le.getConfig();n=!n||!n.hasOwnProperty("tenantIsActive")||n.tenantIsActive,e=this._mapConfig(e,n,t),Le.setActivatorConfig(e),Le.setInstanceDebugMode(!!localStorage.getItem("claspo-scripts")),(e.RECOMS||e.FORMS)&&lt.activate("[WebContactService] EsModulesInitService. after script activation. RECOMS: ".concat(e.RECOMS,", FORMS: ").concat(e.FORMS)),e.RECOMS&&(Ha.activate(),Pt.activate(),_n.activate(),yn.activate()),e.TRACKING?($e.activate(),Nt.activate(),Cn.activate(),Ba.activate()):n&&Ua.activate(),e.FORMS&&(Ga.activate(),pa.activate()),e.APP_INBOX&&Fa.activate(t),ot.activate(),Ea.execute(),window.addEventListener("beforeunload",(()=>{this.destroy()}))}_mapConfig(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length?arguments[2]:void 0,i=Le.getConfig();return{TRACKING:t&&this.isTrackingEnabled(e,i),RECOMS:t&&this.isRecomsEnabled(e,i),FORMS:this.isFormsEnabled(e,i),APP_INBOX:this.isAppInboxEnabled(e,i,n)}}isAppInboxEnabled(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e.hasOwnProperty("APP_INBOX")&&!0===this._mapModuleConfig(e.APP_INBOX)||e.hasOwnProperty("PULL_MESSAGES")&&!0===this._mapModuleConfig(e.PULL_MESSAGES)||t.hasOwnProperty("getAuthTokenCallback"))return!0}isFormsEnabled(e,t){return!1!==(!e.hasOwnProperty("FORMS")||this._mapModuleConfig(e.FORMS))&&zn.areFormsPresent()}isRecomsEnabled(e,t){return!e.hasOwnProperty("RECOMS")||this._mapModuleConfig(e.RECOMS)}isTrackingEnabled(e,t){e=!e.hasOwnProperty("TRACKING")||this._mapModuleConfig(e.TRACKING);let n=t.features&&Object.values(t).length,i=0<P(Object.values(t.crawler).map((e=>Object.values(e))),0).filter((e=>e.length)).length;return e&&i&&(!n||t.features.tracking)}_mapModuleConfig(e){return!!e}destroy(){pa.destroy()}};!function(t){async function n(){if(i=!0,(!ke.isBot()||!1!==Ve.isFreePlanWithBrandedWidgets())&&(!ke.isBot()||ke.isBotWhitelisted())){await async function(){let t=[];if(Pe(navigator.userAgent)&&t.push(e(Le.getConfig().apiConfig.chunkShimUrl||"https://scripts.claspo.io/scripts/shim.js")),De){let n=Le.getConfig().apiConfig.chunkIntersectionObserverUrl||"https://scripts.claspo.io/scripts/intersection-observer.js";t.push(e(n))}return Promise.all(t).catch((e=>{}))}();try{new Te(t).run(),window.scriptLog09u8y9("OK")}catch(e){Ce.error(e)}}}let i=!1;if("loading"===document.readyState){xe(document,"DOMContentLoaded",(()=>{i||n()}));let e=setInterval((()=>{i?clearInterval(e):"loading"!==document.readyState&&(clearInterval(e),n())}),200)}else n()}(new class{constructor(e){this.modulesInitService=e,this.hasFormsInQueue=this.formsReadyToProcessCommands=!1,ko.on("COMPONENTS_LOADED",(()=>{this.formsReadyToProcessCommands=!0,this.hasFormsInQueue&&(this.hasFormsInQueue=!1,this._processEventQueue(ja.getInstance()))}))}process(){try{let e=ja.getInstance();if(!e.q)throw Error("Queue object q of eS instance is undefined. window.eS: "+window.eS.toString());let t=e.q.find((e=>"init"===e[0][0]));e.__inited||(e.__inited=!0,t?this.modulesInitService.init(t[0][1],t[0][2]):this.modulesInitService.init(),this._processEventQueue(e))}catch(e){Ce.error(e,"Error while processing queue")}}_processEventQueue(e){this._processSendEventQueue(e),this._processSendEventWithTagsQueue(e),this._processGetRecommendationsQueue(e),this._processShowFormsQueue(e),this._processPreviewPullMessageQueue(e),this._processReInitAppInbox(e),this._processOnWidgetEventsQueue(e);let t=this;e.q.push=function(){Array.prototype.push.apply(this,arguments),t._processEventQueue(e)}}_processSendEventQueue(e){let t=e.q.filter((e=>"sendEvent"===e[0][0]));e.q=e.q.filter((e=>"sendEvent"!==e[0][0]));let n={apiMethod:!0};t.forEach((e=>{za.run(e[0][1],e[0][2],n)}))}_processSendEventWithTagsQueue(e){let t=e.q.filter((e=>"sendEventWithTags"===e[0][0]));e.q=e.q.filter((e=>"sendEventWithTags"!==e[0][0]));let n={apiMethod:!0};t.forEach((e=>{za.runWithTags(e[0][1],e[0][2],n)}))}_processGetRecommendationsQueue(e){let t=e.q.filter((e=>"getRecommendations"===e[0][0]));e.q=e.q.filter((e=>"getRecommendations"!==e[0][0])),t.forEach((e=>{let t=e[0][1],n=e[0][2];t.apiMethod=!0;let i=new jt(t);i.getRecommendations(t).then((e=>{let r=i.getErrors();!e.length&&r.length?(Ce.warn("GET_RECOMMENDATION_API",{variantId:t.variantId,productsCount:e.length,errors:r}),n(r,null)):(Ce.info("GET_RECOMMENDATION_API",{variantId:t.variantId,productsCount:e.length,errors:r}),n(null,e))})).catch((e=>{Ce.warn("GET_RECOMMENDATION_API",{variantId:t.variantId,productsCount:0,errors:[e.toString()]}),n(e,null)}))}))}_processPreviewPullMessageQueue(e){let t=e.q.filter((e=>"previewPullMessage"===e[0][0]));e.q=e.q.filter((e=>"previewPullMessage"!==e[0][0])),t.forEach((e=>{var t=e[0][1];(e=e[0][2])(null,t=Fa.previewMessage(t.appearance,t.message,t.activatorParams))}))}_processReInitAppInbox(e){let t=e.q.filter((e=>"reInitAppInbox"===e[0][0]));e.q=e.q.filter((e=>"reInitAppInbox"!==e[0][0])),t.forEach((e=>{Fa.reactivate(e[0][1])}))}_processShowFormsQueue(e){if(this.formsReadyToProcessCommands){var t=e.q.filter((e=>"showForm"===e[0][0]));e.q=e.q.filter((e=>"showForm"!==e[0][0])),t.forEach((e=>{let t=e[0][1];Ka.isShowFormFromCustomCodeValid(e)&&pa.showFormFromCustomCode(t)}))}else this.hasFormsInQueue=!0}_processOnWidgetEventsQueue(e){if(this.formsReadyToProcessCommands){var t=e.q.filter((e=>"onWidgetEvents"===e[0][0]));e.q=e.q.filter((e=>"onWidgetEvents"!==e[0][0])),t.forEach((e=>{Ka.isOnWidgetEventsValid(e)&&pa.addOnWidgetEventsHandlers(e[0][1],e[0][2])}))}else this.hasFormsInQueue=!0}}(Qa))}();
} catch (error) {
    window.scriptLog09u8y9('ERROR', 'BOOTSTRAP_ERROR', error);
}
