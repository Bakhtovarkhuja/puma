define(['jquery','mage/translate','js/helper/fetchRequest','js/wishlist/updateWishlistData','js/helper/showMessage',],function($,$t,fetchRequest,updateWishlistData,showMessage,){return function(userId){const formData=new FormData();formData.append("customer_id",userId);const bodyClasses=document.body.className;let pageType='default';if(bodyClasses.includes('catalog-product-view')){pageType='product';}else if(bodyClasses.includes('catalog-category-view')){pageType='category';}else if(bodyClasses.includes('cms-home')){pageType='homepage';}else if(bodyClasses.includes('wishlist-index-index')||bodyClasses.includes('wishlist-shared-index')){pageType='wishlist';}
formData.append("page_type",pageType);const path=window.location.pathname;const codeMatch=path.match(/\/code\/([^/]+)/);if(codeMatch&&codeMatch[1]){const codeValue=codeMatch[1];formData.append("shared_code",codeValue);}
return fetchRequest({url:'/rest/all/V1/wishlist/get/',requestOptions:{method:'POST',body:formData,},configOptions:{isShowLoading:false,}}).then(result=>{if(typeof result==='object'&&result?.list&&result?.selectedSkus&&result.hasOwnProperty('total')&&result.hasOwnProperty('count')){updateWishlistData(result);}else{showMessage([{type:'error',text:result?.error||$t('Error')},]);}
return result;}).catch((result)=>{showMessage([{type:'error',text:result?.error||$t('Error')},]);});};});