define(["Magento_Customer/js/customer-data","underscore"],function(customerData,_){"use strict";return{initialize:function(){this.cart=customerData.get("cart");if(this.cart.adobeCartProducts){this.initCartProducts(this.cart.adobeCartProducts);}
this.cart.subscribe(function(data){if(!data.adobeCartProducts){return;}
this.initCartProducts(data.adobeCartProducts);}.bind(this));},initCartProducts:function(products){window.pageData=window.pageData||{};_.extend(window.pageData,{cart:products});const updatePageDataEvent=new CustomEvent("pageData.update",{detail:{data:JSON.parse(JSON.stringify(window.pageData)),updateType:"cart.product"}});window.document.dispatchEvent(updatePageDataEvent);}};});