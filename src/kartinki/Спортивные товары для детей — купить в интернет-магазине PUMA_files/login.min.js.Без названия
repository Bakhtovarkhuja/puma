define(['jquery','Magento_Customer/js/customer-data'],function($,customerData){'use strict';$.widget('mst.socialLogin',{options:{selector:'',isPopupMode:false},_create:function(){if(this.options.isPopupMode){this.initPopupMode();}
$('a'+this.options.selector).css('visibility','visible');$('body').on('click',this.options.selector,function(e){this.updateCustomerData();}.bind(this));},initPopupMode:function(){$('body').on('click',this.options.selector,function(e){e.preventDefault();const $target=$(e.currentTarget);const href=$target.attr('href');const title=$target.attr('title');const top=(window.outerHeight-480)/ 2;const left=(window.outerWidth-640)/ 2;const features='width=640px,height=480px,top='+top+'px,left='+left+'px';window.open(href,title,features);});window.addEventListener('message',function(e){const data=e.data;if(data.name!=='socialLogin'){return;}
this.updateCustomerData();if(data.url){window.location.href=data.url;}else{window.location.reload();}}.bind(this));},updateCustomerData:function(){customerData.invalidate(['customer','cart']);customerData.reload(['customer','cart'],true);}});return $.mst.socialLogin;});