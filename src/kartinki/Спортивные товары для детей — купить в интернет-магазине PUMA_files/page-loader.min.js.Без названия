define(['jquery','mage/template','Magento_Ui/js/lib/knockout/template/loader'],function($,template,templateLoader){'use strict'
var $document=$(document),$body=$('body'),loaderTemplatePath='ui/page-loader',loaderElementClass='spinner-inline',loaderPageClass='spinner-page',loaderClass='js-page-loader',loader
templateLoader.loadTemplate(loaderTemplatePath).done(function(loaderTemplate){loader=template($.trim(loaderTemplate),{loaderClass:loaderClass})
loader=$(loader)})
function addLoading(element){var $element=element||$body,loaderClone=loader.clone(),cssClass=element?loaderElementClass:loaderPageClass
loaderClone.addClass(cssClass)
$element.append(loaderClone)}
function removeLoading(element){var $element=element||$body,loader=$element.find('.'+loaderClass)
if(loader.length){loader.remove()}}
$document.on('loading:show',function(ev,data){addLoading(data?data.element:null);})
$document.on('loading:hide',function(ev,data){removeLoading(data?data.element:null);})
return{showLoading:function(element){addLoading(element)},hideLoading:function(element){removeLoading(element)}}})