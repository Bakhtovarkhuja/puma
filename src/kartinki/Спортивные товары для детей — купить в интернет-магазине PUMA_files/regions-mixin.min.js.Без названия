define(['jquery'],function($){'use strict'
return function(widget){$.widget('mage.regions',widget,{options:{blockClass:'.regions'},_create:function(){this._cache()
if(window.webComponentsEventBus){this.events()
return}
window.addEventListener('webComponentsEventBusReady',this.events.bind(this))},events:function(){this.$document.on('regions:close',this.close.bind(this))
window.webComponentsEventBus.addEventListener('locale-selector.open',this.toggleRegions.bind(this))
$(this.options.blockClass).on('click','#regionsClose',this.toggleRegions.bind(this))
$(this.options.countries).on('click',this.options.countryName,this.toggleLocales.bind(this))},toggleRegions:function(){if(!this.$html.hasClass(this.options.classOpen)){this.open()
return}
this.close()},open:function(){if(window.$isPolituch){return;}
this.$html.addClass(this.options.classOpen);this.updateHeaderShadowDomClassStatus({classListState:'add',classListClasses:this.options.classOpen,});},close:function(){this.$html.removeClass(this.options.classOpen);this.updateHeaderShadowDomClassStatus({classListState:'remove',classListClasses:this.options.classOpen,});},updateHeaderShadowDomClassStatus(statusState){const headerEl=document.querySelector('puma-header');if(!headerEl){return;}
const headerContent=headerEl.shadowRoot.querySelector('.puma-header__content');headerContent.classList?.[statusState.classListState](statusState.classListClasses);}})
return $.mage.regions}})