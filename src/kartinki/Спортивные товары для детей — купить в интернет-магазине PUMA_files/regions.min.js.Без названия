define(['jquery','jquery-ui-modules/widget'],function($){'use strict'
$.widget('mage.regions',{options:{classOpen:'_regions-open',classActive:'_active'},_cache:function(){this.$document=$(document)
this.$html=$('html')
this.$body=$('body')},_create:function(){this._cache()
this.events()},events:function(){this.$document.on('regions:close',this.close.bind(this))
this.$body.on('tap',this.toggleRegions.bind(this))
$(this.options.countries).on('click',this.options.countryName,this.toggleLocales.bind(this))},toggleRegions:function(ev){var $elem=$(ev.target),isClose=$elem.closest(this.options.close).length,isContent=$elem.closest(this.options.content).length
if($elem.closest(this.options.link).length){ev.preventDefault()
this.open()}else if(!isContent||isClose){if(isClose){ev.preventDefault()}
this.close()}},toggleLocales:function(ev){$(this.options.countryName).not($(ev.target)).each(function(index,el){$(el).next().hide()})
$(ev.target).next().toggle()},open:function(){this.$html.addClass(this.options.classOpen)},close:function(ev){if(ev){ev.preventDefault()}
this.$html.removeClass(this.options.classOpen)}})
return $.mage.regions})