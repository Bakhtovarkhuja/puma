define(['jquery','pageLoader','js/helper/throttle','js/helper/getViewportType',"mage/translate",],function($,pageLoader,throttle,getViewportType,$t,){return function(){const sidebarBlock=document.querySelector('.sidebar.sidebar-main');if(!sidebarBlock){console.error("Can't find .sidebar.sidebar-main el for apply filters");}
sidebarBlock.addEventListener('click',e=>{const loaderLinkEl=e.target.closest('[data-loader-link]');if(loaderLinkEl){pageLoader.showLoading();}});const sidebarEl=document.querySelector(".sidebar.sidebar-main");const catalogEl=document.getElementById("catalog");createBtnEl();function createBtnEl(){const btnCloseFilterEl=document.createElement("div");btnCloseFilterEl.classList.add('filter-close-btn','btn');btnCloseFilterEl.innerText=$t('To the products');document.body.appendChild(btnCloseFilterEl);btnCloseFilterEl.addEventListener('click',()=>{window.$closeSidebarFiltersMobile();document.body.classList.remove('show_close_filter_btn');window.scrollTo({top:0,behavior:'smooth'});});}
const throttleCheckIfNeedToShowFixedFilters=throttle(()=>{if(getViewportType()==='mobile'&&window.$isOpenFilters){checkFiltersBarState();}else{document.body.classList.remove('show_close_filter_btn');}},300);function checkFiltersBarState(){const vh=window.innerHeight||document.documentElement.clientHeight;if(catalogEl?.getBoundingClientRect()?.top-vh>0){document.body.classList.add('show_close_filter_btn');}else{document.body.classList.remove('show_close_filter_btn');}}
throttleCheckIfNeedToShowFixedFilters();document.addEventListener("scroll",throttleCheckIfNeedToShowFixedFilters);};});